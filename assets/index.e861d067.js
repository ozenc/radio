var th=Object.defineProperty;var rh=(t,e,r)=>e in t?th(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var V=(t,e,r)=>(rh(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */var bt=Object.freeze({}),me=Array.isArray;function ce(t){return t==null}function Z(t){return t!=null}function Be(t){return t===!0}function nh(t){return t===!1}function Di(t){return typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="boolean"}function ke(t){return typeof t=="function"}function it(t){return t!==null&&typeof t=="object"}var Po=Object.prototype.toString;function Ct(t){return Po.call(t)==="[object Object]"}function ih(t){return Po.call(t)==="[object RegExp]"}function Pc(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function zs(t){return Z(t)&&typeof t.then=="function"&&typeof t.catch=="function"}function ah(t){return t==null?"":Array.isArray(t)||Ct(t)&&t.toString===Po?JSON.stringify(t,null,2):String(t)}function ci(t){var e=parseFloat(t);return isNaN(e)?t:e}function Xt(t,e){for(var r=Object.create(null),n=t.split(","),i=0;i<n.length;i++)r[n[i]]=!0;return e?function(a){return r[a.toLowerCase()]}:function(a){return r[a]}}Xt("slot,component",!0);var sh=Xt("key,ref,slot,slot-scope,is");function Ur(t,e){var r=t.length;if(r){if(e===t[r-1]){t.length=r-1;return}var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var oh=Object.prototype.hasOwnProperty;function ot(t,e){return oh.call(t,e)}function dn(t){var e=Object.create(null);return function(n){var i=e[n];return i||(e[n]=t(n))}}var lh=/-(\w)/g,en=dn(function(t){return t.replace(lh,function(e,r){return r?r.toUpperCase():""})}),uh=dn(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),ch=/\B([A-Z])/g,Ai=dn(function(t){return t.replace(ch,"-$1").toLowerCase()});function fh(t,e){function r(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return r._length=t.length,r}function dh(t,e){return t.bind(e)}var Ic=Function.prototype.bind?dh:fh;function Ys(t,e){e=e||0;for(var r=t.length-e,n=new Array(r);r--;)n[r]=t[r+e];return n}function Ie(t,e){for(var r in e)t[r]=e[r];return t}function Rc(t){for(var e={},r=0;r<t.length;r++)t[r]&&Ie(e,t[r]);return e}function Je(t,e,r){}var Bi=function(t,e,r){return!1},Mc=function(t){return t};function tn(t,e){if(t===e)return!0;var r=it(t),n=it(e);if(r&&n)try{var i=Array.isArray(t),a=Array.isArray(e);if(i&&a)return t.length===e.length&&t.every(function(l,w){return tn(l,e[w])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(!i&&!a){var d=Object.keys(t),D=Object.keys(e);return d.length===D.length&&d.every(function(l){return tn(t[l],e[l])})}else return!1}catch{return!1}else return!r&&!n?String(t)===String(e):!1}function kc(t,e){for(var r=0;r<t.length;r++)if(tn(t[r],e))return r;return-1}function oa(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function hh(t,e){return t===e?t===0&&1/t!==1/e:t===t||e===e}var Kl="data-server-rendered",Ua=["component","directive","filter"],Fc=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],Mt={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Bi,isReservedAttr:Bi,isUnknownElement:Bi,getTagNamespace:Je,parsePlatformTagName:Mc,mustUseProp:Bi,async:!0,_lifecycleHooks:Fc},vh=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Nc(t){var e=(t+"").charCodeAt(0);return e===36||e===95}function Ir(t,e,r,n){Object.defineProperty(t,e,{value:r,enumerable:!!n,writable:!0,configurable:!0})}var ph=new RegExp("[^".concat(vh.source,".$_\\d]"));function mh(t){if(!ph.test(t)){var e=t.split(".");return function(r){for(var n=0;n<e.length;n++){if(!r)return;r=r[e[n]]}return r}}}var gh="__proto__"in{},Pt=typeof window<"u",at=Pt&&window.navigator.userAgent.toLowerCase(),Wn=at&&/msie|trident/.test(at),Hn=at&&at.indexOf("msie 9.0")>0,Io=at&&at.indexOf("edge/")>0;at&&at.indexOf("android")>0;var yh=at&&/iphone|ipad|ipod|ios/.test(at);at&&/chrome\/\d+/.test(at);at&&/phantomjs/.test(at);var Wl=at&&at.match(/firefox\/(\d+)/),Xs={}.watch,Bc=!1;if(Pt)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){Bc=!0}}),window.addEventListener("test-passive",null,Hl)}catch{}var Ui,Oi=function(){return Ui===void 0&&(!Pt&&typeof global<"u"?Ui=global.process&&global.process.env.VUE_ENV==="server":Ui=!1),Ui},la=Pt&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function Pn(t){return typeof t=="function"&&/native code/.test(t.toString())}var wi=typeof Symbol<"u"&&Pn(Symbol)&&typeof Reflect<"u"&&Pn(Reflect.ownKeys),fi;typeof Set<"u"&&Pn(Set)?fi=Set:fi=function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(e){return this.set[e]===!0},t.prototype.add=function(e){this.set[e]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var li=null;function Mr(t){t===void 0&&(t=null),t||li&&li._scope.off(),li=t,t&&t._scope.on()}var Lt=function(){function t(e,r,n,i,a,d,D,l){this.tag=e,this.data=r,this.children=n,this.text=i,this.elm=a,this.ns=void 0,this.context=d,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=r&&r.key,this.componentOptions=D,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=l,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),Qr=function(t){t===void 0&&(t="");var e=new Lt;return e.text=t,e.isComment=!0,e};function Ln(t){return new Lt(void 0,void 0,void 0,String(t))}function Qs(t){var e=new Lt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var _h=0,Zi=[],Eh=function(){for(var t=0;t<Zi.length;t++){var e=Zi[t];e.subs=e.subs.filter(function(r){return r}),e._pending=!1}Zi.length=0},kr=function(){function t(){this._pending=!1,this.id=_h++,this.subs=[]}return t.prototype.addSub=function(e){this.subs.push(e)},t.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,Zi.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(e){for(var r=this.subs.filter(function(d){return d}),n=0,i=r.length;n<i;n++){var a=r[n];a.update()}},t}();kr.target=null;var Ji=[];function jn(t){Ji.push(t),kr.target=t}function Gn(){Ji.pop(),kr.target=Ji[Ji.length-1]}var Uc=Array.prototype,ua=Object.create(Uc),Th=["push","pop","shift","unshift","splice","sort","reverse"];Th.forEach(function(t){var e=Uc[t];Ir(ua,t,function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e.apply(this,n),d=this.__ob__,D;switch(t){case"push":case"unshift":D=n;break;case"splice":D=n.slice(2);break}return D&&d.observeArray(D),d.dep.notify(),a})});var jl=Object.getOwnPropertyNames(ua),$c={},Ro=!0;function Fr(t){Ro=t}var Sh={notify:Je,depend:Je,addSub:Je,removeSub:Je},Gl=function(){function t(e,r,n){if(r===void 0&&(r=!1),n===void 0&&(n=!1),this.value=e,this.shallow=r,this.mock=n,this.dep=n?Sh:new kr,this.vmCount=0,Ir(e,"__ob__",this),me(e)){if(!n)if(gh)e.__proto__=ua;else for(var i=0,a=jl.length;i<a;i++){var d=jl[i];Ir(e,d,ua[d])}r||this.observeArray(e)}else for(var D=Object.keys(e),i=0;i<D.length;i++){var d=D[i];rn(e,d,$c,void 0,r,n)}}return t.prototype.observeArray=function(e){for(var r=0,n=e.length;r<n;r++)vr(e[r],!1,this.mock)},t}();function vr(t,e,r){if(t&&ot(t,"__ob__")&&t.__ob__ instanceof Gl)return t.__ob__;if(Ro&&(r||!Oi())&&(me(t)||Ct(t))&&Object.isExtensible(t)&&!t.__v_skip&&!nr(t)&&!(t instanceof Lt))return new Gl(t,e,r)}function rn(t,e,r,n,i,a){var d=new kr,D=Object.getOwnPropertyDescriptor(t,e);if(!(D&&D.configurable===!1)){var l=D&&D.get,w=D&&D.set;(!l||w)&&(r===$c||arguments.length===2)&&(r=t[e]);var b=!i&&vr(r,!1,a);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var O=l?l.call(t):r;return kr.target&&(d.depend(),b&&(b.dep.depend(),me(O)&&Wc(O))),nr(O)&&!i?O.value:O},set:function(O){var $=l?l.call(t):r;if(!!hh($,O)){if(w)w.call(t,O);else{if(l)return;if(!i&&nr($)&&!nr(O)){$.value=O;return}else r=O}b=!i&&vr(O,!1,a),d.notify()}}}),d}}function Mo(t,e,r){if(!ko(t)){var n=t.__ob__;return me(t)&&Pc(e)?(t.length=Math.max(t.length,e),t.splice(e,1,r),n&&!n.shallow&&n.mock&&vr(r,!1,!0),r):e in t&&!(e in Object.prototype)?(t[e]=r,r):t._isVue||n&&n.vmCount?r:n?(rn(n.value,e,r,void 0,n.shallow,n.mock),n.dep.notify(),r):(t[e]=r,r)}}function Kc(t,e){if(me(t)&&Pc(e)){t.splice(e,1);return}var r=t.__ob__;t._isVue||r&&r.vmCount||ko(t)||!ot(t,e)||(delete t[e],r&&r.dep.notify())}function Wc(t){for(var e=void 0,r=0,n=t.length;r<n;r++)e=t[r],e&&e.__ob__&&e.__ob__.dep.depend(),me(e)&&Wc(e)}function Hc(t){return xh(t,!0),Ir(t,"__v_isShallow",!0),t}function xh(t,e){ko(t)||vr(t,e,Oi())}function ko(t){return!!(t&&t.__v_isReadonly)}function nr(t){return!!(t&&t.__v_isRef===!0)}function Zs(t,e,r){Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:function(){var n=e[r];if(nr(n))return n.value;var i=n&&n.__ob__;return i&&i.dep.depend(),n},set:function(n){var i=e[r];nr(i)&&!nr(n)?i.value=n:e[r]=n}})}var St,bh=function(){function t(e){e===void 0&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=St,!e&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}return t.prototype.run=function(e){if(this.active){var r=St;try{return St=this,e()}finally{St=r}}},t.prototype.on=function(){St=this},t.prototype.off=function(){St=this.parent},t.prototype.stop=function(e){if(this.active){var r=void 0,n=void 0;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].teardown();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},t}();function Ch(t,e){e===void 0&&(e=St),e&&e.active&&e.effects.push(t)}function Lh(t){var e=t._provided,r=t.$parent&&t.$parent._provided;return r===e?t._provided=Object.create(r):e}var Vl=dn(function(t){var e=t.charAt(0)==="&";t=e?t.slice(1):t;var r=t.charAt(0)==="~";t=r?t.slice(1):t;var n=t.charAt(0)==="!";return t=n?t.slice(1):t,{name:t,once:r,capture:n,passive:e}});function Js(t,e){function r(){var n=r.fns;if(me(n))for(var i=n.slice(),a=0;a<i.length;a++)Nr(i[a],null,arguments,e,"v-on handler");else return Nr(n,null,arguments,e,"v-on handler")}return r.fns=t,r}function jc(t,e,r,n,i,a){var d,D,l,w;for(d in t)D=t[d],l=e[d],w=Vl(d),ce(D)||(ce(l)?(ce(D.fns)&&(D=t[d]=Js(D,a)),Be(w.once)&&(D=t[d]=i(w.name,D,w.capture)),r(w.name,D,w.capture,w.passive,w.params)):D!==l&&(l.fns=D,t[d]=l));for(d in e)ce(t[d])&&(w=Vl(d),n(w.name,e[d],w.capture))}function Or(t,e,r){t instanceof Lt&&(t=t.data.hook||(t.data.hook={}));var n,i=t[e];function a(){r.apply(this,arguments),Ur(n.fns,a)}ce(i)?n=Js([a]):Z(i.fns)&&Be(i.merged)?(n=i,n.fns.push(a)):n=Js([i,a]),n.merged=!0,t[e]=n}function Dh(t,e,r){var n=e.options.props;if(!ce(n)){var i={},a=t.attrs,d=t.props;if(Z(a)||Z(d))for(var D in n){var l=Ai(D);zl(i,d,D,l,!0)||zl(i,a,D,l,!1)}return i}}function zl(t,e,r,n,i){if(Z(e)){if(ot(e,r))return t[r]=e[r],i||delete e[r],!0;if(ot(e,n))return t[r]=e[n],i||delete e[n],!0}return!1}function Ah(t){for(var e=0;e<t.length;e++)if(me(t[e]))return Array.prototype.concat.apply([],t);return t}function Fo(t){return Di(t)?[Ln(t)]:me(t)?Gc(t):void 0}function qn(t){return Z(t)&&Z(t.text)&&nh(t.isComment)}function Gc(t,e){var r=[],n,i,a,d;for(n=0;n<t.length;n++)i=t[n],!(ce(i)||typeof i=="boolean")&&(a=r.length-1,d=r[a],me(i)?i.length>0&&(i=Gc(i,"".concat(e||"","_").concat(n)),qn(i[0])&&qn(d)&&(r[a]=Ln(d.text+i[0].text),i.shift()),r.push.apply(r,i)):Di(i)?qn(d)?r[a]=Ln(d.text+i):i!==""&&r.push(Ln(i)):qn(i)&&qn(d)?r[a]=Ln(d.text+i.text):(Be(t._isVList)&&Z(i.tag)&&ce(i.key)&&Z(e)&&(i.key="__vlist".concat(e,"_").concat(n,"__")),r.push(i)));return r}function Oh(t,e){var r=null,n,i,a,d;if(me(t)||typeof t=="string")for(r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=e(t[n],n);else if(typeof t=="number")for(r=new Array(t),n=0;n<t;n++)r[n]=e(n+1,n);else if(it(t))if(wi&&t[Symbol.iterator]){r=[];for(var D=t[Symbol.iterator](),l=D.next();!l.done;)r.push(e(l.value,r.length)),l=D.next()}else for(a=Object.keys(t),r=new Array(a.length),n=0,i=a.length;n<i;n++)d=a[n],r[n]=e(t[d],d,n);return Z(r)||(r=[]),r._isVList=!0,r}function wh(t,e,r,n){var i=this.$scopedSlots[t],a;i?(r=r||{},n&&(r=Ie(Ie({},n),r)),a=i(r)||(ke(e)?e():e)):a=this.$slots[t]||(ke(e)?e():e);var d=r&&r.slot;return d?this.$createElement("template",{slot:d},a):a}function Ph(t){return pa(this.$options,"filters",t)||Mc}function Yl(t,e){return me(t)?t.indexOf(e)===-1:t!==e}function Ih(t,e,r,n,i){var a=Mt.keyCodes[e]||r;return i&&n&&!Mt.keyCodes[e]?Yl(i,n):a?Yl(a,t):n?Ai(n)!==e:t===void 0}function Rh(t,e,r,n,i){if(r&&it(r)){me(r)&&(r=Rc(r));var a=void 0,d=function(l){if(l==="class"||l==="style"||sh(l))a=t;else{var w=t.attrs&&t.attrs.type;a=n||Mt.mustUseProp(e,w,l)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var b=en(l),B=Ai(l);if(!(b in a)&&!(B in a)&&(a[l]=r[l],i)){var O=t.on||(t.on={});O["update:".concat(l)]=function($){r[l]=$}}};for(var D in r)d(D)}return t}function Mh(t,e){var r=this._staticTrees||(this._staticTrees=[]),n=r[t];return n&&!e||(n=r[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),Vc(n,"__static__".concat(t),!1)),n}function kh(t,e,r){return Vc(t,"__once__".concat(e).concat(r?"_".concat(r):""),!0),t}function Vc(t,e,r){if(me(t))for(var n=0;n<t.length;n++)t[n]&&typeof t[n]!="string"&&Xl(t[n],"".concat(e,"_").concat(n),r);else Xl(t,e,r)}function Xl(t,e,r){t.isStatic=!0,t.key=e,t.isOnce=r}function Fh(t,e){if(e&&Ct(e)){var r=t.on=t.on?Ie({},t.on):{};for(var n in e){var i=r[n],a=e[n];r[n]=i?[].concat(i,a):a}}return t}function zc(t,e,r,n){e=e||{$stable:!r};for(var i=0;i<t.length;i++){var a=t[i];me(a)?zc(a,e,r):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return n&&(e.$key=n),e}function Nh(t,e){for(var r=0;r<e.length;r+=2){var n=e[r];typeof n=="string"&&n&&(t[e[r]]=e[r+1])}return t}function Bh(t,e){return typeof t=="string"?e+t:t}function Yc(t){t._o=kh,t._n=ci,t._s=ah,t._l=Oh,t._t=wh,t._q=tn,t._i=kc,t._m=Mh,t._f=Ph,t._k=Ih,t._b=Rh,t._v=Ln,t._e=Qr,t._u=zc,t._g=Fh,t._d=Nh,t._p=Bh}function No(t,e){if(!t||!t.length)return{};for(var r={},n=0,i=t.length;n<i;n++){var a=t[n],d=a.data;if(d&&d.attrs&&d.attrs.slot&&delete d.attrs.slot,(a.context===e||a.fnContext===e)&&d&&d.slot!=null){var D=d.slot,l=r[D]||(r[D]=[]);a.tag==="template"?l.push.apply(l,a.children||[]):l.push(a)}else(r.default||(r.default=[])).push(a)}for(var w in r)r[w].every(Uh)&&delete r[w];return r}function Uh(t){return t.isComment&&!t.asyncFactory||t.text===" "}function di(t){return t.isComment&&t.asyncFactory}function ui(t,e,r,n){var i,a=Object.keys(r).length>0,d=e?!!e.$stable:!a,D=e&&e.$key;if(!e)i={};else{if(e._normalized)return e._normalized;if(d&&n&&n!==bt&&D===n.$key&&!a&&!n.$hasNormal)return n;i={};for(var l in e)e[l]&&l[0]!=="$"&&(i[l]=$h(t,r,l,e[l]))}for(var w in r)w in i||(i[w]=Kh(r,w));return e&&Object.isExtensible(e)&&(e._normalized=i),Ir(i,"$stable",d),Ir(i,"$key",D),Ir(i,"$hasNormal",a),i}function $h(t,e,r,n){var i=function(){var a=li;Mr(t);var d=arguments.length?n.apply(null,arguments):n({});d=d&&typeof d=="object"&&!me(d)?[d]:Fo(d);var D=d&&d[0];return Mr(a),d&&(!D||d.length===1&&D.isComment&&!di(D))?void 0:d};return n.proxy&&Object.defineProperty(e,r,{get:i,enumerable:!0,configurable:!0}),i}function Kh(t,e){return function(){return t[e]}}function Wh(t){var e=t.$options,r=e.setup;if(r){var n=t._setupContext=Hh(t);Mr(t),jn();var i=Nr(r,null,[t._props||Hc({}),n],t,"setup");if(Gn(),Mr(),ke(i))e.render=i;else if(it(i))if(t._setupState=i,i.__sfc){var d=t._setupProxy={};for(var a in i)a!=="__sfc"&&Zs(d,i,a)}else for(var a in i)Nc(a)||Zs(t,i,a)}}function Hh(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};Ir(e,"_v_attr_proxy",!0),ca(e,t.$attrs,bt,t,"$attrs")}return t._attrsProxy},get listeners(){if(!t._listenersProxy){var e=t._listenersProxy={};ca(e,t.$listeners,bt,t,"$listeners")}return t._listenersProxy},get slots(){return Gh(t)},emit:Ic(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach(function(r){return Zs(t,e,r)})}}}function ca(t,e,r,n,i){var a=!1;for(var d in e)d in t?e[d]!==r[d]&&(a=!0):(a=!0,jh(t,d,n,i));for(var d in t)d in e||(a=!0,delete t[d]);return a}function jh(t,e,r,n){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return r[n][e]}})}function Gh(t){return t._slotsProxy||Xc(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}function Xc(t,e){for(var r in e)t[r]=e[r];for(var r in t)r in e||delete t[r]}function Vh(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,n=r&&r.context;t.$slots=No(e._renderChildren,n),t.$scopedSlots=r?ui(t.$parent,r.data.scopedSlots,t.$slots):bt,t._c=function(a,d,D,l){return fa(t,a,d,D,l,!1)},t.$createElement=function(a,d,D,l){return fa(t,a,d,D,l,!0)};var i=r&&r.data;rn(t,"$attrs",i&&i.attrs||bt,null,!0),rn(t,"$listeners",e._parentListeners||bt,null,!0)}var qs=null;function zh(t){Yc(t.prototype),t.prototype.$nextTick=function(e){return Bo(e,this)},t.prototype._render=function(){var e=this,r=e.$options,n=r.render,i=r._parentVnode;i&&e._isMounted&&(e.$scopedSlots=ui(e.$parent,i.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&Xc(e._slotsProxy,e.$scopedSlots)),e.$vnode=i;var a;try{Mr(e),qs=e,a=n.call(e._renderProxy,e.$createElement)}catch(d){nn(d,e,"render"),a=e._vnode}finally{qs=null,Mr()}return me(a)&&a.length===1&&(a=a[0]),a instanceof Lt||(a=Qr()),a.parent=i,a}}function ps(t,e){return(t.__esModule||wi&&t[Symbol.toStringTag]==="Module")&&(t=t.default),it(t)?e.extend(t):t}function Yh(t,e,r,n,i){var a=Qr();return a.asyncFactory=t,a.asyncMeta={data:e,context:r,children:n,tag:i},a}function Xh(t,e){if(Be(t.error)&&Z(t.errorComp))return t.errorComp;if(Z(t.resolved))return t.resolved;var r=qs;if(r&&Z(t.owners)&&t.owners.indexOf(r)===-1&&t.owners.push(r),Be(t.loading)&&Z(t.loadingComp))return t.loadingComp;if(r&&!Z(t.owners)){var n=t.owners=[r],i=!0,a=null,d=null;r.$on("hook:destroyed",function(){return Ur(n,r)});var D=function(B){for(var O=0,$=n.length;O<$;O++)n[O].$forceUpdate();B&&(n.length=0,a!==null&&(clearTimeout(a),a=null),d!==null&&(clearTimeout(d),d=null))},l=oa(function(B){t.resolved=ps(B,e),i?n.length=0:D(!0)}),w=oa(function(B){Z(t.errorComp)&&(t.error=!0,D(!0))}),b=t(l,w);return it(b)&&(zs(b)?ce(t.resolved)&&b.then(l,w):zs(b.component)&&(b.component.then(l,w),Z(b.error)&&(t.errorComp=ps(b.error,e)),Z(b.loading)&&(t.loadingComp=ps(b.loading,e),b.delay===0?t.loading=!0:a=setTimeout(function(){a=null,ce(t.resolved)&&ce(t.error)&&(t.loading=!0,D(!1))},b.delay||200)),Z(b.timeout)&&(d=setTimeout(function(){d=null,ce(t.resolved)&&w(null)},b.timeout)))),i=!1,t.loading?t.loadingComp:t.resolved}}function Qc(t){if(me(t))for(var e=0;e<t.length;e++){var r=t[e];if(Z(r)&&(Z(r.componentOptions)||di(r)))return r}}var Qh=1,Zc=2;function fa(t,e,r,n,i,a){return(me(r)||Di(r))&&(i=n,n=r,r=void 0),Be(a)&&(i=Zc),Zh(t,e,r,n,i)}function Zh(t,e,r,n,i){if(Z(r)&&Z(r.__ob__)||(Z(r)&&Z(r.is)&&(e=r.is),!e))return Qr();me(n)&&ke(n[0])&&(r=r||{},r.scopedSlots={default:n[0]},n.length=0),i===Zc?n=Fo(n):i===Qh&&(n=Ah(n));var a,d;if(typeof e=="string"){var D=void 0;d=t.$vnode&&t.$vnode.ns||Mt.getTagNamespace(e),Mt.isReservedTag(e)?a=new Lt(Mt.parsePlatformTagName(e),r,n,void 0,void 0,t):(!r||!r.pre)&&Z(D=pa(t.$options,"components",e))?a=nu(D,r,t,n,e):a=new Lt(e,r,n,void 0,void 0,t)}else a=nu(e,r,t,n);return me(a)?a:Z(a)?(Z(d)&&Jc(a,d),Z(r)&&Jh(r),a):Qr()}function Jc(t,e,r){if(t.ns=e,t.tag==="foreignObject"&&(e=void 0,r=!0),Z(t.children))for(var n=0,i=t.children.length;n<i;n++){var a=t.children[n];Z(a.tag)&&(ce(a.ns)||Be(r)&&a.tag!=="svg")&&Jc(a,e,r)}}function Jh(t){it(t.style)&&da(t.style),it(t.class)&&da(t.class)}function nn(t,e,r){jn();try{if(e)for(var n=e;n=n.$parent;){var i=n.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{var d=i[a].call(n,t,e,r)===!1;if(d)return}catch(D){Ql(D,n,"errorCaptured hook")}}Ql(t,e,r)}finally{Gn()}}function Nr(t,e,r,n,i){var a;try{a=r?t.apply(e,r):t.call(e),a&&!a._isVue&&zs(a)&&!a._handled&&(a.catch(function(d){return nn(d,n,i+" (Promise/async)")}),a._handled=!0)}catch(d){nn(d,n,i)}return a}function Ql(t,e,r){if(Mt.errorHandler)try{return Mt.errorHandler.call(null,t,e,r)}catch(n){n!==t&&Zl(n)}Zl(t)}function Zl(t,e,r){if(Pt&&typeof console<"u")console.error(t);else throw t}var eo=!1,to=[],ro=!1;function $i(){ro=!1;var t=to.slice(0);to.length=0;for(var e=0;e<t.length;e++)t[e]()}var ai;if(typeof Promise<"u"&&Pn(Promise)){var qh=Promise.resolve();ai=function(){qh.then($i),yh&&setTimeout(Je)},eo=!0}else if(!Wn&&typeof MutationObserver<"u"&&(Pn(MutationObserver)||MutationObserver.toString()==="[object MutationObserverConstructor]")){var Ki=1,ev=new MutationObserver($i),Jl=document.createTextNode(String(Ki));ev.observe(Jl,{characterData:!0}),ai=function(){Ki=(Ki+1)%2,Jl.data=String(Ki)},eo=!0}else typeof setImmediate<"u"&&Pn(setImmediate)?ai=function(){setImmediate($i)}:ai=function(){setTimeout($i,0)};function Bo(t,e){var r;if(to.push(function(){if(t)try{t.call(e)}catch(n){nn(n,e,"nextTick")}else r&&r(e)}),ro||(ro=!0,ai()),!t&&typeof Promise<"u")return new Promise(function(n){r=n})}var tv="2.7.14",ql=new fi;function da(t){return qi(t,ql),ql.clear(),t}function qi(t,e){var r,n,i=me(t);if(!(!i&&!it(t)||t.__v_skip||Object.isFrozen(t)||t instanceof Lt)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(i)for(r=t.length;r--;)qi(t[r],e);else if(nr(t))qi(t.value,e);else for(n=Object.keys(t),r=n.length;r--;)qi(t[n[r]],e)}}var rv=0,Uo=function(){function t(e,r,n,i,a){Ch(this,St&&!St._vm?St:e?e._scope:void 0),(this.vm=e)&&a&&(e._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++rv,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new fi,this.newDepIds=new fi,this.expression="",ke(r)?this.getter=r:(this.getter=mh(r),this.getter||(this.getter=Je)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){jn(this);var e,r=this.vm;try{e=this.getter.call(r,r)}catch(n){if(this.user)nn(n,r,'getter for watcher "'.concat(this.expression,'"'));else throw n}finally{this.deep&&da(e),Gn(),this.cleanupDeps()}return e},t.prototype.addDep=function(e){var r=e.id;this.newDepIds.has(r)||(this.newDepIds.add(r),this.newDeps.push(e),this.depIds.has(r)||e.addSub(this))},t.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var r=this.deps[e];this.newDepIds.has(r.id)||r.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():yv(this)},t.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||it(e)||this.deep){var r=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Nr(this.cb,this.vm,[e,r],this.vm,n)}else this.cb.call(this.vm,e,r)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&Ur(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function nv(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&qc(t,e)}var hi;function iv(t,e){hi.$on(t,e)}function av(t,e){hi.$off(t,e)}function sv(t,e){var r=hi;return function n(){var i=e.apply(null,arguments);i!==null&&r.$off(t,n)}}function qc(t,e,r){hi=t,jc(e,r||{},iv,av,sv,t),hi=void 0}function ov(t){var e=/^hook:/;t.prototype.$on=function(r,n){var i=this;if(me(r))for(var a=0,d=r.length;a<d;a++)i.$on(r[a],n);else(i._events[r]||(i._events[r]=[])).push(n),e.test(r)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(r,n){var i=this;function a(){i.$off(r,a),n.apply(i,arguments)}return a.fn=n,i.$on(r,a),i},t.prototype.$off=function(r,n){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(me(r)){for(var a=0,d=r.length;a<d;a++)i.$off(r[a],n);return i}var D=i._events[r];if(!D)return i;if(!n)return i._events[r]=null,i;for(var l,w=D.length;w--;)if(l=D[w],l===n||l.fn===n){D.splice(w,1);break}return i},t.prototype.$emit=function(r){var n=this,i=n._events[r];if(i){i=i.length>1?Ys(i):i;for(var a=Ys(arguments,1),d='event handler for "'.concat(r,'"'),D=0,l=i.length;D<l;D++)Nr(i[D],n,a,n,d)}return n}}var Zr=null;function ef(t){var e=Zr;return Zr=t,function(){Zr=e}}function lv(t){var e=t.$options,r=e.parent;if(r&&!e.abstract){for(;r.$options.abstract&&r.$parent;)r=r.$parent;r.$children.push(t)}t.$parent=r,t.$root=r?r.$root:t,t.$children=[],t.$refs={},t._provided=r?r._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function uv(t){t.prototype._update=function(e,r){var n=this,i=n.$el,a=n._vnode,d=ef(n);n._vnode=e,a?n.$el=n.__patch__(a,e):n.$el=n.__patch__(n.$el,e,r,!1),d(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n);for(var D=n;D&&D.$vnode&&D.$parent&&D.$vnode===D.$parent._vnode;)D.$parent.$el=D.$el,D=D.$parent},t.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},t.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){jt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var r=e.$parent;r&&!r._isBeingDestroyed&&!e.$options.abstract&&Ur(r.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),jt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function cv(t,e,r){t.$el=e,t.$options.render||(t.$options.render=Qr),jt(t,"beforeMount");var n;n=function(){t._update(t._render(),r)};var i={before:function(){t._isMounted&&!t._isDestroyed&&jt(t,"beforeUpdate")}};new Uo(t,n,Je,i,!0),r=!1;var a=t._preWatchers;if(a)for(var d=0;d<a.length;d++)a[d].run();return t.$vnode==null&&(t._isMounted=!0,jt(t,"mounted")),t}function fv(t,e,r,n,i){var a=n.data.scopedSlots,d=t.$scopedSlots,D=!!(a&&!a.$stable||d!==bt&&!d.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),l=!!(i||t.$options._renderChildren||D),w=t.$vnode;t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n),t.$options._renderChildren=i;var b=n.data.attrs||bt;t._attrsProxy&&ca(t._attrsProxy,b,w.data&&w.data.attrs||bt,t,"$attrs")&&(l=!0),t.$attrs=b,r=r||bt;var B=t.$options._parentListeners;if(t._listenersProxy&&ca(t._listenersProxy,r,B||bt,t,"$listeners"),t.$listeners=t.$options._parentListeners=r,qc(t,r,B),e&&t.$options.props){Fr(!1);for(var O=t._props,$=t.$options._propKeys||[],F=0;F<$.length;F++){var k=$[F],M=t.$options.props;O[k]=Go(k,M,e,t)}Fr(!0),t.$options.propsData=e}l&&(t.$slots=No(i,n.context),t.$forceUpdate())}function tf(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function $o(t,e){if(e){if(t._directInactive=!1,tf(t))return}else if(t._directInactive)return;if(t._inactive||t._inactive===null){t._inactive=!1;for(var r=0;r<t.$children.length;r++)$o(t.$children[r]);jt(t,"activated")}}function rf(t,e){if(!(e&&(t._directInactive=!0,tf(t)))&&!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)rf(t.$children[r]);jt(t,"deactivated")}}function jt(t,e,r,n){n===void 0&&(n=!0),jn();var i=li;n&&Mr(t);var a=t.$options[e],d="".concat(e," hook");if(a)for(var D=0,l=a.length;D<l;D++)Nr(a[D],t,r||null,t,d);t._hasHookEvent&&t.$emit("hook:"+e),n&&Mr(i),Gn()}var cr=[],Ko=[],ha={},no=!1,Wo=!1,Dn=0;function dv(){Dn=cr.length=Ko.length=0,ha={},no=Wo=!1}var nf=0,io=Date.now;if(Pt&&!Wn){var ms=window.performance;ms&&typeof ms.now=="function"&&io()>document.createEvent("Event").timeStamp&&(io=function(){return ms.now()})}var hv=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function vv(){nf=io(),Wo=!0;var t,e;for(cr.sort(hv),Dn=0;Dn<cr.length;Dn++)t=cr[Dn],t.before&&t.before(),e=t.id,ha[e]=null,t.run();var r=Ko.slice(),n=cr.slice();dv(),gv(r),pv(n),Eh(),la&&Mt.devtools&&la.emit("flush")}function pv(t){for(var e=t.length;e--;){var r=t[e],n=r.vm;n&&n._watcher===r&&n._isMounted&&!n._isDestroyed&&jt(n,"updated")}}function mv(t){t._inactive=!1,Ko.push(t)}function gv(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,$o(t[e],!0)}function yv(t){var e=t.id;if(ha[e]==null&&!(t===kr.target&&t.noRecurse)){if(ha[e]=!0,!Wo)cr.push(t);else{for(var r=cr.length-1;r>Dn&&cr[r].id>t.id;)r--;cr.splice(r+1,0,t)}no||(no=!0,Bo(vv))}}function _v(t){var e=t.$options.provide;if(e){var r=ke(e)?e.call(t):e;if(!it(r))return;for(var n=Lh(t),i=wi?Reflect.ownKeys(r):Object.keys(r),a=0;a<i.length;a++){var d=i[a];Object.defineProperty(n,d,Object.getOwnPropertyDescriptor(r,d))}}}function Ev(t){var e=af(t.$options.inject,t);e&&(Fr(!1),Object.keys(e).forEach(function(r){rn(t,r,e[r])}),Fr(!0))}function af(t,e){if(t){for(var r=Object.create(null),n=wi?Reflect.ownKeys(t):Object.keys(t),i=0;i<n.length;i++){var a=n[i];if(a!=="__ob__"){var d=t[a].from;if(d in e._provided)r[a]=e._provided[d];else if("default"in t[a]){var D=t[a].default;r[a]=ke(D)?D.call(e):D}}}return r}}function Ho(t,e,r,n,i){var a=this,d=i.options,D;ot(n,"_uid")?(D=Object.create(n),D._original=n):(D=n,n=n._original);var l=Be(d._compiled),w=!l;this.data=t,this.props=e,this.children=r,this.parent=n,this.listeners=t.on||bt,this.injections=af(d.inject,n),this.slots=function(){return a.$slots||ui(n,t.scopedSlots,a.$slots=No(r,n)),a.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ui(n,t.scopedSlots,this.slots())}}),l&&(this.$options=d,this.$slots=this.slots(),this.$scopedSlots=ui(n,t.scopedSlots,this.$slots)),d._scopeId?this._c=function(b,B,O,$){var F=fa(D,b,B,O,$,w);return F&&!me(F)&&(F.fnScopeId=d._scopeId,F.fnContext=n),F}:this._c=function(b,B,O,$){return fa(D,b,B,O,$,w)}}Yc(Ho.prototype);function Tv(t,e,r,n,i){var a=t.options,d={},D=a.props;if(Z(D))for(var l in D)d[l]=Go(l,D,e||bt);else Z(r.attrs)&&tu(d,r.attrs),Z(r.props)&&tu(d,r.props);var w=new Ho(r,d,i,n,t),b=a.render.call(null,w._c,w);if(b instanceof Lt)return eu(b,r,w.parent,a);if(me(b)){for(var B=Fo(b)||[],O=new Array(B.length),$=0;$<B.length;$++)O[$]=eu(B[$],r,w.parent,a);return O}}function eu(t,e,r,n,i){var a=Qs(t);return a.fnContext=r,a.fnOptions=n,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function tu(t,e){for(var r in e)t[en(r)]=e[r]}function va(t){return t.name||t.__name||t._componentTag}var jo={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var r=t;jo.prepatch(r,r)}else{var n=t.componentInstance=Sv(t,Zr);n.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var r=e.componentOptions,n=e.componentInstance=t.componentInstance;fv(n,r.propsData,r.listeners,e,r.children)},insert:function(t){var e=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,jt(r,"mounted")),t.data.keepAlive&&(e._isMounted?mv(r):$o(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?rf(e,!0):e.$destroy())}},ru=Object.keys(jo);function nu(t,e,r,n,i){if(!ce(t)){var a=r.$options._base;if(it(t)&&(t=a.extend(t)),typeof t=="function"){var d;if(ce(t.cid)&&(d=t,t=Xh(d,a),t===void 0))return Yh(d,e,r,n,i);e=e||{},zo(t),Z(e.model)&&Cv(t.options,e);var D=Dh(e,t);if(Be(t.options.functional))return Tv(t,D,e,r,n);var l=e.on;if(e.on=e.nativeOn,Be(t.options.abstract)){var w=e.slot;e={},w&&(e.slot=w)}xv(e);var b=va(t.options)||i,B=new Lt("vue-component-".concat(t.cid).concat(b?"-".concat(b):""),e,void 0,void 0,void 0,r,{Ctor:t,propsData:D,listeners:l,tag:i,children:n},d);return B}}}function Sv(t,e){var r={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return Z(n)&&(r.render=n.render,r.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(r)}function xv(t){for(var e=t.hook||(t.hook={}),r=0;r<ru.length;r++){var n=ru[r],i=e[n],a=jo[n];i!==a&&!(i&&i._merged)&&(e[n]=i?bv(a,i):a)}}function bv(t,e){var r=function(n,i){t(n,i),e(n,i)};return r._merged=!0,r}function Cv(t,e){var r=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[r]=e.model.value;var i=e.on||(e.on={}),a=i[n],d=e.model.callback;Z(a)?(me(a)?a.indexOf(d)===-1:a!==d)&&(i[n]=[d].concat(a)):i[n]=d}var Lv=Je,rr=Mt.optionMergeStrategies;function vi(t,e,r){if(r===void 0&&(r=!0),!e)return t;for(var n,i,a,d=wi?Reflect.ownKeys(e):Object.keys(e),D=0;D<d.length;D++)n=d[D],n!=="__ob__"&&(i=t[n],a=e[n],!r||!ot(t,n)?Mo(t,n,a):i!==a&&Ct(i)&&Ct(a)&&vi(i,a));return t}function iu(t,e,r){return r?function(){var i=ke(e)?e.call(r,r):e,a=ke(t)?t.call(r,r):t;return i?vi(i,a):a}:e?t?function(){return vi(ke(e)?e.call(this,this):e,ke(t)?t.call(this,this):t)}:e:t}rr.data=function(t,e,r){return r?iu(t,e,r):e&&typeof e!="function"?t:iu(t,e)};function Dv(t,e){var r=e?t?t.concat(e):me(e)?e:[e]:t;return r&&Av(r)}function Av(t){for(var e=[],r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r]);return e}Fc.forEach(function(t){rr[t]=Dv});function Ov(t,e,r,n){var i=Object.create(t||null);return e?Ie(i,e):i}Ua.forEach(function(t){rr[t+"s"]=Ov});rr.watch=function(t,e,r,n){if(t===Xs&&(t=void 0),e===Xs&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};Ie(i,t);for(var a in e){var d=i[a],D=e[a];d&&!me(d)&&(d=[d]),i[a]=d?d.concat(D):me(D)?D:[D]}return i};rr.props=rr.methods=rr.inject=rr.computed=function(t,e,r,n){if(!t)return e;var i=Object.create(null);return Ie(i,t),e&&Ie(i,e),i};rr.provide=function(t,e){return t?function(){var r=Object.create(null);return vi(r,ke(t)?t.call(this):t),e&&vi(r,ke(e)?e.call(this):e,!1),r}:e};var wv=function(t,e){return e===void 0?t:e};function Pv(t,e){var r=t.props;if(!!r){var n={},i,a,d;if(me(r))for(i=r.length;i--;)a=r[i],typeof a=="string"&&(d=en(a),n[d]={type:null});else if(Ct(r))for(var D in r)a=r[D],d=en(D),n[d]=Ct(a)?a:{type:a};t.props=n}}function Iv(t,e){var r=t.inject;if(!!r){var n=t.inject={};if(me(r))for(var i=0;i<r.length;i++)n[r[i]]={from:r[i]};else if(Ct(r))for(var a in r){var d=r[a];n[a]=Ct(d)?Ie({from:a},d):{from:d}}}}function Rv(t){var e=t.directives;if(e)for(var r in e){var n=e[r];ke(n)&&(e[r]={bind:n,update:n})}}function an(t,e,r){if(ke(e)&&(e=e.options),Pv(e),Iv(e),Rv(e),!e._base&&(e.extends&&(t=an(t,e.extends,r)),e.mixins))for(var n=0,i=e.mixins.length;n<i;n++)t=an(t,e.mixins[n],r);var a={},d;for(d in t)D(d);for(d in e)ot(t,d)||D(d);function D(l){var w=rr[l]||wv;a[l]=w(t[l],e[l],r,l)}return a}function pa(t,e,r,n){if(typeof r=="string"){var i=t[e];if(ot(i,r))return i[r];var a=en(r);if(ot(i,a))return i[a];var d=uh(a);if(ot(i,d))return i[d];var D=i[r]||i[a]||i[d];return D}}function Go(t,e,r,n){var i=e[t],a=!ot(r,t),d=r[t],D=su(Boolean,i.type);if(D>-1){if(a&&!ot(i,"default"))d=!1;else if(d===""||d===Ai(t)){var l=su(String,i.type);(l<0||D<l)&&(d=!0)}}if(d===void 0){d=Mv(n,i,t);var w=Ro;Fr(!0),vr(d),Fr(w)}return d}function Mv(t,e,r){if(!!ot(e,"default")){var n=e.default;return t&&t.$options.propsData&&t.$options.propsData[r]===void 0&&t._props[r]!==void 0?t._props[r]:ke(n)&&ao(e.type)!=="Function"?n.call(t):n}}var kv=/^\s*function (\w+)/;function ao(t){var e=t&&t.toString().match(kv);return e?e[1]:""}function au(t,e){return ao(t)===ao(e)}function su(t,e){if(!me(e))return au(e,t)?0:-1;for(var r=0,n=e.length;r<n;r++)if(au(e[r],t))return r;return-1}var Ar={enumerable:!0,configurable:!0,get:Je,set:Je};function Vo(t,e,r){Ar.get=function(){return this[e][r]},Ar.set=function(i){this[e][r]=i},Object.defineProperty(t,r,Ar)}function Fv(t){var e=t.$options;if(e.props&&Nv(t,e.props),Wh(t),e.methods&&Wv(t,e.methods),e.data)Bv(t);else{var r=vr(t._data={});r&&r.vmCount++}e.computed&&Kv(t,e.computed),e.watch&&e.watch!==Xs&&Hv(t,e.watch)}function Nv(t,e){var r=t.$options.propsData||{},n=t._props=Hc({}),i=t.$options._propKeys=[],a=!t.$parent;a||Fr(!1);var d=function(l){i.push(l);var w=Go(l,e,r,t);rn(n,l,w),l in t||Vo(t,"_props",l)};for(var D in e)d(D);Fr(!0)}function Bv(t){var e=t.$options.data;e=t._data=ke(e)?Uv(e,t):e||{},Ct(e)||(e={});var r=Object.keys(e),n=t.$options.props;t.$options.methods;for(var i=r.length;i--;){var a=r[i];n&&ot(n,a)||Nc(a)||Vo(t,"_data",a)}var d=vr(e);d&&d.vmCount++}function Uv(t,e){jn();try{return t.call(e,e)}catch(r){return nn(r,e,"data()"),{}}finally{Gn()}}var $v={lazy:!0};function Kv(t,e){var r=t._computedWatchers=Object.create(null),n=Oi();for(var i in e){var a=e[i],d=ke(a)?a:a.get;n||(r[i]=new Uo(t,d||Je,Je,$v)),i in t||sf(t,i,a)}}function sf(t,e,r){var n=!Oi();ke(r)?(Ar.get=n?ou(e):lu(r),Ar.set=Je):(Ar.get=r.get?n&&r.cache!==!1?ou(e):lu(r.get):Je,Ar.set=r.set||Je),Object.defineProperty(t,e,Ar)}function ou(t){return function(){var r=this._computedWatchers&&this._computedWatchers[t];if(r)return r.dirty&&r.evaluate(),kr.target&&r.depend(),r.value}}function lu(t){return function(){return t.call(this,this)}}function Wv(t,e){t.$options.props;for(var r in e)t[r]=typeof e[r]!="function"?Je:Ic(e[r],t)}function Hv(t,e){for(var r in e){var n=e[r];if(me(n))for(var i=0;i<n.length;i++)so(t,r,n[i]);else so(t,r,n)}}function so(t,e,r,n){return Ct(r)&&(n=r,r=r.handler),typeof r=="string"&&(r=t[r]),t.$watch(e,r,n)}function jv(t){var e={};e.get=function(){return this._data};var r={};r.get=function(){return this._props},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",r),t.prototype.$set=Mo,t.prototype.$delete=Kc,t.prototype.$watch=function(n,i,a){var d=this;if(Ct(i))return so(d,n,i,a);a=a||{},a.user=!0;var D=new Uo(d,n,i,a);if(a.immediate){var l='callback for immediate watcher "'.concat(D.expression,'"');jn(),Nr(i,d,[D.value],d,l),Gn()}return function(){D.teardown()}}}var Gv=0;function Vv(t){t.prototype._init=function(e){var r=this;r._uid=Gv++,r._isVue=!0,r.__v_skip=!0,r._scope=new bh(!0),r._scope._vm=!0,e&&e._isComponent?zv(r,e):r.$options=an(zo(r.constructor),e||{},r),r._renderProxy=r,r._self=r,lv(r),nv(r),Vh(r),jt(r,"beforeCreate",void 0,!1),Ev(r),Fv(r),_v(r),jt(r,"created"),r.$options.el&&r.$mount(r.$options.el)}}function zv(t,e){var r=t.$options=Object.create(t.constructor.options),n=e._parentVnode;r.parent=e.parent,r._parentVnode=n;var i=n.componentOptions;r.propsData=i.propsData,r._parentListeners=i.listeners,r._renderChildren=i.children,r._componentTag=i.tag,e.render&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns)}function zo(t){var e=t.options;if(t.super){var r=zo(t.super),n=t.superOptions;if(r!==n){t.superOptions=r;var i=Yv(t);i&&Ie(t.extendOptions,i),e=t.options=an(r,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Yv(t){var e,r=t.options,n=t.sealedOptions;for(var i in r)r[i]!==n[i]&&(e||(e={}),e[i]=r[i]);return e}function ae(t){this._init(t)}Vv(ae);jv(ae);ov(ae);uv(ae);zh(ae);function Xv(t){t.use=function(e){var r=this._installedPlugins||(this._installedPlugins=[]);if(r.indexOf(e)>-1)return this;var n=Ys(arguments,1);return n.unshift(this),ke(e.install)?e.install.apply(e,n):ke(e)&&e.apply(null,n),r.push(e),this}}function Qv(t){t.mixin=function(e){return this.options=an(this.options,e),this}}function Zv(t){t.cid=0;var e=1;t.extend=function(r){r=r||{};var n=this,i=n.cid,a=r._Ctor||(r._Ctor={});if(a[i])return a[i];var d=va(r)||va(n.options),D=function(w){this._init(w)};return D.prototype=Object.create(n.prototype),D.prototype.constructor=D,D.cid=e++,D.options=an(n.options,r),D.super=n,D.options.props&&Jv(D),D.options.computed&&qv(D),D.extend=n.extend,D.mixin=n.mixin,D.use=n.use,Ua.forEach(function(l){D[l]=n[l]}),d&&(D.options.components[d]=D),D.superOptions=n.options,D.extendOptions=r,D.sealedOptions=Ie({},D.options),a[i]=D,D}}function Jv(t){var e=t.options.props;for(var r in e)Vo(t.prototype,"_props",r)}function qv(t){var e=t.options.computed;for(var r in e)sf(t.prototype,r,e[r])}function ep(t){Ua.forEach(function(e){t[e]=function(r,n){return n?(e==="component"&&Ct(n)&&(n.name=n.name||r,n=this.options._base.extend(n)),e==="directive"&&ke(n)&&(n={bind:n,update:n}),this.options[e+"s"][r]=n,n):this.options[e+"s"][r]}})}function uu(t){return t&&(va(t.Ctor.options)||t.tag)}function Wi(t,e){return me(t)?t.indexOf(e)>-1:typeof t=="string"?t.split(",").indexOf(e)>-1:ih(t)?t.test(e):!1}function cu(t,e){var r=t.cache,n=t.keys,i=t._vnode;for(var a in r){var d=r[a];if(d){var D=d.name;D&&!e(D)&&oo(r,a,n,i)}}}function oo(t,e,r,n){var i=t[e];i&&(!n||i.tag!==n.tag)&&i.componentInstance.$destroy(),t[e]=null,Ur(r,e)}var fu=[String,RegExp,Array],tp={name:"keep-alive",abstract:!0,props:{include:fu,exclude:fu,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,r=t.keys,n=t.vnodeToCache,i=t.keyToCache;if(n){var a=n.tag,d=n.componentInstance,D=n.componentOptions;e[i]={name:uu(D),tag:a,componentInstance:d},r.push(i),this.max&&r.length>parseInt(this.max)&&oo(e,r[0],r,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)oo(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",function(e){cu(t,function(r){return Wi(e,r)})}),this.$watch("exclude",function(e){cu(t,function(r){return!Wi(e,r)})})},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=Qc(t),r=e&&e.componentOptions;if(r){var n=uu(r),i=this,a=i.include,d=i.exclude;if(a&&(!n||!Wi(a,n))||d&&n&&Wi(d,n))return e;var D=this,l=D.cache,w=D.keys,b=e.key==null?r.Ctor.cid+(r.tag?"::".concat(r.tag):""):e.key;l[b]?(e.componentInstance=l[b].componentInstance,Ur(w,b),w.push(b)):(this.vnodeToCache=e,this.keyToCache=b),e.data.keepAlive=!0}return e||t&&t[0]}},rp={KeepAlive:tp};function np(t){var e={};e.get=function(){return Mt},Object.defineProperty(t,"config",e),t.util={warn:Lv,extend:Ie,mergeOptions:an,defineReactive:rn},t.set=Mo,t.delete=Kc,t.nextTick=Bo,t.observable=function(r){return vr(r),r},t.options=Object.create(null),Ua.forEach(function(r){t.options[r+"s"]=Object.create(null)}),t.options._base=t,Ie(t.options.components,rp),Xv(t),Qv(t),Zv(t),ep(t)}np(ae);Object.defineProperty(ae.prototype,"$isServer",{get:Oi});Object.defineProperty(ae.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}});Object.defineProperty(ae,"FunctionalRenderContext",{value:Ho});ae.version=tv;var ip=Xt("style,class"),ap=Xt("input,textarea,option,select,progress"),sp=function(t,e,r){return r==="value"&&ap(t)&&e!=="button"||r==="selected"&&t==="option"||r==="checked"&&t==="input"||r==="muted"&&t==="video"},of=Xt("contenteditable,draggable,spellcheck"),op=Xt("events,caret,typing,plaintext-only"),lp=function(t,e){return ma(e)||e==="false"?"false":t==="contenteditable"&&op(e)?e:"true"},up=Xt("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),lo="http://www.w3.org/1999/xlink",Yo=function(t){return t.charAt(5)===":"&&t.slice(0,5)==="xlink"},lf=function(t){return Yo(t)?t.slice(6,t.length):""},ma=function(t){return t==null||t===!1};function cp(t){for(var e=t.data,r=t,n=t;Z(n.componentInstance);)n=n.componentInstance._vnode,n&&n.data&&(e=du(n.data,e));for(;Z(r=r.parent);)r&&r.data&&(e=du(e,r.data));return fp(e.staticClass,e.class)}function du(t,e){return{staticClass:Xo(t.staticClass,e.staticClass),class:Z(t.class)?[t.class,e.class]:e.class}}function fp(t,e){return Z(t)||Z(e)?Xo(t,Qo(e)):""}function Xo(t,e){return t?e?t+" "+e:t:e||""}function Qo(t){return Array.isArray(t)?dp(t):it(t)?hp(t):typeof t=="string"?t:""}function dp(t){for(var e="",r,n=0,i=t.length;n<i;n++)Z(r=Qo(t[n]))&&r!==""&&(e&&(e+=" "),e+=r);return e}function hp(t){var e="";for(var r in t)t[r]&&(e&&(e+=" "),e+=r);return e}var vp={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},pp=Xt("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Zo=Xt("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),uf=function(t){return pp(t)||Zo(t)};function mp(t){if(Zo(t))return"svg";if(t==="math")return"math"}var Hi=Object.create(null);function gp(t){if(!Pt)return!0;if(uf(t))return!1;if(t=t.toLowerCase(),Hi[t]!=null)return Hi[t];var e=document.createElement(t);return t.indexOf("-")>-1?Hi[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Hi[t]=/HTMLUnknownElement/.test(e.toString())}var uo=Xt("text,number,password,search,email,tel,url");function yp(t){if(typeof t=="string"){var e=document.querySelector(t);return e||document.createElement("div")}else return t}function _p(t,e){var r=document.createElement(t);return t!=="select"||e.data&&e.data.attrs&&e.data.attrs.multiple!==void 0&&r.setAttribute("multiple","multiple"),r}function Ep(t,e){return document.createElementNS(vp[t],e)}function Tp(t){return document.createTextNode(t)}function Sp(t){return document.createComment(t)}function xp(t,e,r){t.insertBefore(e,r)}function bp(t,e){t.removeChild(e)}function Cp(t,e){t.appendChild(e)}function Lp(t){return t.parentNode}function Dp(t){return t.nextSibling}function Ap(t){return t.tagName}function Op(t,e){t.textContent=e}function wp(t,e){t.setAttribute(e,"")}var Pp=Object.freeze({__proto__:null,createElement:_p,createElementNS:Ep,createTextNode:Tp,createComment:Sp,insertBefore:xp,removeChild:bp,appendChild:Cp,parentNode:Lp,nextSibling:Dp,tagName:Ap,setTextContent:Op,setStyleScope:wp}),Ip={create:function(t,e){An(e)},update:function(t,e){t.data.ref!==e.data.ref&&(An(t,!0),An(e))},destroy:function(t){An(t,!0)}};function An(t,e){var r=t.data.ref;if(!!Z(r)){var n=t.context,i=t.componentInstance||t.elm,a=e?null:i,d=e?void 0:i;if(ke(r)){Nr(r,n,[a],n,"template ref function");return}var D=t.data.refInFor,l=typeof r=="string"||typeof r=="number",w=nr(r),b=n.$refs;if(l||w){if(D){var B=l?b[r]:r.value;e?me(B)&&Ur(B,i):me(B)?B.includes(i)||B.push(i):l?(b[r]=[i],hu(n,r,b[r])):r.value=[i]}else if(l){if(e&&b[r]!==i)return;b[r]=d,hu(n,r,a)}else if(w){if(e&&r.value!==i)return;r.value=a}}}}function hu(t,e,r){var n=t._setupState;n&&ot(n,e)&&(nr(n[e])?n[e].value=r:n[e]=r)}var wr=new Lt("",{},[]),ei=["create","activate","update","remove","destroy"];function Gr(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&Z(t.data)===Z(e.data)&&Rp(t,e)||Be(t.isAsyncPlaceholder)&&ce(e.asyncFactory.error))}function Rp(t,e){if(t.tag!=="input")return!0;var r,n=Z(r=t.data)&&Z(r=r.attrs)&&r.type,i=Z(r=e.data)&&Z(r=r.attrs)&&r.type;return n===i||uo(n)&&uo(i)}function Mp(t,e,r){var n,i,a={};for(n=e;n<=r;++n)i=t[n].key,Z(i)&&(a[i]=n);return a}function kp(t){var e,r,n={},i=t.modules,a=t.nodeOps;for(e=0;e<ei.length;++e)for(n[ei[e]]=[],r=0;r<i.length;++r)Z(i[r][ei[e]])&&n[ei[e]].push(i[r][ei[e]]);function d(o){return new Lt(a.tagName(o).toLowerCase(),{},[],void 0,o)}function D(o,c){function S(){--S.listeners===0&&l(o)}return S.listeners=c,S}function l(o){var c=a.parentNode(o);Z(c)&&a.removeChild(c,o)}function w(o,c,S,f,h,u,g){if(Z(o.elm)&&Z(u)&&(o=u[g]=Qs(o)),o.isRootInsert=!h,!b(o,c,S,f)){var s=o.data,E=o.children,A=o.tag;Z(A)?(o.elm=o.ns?a.createElementNS(o.ns,A):a.createElement(A,o),I(o),F(o,E,c),Z(s)&&M(o,c),$(S,o.elm,f)):Be(o.isComment)?(o.elm=a.createComment(o.text),$(S,o.elm,f)):(o.elm=a.createTextNode(o.text),$(S,o.elm,f))}}function b(o,c,S,f){var h=o.data;if(Z(h)){var u=Z(o.componentInstance)&&h.keepAlive;if(Z(h=h.hook)&&Z(h=h.init)&&h(o,!1),Z(o.componentInstance))return B(o,c),$(S,o.elm,f),Be(u)&&O(o,c,S,f),!0}}function B(o,c){Z(o.data.pendingInsert)&&(c.push.apply(c,o.data.pendingInsert),o.data.pendingInsert=null),o.elm=o.componentInstance.$el,k(o)?(M(o,c),I(o)):(An(o),c.push(o))}function O(o,c,S,f){for(var h,u=o;u.componentInstance;)if(u=u.componentInstance._vnode,Z(h=u.data)&&Z(h=h.transition)){for(h=0;h<n.activate.length;++h)n.activate[h](wr,u);c.push(u);break}$(S,o.elm,f)}function $(o,c,S){Z(o)&&(Z(S)?a.parentNode(S)===o&&a.insertBefore(o,c,S):a.appendChild(o,c))}function F(o,c,S){if(me(c))for(var f=0;f<c.length;++f)w(c[f],S,o.elm,null,!0,c,f);else Di(o.text)&&a.appendChild(o.elm,a.createTextNode(String(o.text)))}function k(o){for(;o.componentInstance;)o=o.componentInstance._vnode;return Z(o.tag)}function M(o,c){for(var S=0;S<n.create.length;++S)n.create[S](wr,o);e=o.data.hook,Z(e)&&(Z(e.create)&&e.create(wr,o),Z(e.insert)&&c.push(o))}function I(o){var c;if(Z(c=o.fnScopeId))a.setStyleScope(o.elm,c);else for(var S=o;S;)Z(c=S.context)&&Z(c=c.$options._scopeId)&&a.setStyleScope(o.elm,c),S=S.parent;Z(c=Zr)&&c!==o.context&&c!==o.fnContext&&Z(c=c.$options._scopeId)&&a.setStyleScope(o.elm,c)}function P(o,c,S,f,h,u){for(;f<=h;++f)w(S[f],u,o,c,!1,S,f)}function T(o){var c,S,f=o.data;if(Z(f))for(Z(c=f.hook)&&Z(c=c.destroy)&&c(o),c=0;c<n.destroy.length;++c)n.destroy[c](o);if(Z(c=o.children))for(S=0;S<o.children.length;++S)T(o.children[S])}function R(o,c,S){for(;c<=S;++c){var f=o[c];Z(f)&&(Z(f.tag)?(L(f),T(f)):l(f.elm))}}function L(o,c){if(Z(c)||Z(o.data)){var S,f=n.remove.length+1;for(Z(c)?c.listeners+=f:c=D(o.elm,f),Z(S=o.componentInstance)&&Z(S=S._vnode)&&Z(S.data)&&L(S,c),S=0;S<n.remove.length;++S)n.remove[S](o,c);Z(S=o.data.hook)&&Z(S=S.remove)?S(o,c):c()}else l(o.elm)}function _(o,c,S,f,h){for(var u=0,g=0,s=c.length-1,E=c[0],A=c[s],v=S.length-1,N=S[0],U=S[v],K,W,H,j,G=!h;u<=s&&g<=v;)ce(E)?E=c[++u]:ce(A)?A=c[--s]:Gr(E,N)?(m(E,N,f,S,g),E=c[++u],N=S[++g]):Gr(A,U)?(m(A,U,f,S,v),A=c[--s],U=S[--v]):Gr(E,U)?(m(E,U,f,S,v),G&&a.insertBefore(o,E.elm,a.nextSibling(A.elm)),E=c[++u],U=S[--v]):Gr(A,N)?(m(A,N,f,S,g),G&&a.insertBefore(o,A.elm,E.elm),A=c[--s],N=S[++g]):(ce(K)&&(K=Mp(c,u,s)),W=Z(N.key)?K[N.key]:y(N,c,u,s),ce(W)?w(N,f,o,E.elm,!1,S,g):(H=c[W],Gr(H,N)?(m(H,N,f,S,g),c[W]=void 0,G&&a.insertBefore(o,H.elm,E.elm)):w(N,f,o,E.elm,!1,S,g)),N=S[++g]);u>s?(j=ce(S[v+1])?null:S[v+1].elm,P(o,j,S,g,v,f)):g>v&&R(c,u,s)}function y(o,c,S,f){for(var h=S;h<f;h++){var u=c[h];if(Z(u)&&Gr(o,u))return h}}function m(o,c,S,f,h,u){if(o!==c){Z(c.elm)&&Z(f)&&(c=f[h]=Qs(c));var g=c.elm=o.elm;if(Be(o.isAsyncPlaceholder)){Z(c.asyncFactory.resolved)?x(o.elm,c,S):c.isAsyncPlaceholder=!0;return}if(Be(c.isStatic)&&Be(o.isStatic)&&c.key===o.key&&(Be(c.isCloned)||Be(c.isOnce))){c.componentInstance=o.componentInstance;return}var s,E=c.data;Z(E)&&Z(s=E.hook)&&Z(s=s.prepatch)&&s(o,c);var A=o.children,v=c.children;if(Z(E)&&k(c)){for(s=0;s<n.update.length;++s)n.update[s](o,c);Z(s=E.hook)&&Z(s=s.update)&&s(o,c)}ce(c.text)?Z(A)&&Z(v)?A!==v&&_(g,A,v,S,u):Z(v)?(Z(o.text)&&a.setTextContent(g,""),P(g,null,v,0,v.length-1,S)):Z(A)?R(A,0,A.length-1):Z(o.text)&&a.setTextContent(g,""):o.text!==c.text&&a.setTextContent(g,c.text),Z(E)&&Z(s=E.hook)&&Z(s=s.postpatch)&&s(o,c)}}function p(o,c,S){if(Be(S)&&Z(o.parent))o.parent.data.pendingInsert=c;else for(var f=0;f<c.length;++f)c[f].data.hook.insert(c[f])}var C=Xt("attrs,class,staticClass,staticStyle,key");function x(o,c,S,f){var h,u=c.tag,g=c.data,s=c.children;if(f=f||g&&g.pre,c.elm=o,Be(c.isComment)&&Z(c.asyncFactory))return c.isAsyncPlaceholder=!0,!0;if(Z(g)&&(Z(h=g.hook)&&Z(h=h.init)&&h(c,!0),Z(h=c.componentInstance)))return B(c,S),!0;if(Z(u)){if(Z(s))if(!o.hasChildNodes())F(c,s,S);else if(Z(h=g)&&Z(h=h.domProps)&&Z(h=h.innerHTML)){if(h!==o.innerHTML)return!1}else{for(var E=!0,A=o.firstChild,v=0;v<s.length;v++){if(!A||!x(A,s[v],S,f)){E=!1;break}A=A.nextSibling}if(!E||A)return!1}if(Z(g)){var N=!1;for(var U in g)if(!C(U)){N=!0,M(c,S);break}!N&&g.class&&da(g.class)}}else o.data!==c.text&&(o.data=c.text);return!0}return function(c,S,f,h){if(ce(S)){Z(c)&&T(c);return}var u=!1,g=[];if(ce(c))u=!0,w(S,g);else{var s=Z(c.nodeType);if(!s&&Gr(c,S))m(c,S,g,null,null,h);else{if(s){if(c.nodeType===1&&c.hasAttribute(Kl)&&(c.removeAttribute(Kl),f=!0),Be(f)&&x(c,S,g))return p(S,g,!0),c;c=d(c)}var E=c.elm,A=a.parentNode(E);if(w(S,g,E._leaveCb?null:A,a.nextSibling(E)),Z(S.parent))for(var v=S.parent,N=k(S);v;){for(var U=0;U<n.destroy.length;++U)n.destroy[U](v);if(v.elm=S.elm,N){for(var K=0;K<n.create.length;++K)n.create[K](wr,v);var W=v.data.hook.insert;if(W.merged)for(var H=1;H<W.fns.length;H++)W.fns[H]()}else An(v);v=v.parent}Z(A)?R([c],0,0):Z(c.tag)&&T(c)}}return p(S,g,u),S.elm}}var Fp={create:gs,update:gs,destroy:function(e){gs(e,wr)}};function gs(t,e){(t.data.directives||e.data.directives)&&Np(t,e)}function Np(t,e){var r=t===wr,n=e===wr,i=vu(t.data.directives,t.context),a=vu(e.data.directives,e.context),d=[],D=[],l,w,b;for(l in a)w=i[l],b=a[l],w?(b.oldValue=w.value,b.oldArg=w.arg,ti(b,"update",e,t),b.def&&b.def.componentUpdated&&D.push(b)):(ti(b,"bind",e,t),b.def&&b.def.inserted&&d.push(b));if(d.length){var B=function(){for(var O=0;O<d.length;O++)ti(d[O],"inserted",e,t)};r?Or(e,"insert",B):B()}if(D.length&&Or(e,"postpatch",function(){for(var O=0;O<D.length;O++)ti(D[O],"componentUpdated",e,t)}),!r)for(l in i)a[l]||ti(i[l],"unbind",t,t,n)}var Bp=Object.create(null);function vu(t,e){var r=Object.create(null);if(!t)return r;var n,i;for(n=0;n<t.length;n++){if(i=t[n],i.modifiers||(i.modifiers=Bp),r[Up(i)]=i,e._setupState&&e._setupState.__sfc){var a=i.def||pa(e,"_setupState","v-"+i.name);typeof a=="function"?i.def={bind:a,update:a}:i.def=a}i.def=i.def||pa(e.$options,"directives",i.name)}return r}function Up(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function ti(t,e,r,n,i){var a=t.def&&t.def[e];if(a)try{a(r.elm,t,r,n,i)}catch(d){nn(d,r.context,"directive ".concat(t.name," ").concat(e," hook"))}}var $p=[Ip,Fp];function pu(t,e){var r=e.componentOptions;if(!(Z(r)&&r.Ctor.options.inheritAttrs===!1)&&!(ce(t.data.attrs)&&ce(e.data.attrs))){var n,i,a,d=e.elm,D=t.data.attrs||{},l=e.data.attrs||{};(Z(l.__ob__)||Be(l._v_attr_proxy))&&(l=e.data.attrs=Ie({},l));for(n in l)i=l[n],a=D[n],a!==i&&mu(d,n,i,e.data.pre);(Wn||Io)&&l.value!==D.value&&mu(d,"value",l.value);for(n in D)ce(l[n])&&(Yo(n)?d.removeAttributeNS(lo,lf(n)):of(n)||d.removeAttribute(n))}}function mu(t,e,r,n){n||t.tagName.indexOf("-")>-1?gu(t,e,r):up(e)?ma(r)?t.removeAttribute(e):(r=e==="allowfullscreen"&&t.tagName==="EMBED"?"true":e,t.setAttribute(e,r)):of(e)?t.setAttribute(e,lp(e,r)):Yo(e)?ma(r)?t.removeAttributeNS(lo,lf(e)):t.setAttributeNS(lo,e,r):gu(t,e,r)}function gu(t,e,r){if(ma(r))t.removeAttribute(e);else{if(Wn&&!Hn&&t.tagName==="TEXTAREA"&&e==="placeholder"&&r!==""&&!t.__ieph){var n=function(i){i.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,r)}}var Kp={create:pu,update:pu};function yu(t,e){var r=e.elm,n=e.data,i=t.data;if(!(ce(n.staticClass)&&ce(n.class)&&(ce(i)||ce(i.staticClass)&&ce(i.class)))){var a=cp(e),d=r._transitionClasses;Z(d)&&(a=Xo(a,Qo(d))),a!==r._prevClass&&(r.setAttribute("class",a),r._prevClass=a)}}var Wp={create:yu,update:yu},ys="__r",_s="__c";function Hp(t){if(Z(t[ys])){var e=Wn?"change":"input";t[e]=[].concat(t[ys],t[e]||[]),delete t[ys]}Z(t[_s])&&(t.change=[].concat(t[_s],t.change||[]),delete t[_s])}var pi;function jp(t,e,r){var n=pi;return function i(){var a=e.apply(null,arguments);a!==null&&cf(t,i,r,n)}}var Gp=eo&&!(Wl&&Number(Wl[1])<=53);function Vp(t,e,r,n){if(Gp){var i=nf,a=e;e=a._wrapper=function(d){if(d.target===d.currentTarget||d.timeStamp>=i||d.timeStamp<=0||d.target.ownerDocument!==document)return a.apply(this,arguments)}}pi.addEventListener(t,e,Bc?{capture:r,passive:n}:r)}function cf(t,e,r,n){(n||pi).removeEventListener(t,e._wrapper||e,r)}function Es(t,e){if(!(ce(t.data.on)&&ce(e.data.on))){var r=e.data.on||{},n=t.data.on||{};pi=e.elm||t.elm,Hp(r),jc(r,n,Vp,cf,jp,e.context),pi=void 0}}var zp={create:Es,update:Es,destroy:function(t){return Es(t,wr)}},ji;function _u(t,e){if(!(ce(t.data.domProps)&&ce(e.data.domProps))){var r,n,i=e.elm,a=t.data.domProps||{},d=e.data.domProps||{};(Z(d.__ob__)||Be(d._v_attr_proxy))&&(d=e.data.domProps=Ie({},d));for(r in a)r in d||(i[r]="");for(r in d){if(n=d[r],r==="textContent"||r==="innerHTML"){if(e.children&&(e.children.length=0),n===a[r])continue;i.childNodes.length===1&&i.removeChild(i.childNodes[0])}if(r==="value"&&i.tagName!=="PROGRESS"){i._value=n;var D=ce(n)?"":String(n);Yp(i,D)&&(i.value=D)}else if(r==="innerHTML"&&Zo(i.tagName)&&ce(i.innerHTML)){ji=ji||document.createElement("div"),ji.innerHTML="<svg>".concat(n,"</svg>");for(var l=ji.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}else if(n!==a[r])try{i[r]=n}catch{}}}}function Yp(t,e){return!t.composing&&(t.tagName==="OPTION"||Xp(t,e)||Qp(t,e))}function Xp(t,e){var r=!0;try{r=document.activeElement!==t}catch{}return r&&t.value!==e}function Qp(t,e){var r=t.value,n=t._vModifiers;if(Z(n)){if(n.number)return ci(r)!==ci(e);if(n.trim)return r.trim()!==e.trim()}return r!==e}var Zp={create:_u,update:_u},Jp=dn(function(t){var e={},r=/;(?![^(]*\))/g,n=/:(.+)/;return t.split(r).forEach(function(i){if(i){var a=i.split(n);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e});function Ts(t){var e=ff(t.style);return t.staticStyle?Ie(t.staticStyle,e):e}function ff(t){return Array.isArray(t)?Rc(t):typeof t=="string"?Jp(t):t}function qp(t,e){var r={},n;if(e)for(var i=t;i.componentInstance;)i=i.componentInstance._vnode,i&&i.data&&(n=Ts(i.data))&&Ie(r,n);(n=Ts(t.data))&&Ie(r,n);for(var a=t;a=a.parent;)a.data&&(n=Ts(a.data))&&Ie(r,n);return r}var em=/^--/,Eu=/\s*!important$/,Tu=function(t,e,r){if(em.test(e))t.style.setProperty(e,r);else if(Eu.test(r))t.style.setProperty(Ai(e),r.replace(Eu,""),"important");else{var n=tm(e);if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++)t.style[n]=r[i];else t.style[n]=r}},Su=["Webkit","Moz","ms"],Gi,tm=dn(function(t){if(Gi=Gi||document.createElement("div").style,t=en(t),t!=="filter"&&t in Gi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<Su.length;r++){var n=Su[r]+e;if(n in Gi)return n}});function xu(t,e){var r=e.data,n=t.data;if(!(ce(r.staticStyle)&&ce(r.style)&&ce(n.staticStyle)&&ce(n.style))){var i,a,d=e.elm,D=n.staticStyle,l=n.normalizedStyle||n.style||{},w=D||l,b=ff(e.data.style)||{};e.data.normalizedStyle=Z(b.__ob__)?Ie({},b):b;var B=qp(e,!0);for(a in w)ce(B[a])&&Tu(d,a,"");for(a in B)i=B[a],i!==w[a]&&Tu(d,a,i==null?"":i)}}var rm={create:xu,update:xu},df=/\s+/;function hf(t,e){if(!(!e||!(e=e.trim())))if(t.classList)e.indexOf(" ")>-1?e.split(df).forEach(function(n){return t.classList.add(n)}):t.classList.add(e);else{var r=" ".concat(t.getAttribute("class")||""," ");r.indexOf(" "+e+" ")<0&&t.setAttribute("class",(r+e).trim())}}function vf(t,e){if(!(!e||!(e=e.trim())))if(t.classList)e.indexOf(" ")>-1?e.split(df).forEach(function(i){return t.classList.remove(i)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var r=" ".concat(t.getAttribute("class")||""," "),n=" "+e+" ";r.indexOf(n)>=0;)r=r.replace(n," ");r=r.trim(),r?t.setAttribute("class",r):t.removeAttribute("class")}}function pf(t){if(!!t){if(typeof t=="object"){var e={};return t.css!==!1&&Ie(e,bu(t.name||"v")),Ie(e,t),e}else if(typeof t=="string")return bu(t)}}var bu=dn(function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}}),mf=Pt&&!Hn,Cn="transition",Ss="animation",ea="transition",ga="transitionend",co="animation",gf="animationend";mf&&(window.ontransitionend===void 0&&window.onwebkittransitionend!==void 0&&(ea="WebkitTransition",ga="webkitTransitionEnd"),window.onanimationend===void 0&&window.onwebkitanimationend!==void 0&&(co="WebkitAnimation",gf="webkitAnimationEnd"));var Cu=Pt?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function yf(t){Cu(function(){Cu(t)})}function Jr(t,e){var r=t._transitionClasses||(t._transitionClasses=[]);r.indexOf(e)<0&&(r.push(e),hf(t,e))}function fr(t,e){t._transitionClasses&&Ur(t._transitionClasses,e),vf(t,e)}function _f(t,e,r){var n=Ef(t,e),i=n.type,a=n.timeout,d=n.propCount;if(!i)return r();var D=i===Cn?ga:gf,l=0,w=function(){t.removeEventListener(D,b),r()},b=function(B){B.target===t&&++l>=d&&w()};setTimeout(function(){l<d&&w()},a+1),t.addEventListener(D,b)}var nm=/\b(transform|all)(,|$)/;function Ef(t,e){var r=window.getComputedStyle(t),n=(r[ea+"Delay"]||"").split(", "),i=(r[ea+"Duration"]||"").split(", "),a=Lu(n,i),d=(r[co+"Delay"]||"").split(", "),D=(r[co+"Duration"]||"").split(", "),l=Lu(d,D),w,b=0,B=0;e===Cn?a>0&&(w=Cn,b=a,B=i.length):e===Ss?l>0&&(w=Ss,b=l,B=D.length):(b=Math.max(a,l),w=b>0?a>l?Cn:Ss:null,B=w?w===Cn?i.length:D.length:0);var O=w===Cn&&nm.test(r[ea+"Property"]);return{type:w,timeout:b,propCount:B,hasTransform:O}}function Lu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(r,n){return Du(r)+Du(t[n])}))}function Du(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function fo(t,e){var r=t.elm;Z(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var n=pf(t.data.transition);if(!ce(n)&&!(Z(r._enterCb)||r.nodeType!==1)){for(var i=n.css,a=n.type,d=n.enterClass,D=n.enterToClass,l=n.enterActiveClass,w=n.appearClass,b=n.appearToClass,B=n.appearActiveClass,O=n.beforeEnter,$=n.enter,F=n.afterEnter,k=n.enterCancelled,M=n.beforeAppear,I=n.appear,P=n.afterAppear,T=n.appearCancelled,R=n.duration,L=Zr,_=Zr.$vnode;_&&_.parent;)L=_.context,_=_.parent;var y=!L._isMounted||!t.isRootInsert;if(!(y&&!I&&I!=="")){var m=y&&w?w:d,p=y&&B?B:l,C=y&&b?b:D,x=y&&M||O,o=y&&ke(I)?I:$,c=y&&P||F,S=y&&T||k,f=ci(it(R)?R.enter:R),h=i!==!1&&!Hn,u=Jo(o),g=r._enterCb=oa(function(){h&&(fr(r,C),fr(r,p)),g.cancelled?(h&&fr(r,m),S&&S(r)):c&&c(r),r._enterCb=null});t.data.show||Or(t,"insert",function(){var s=r.parentNode,E=s&&s._pending&&s._pending[t.key];E&&E.tag===t.tag&&E.elm._leaveCb&&E.elm._leaveCb(),o&&o(r,g)}),x&&x(r),h&&(Jr(r,m),Jr(r,p),yf(function(){fr(r,m),g.cancelled||(Jr(r,C),u||(Sf(f)?setTimeout(g,f):_f(r,a,g)))})),t.data.show&&(e&&e(),o&&o(r,g)),!h&&!u&&g()}}}function Tf(t,e){var r=t.elm;Z(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var n=pf(t.data.transition);if(ce(n)||r.nodeType!==1)return e();if(Z(r._leaveCb))return;var i=n.css,a=n.type,d=n.leaveClass,D=n.leaveToClass,l=n.leaveActiveClass,w=n.beforeLeave,b=n.leave,B=n.afterLeave,O=n.leaveCancelled,$=n.delayLeave,F=n.duration,k=i!==!1&&!Hn,M=Jo(b),I=ci(it(F)?F.leave:F),P=r._leaveCb=oa(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[t.key]=null),k&&(fr(r,D),fr(r,l)),P.cancelled?(k&&fr(r,d),O&&O(r)):(e(),B&&B(r)),r._leaveCb=null});$?$(T):T();function T(){P.cancelled||(!t.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[t.key]=t),w&&w(r),k&&(Jr(r,d),Jr(r,l),yf(function(){fr(r,d),P.cancelled||(Jr(r,D),M||(Sf(I)?setTimeout(P,I):_f(r,a,P)))})),b&&b(r,P),!k&&!M&&P())}}function Sf(t){return typeof t=="number"&&!isNaN(t)}function Jo(t){if(ce(t))return!1;var e=t.fns;return Z(e)?Jo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Au(t,e){e.data.show!==!0&&fo(e)}var im=Pt?{create:Au,activate:Au,remove:function(t,e){t.data.show!==!0?Tf(t,e):e()}}:{},am=[Kp,Wp,zp,Zp,rm,im],sm=am.concat($p),om=kp({nodeOps:Pp,modules:sm});Hn&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&qo(t,"input")});var xf={inserted:function(t,e,r,n){r.tag==="select"?(n.elm&&!n.elm._vOptions?Or(r,"postpatch",function(){xf.componentUpdated(t,e,r)}):Ou(t,e,r.context),t._vOptions=[].map.call(t.options,ya)):(r.tag==="textarea"||uo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",lm),t.addEventListener("compositionend",Iu),t.addEventListener("change",Iu),Hn&&(t.vmodel=!0)))},componentUpdated:function(t,e,r){if(r.tag==="select"){Ou(t,e,r.context);var n=t._vOptions,i=t._vOptions=[].map.call(t.options,ya);if(i.some(function(d,D){return!tn(d,n[D])})){var a=t.multiple?e.value.some(function(d){return Pu(d,i)}):e.value!==e.oldValue&&Pu(e.value,i);a&&qo(t,"change")}}}};function Ou(t,e,r){wu(t,e),(Wn||Io)&&setTimeout(function(){wu(t,e)},0)}function wu(t,e,r){var n=e.value,i=t.multiple;if(!(i&&!Array.isArray(n))){for(var a,d,D=0,l=t.options.length;D<l;D++)if(d=t.options[D],i)a=kc(n,ya(d))>-1,d.selected!==a&&(d.selected=a);else if(tn(ya(d),n)){t.selectedIndex!==D&&(t.selectedIndex=D);return}i||(t.selectedIndex=-1)}}function Pu(t,e){return e.every(function(r){return!tn(r,t)})}function ya(t){return"_value"in t?t._value:t.value}function lm(t){t.target.composing=!0}function Iu(t){!t.target.composing||(t.target.composing=!1,qo(t.target,"input"))}function qo(t,e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function ho(t){return t.componentInstance&&(!t.data||!t.data.transition)?ho(t.componentInstance._vnode):t}var um={bind:function(t,e,r){var n=e.value;r=ho(r);var i=r.data&&r.data.transition,a=t.__vOriginalDisplay=t.style.display==="none"?"":t.style.display;n&&i?(r.data.show=!0,fo(r,function(){t.style.display=a})):t.style.display=n?a:"none"},update:function(t,e,r){var n=e.value,i=e.oldValue;if(!n!=!i){r=ho(r);var a=r.data&&r.data.transition;a?(r.data.show=!0,n?fo(r,function(){t.style.display=t.__vOriginalDisplay}):Tf(r,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none"}},unbind:function(t,e,r,n,i){i||(t.style.display=t.__vOriginalDisplay)}},cm={model:xf,show:um},bf={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function vo(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?vo(Qc(e.children)):t}function Cf(t){var e={},r=t.$options;for(var n in r.propsData)e[n]=t[n];var i=r._parentListeners;for(var n in i)e[en(n)]=i[n];return e}function Ru(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function fm(t){for(;t=t.parent;)if(t.data.transition)return!0}function dm(t,e){return e.key===t.key&&e.tag===t.tag}var hm=function(t){return t.tag||di(t)},vm=function(t){return t.name==="show"},pm={name:"transition",props:bf,abstract:!0,render:function(t){var e=this,r=this.$slots.default;if(!!r&&(r=r.filter(hm),!!r.length)){var n=this.mode,i=r[0];if(fm(this.$vnode))return i;var a=vo(i);if(!a)return i;if(this._leaving)return Ru(t,i);var d="__transition-".concat(this._uid,"-");a.key=a.key==null?a.isComment?d+"comment":d+a.tag:Di(a.key)?String(a.key).indexOf(d)===0?a.key:d+a.key:a.key;var D=(a.data||(a.data={})).transition=Cf(this),l=this._vnode,w=vo(l);if(a.data.directives&&a.data.directives.some(vm)&&(a.data.show=!0),w&&w.data&&!dm(a,w)&&!di(w)&&!(w.componentInstance&&w.componentInstance._vnode.isComment)){var b=w.data.transition=Ie({},D);if(n==="out-in")return this._leaving=!0,Or(b,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Ru(t,i);if(n==="in-out"){if(di(a))return l;var B,O=function(){B()};Or(D,"afterEnter",O),Or(D,"enterCancelled",O),Or(b,"delayLeave",function($){B=$})}}return i}}},Lf=Ie({tag:String,moveClass:String},bf);delete Lf.mode;var mm={props:Lf,beforeMount:function(){var t=this,e=this._update;this._update=function(r,n){var i=ef(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,r,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),n=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],d=Cf(this),D=0;D<i.length;D++){var l=i[D];l.tag&&l.key!=null&&String(l.key).indexOf("__vlist")!==0&&(a.push(l),r[l.key]=l,(l.data||(l.data={})).transition=d)}if(n){for(var w=[],b=[],D=0;D<n.length;D++){var l=n[D];l.data.transition=d,l.data.pos=l.elm.getBoundingClientRect(),r[l.key]?w.push(l):b.push(l)}this.kept=t(e,null,w),this.removed=b}return t(e,null,a)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";!t.length||!this.hasMove(t[0].elm,e)||(t.forEach(gm),t.forEach(ym),t.forEach(_m),this._reflow=document.body.offsetHeight,t.forEach(function(r){if(r.data.moved){var n=r.elm,i=n.style;Jr(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(ga,n._moveCb=function a(d){d&&d.target!==n||(!d||/transform$/.test(d.propertyName))&&(n.removeEventListener(ga,a),n._moveCb=null,fr(n,e))})}}))},methods:{hasMove:function(t,e){if(!mf)return!1;if(this._hasMove)return this._hasMove;var r=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(i){vf(r,i)}),hf(r,e),r.style.display="none",this.$el.appendChild(r);var n=Ef(r);return this.$el.removeChild(r),this._hasMove=n.hasTransform}}};function gm(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function ym(t){t.data.newPos=t.elm.getBoundingClientRect()}function _m(t){var e=t.data.pos,r=t.data.newPos,n=e.left-r.left,i=e.top-r.top;if(n||i){t.data.moved=!0;var a=t.elm.style;a.transform=a.WebkitTransform="translate(".concat(n,"px,").concat(i,"px)"),a.transitionDuration="0s"}}var Em={Transition:pm,TransitionGroup:mm};ae.config.mustUseProp=sp;ae.config.isReservedTag=uf;ae.config.isReservedAttr=ip;ae.config.getTagNamespace=mp;ae.config.isUnknownElement=gp;Ie(ae.options.directives,cm);Ie(ae.options.components,Em);ae.prototype.__patch__=Pt?om:Je;ae.prototype.$mount=function(t,e){return t=t&&Pt?yp(t):void 0,cv(this,t,e)};Pt&&setTimeout(function(){Mt.devtools&&la&&la.emit("init",ae)},0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var po=function(){return(po=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Tm={easingOptions:{builtIn:["linear","ease","ease-in","ease-out","ease-in-out"],custom:{}},targets:[],install:function(t,e){this.validateOptions(e),t.directive("show-slide",{bind:this.bind.bind(this),inserted:this.inserted.bind(this),componentUpdated:this.componentUpdated.bind(this)})},bind:function(t,e){this.parseArgs(t,e)},inserted:function(t,e){this.initializeTarget(t,e.value)},componentUpdated:function(t,e){this.toggleSlide(t,e)},getTargetByEl:function(t){var e=this.targets.filter(function(r){return r.el.isSameNode(t)})[0];if(e===void 0)throw"Element not found!";return e},setTargetPropertyByEl:function(t,e,r){var n,i=this.getTargetByEl(t),a=this.targets.filter(function(d){return!d.el.isSameNode(t)});this.targets=function(){for(var d=0,D=0,l=arguments.length;D<l;D++)d+=arguments[D].length;var w=Array(d),b=0;for(D=0;D<l;D++)for(var B=arguments[D],O=0,$=B.length;O<$;O++,b++)w[b]=B[O];return w}(a,[po(po({},i),(n={},n[e]=r,n))])},validateOptions:function(t){t!==void 0&&Object.prototype.hasOwnProperty.call(t,"customEasing")&&(this.easingOptions.custom=t.customEasing)},kebabToCamel:function(t){return t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},fireEvent:function(t,e){if(typeof window.CustomEvent=="function")t.dispatchEvent(new CustomEvent(e));else{var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!1,!1,null),t.dispatchEvent(r)}},parseArgs:function(t,e){if(Object.prototype.hasOwnProperty.call(e,"arg")&&typeof e.arg=="string"){var r=e.arg.split(":"),n=this.validateEasing(r),i=this.validateDuration(r);this.targets.push({el:t,duration:i,durationInSeconds:i/1e3+"s",easing:n,isAnimating:!1})}else this.targets.push({el:t,duration:300,durationInSeconds:"0.3s",easing:"ease",isAnimating:!1})},validateEasing:function(t){return Object.prototype.hasOwnProperty.call(t,1)?this.easingOptions.builtIn.indexOf(t[1])>-1?t[1]:Object.prototype.hasOwnProperty.call(this.easingOptions.custom,this.kebabToCamel(t[1]))?this.easingOptions.custom[this.kebabToCamel(t[1])]:"ease":"ease"},validateDuration:function(t){return Object.prototype.hasOwnProperty.call(t,0)?parseInt(t[0]):300},initializeTarget:function(t,e){e||(t.style.height="0px",t.style.visibility="hidden");var r=this.getTargetByEl(t),n=r.easing,i=r.durationInSeconds;t.style.overflow="hidden",t.style.transition="height "+n+" "+i},toggleSlide:function(t,e){e.value!==e.oldValue&&(e.value?this.slideOpen(t):this.slideClosed(t))},slideOpen:function(t){var e=this;this.fireEvent(t,"slide-open-start");var r=this.getTargetByEl(t),n=r.isAnimating,i=r.timeout,a=r.duration;n&&clearTimeout(i),this.setTargetPropertyByEl(t,"isAnimating",!0),t.style.visibility="visible";var d=t.scrollHeight,D=window.getComputedStyle(t),l=parseFloat(D.getPropertyValue("border-bottom-width")),w=parseFloat(D.getPropertyValue("border-top-width"));t.style.height=d+l+w+"px";var b=setTimeout(function(){t.style.height="auto",e.setTargetPropertyByEl(t,"isAnimating",!1),e.fireEvent(t,"slide-open-end")},a);this.setTargetPropertyByEl(t,"timeout",b)},slideClosed:function(t){var e=this;this.fireEvent(t,"slide-close-start");var r=this.getTargetByEl(t),n=r.isAnimating,i=r.timeout,a=r.duration;n&&clearTimeout(i),this.setTargetPropertyByEl(t,"isAnimating",!0);var d=t.scrollHeight;t.style.height=d+"px",t.offsetLeft,t.style.height="0px";var D=setTimeout(function(){e.setTargetPropertyByEl(t,"isAnimating",!1),t.style.visibility="hidden",e.fireEvent(t,"slide-close-end")},a);this.setTargetPropertyByEl(t,"timeout",D)}};/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function ta(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ta=function(e){return typeof e}:ta=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(t)}function Sm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xm(t){return bm(t)||Cm(t)||Lm()}function bm(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function Cm(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function Lm(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Dm(){return typeof Reflect<"u"&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function Am(t,e){xs(t,e),Object.getOwnPropertyNames(e.prototype).forEach(function(r){xs(t.prototype,e.prototype,r)}),Object.getOwnPropertyNames(e).forEach(function(r){xs(t,e,r)})}function xs(t,e,r){var n=r?Reflect.getOwnMetadataKeys(e,r):Reflect.getOwnMetadataKeys(e);n.forEach(function(i){var a=r?Reflect.getOwnMetadata(i,e,r):Reflect.getOwnMetadata(i,e);r?Reflect.defineMetadata(i,a,t,r):Reflect.defineMetadata(i,a,t)})}var Om={__proto__:[]},wm=Om instanceof Array;function $r(t){return function(e,r,n){var i=typeof e=="function"?e:e.constructor;i.__decorators__||(i.__decorators__=[]),typeof n!="number"&&(n=void 0),i.__decorators__.push(function(a){return t(a,r,n)})}}function Vn(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ae.extend({mixins:e})}function Pm(t){var e=ta(t);return t==null||e!=="object"&&e!=="function"}function Im(t,e){var r=e.prototype._init;e.prototype._init=function(){var a=this,d=Object.getOwnPropertyNames(t);if(t.$options.props)for(var D in t.$options.props)t.hasOwnProperty(D)||d.push(D);d.forEach(function(l){Object.defineProperty(a,l,{get:function(){return t[l]},set:function(b){t[l]=b},configurable:!0})})};var n=new e;e.prototype._init=r;var i={};return Object.keys(n).forEach(function(a){n[a]!==void 0&&(i[a]=n[a])}),i}var mo=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function Mu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var r=t.prototype;Object.getOwnPropertyNames(r).forEach(function(D){if(D!=="constructor"){if(mo.indexOf(D)>-1){e[D]=r[D];return}var l=Object.getOwnPropertyDescriptor(r,D);l.value!==void 0?typeof l.value=="function"?(e.methods||(e.methods={}))[D]=l.value:(e.mixins||(e.mixins=[])).push({data:function(){return Sm({},D,l.value)}}):(l.get||l.set)&&((e.computed||(e.computed={}))[D]={get:l.get,set:l.set})}}),(e.mixins||(e.mixins=[])).push({data:function(){return Im(this,t)}});var n=t.__decorators__;n&&(n.forEach(function(D){return D(e)}),delete t.__decorators__);var i=Object.getPrototypeOf(t.prototype),a=i instanceof ae?i.constructor:ae,d=a.extend(e);return Mm(d,t,a),Dm()&&Am(d,t),d}var Rm={prototype:!0,arguments:!0,callee:!0,caller:!0};function Mm(t,e,r){Object.getOwnPropertyNames(e).forEach(function(n){if(!Rm[n]){var i=Object.getOwnPropertyDescriptor(t,n);if(!(i&&!i.configurable)){var a=Object.getOwnPropertyDescriptor(e,n);if(!wm){if(n==="cid")return;var d=Object.getOwnPropertyDescriptor(r,n);if(!Pm(a.value)&&d&&d.value===a.value)return}Object.defineProperty(t,n,a)}}})}function fe(t){return typeof t=="function"?Mu(t):function(e){return Mu(e,t)}}fe.registerHooks=function(e){mo.push.apply(mo,xm(e))};var ku=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],d=0,D=a.length;d<D;d++,i++)n[i]=a[d];return n},km=/\B([A-Z])/g,Fm=function(t){return t.replace(km,"-$1").toLowerCase()};function or(t){return function(e,r,n){var i=Fm(r),a=n.value;n.value=function(){for(var D=this,l=[],w=0;w<arguments.length;w++)l[w]=arguments[w];var b=function(O){var $=t||i;O===void 0?l.length===0?D.$emit($):l.length===1?D.$emit($,l[0]):D.$emit.apply(D,ku([$],l)):(l.unshift(O),D.$emit.apply(D,ku([$],l)))},B=a.apply(this,l);return Nm(B)?B.then(b):b(B),B}}}function Nm(t){return t instanceof Promise||t&&typeof t.then=="function"}function Bm(t){return typeof t!="function"||!t.managed&&!t.managedReactive}function Um(t){var e=function(){var r=this,n=typeof t=="function"?t.call(this):t;n=Object.create(n||null),n[Rr]=Object.create(this[Rr]||{});for(var i in e.managed)n[e.managed[i]]=this[i];var a=function(D){n[e.managedReactive[D]]=d[D],Object.defineProperty(n[Rr],e.managedReactive[D],{enumerable:!0,configurable:!0,get:function(){return r[D]}})},d=this;for(var i in e.managedReactive)a(i);return n};return e.managed={},e.managedReactive={},e}var Rr="__reactiveInject__";function $m(t){Array.isArray(t.inject)||(t.inject=t.inject||{},t.inject[Rr]={from:Rr,default:{}})}function Km(t){return $r(function(e,r){if(typeof e.inject>"u"&&(e.inject={}),!Array.isArray(e.inject)){var n=t?t.from||t:r,i=!!t&&t.default||void 0;e.computed||(e.computed={}),e.computed[r]=function(){var a=this[Rr];return a?a[n]:i},e.inject[Rr]=Rr}})}var Wm=typeof Reflect<"u"&&typeof Reflect.getMetadata<"u";function el(t,e,r){if(Wm&&!Array.isArray(t)&&typeof t!="function"&&!t.hasOwnProperty("type")&&typeof t.type>"u"){var n=Reflect.getMetadata("design:type",e,r);n!==Object&&(t.type=n)}}function $a(t,e){return e===void 0&&(e={}),function(r,n){el(e,r,n),$r(function(i,a){(i.props||(i.props={}))[a]=e,i.model={prop:a,event:t||a}})(r,n)}}function _e(t){return t===void 0&&(t={}),function(e,r){el(t,e,r),$r(function(n,i){(n.props||(n.props={}))[i]=t})(e,r)}}function Ka(t,e){return e===void 0&&(e={}),function(r,n){el(e,r,n),$r(function(i,a){(i.props||(i.props={}))[t]=e,(i.computed||(i.computed={}))[a]={get:function(){return this[t]},set:function(d){this.$emit("update:"+t,d)}}})(r,n)}}function Hm(t){return $r(function(e,r){var n=e.provide;$m(e),Bm(n)&&(n=e.provide=Um(n)),n.managedReactive[r]=t||r})}function ut(t){return $r(function(e,r){e.computed=e.computed||{},e.computed[r]={cache:!1,get:function(){return this.$refs[t||r]}}})}function ve(t,e){e===void 0&&(e={});var r=e.deep,n=r===void 0?!1:r,i=e.immediate,a=i===void 0?!1:i;return $r(function(d,D){typeof d.watch!="object"&&(d.watch=Object.create(null));var l=d.watch;typeof l[t]=="object"&&!Array.isArray(l[t])?l[t]=[l[t]]:typeof l[t]>"u"&&(l[t]=[]),l[t].push({handler:D,deep:n,immediate:a})})}/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */function jm(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:n});else{var r=t.prototype._init;t.prototype._init=function(i){i===void 0&&(i={}),i.init=i.init?[n].concat(i.init):n,r.call(this,i)}}function n(){var i=this.$options;i.store?this.$store=typeof i.store=="function"?i.store():i.store:i.parent&&i.parent.$store&&(this.$store=i.parent.$store)}}var Gm=typeof window<"u"?window:typeof global<"u"?global:{},Tn=Gm.__VUE_DEVTOOLS_GLOBAL_HOOK__;function Vm(t){!Tn||(t._devtoolHook=Tn,Tn.emit("vuex:init",t),Tn.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(e,r){Tn.emit("vuex:mutation",e,r)},{prepend:!0}),t.subscribeAction(function(e,r){Tn.emit("vuex:action",e,r)},{prepend:!0}))}function zm(t,e){return t.filter(e)[0]}function go(t,e){if(e===void 0&&(e=[]),t===null||typeof t!="object")return t;var r=zm(e,function(i){return i.original===t});if(r)return r.copy;var n=Array.isArray(t)?[]:{};return e.push({original:t,copy:n}),Object.keys(t).forEach(function(i){n[i]=go(t[i],e)}),n}function zn(t,e){Object.keys(t).forEach(function(r){return e(t[r],r)})}function Df(t){return t!==null&&typeof t=="object"}function Ym(t){return t&&typeof t.then=="function"}function Xm(t,e){return function(){return t(e)}}var Qt=function(e,r){this.runtime=r,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},Af={namespaced:{configurable:!0}};Af.namespaced.get=function(){return!!this._rawModule.namespaced};Qt.prototype.addChild=function(e,r){this._children[e]=r};Qt.prototype.removeChild=function(e){delete this._children[e]};Qt.prototype.getChild=function(e){return this._children[e]};Qt.prototype.hasChild=function(e){return e in this._children};Qt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Qt.prototype.forEachChild=function(e){zn(this._children,e)};Qt.prototype.forEachGetter=function(e){this._rawModule.getters&&zn(this._rawModule.getters,e)};Qt.prototype.forEachAction=function(e){this._rawModule.actions&&zn(this._rawModule.actions,e)};Qt.prototype.forEachMutation=function(e){this._rawModule.mutations&&zn(this._rawModule.mutations,e)};Object.defineProperties(Qt.prototype,Af);var hn=function(e){this.register([],e,!1)};hn.prototype.get=function(e){return e.reduce(function(r,n){return r.getChild(n)},this.root)};hn.prototype.getNamespace=function(e){var r=this.root;return e.reduce(function(n,i){return r=r.getChild(i),n+(r.namespaced?i+"/":"")},"")};hn.prototype.update=function(e){Of([],this.root,e)};hn.prototype.register=function(e,r,n){var i=this;n===void 0&&(n=!0);var a=new Qt(r,n);if(e.length===0)this.root=a;else{var d=this.get(e.slice(0,-1));d.addChild(e[e.length-1],a)}r.modules&&zn(r.modules,function(D,l){i.register(e.concat(l),D,n)})};hn.prototype.unregister=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1],i=r.getChild(n);!i||!i.runtime||r.removeChild(n)};hn.prototype.isRegistered=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1];return r?r.hasChild(n):!1};function Of(t,e,r){if(e.update(r),r.modules)for(var n in r.modules){if(!e.getChild(n))return;Of(t.concat(n),e.getChild(n),r.modules[n])}}var vt,It=function(e){var r=this;e===void 0&&(e={}),!vt&&typeof window<"u"&&window.Vue&&If(window.Vue);var n=e.plugins;n===void 0&&(n=[]);var i=e.strict;i===void 0&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new hn(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new vt,this._makeLocalGettersCache=Object.create(null);var a=this,d=this,D=d.dispatch,l=d.commit;this.dispatch=function(O,$){return D.call(a,O,$)},this.commit=function(O,$,F){return l.call(a,O,$,F)},this.strict=i;var w=this._modules.root.state;Wa(this,w,[],this._modules.root),rl(this,w),n.forEach(function(B){return B(r)});var b=e.devtools!==void 0?e.devtools:vt.config.devtools;b&&Vm(this)},tl={state:{configurable:!0}};tl.state.get=function(){return this._vm._data.$$state};tl.state.set=function(t){};It.prototype.commit=function(e,r,n){var i=this,a=_a(e,r,n),d=a.type,D=a.payload,l={type:d,payload:D},w=this._mutations[d];!w||(this._withCommit(function(){w.forEach(function(B){B(D)})}),this._subscribers.slice().forEach(function(b){return b(l,i.state)}))};It.prototype.dispatch=function(e,r){var n=this,i=_a(e,r),a=i.type,d=i.payload,D={type:a,payload:d},l=this._actions[a];if(!!l){try{this._actionSubscribers.slice().filter(function(b){return b.before}).forEach(function(b){return b.before(D,n.state)})}catch{}var w=l.length>1?Promise.all(l.map(function(b){return b(d)})):l[0](d);return new Promise(function(b,B){w.then(function(O){try{n._actionSubscribers.filter(function($){return $.after}).forEach(function($){return $.after(D,n.state)})}catch{}b(O)},function(O){try{n._actionSubscribers.filter(function($){return $.error}).forEach(function($){return $.error(D,n.state,O)})}catch{}B(O)})})}};It.prototype.subscribe=function(e,r){return wf(e,this._subscribers,r)};It.prototype.subscribeAction=function(e,r){var n=typeof e=="function"?{before:e}:e;return wf(n,this._actionSubscribers,r)};It.prototype.watch=function(e,r,n){var i=this;return this._watcherVM.$watch(function(){return e(i.state,i.getters)},r,n)};It.prototype.replaceState=function(e){var r=this;this._withCommit(function(){r._vm._data.$$state=e})};It.prototype.registerModule=function(e,r,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),this._modules.register(e,r),Wa(this,this.state,e,this._modules.get(e),n.preserveState),rl(this,this.state)};It.prototype.unregisterModule=function(e){var r=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=nl(r.state,e.slice(0,-1));vt.delete(n,e[e.length-1])}),Pf(this)};It.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};It.prototype.hotUpdate=function(e){this._modules.update(e),Pf(this,!0)};It.prototype._withCommit=function(e){var r=this._committing;this._committing=!0,e(),this._committing=r};Object.defineProperties(It.prototype,tl);function wf(t,e,r){return e.indexOf(t)<0&&(r&&r.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Pf(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var r=t.state;Wa(t,r,[],t._modules.root,!0),rl(t,r,e)}function rl(t,e,r){var n=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};zn(i,function(D,l){a[l]=Xm(D,t),Object.defineProperty(t.getters,l,{get:function(){return t._vm[l]},enumerable:!0})});var d=vt.config.silent;vt.config.silent=!0,t._vm=new vt({data:{$$state:e},computed:a}),vt.config.silent=d,t.strict&&tg(t),n&&(r&&t._withCommit(function(){n._data.$$state=null}),vt.nextTick(function(){return n.$destroy()}))}function Wa(t,e,r,n,i){var a=!r.length,d=t._modules.getNamespace(r);if(n.namespaced&&(t._modulesNamespaceMap[d],t._modulesNamespaceMap[d]=n),!a&&!i){var D=nl(e,r.slice(0,-1)),l=r[r.length-1];t._withCommit(function(){vt.set(D,l,n.state)})}var w=n.context=Qm(t,d,r);n.forEachMutation(function(b,B){var O=d+B;Jm(t,O,b,w)}),n.forEachAction(function(b,B){var O=b.root?B:d+B,$=b.handler||b;qm(t,O,$,w)}),n.forEachGetter(function(b,B){var O=d+B;eg(t,O,b,w)}),n.forEachChild(function(b,B){Wa(t,e,r.concat(B),b,i)})}function Qm(t,e,r){var n=e==="",i={dispatch:n?t.dispatch:function(a,d,D){var l=_a(a,d,D),w=l.payload,b=l.options,B=l.type;return(!b||!b.root)&&(B=e+B),t.dispatch(B,w)},commit:n?t.commit:function(a,d,D){var l=_a(a,d,D),w=l.payload,b=l.options,B=l.type;(!b||!b.root)&&(B=e+B),t.commit(B,w,b)}};return Object.defineProperties(i,{getters:{get:n?function(){return t.getters}:function(){return Zm(t,e)}},state:{get:function(){return nl(t.state,r)}}}),i}function Zm(t,e){if(!t._makeLocalGettersCache[e]){var r={},n=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,n)===e){var a=i.slice(n);Object.defineProperty(r,a,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=r}return t._makeLocalGettersCache[e]}function Jm(t,e,r,n){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(d){r.call(t,n.state,d)})}function qm(t,e,r,n){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(d){var D=r.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},d);return Ym(D)||(D=Promise.resolve(D)),t._devtoolHook?D.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):D})}function eg(t,e,r,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(a){return r(n.state,n.getters,a.state,a.getters)})}function tg(t){t._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function nl(t,e){return e.reduce(function(r,n){return r[n]},t)}function _a(t,e,r){return Df(t)&&t.type&&(r=e,e=t,t=t.type),{type:t,payload:e,options:r}}function If(t){vt&&t===vt||(vt=t,jm(vt))}var il=ja(function(t,e){var r={};return Ha(e).forEach(function(n){var i=n.key,a=n.val;r[i]=function(){var D=this.$store.state,l=this.$store.getters;if(t){var w=Ga(this.$store,"mapState",t);if(!w)return;D=w.context.state,l=w.context.getters}return typeof a=="function"?a.call(this,D,l):D[a]},r[i].vuex=!0}),r}),Rf=ja(function(t,e){var r={};return Ha(e).forEach(function(n){var i=n.key,a=n.val;r[i]=function(){for(var D=[],l=arguments.length;l--;)D[l]=arguments[l];var w=this.$store.commit;if(t){var b=Ga(this.$store,"mapMutations",t);if(!b)return;w=b.context.commit}return typeof a=="function"?a.apply(this,[w].concat(D)):w.apply(this.$store,[a].concat(D))}}),r}),al=ja(function(t,e){var r={};return Ha(e).forEach(function(n){var i=n.key,a=n.val;a=t+a,r[i]=function(){if(!(t&&!Ga(this.$store,"mapGetters",t)))return this.$store.getters[a]},r[i].vuex=!0}),r}),sl=ja(function(t,e){var r={};return Ha(e).forEach(function(n){var i=n.key,a=n.val;r[i]=function(){for(var D=[],l=arguments.length;l--;)D[l]=arguments[l];var w=this.$store.dispatch;if(t){var b=Ga(this.$store,"mapActions",t);if(!b)return;w=b.context.dispatch}return typeof a=="function"?a.apply(this,[w].concat(D)):w.apply(this.$store,[a].concat(D))}}),r}),rg=function(t){return{mapState:il.bind(null,t),mapGetters:al.bind(null,t),mapMutations:Rf.bind(null,t),mapActions:sl.bind(null,t)}};function Ha(t){return ng(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function ng(t){return Array.isArray(t)||Df(t)}function ja(t){return function(e,r){return typeof e!="string"?(r=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,r)}}function Ga(t,e,r){var n=t._modulesNamespaceMap[r];return n}function ig(t){t===void 0&&(t={});var e=t.collapsed;e===void 0&&(e=!0);var r=t.filter;r===void 0&&(r=function(b,B,O){return!0});var n=t.transformer;n===void 0&&(n=function(b){return b});var i=t.mutationTransformer;i===void 0&&(i=function(b){return b});var a=t.actionFilter;a===void 0&&(a=function(b,B){return!0});var d=t.actionTransformer;d===void 0&&(d=function(b){return b});var D=t.logMutations;D===void 0&&(D=!0);var l=t.logActions;l===void 0&&(l=!0);var w=t.logger;return w===void 0&&(w=console),function(b){var B=go(b.state);typeof w>"u"||(D&&b.subscribe(function(O,$){var F=go($);if(r(O,B,F)){var k=Bu(),M=i(O),I="mutation "+O.type+k;Fu(w,I,e),w.log("%c prev state","color: #9E9E9E; font-weight: bold",n(B)),w.log("%c mutation","color: #03A9F4; font-weight: bold",M),w.log("%c next state","color: #4CAF50; font-weight: bold",n(F)),Nu(w)}B=F}),l&&b.subscribeAction(function(O,$){if(a(O,$)){var F=Bu(),k=d(O),M="action "+O.type+F;Fu(w,M,e),w.log("%c action","color: #03A9F4; font-weight: bold",k),Nu(w)}}))}}function Fu(t,e,r){var n=r?t.groupCollapsed:t.group;try{n.call(t,e)}catch{t.log(e)}}function Nu(t){try{t.groupEnd()}catch{t.log("\u2014\u2014 log end \u2014\u2014")}}function Bu(){var t=new Date;return" @ "+Vi(t.getHours(),2)+":"+Vi(t.getMinutes(),2)+":"+Vi(t.getSeconds(),2)+"."+Vi(t.getMilliseconds(),3)}function ag(t,e){return new Array(e+1).join(t)}function Vi(t,e){return ag("0",e-t.toString().length)+t}var sg={Store:It,install:If,version:"3.6.2",mapState:il,mapMutations:Rf,mapGetters:al,mapActions:sl,createNamespacedHelpers:rg,createLogger:ig};const Mf=sg;var rt=ol("computed",il),ie=ol("computed",al),se=ol("methods",sl);function ol(t,e){function r(i,a){return $r(function(d,D){d[t]||(d[t]={});var l=(w={},w[D]=i,w);d[t][D]=a!==void 0?e(a,l)[D]:e(l)[D];var w})}function n(i,a){if(typeof a=="string"){var d=a,D=i;return r(d,void 0)(D,d)}var l=og(a),w=i;return r(w,l)}return n}function og(t){var e=t&&t.namespace;if(typeof e=="string")return e[e.length-1]!=="/"?e+"/":e}const mi={theme:"candy",compactMode:!0,externalPlayback:!1,defaultPlaylistFormat:"xspf",colorScheme:"auto",visualization:!1,relax:!1,relaxTimeout:10,sleep:!1,sleepTimeout:5,changecolor:!1,volume:100,loadpolicy:!0,language:"auto"},gi={version:"2",lists:[],settings:mi,titles:{history:[],favorites:[]},lastStation:null,lastList:0,cache:{}};var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ff={exports:{}},ll={exports:{}},Nf=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},lg=Nf,ul=Object.prototype.toString,cl=function(t){return function(e){var r=ul.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function vn(t){return t=t.toLowerCase(),function(r){return cl(r)===t}}function fl(t){return Array.isArray(t)}function Ea(t){return typeof t>"u"}function ug(t){return t!==null&&!Ea(t)&&t.constructor!==null&&!Ea(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var Bf=vn("ArrayBuffer");function cg(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bf(t.buffer),e}function fg(t){return typeof t=="string"}function dg(t){return typeof t=="number"}function Uf(t){return t!==null&&typeof t=="object"}function ra(t){if(cl(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var hg=vn("Date"),vg=vn("File"),pg=vn("Blob"),mg=vn("FileList");function dl(t){return ul.call(t)==="[object Function]"}function gg(t){return Uf(t)&&dl(t.pipe)}function yg(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||ul.call(t)===e||dl(t.toString)&&t.toString()===e)}var _g=vn("URLSearchParams");function Eg(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Tg(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function hl(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),fl(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function yo(){var t={};function e(i,a){ra(t[a])&&ra(i)?t[a]=yo(t[a],i):ra(i)?t[a]=yo({},i):fl(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)hl(arguments[r],e);return t}function Sg(t,e,r){return hl(e,function(i,a){r&&typeof i=="function"?t[a]=lg(i,r):t[a]=i}),t}function xg(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function bg(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function Cg(t,e,r){var n,i,a,d={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)a=n[i],d[a]||(e[a]=t[a],d[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function Lg(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function Dg(t){if(!t)return null;var e=t.length;if(Ea(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var Ag=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),nt={isArray:fl,isArrayBuffer:Bf,isBuffer:ug,isFormData:yg,isArrayBufferView:cg,isString:fg,isNumber:dg,isObject:Uf,isPlainObject:ra,isUndefined:Ea,isDate:hg,isFile:vg,isBlob:pg,isFunction:dl,isStream:gg,isURLSearchParams:_g,isStandardBrowserEnv:Tg,forEach:hl,merge:yo,extend:Sg,trim:Eg,stripBOM:xg,inherits:bg,toFlatObject:Cg,kindOf:cl,kindOfTest:vn,endsWith:Lg,toArray:Dg,isTypedArray:Ag,isFileList:mg},Sn=nt;function Uu(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $f=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Sn.isURLSearchParams(r))i=r.toString();else{var a=[];Sn.forEach(r,function(l,w){l===null||typeof l>"u"||(Sn.isArray(l)?w=w+"[]":l=[l],Sn.forEach(l,function(B){Sn.isDate(B)?B=B.toISOString():Sn.isObject(B)&&(B=JSON.stringify(B)),a.push(Uu(w)+"="+Uu(B))}))}),i=a.join("&")}if(i){var d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Og=nt;function Va(){this.handlers=[]}Va.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Va.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Va.prototype.forEach=function(e){Og.forEach(this.handlers,function(n){n!==null&&e(n)})};var wg=Va,Pg=nt,Ig=function(e,r){Pg.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},Kf=nt;function In(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Kf.inherits(In,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Wf=In.prototype,Hf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Hf[t]={value:t}});Object.defineProperties(In,Hf);Object.defineProperty(Wf,"isAxiosError",{value:!0});In.from=function(t,e,r,n,i,a){var d=Object.create(Wf);return Kf.toFlatObject(t,d,function(l){return l!==Error.prototype}),In.call(d,t.message,e,r,n,i),d.name=t.name,a&&Object.assign(d,a),d};var Yn=In,jf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wt=nt;function Rg(t,e){e=e||new FormData;var r=[];function n(a){return a===null?"":Wt.isDate(a)?a.toISOString():Wt.isArrayBuffer(a)||Wt.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,d){if(Wt.isPlainObject(a)||Wt.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+d);r.push(a),Wt.forEach(a,function(l,w){if(!Wt.isUndefined(l)){var b=d?d+"."+w:w,B;if(l&&!d&&typeof l=="object"){if(Wt.endsWith(w,"{}"))l=JSON.stringify(l);else if(Wt.endsWith(w,"[]")&&(B=Wt.toArray(l))){B.forEach(function(O){!Wt.isUndefined(O)&&e.append(b,n(O))});return}}i(l,b)}}),r.pop()}else e.append(d,n(a))}return i(t),e}var Gf=Rg,bs,$u;function Mg(){if($u)return bs;$u=1;var t=Yn;return bs=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},bs}var Cs,Ku;function kg(){if(Ku)return Cs;Ku=1;var t=nt;return Cs=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,d,D,l){var w=[];w.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&w.push("expires="+new Date(a).toGMTString()),t.isString(d)&&w.push("path="+d),t.isString(D)&&w.push("domain="+D),l===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Cs}var Fg=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Ng=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Bg=Fg,Ug=Ng,Vf=function(e,r){return e&&!Bg(r)?Ug(e,r):r},Ls,Wu;function $g(){if(Wu)return Ls;Wu=1;var t=nt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ls=function(n){var i={},a,d,D;return n&&t.forEach(n.split(`
`),function(w){if(D=w.indexOf(":"),a=t.trim(w.substr(0,D)).toLowerCase(),d=t.trim(w.substr(D+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([d]):i[a]=i[a]?i[a]+", "+d:d}}),i},Ls}var Ds,Hu;function Kg(){if(Hu)return Ds;Hu=1;var t=nt;return Ds=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(d){var D=d;return r&&(n.setAttribute("href",D),D=n.href),n.setAttribute("href",D),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(D){var l=t.isString(D)?a(D):D;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Ds}var As,ju;function za(){if(ju)return As;ju=1;var t=Yn,e=nt;function r(n){t.call(this,n==null?"canceled":n,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),As=r,As}var Os,Gu;function Wg(){return Gu||(Gu=1,Os=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Os}var ws,Vu;function zu(){if(Vu)return ws;Vu=1;var t=nt,e=Mg(),r=kg(),n=$f,i=Vf,a=$g(),d=Kg(),D=jf,l=Yn,w=za(),b=Wg();return ws=function(O){return new Promise(function(F,k){var M=O.data,I=O.headers,P=O.responseType,T;function R(){O.cancelToken&&O.cancelToken.unsubscribe(T),O.signal&&O.signal.removeEventListener("abort",T)}t.isFormData(M)&&t.isStandardBrowserEnv()&&delete I["Content-Type"];var L=new XMLHttpRequest;if(O.auth){var _=O.auth.username||"",y=O.auth.password?unescape(encodeURIComponent(O.auth.password)):"";I.Authorization="Basic "+btoa(_+":"+y)}var m=i(O.baseURL,O.url);L.open(O.method.toUpperCase(),n(m,O.params,O.paramsSerializer),!0),L.timeout=O.timeout;function p(){if(!!L){var o="getAllResponseHeaders"in L?a(L.getAllResponseHeaders()):null,c=!P||P==="text"||P==="json"?L.responseText:L.response,S={data:c,status:L.status,statusText:L.statusText,headers:o,config:O,request:L};e(function(h){F(h),R()},function(h){k(h),R()},S),L=null}}if("onloadend"in L?L.onloadend=p:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(p)},L.onabort=function(){!L||(k(new l("Request aborted",l.ECONNABORTED,O,L)),L=null)},L.onerror=function(){k(new l("Network Error",l.ERR_NETWORK,O,L,L)),L=null},L.ontimeout=function(){var c=O.timeout?"timeout of "+O.timeout+"ms exceeded":"timeout exceeded",S=O.transitional||D;O.timeoutErrorMessage&&(c=O.timeoutErrorMessage),k(new l(c,S.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,O,L)),L=null},t.isStandardBrowserEnv()){var C=(O.withCredentials||d(m))&&O.xsrfCookieName?r.read(O.xsrfCookieName):void 0;C&&(I[O.xsrfHeaderName]=C)}"setRequestHeader"in L&&t.forEach(I,function(c,S){typeof M>"u"&&S.toLowerCase()==="content-type"?delete I[S]:L.setRequestHeader(S,c)}),t.isUndefined(O.withCredentials)||(L.withCredentials=!!O.withCredentials),P&&P!=="json"&&(L.responseType=O.responseType),typeof O.onDownloadProgress=="function"&&L.addEventListener("progress",O.onDownloadProgress),typeof O.onUploadProgress=="function"&&L.upload&&L.upload.addEventListener("progress",O.onUploadProgress),(O.cancelToken||O.signal)&&(T=function(o){!L||(k(!o||o&&o.type?new w:o),L.abort(),L=null)},O.cancelToken&&O.cancelToken.subscribe(T),O.signal&&(O.signal.aborted?T():O.signal.addEventListener("abort",T))),M||(M=null);var x=b(m);if(x&&["http","https","file"].indexOf(x)===-1){k(new l("Unsupported protocol "+x+":",l.ERR_BAD_REQUEST,O));return}L.send(M)})},ws}var Ps,Yu;function Hg(){return Yu||(Yu=1,Ps=null),Ps}var Ze=nt,Xu=Ig,Qu=Yn,jg=jf,Gg=Gf,Vg={"Content-Type":"application/x-www-form-urlencoded"};function Zu(t,e){!Ze.isUndefined(t)&&Ze.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function zg(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=zu()),t}function Yg(t,e,r){if(Ze.isString(t))try{return(e||JSON.parse)(t),Ze.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ya={transitional:jg,adapter:zg(),transformRequest:[function(e,r){if(Xu(r,"Accept"),Xu(r,"Content-Type"),Ze.isFormData(e)||Ze.isArrayBuffer(e)||Ze.isBuffer(e)||Ze.isStream(e)||Ze.isFile(e)||Ze.isBlob(e))return e;if(Ze.isArrayBufferView(e))return e.buffer;if(Ze.isURLSearchParams(e))return Zu(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=Ze.isObject(e),i=r&&r["Content-Type"],a;if((a=Ze.isFileList(e))||n&&i==="multipart/form-data"){var d=this.env&&this.env.FormData;return Gg(a?{"files[]":e}:e,d&&new d)}else if(n||i==="application/json")return Zu(r,"application/json"),Yg(e);return e}],transformResponse:[function(e){var r=this.transitional||Ya.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Ze.isString(e)&&e.length)try{return JSON.parse(e)}catch(d){if(a)throw d.name==="SyntaxError"?Qu.from(d,Qu.ERR_BAD_RESPONSE,this,null,this.response):d}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hg()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ze.forEach(["delete","get","head"],function(e){Ya.headers[e]={}});Ze.forEach(["post","put","patch"],function(e){Ya.headers[e]=Ze.merge(Vg)});var vl=Ya,Xg=nt,Qg=vl,Zg=function(e,r,n){var i=this||Qg;return Xg.forEach(n,function(d){e=d.call(i,e,r)}),e},Is,Ju;function zf(){return Ju||(Ju=1,Is=function(e){return!!(e&&e.__CANCEL__)}),Is}var qu=nt,Rs=Zg,Jg=zf(),qg=vl,e0=za();function Ms(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new e0}var t0=function(e){Ms(e),e.headers=e.headers||{},e.data=Rs.call(e,e.data,e.headers,e.transformRequest),e.headers=qu.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),qu.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||qg.adapter;return r(e).then(function(i){return Ms(e),i.data=Rs.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Jg(i)||(Ms(e),i&&i.response&&(i.response.data=Rs.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Et=nt,Yf=function(e,r){r=r||{};var n={};function i(b,B){return Et.isPlainObject(b)&&Et.isPlainObject(B)?Et.merge(b,B):Et.isPlainObject(B)?Et.merge({},B):Et.isArray(B)?B.slice():B}function a(b){if(Et.isUndefined(r[b])){if(!Et.isUndefined(e[b]))return i(void 0,e[b])}else return i(e[b],r[b])}function d(b){if(!Et.isUndefined(r[b]))return i(void 0,r[b])}function D(b){if(Et.isUndefined(r[b])){if(!Et.isUndefined(e[b]))return i(void 0,e[b])}else return i(void 0,r[b])}function l(b){if(b in r)return i(e[b],r[b]);if(b in e)return i(void 0,e[b])}var w={url:d,method:d,data:d,baseURL:D,transformRequest:D,transformResponse:D,paramsSerializer:D,timeout:D,timeoutMessage:D,withCredentials:D,adapter:D,responseType:D,xsrfCookieName:D,xsrfHeaderName:D,onUploadProgress:D,onDownloadProgress:D,decompress:D,maxContentLength:D,maxBodyLength:D,beforeRedirect:D,transport:D,httpAgent:D,httpsAgent:D,cancelToken:D,socketPath:D,responseEncoding:D,validateStatus:l};return Et.forEach(Object.keys(e).concat(Object.keys(r)),function(B){var O=w[B]||a,$=O(B);Et.isUndefined($)&&O!==l||(n[B]=$)}),n},ks,ec;function Xf(){return ec||(ec=1,ks={version:"0.27.2"}),ks}var r0=Xf().version,Dr=Yn,pl={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){pl[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var tc={};pl.transitional=function(e,r,n){function i(a,d){return"[Axios v"+r0+"] Transitional option '"+a+"'"+d+(n?". "+n:"")}return function(a,d,D){if(e===!1)throw new Dr(i(d," has been removed"+(r?" in "+r:"")),Dr.ERR_DEPRECATED);return r&&!tc[d]&&(tc[d]=!0,console.warn(i(d," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,d,D):!0}};function n0(t,e,r){if(typeof t!="object")throw new Dr("options must be an object",Dr.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],d=e[a];if(d){var D=t[a],l=D===void 0||d(D,a,t);if(l!==!0)throw new Dr("option "+a+" must be "+l,Dr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dr("Unknown option "+a,Dr.ERR_BAD_OPTION)}}var i0={assertOptions:n0,validators:pl},Qf=nt,a0=$f,rc=wg,nc=t0,Xa=Yf,s0=Vf,Zf=i0,xn=Zf.validators;function Rn(t){this.defaults=t,this.interceptors={request:new rc,response:new rc}}Rn.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Xa(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Zf.assertOptions(n,{silentJSONParsing:xn.transitional(xn.boolean),forcedJSONParsing:xn.transitional(xn.boolean),clarifyTimeoutError:xn.transitional(xn.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(r)===!1||(a=a&&$.synchronous,i.unshift($.fulfilled,$.rejected))});var d=[];this.interceptors.response.forEach(function($){d.push($.fulfilled,$.rejected)});var D;if(!a){var l=[nc,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(d),D=Promise.resolve(r);l.length;)D=D.then(l.shift(),l.shift());return D}for(var w=r;i.length;){var b=i.shift(),B=i.shift();try{w=b(w)}catch(O){B(O);break}}try{D=nc(w)}catch(O){return Promise.reject(O)}for(;d.length;)D=D.then(d.shift(),d.shift());return D};Rn.prototype.getUri=function(e){e=Xa(this.defaults,e);var r=s0(e.baseURL,e.url);return a0(r,e.params,e.paramsSerializer)};Qf.forEach(["delete","get","head","options"],function(e){Rn.prototype[e]=function(r,n){return this.request(Xa(n||{},{method:e,url:r,data:(n||{}).data}))}});Qf.forEach(["post","put","patch"],function(e){function r(n){return function(a,d,D){return this.request(Xa(D||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:d}))}}Rn.prototype[e]=r(),Rn.prototype[e+"Form"]=r(!0)});var o0=Rn,Fs,ic;function l0(){if(ic)return Fs;ic=1;var t=za();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(d){n=d});var i=this;this.promise.then(function(a){if(!!i._listeners){var d,D=i._listeners.length;for(d=0;d<D;d++)i._listeners[d](a);i._listeners=null}}),this.promise.then=function(a){var d,D=new Promise(function(l){i.subscribe(l),d=l}).then(a);return D.cancel=function(){i.unsubscribe(d)},D},r(function(d){i.reason||(i.reason=new t(d),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(d){n=d});return{token:i,cancel:n}},Fs=e,Fs}var Ns,ac;function u0(){return ac||(ac=1,Ns=function(e){return function(n){return e.apply(null,n)}}),Ns}var Bs,sc;function c0(){if(sc)return Bs;sc=1;var t=nt;return Bs=function(r){return t.isObject(r)&&r.isAxiosError===!0},Bs}var oc=nt,f0=Nf,na=o0,d0=Yf,h0=vl;function Jf(t){var e=new na(t),r=f0(na.prototype.request,e);return oc.extend(r,na.prototype,e),oc.extend(r,e),r.create=function(i){return Jf(d0(t,i))},r}var gt=Jf(h0);gt.Axios=na;gt.CanceledError=za();gt.CancelToken=l0();gt.isCancel=zf();gt.VERSION=Xf().version;gt.toFormData=Gf;gt.AxiosError=Yn;gt.Cancel=gt.CanceledError;gt.all=function(e){return Promise.all(e)};gt.spread=u0();gt.isAxiosError=c0();ll.exports=gt;ll.exports.default=gt;(function(t){t.exports=ll.exports})(Ff);const _o=kf(Ff.exports),v0="https://service.radiolise.com",qf="https://nl1.api.radio-browser.info/json";let zi;async function ml(t){return(await _o(t)).data}function ed(t,e){return ml({baseURL:v0,url:t,...e})}async function p0(){return(await ml({baseURL:qf,url:"/servers"})).map(e=>`https://${e.name}/json`)}async function m0(){const t=await p0();return t[Math.floor(Math.random()*t.length)]}async function g0(){zi===void 0&&(zi=m0());try{return await zi}catch{return zi=void 0,qf}}async function pn(t,e){return ml({baseURL:await g0(),url:t,...e})}function y0(t){return ed("/convert-ids/",{params:{ids:t.join(",")}})}function _0(){return pn("/countries")}function E0(t){return pn(`/states/${t}/`)}function T0(){return pn("/languages")}function S0(t){const{stationId:e,cancelToken:r}=t;return pn(`/url/${e}`,{cancelToken:r})}function x0(t){const{searchEntries:e,cancelToken:r}=t;return pn("/stations/search",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:new URLSearchParams(e).toString(),cancelToken:r})}function b0(t){const{url:e,cancelToken:r}=t;return ed("/",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:new URLSearchParams({url:e}).toString(),cancelToken:r,timeout:5e4})}function C0(t){return pn(`/vote/${t}`)}async function L0(t){const e=await pn(`/stations/byuuid/${t}`);if(e.length===0)throw new Error("Unable to fetch vote number: Station not found.");return e[0].votes}const pr={CancelToken:_o.CancelToken,isCancel:_o.isCancel};function D0(t){const e=Object.values(t.lists).flatMap(r=>r.map(n=>n.id)).reduce((r,n)=>(r.includes(n)||r.push(n),r),t.likes);return y0(e)}async function A0(t){var a,d;const{lists:e,settings:r,titles:n}=t,i=await D0(t);return{version:"2",lists:Object.entries(e).map(([D,l])=>({name:D,content:l.map(w=>({...w,id:i[w.id]}))})),settings:{theme:"candy",colorScheme:"auto",visualization:r.visualization,relax:r.relax,relaxTimeout:r["relax-timeout"],sleep:mi.sleep,sleepTimeout:mi.sleepTimeout,changecolor:(a=r.changecolor)!=null?a:r.theme===3,volume:r.volume,loadpolicy:r.loadpolicy,language:r.language},titles:n,lastStation:(d=localStorage.lastStation)!=null?d:null,lastList:0,cache:{}}}function O0(t){if(t)try{return JSON.parse(localStorage.data).version!==gi.version}catch{return!1}return!1}async function w0(){if(navigator.serviceWorker!==void 0){const t=await navigator.serviceWorker.getRegistrations();for(const e of t)e.unregister()}}async function P0(t,e){if(t){const r=JSON.parse(localStorage.data);return e?(w0(),A0(r)):r}return gi}const td="data"in localStorage,rd=O0(td);async function I0(){var e,r;const t=await P0(td,rd);return(r=(e=t.settings).defaultPlaylistFormat)!=null||(e.defaultPlaylistFormat=mi.defaultPlaylistFormat),t}const R0="modulepreload",M0=function(t,e){return new URL(t,e).href},lc={},yi=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=M0(a,n),a in lc)return;lc[a]=!0;const d=a.endsWith(".css"),D=d?'[rel="stylesheet"]':"";if(!!n)for(let b=i.length-1;b>=0;b--){const B=i[b];if(B.href===a&&(!d||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${D}`))return;const w=document.createElement("link");if(w.rel=d?"stylesheet":R0,d||(w.as="script",w.crossOrigin=""),w.href=a,document.head.appendChild(w),d)return new Promise((b,B)=>{w.addEventListener("load",b),w.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())};function k0(t){switch(t){case"txt":return"application/x-yaml";case"pls":return"audio/x-scpls";case"m3u":return"audio/mpegurl";case"xspf":return"application/xspf+xml";default:throw new Error("MIME type resolution failed: Unknown type")}}async function nd(t){return(await yi(()=>import("./index.a3ca5ec5.js"),[],import.meta.url)).stringify(t)}async function Qa({name:t,type:e,output:r}){const n=k0(e),i=`${t.replace(/ /g,"_")}_${Date.now()}.${e}`,{default:a}=await yi(()=>import("./FileSaver.min.e0201162.js").then(d=>d.F),[],import.meta.url);a.saveAs(new Blob([r],{type:n}),i)}var F0=Object.defineProperty,N0=Object.getOwnPropertyDescriptor,id=(t,e,r,n)=>{for(var i=n>1?void 0:n?N0(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&F0(e,r,i),i};let Ta=class extends ae{constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"failed",!1);V(this,"showMessages",!1);V(this,"init")}created(){document.body.classList.remove("bg-brand"),document.body.classList.add("bg-default")}async mounted(){rd&&(this.showMessages=!0);try{this.startup(await I0())}catch{this.failed=!0}}startup(e){this.showMessages=!1,this.init(e)}get message(){return this.showMessages?`Upgrading ${this.appTitle}, please wait...`:""}download(){Qa({name:"MemoryDataCopy",type:"txt",output:localStorage.data})}reset(){const e=`Important!

By proceeding, all save data \u2013 including station lists, settings and bookmarks \u2013 will get deleted. This cannot be undone.

Otherwise, you can download a copy of the (possibly corrupted) save data beforehand.`;window.confirm(e)&&this.startup(gi)}};id([se],Ta.prototype,"init",2);Ta=id([fe],Ta);function de(t,e,r,n,i,a,d,D){var l=typeof t=="function"?t.options:t;e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId="data-v-"+a);var w;if(d?(w=function(O){O=O||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!O&&typeof __VUE_SSR_CONTEXT__<"u"&&(O=__VUE_SSR_CONTEXT__),i&&i.call(this,O),O&&O._registeredComponents&&O._registeredComponents.add(d)},l._ssrRegister=w):i&&(w=D?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),w)if(l.functional){l._injectStyles=w;var b=l.render;l.render=function($,F){return w.call(F),b($,F)}}else{var B=l.beforeCreate;l.beforeCreate=B?[].concat(B,w):[w]}return{exports:t,options:l}}var B0=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("transition",{attrs:{"leave-to-class":"pointer-events-none opacity-0"}},[r("div",{staticClass:"fixed left-0 top-0 z-30 h-full w-full bg-brand transition-opacity duration-2000"},[r("div",{staticClass:"h-full w-full bg-logo bg-center bg-no-repeat text-center text-white"},[e.failed?r("div",[r("h1",[e._v("Guru Meditation")]),r("p",{staticClass:"my-4 py-2.5"},[e._v(" Unfortunately, storage data could not be loaded."),r("br"),e._v(" Reset "+e._s(e.appTitle)+" to be able to continue using it. ")]),r("button",{on:{click:function(n){return e.download()}}},[e._v("Save data for troubleshooting")]),r("br"),r("br"),r("button",{on:{click:function(n){return e.reset()}}},[e._v("Reset "+e._s(e.appTitle))])]):r("div",[e.message?r("h1",[e._v(e._s(e.message))]):e._e()])])])])},U0=[],$0=de(Ta,B0,U0,!1,null,null,null,null);const K0=$0.exports;var W0=Object.defineProperty,H0=Object.getOwnPropertyDescriptor,ad=(t,e,r,n)=>{for(var i=n>1?void 0:n?H0(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&W0(e,r,i),i};let Sa=class extends ae{constructor(){super(...arguments);V(this,"heights",Array.from({length:10}).fill("0%"));V(this,"interval");V(this,"colorful")}updateHeights(e){for(const r of this.heights.keys())this.$set(this.heights,r,e())}mounted(){this.interval=window.setInterval(()=>{this.updateHeights(()=>`${Math.floor(Math.random()*30)+70}%`)},100)}beforeDestroy(){clearInterval(this.interval)}};ad([Km()],Sa.prototype,"colorful",2);Sa=ad([fe],Sa);var j0=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"fixed bottom-0 flex h-1/2 w-full items-end space-x-[1%] px-[1%]"},e._l(e.heights,function(n,i){return r("div",{key:i,class:["w-full duration-100",e.colorful?"bg-white/10":"bg-black/10 dark:bg-white/10"],style:{height:n}})}),0)},G0=[],V0=de(Sa,j0,G0,!1,null,null,null,null);const z0=V0.exports;var Y0=Object.defineProperty,X0=Object.getOwnPropertyDescriptor,gl=(t,e,r,n)=>{for(var i=n>1?void 0:n?X0(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Y0(e,r,i),i};let _i=class extends ae{constructor(){super(...arguments);V(this,"fontSize",0);V(this,"currentStation");V(this,"currentInfo")}created(){window.addEventListener("resize",this.resizeFont),this.resizeFont()}beforeDestroy(){window.removeEventListener("resize",this.resizeFont)}get name(){var e,r;return(r=(e=this.currentStation)==null?void 0:e.name)!=null?r:""}get info(){var e;return(e=this.currentInfo)!=null?e:""}resizeFont(){this.fontSize=Math.sqrt(window.innerWidth*1.2)}};gl([ie],_i.prototype,"currentStation",2);gl([ie],_i.prototype,"currentInfo",2);_i=gl([fe],_i);var Q0=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("transition",{attrs:{"enter-class":"opacity-0","leave-to-class":"opacity-0",appear:""}},[r("div",{staticClass:"fixed top-0 z-50 flex h-1/2 w-full items-center justify-center overflow-hidden px-[10vw] text-white transition-opacity",style:{fontSize:`${e.fontSize}pt`}},[r("div",{staticClass:"max-w-full text-center"},[r("div",{staticClass:"truncate font-bold"},[e._v(e._s(e.name))]),r("div",{staticClass:"text-[0.9em]"},[e._v(e._s(e.info))])])])])},Z0=[],J0=de(_i,Q0,Z0,!1,null,null,null,null);const q0=J0.exports;var ey=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}})])};const Kr={render:ey,name:"fa-solid-check"};var ty=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248s248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"}})])};const yl={render:ty,name:"fa-solid-ban"};var ry=Object.defineProperty,ny=Object.getOwnPropertyDescriptor,sd=(t,e,r,n)=>{for(var i=n>1?void 0:n?ny(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&ry(e,r,i),i};let xa=class extends ae{constructor(){super(...arguments);V(this,"active")}};sd([_e({type:Boolean,default:!1})],xa.prototype,"active",2);xa=sd([fe],xa);var iy=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("a",e._g({class:["inline-block cursor-pointer rounded-[3px] px-3.75 py-2 text-xl duration-200 hover:text-accent active:bg-accent active:text-white first:icons:-ml-1.25 icons:active:opacity-100",{"font-bold text-accent icons:opacity-100":e.active}]},e.$listeners),[e._t("default")],2)},ay=[],sy=de(xa,iy,ay,!1,null,null,null,null);const Ve=sy.exports;var oy=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 352 512",width:"0.6875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}})])};const _l={render:oy,name:"fa-solid-times"};var ly=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215c-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176c0-97.267-78.716-176-176-176c-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"}})])};const od={render:ly,name:"fa-solid-undo"};var uy=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42s-42-18.804-42-42s18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}})])};const El={render:uy,name:"fa-solid-info-circle"},cy={listName(t){var e;return(e=t.memory.lists[t.memory.lastList])==null?void 0:e.name},currentList(t){var e;return(e=t.memory.lists[t.memory.lastList])==null?void 0:e.content},currentStation(t){return t.memory.lastStation!==null&&t.active?t.memory.lastStation:void 0},selectedList(t){return t.memory.lastList},currentInfo(t){return t.currentInfo},dateFnsLocale(t){var e;return(e=t.dateFnsLocale)!=null?e:void 0},settings(t){return{...t.memory.settings}},colorScheme(t){return t.memory.settings.colorScheme},language(t){return t.memory.settings.language},playing(t){return t.playing},hasVideo(t){return t.hasVideo},fullscreen(t){return t.fullscreen},stickyPlayer(t){return!t.fullscreen&&t.stickyPlayer},volume(t){return t.volume},isPlayerExpanded(t){return t.playerExpanded},lists(t){return t.memory.lists},visualizationActive(t){return t.memory.settings.visualization&&t.playing&&!t.hasVideo||t.relaxed},dragging(t){return t.sortMode.index!==void 0},editing(t){return t.editing},modalOptions(t){return t.messages[0]},loading(t){const{externalPlayback:e}=t.memory.settings;return t.active&&!e&&(!t.playing||!t.bufferFine)},changeColor(t){return t.memory.settings.changecolor||t.relaxed},likes(t){return Object.entries(t.memory.cache).filter(([e,r])=>r.liked).map(([e])=>e)},bookmarks(t){return t.memory.titles.favorites},sortIndex(t){return t.sortMode.index},ready(t){return t.ready},likeState(t){return t.likeState},currentLikeCount(t){var r;const e=t.memory.lastStation;if(e!==null)return(r=t.memory.cache[e.id])==null?void 0:r.likeCount}},fy={INITIALIZE(t,e){t.memory=e,t.volume=e.settings.volume/100,t.ready=!0},SET_EDITING_REF(t,e){t.editing=e},UPDATE_STATION(t,e){Object.assign(t.editing,e)},SET_LISTS(t,e){t.memory.lists=e},PUSH_LIST(t,e){t.memory.lists.push(e)},SET_LIST_NAME(t,{index:e,name:r}){t.memory.lists[e].name=r},SET_LIST_CONTENT(t,{index:e,content:r}){t.memory.lists[e].content=r},SET_SEARCH_STATS(t,e){t.searchStats=e},SET_SELECTED_LIST(t,e){e<0&&(e+=t.memory.lists.length),t.memory.lastList=e},REMOVE_LIST({memory:t},e){t.lists.splice(e,1)},SET_SETTINGS({memory:t},e){t.settings=e},SET_CACHE_ITEM({memory:t},e){t.cache={...t.cache,...e}},SET_BOOKMARKS(t,e){t.memory.titles.favorites=e},SET_STATION_HUE(t,{station:e,hue:r}){Object.assign(e,{hue:r})},SET_PLAYER_EXPANDED(t,e){t.playerExpanded=e},SET_LAST_STATION(t,e){t.memory.lastStation=e},SET_ACTIVE(t,e){t.active=e},SET_HAS_VIDEO(t,e){t.hasVideo=e},SET_FULLSCREEN(t,e){t.fullscreen=e},SET_VOLUME(t,e){t.volume=e},PUSH_MESSAGE(t,e){t.messages.push(e)},SHIFT_MESSAGES(t){t.messages.shift()},SET_TOAST(t,e){t.toast=e},SET_PLAYING(t,e){t.playing=e},SET_RELAXED(t,e){t.relaxed=e},SET_FELL_ASLEEP(t,e){t.fellAsleep=e},SET_BUFFER_FINE(t,e){t.bufferFine=e},SET_STICKY_PLAYER(t,e){t.stickyPlayer=e},SET_CURRENT_INFO(t,e){t.currentInfo=e},SET_HISTORY(t,e){t.memory.titles.history=e},PUSH_BOOKMARK(t,e){t.memory.titles.favorites.push(e)},REMOVE_BOOKMARK(t,e){t.memory.titles.favorites.splice(e,1)},SET_UNDOABLE_EVENT(t,e){t.undoableEvent=e},SET_STATION_BACKUP(t,e){t.stationBackup=e},SET_SORT_INDEX(t,e){t.sortMode.index=e},SET_DARK_MODE(t,e){t.darkMode=e},SET_LIKE_STATE(t,e){t.likeState=e},SET_ENTER_KEY_ALLOWED(t,e){t.enterKeyAllowed=e},SET_DATE_FNS_LOCALE(t,e){t.dateFnsLocale=e},SET_DIALOG(t,e){t.currentDialog=e},SET_NAVBAR_SHOWN(t,e){t.navbarShown=e}};var ld=200,Tl="__lodash_hash_undefined__",dy=1/0,hy=9007199254740991,vy="[object Function]",py="[object GeneratorFunction]",my=/[\\^$.*+?()[\]{}|]/g,gy=/^\[object .+?Constructor\]$/,yy=typeof On=="object"&&On&&On.Object===Object&&On,_y=typeof self=="object"&&self&&self.Object===Object&&self,Sl=yy||_y||Function("return this")();function Ey(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ty(t,e){for(var r=-1,n=t?t.length:0,i=0,a=[];++r<n;){var d=t[r];e(d,r,t)&&(a[i++]=d)}return a}function ud(t,e){var r=t?t.length:0;return!!r&&Cy(t,e,0)>-1}function cd(t,e,r){for(var n=-1,i=t?t.length:0;++n<i;)if(r(e,t[n]))return!0;return!1}function Sy(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function xy(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function by(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Cy(t,e,r){if(e!==e)return by(t,Ly,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function Ly(t){return t!==t}function Dy(t){return function(e){return t(e)}}function fd(t,e){return t.has(e)}function Ay(t,e){return t==null?void 0:t[e]}function Oy(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function dd(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var wy=Array.prototype,Py=Function.prototype,hd=Object.prototype,Us=Sl["__core-js_shared__"],uc=function(){var t=/[^.]+$/.exec(Us&&Us.keys&&Us.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vd=Py.toString,xl=hd.hasOwnProperty,Iy=hd.toString,Ry=RegExp("^"+vd.call(xl).replace(my,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),My=wy.splice,cc=Math.max,ky=bl(Sl,"Map"),$s=bl(Sl,"Set"),Ei=bl(Object,"create");function sn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Fy(){this.__data__=Ei?Ei(null):{}}function Ny(t){return this.has(t)&&delete this.__data__[t]}function By(t){var e=this.__data__;if(Ei){var r=e[t];return r===Tl?void 0:r}return xl.call(e,t)?e[t]:void 0}function Uy(t){var e=this.__data__;return Ei?e[t]!==void 0:xl.call(e,t)}function $y(t,e){var r=this.__data__;return r[t]=Ei&&e===void 0?Tl:e,this}sn.prototype.clear=Fy;sn.prototype.delete=Ny;sn.prototype.get=By;sn.prototype.has=Uy;sn.prototype.set=$y;function Xn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ky(){this.__data__=[]}function Wy(t){var e=this.__data__,r=Za(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():My.call(e,r,1),!0}function Hy(t){var e=this.__data__,r=Za(e,t);return r<0?void 0:e[r][1]}function jy(t){return Za(this.__data__,t)>-1}function Gy(t,e){var r=this.__data__,n=Za(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Xn.prototype.clear=Ky;Xn.prototype.delete=Wy;Xn.prototype.get=Hy;Xn.prototype.has=jy;Xn.prototype.set=Gy;function Qn(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Vy(){this.__data__={hash:new sn,map:new(ky||Xn),string:new sn}}function zy(t){return Ja(this,t).delete(t)}function Yy(t){return Ja(this,t).get(t)}function Xy(t){return Ja(this,t).has(t)}function Qy(t,e){return Ja(this,t).set(t,e),this}Qn.prototype.clear=Vy;Qn.prototype.delete=zy;Qn.prototype.get=Yy;Qn.prototype.has=Xy;Qn.prototype.set=Qy;function Ti(t){var e=-1,r=t?t.length:0;for(this.__data__=new Qn;++e<r;)this.add(t[e])}function Zy(t){return this.__data__.set(t,Tl),this}function Jy(t){return this.__data__.has(t)}Ti.prototype.add=Ti.prototype.push=Zy;Ti.prototype.has=Jy;function Za(t,e){for(var r=t.length;r--;)if(u_(t[r][0],e))return r;return-1}function fc(t,e,r,n){var i=-1,a=ud,d=!0,D=t.length,l=[],w=e.length;if(!D)return l;r&&(e=Sy(e,Dy(r))),n?(a=cd,d=!1):e.length>=ld&&(a=fd,d=!1,e=new Ti(e));e:for(;++i<D;){var b=t[i],B=r?r(b):b;if(b=n||b!==0?b:0,d&&B===B){for(var O=w;O--;)if(e[O]===B)continue e;l.push(b)}else a(e,B,n)||l.push(b)}return l}function qy(t){if(!md(t)||a_(t))return!1;var e=pd(t)||Oy(t)?Ry:gy;return e.test(s_(t))}function e_(t,e){return e=cc(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=cc(r.length-e,0),a=Array(i);++n<i;)a[n]=r[e+n];n=-1;for(var d=Array(e+1);++n<e;)d[n]=r[n];return d[e]=a,Ey(t,this,d)}}function t_(t,e,r){var n=-1,i=ud,a=t.length,d=!0,D=[],l=D;if(r)d=!1,i=cd;else if(a>=ld){var w=e?null:n_(t);if(w)return dd(w);d=!1,i=fd,l=new Ti}else l=e?[]:D;e:for(;++n<a;){var b=t[n],B=e?e(b):b;if(b=r||b!==0?b:0,d&&B===B){for(var O=l.length;O--;)if(l[O]===B)continue e;e&&l.push(B),D.push(b)}else i(l,B,r)||(l!==D&&l.push(B),D.push(b))}return D}function r_(t,e,r){for(var n=-1,i=t.length;++n<i;)var a=a?xy(fc(a,t[n],e,r),fc(t[n],a,e,r)):t[n];return a&&a.length?t_(a,e,r):[]}var n_=$s&&1/dd(new $s([,-0]))[1]==dy?function(t){return new $s(t)}:h_;function Ja(t,e){var r=t.__data__;return i_(e)?r[typeof e=="string"?"string":"hash"]:r.map}function bl(t,e){var r=Ay(t,e);return qy(r)?r:void 0}function i_(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function a_(t){return!!uc&&uc in t}function s_(t){if(t!=null){try{return vd.call(t)}catch{}try{return t+""}catch{}}return""}function o_(t){var e=t?t.length:0;return e?t[e-1]:void 0}var l_=e_(function(t){var e=o_(t);return dc(e)&&(e=void 0),r_(Ty(t,dc),void 0,e)});function u_(t,e){return t===e||t!==t&&e!==e}function c_(t){return t!=null&&f_(t.length)&&!pd(t)}function dc(t){return d_(t)&&c_(t)}function pd(t){var e=md(t)?Iy.call(t):"";return e==vy||e==py}function f_(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hy}function md(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function d_(t){return!!t&&typeof t=="object"}function h_(){}var v_=l_;const hc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],dr=(()=>{if(typeof document>"u")return!1;const t=hc[0],e={};for(const r of hc)if((r==null?void 0:r[1])in document){for(const[i,a]of r.entries())e[t[i]]=a;return e}return!1})(),vc={change:dr.fullscreenchange,error:dr.fullscreenerror};let Tt={request(t=document.documentElement,e){return new Promise((r,n)=>{const i=()=>{Tt.off("change",i),r()};Tt.on("change",i);const a=t[dr.requestFullscreen](e);a instanceof Promise&&a.then(i).catch(n)})},exit(){return new Promise((t,e)=>{if(!Tt.isFullscreen){t();return}const r=()=>{Tt.off("change",r),t()};Tt.on("change",r);const n=document[dr.exitFullscreen]();n instanceof Promise&&n.then(r).catch(e)})},toggle(t,e){return Tt.isFullscreen?Tt.exit():Tt.request(t,e)},onchange(t){Tt.on("change",t)},onerror(t){Tt.on("error",t)},on(t,e){const r=vc[t];r&&document.addEventListener(r,e,!1)},off(t,e){const r=vc[t];r&&document.removeEventListener(r,e,!1)},raw:dr};Object.defineProperties(Tt,{isFullscreen:{get:()=>Boolean(document[dr.fullscreenElement])},element:{enumerable:!0,get:()=>{var t;return(t=document[dr.fullscreenElement])!=null?t:void 0}},isEnabled:{enumerable:!0,get:()=>Boolean(document[dr.fullscreenEnabled])}});dr||(Tt={isEnabled:!1});const ba=Tt;/*!
 * vue-i18n v8.28.2 
 * (c) 2022 kazuya kawaguchi
 * Released under the MIT License.
 */var gd=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],p_=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Mn(t,e){typeof console<"u"&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function m_(t,e){typeof console<"u"&&(console.error("[vue-i18n] "+t),e&&console.error(e.stack))}var ar=Array.isArray;function kt(t){return t!==null&&typeof t=="object"}function g_(t){return typeof t=="boolean"}function et(t){return typeof t=="string"}var y_=Object.prototype.toString,__="[object Object]";function ir(t){return y_.call(t)===__}function pt(t){return t==null}function Eo(t){return typeof t=="function"}function qa(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=null,n=null;return t.length===1?kt(t[0])||ar(t[0])?n=t[0]:typeof t[0]=="string"&&(r=t[0]):t.length===2&&(typeof t[0]=="string"&&(r=t[0]),(kt(t[1])||ar(t[1]))&&(n=t[1])),{locale:r,params:n}}function Zn(t){return JSON.parse(JSON.stringify(t))}function E_(t,e){if(t.delete(e))return t}function T_(t){var e=[];return t.forEach(function(r){return e.push(r)}),e}function Pi(t,e){return!!~t.indexOf(e)}var S_=Object.prototype.hasOwnProperty;function x_(t,e){return S_.call(t,e)}function qr(t){for(var e=arguments,r=Object(t),n=1;n<arguments.length;n++){var i=e[n];if(i!=null){var a=void 0;for(a in i)x_(i,a)&&(kt(i[a])?r[a]=qr(r[a],i[a]):r[a]=i[a])}}return r}function Ca(t,e){if(t===e)return!0;var r=kt(t),n=kt(e);if(r&&n)try{var i=ar(t),a=ar(e);if(i&&a)return t.length===e.length&&t.every(function(l,w){return Ca(l,e[w])});if(!i&&!a){var d=Object.keys(t),D=Object.keys(e);return d.length===D.length&&d.every(function(l){return Ca(t[l],e[l])})}else return!1}catch{return!1}else return!r&&!n?String(t)===String(e):!1}function b_(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function C_(t){return t!=null&&Object.keys(t).forEach(function(e){typeof t[e]=="string"&&(t[e]=b_(t[e]))}),t}function L_(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var i=this.$i18n;return i._t.apply(i,[e,i.locale,i._getMessages(),this].concat(r))},t.prototype.$tc=function(e,r){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];var a=this.$i18n;return a._tc.apply(a,[e,a.locale,a._getMessages(),this,r].concat(n))},t.prototype.$te=function(e,r){var n=this.$i18n;return n._te(e,n.locale,n._getMessages(),r)},t.prototype.$d=function(e){for(var r,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];return(r=this.$i18n).d.apply(r,[e].concat(n))},t.prototype.$n=function(e){for(var r,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];return(r=this.$i18n).n.apply(r,[e].concat(n))}}function D_(t){t===void 0&&(t=!1);function e(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return t?{mounted:e}:{beforeCreate:function(){var n=this.$options;if(n.i18n=n.i18n||(n.__i18nBridge||n.__i18n?{}:null),n.i18n){if(n.i18n instanceof le){if(n.__i18nBridge||n.__i18n)try{var i=n.i18n&&n.i18n.messages?n.i18n.messages:{},a=n.__i18nBridge||n.__i18n;a.forEach(function(B){i=qr(i,JSON.parse(B))}),Object.keys(i).forEach(function(B){n.i18n.mergeLocaleMessage(B,i[B])})}catch{}this._i18n=n.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(ir(n.i18n)){var d=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le?this.$root.$i18n:null;if(d&&(n.i18n.root=this.$root,n.i18n.formatter=d.formatter,n.i18n.fallbackLocale=d.fallbackLocale,n.i18n.formatFallbackMessages=d.formatFallbackMessages,n.i18n.silentTranslationWarn=d.silentTranslationWarn,n.i18n.silentFallbackWarn=d.silentFallbackWarn,n.i18n.pluralizationRules=d.pluralizationRules,n.i18n.preserveDirectiveContent=d.preserveDirectiveContent),n.__i18nBridge||n.__i18n)try{var D=n.i18n&&n.i18n.messages?n.i18n.messages:{},l=n.__i18nBridge||n.__i18n;l.forEach(function(B){D=qr(D,JSON.parse(B))}),n.i18n.messages=D}catch{}var w=n.i18n,b=w.sharedMessages;b&&ir(b)&&(n.i18n.messages=qr(n.i18n.messages,b)),this._i18n=new le(n.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(n.i18n.sync===void 0||!!n.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),d&&d.onComponentInstanceCreated(this._i18n)}}else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le?this._i18n=this.$root.$i18n:n.parent&&n.parent.$i18n&&n.parent.$i18n instanceof le&&(this._i18n=n.parent.$i18n)},beforeMount:function(){var n=this.$options;n.i18n=n.i18n||(n.__i18nBridge||n.__i18n?{}:null),n.i18n?n.i18n instanceof le?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):ir(n.i18n)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):n.parent&&n.parent.$i18n&&n.parent.$i18n instanceof le&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:e,beforeDestroy:function(){if(!!this._i18n){var n=this;this.$nextTick(function(){n._subscribing&&(n._i18n.unsubscribeDataChanging(n),delete n._subscribing),n._i18nWatcher&&(n._i18nWatcher(),n._i18n.destroyVM(),delete n._i18nWatcher),n._localeWatcher&&(n._localeWatcher(),delete n._localeWatcher)})}}}}var pc={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,r){var n=r.data,i=r.parent,a=r.props,d=r.slots,D=i.$i18n;if(!!D){var l=a.path,w=a.locale,b=a.places,B=d(),O=D.i(l,w,A_(B)||b?O_(B.default,b):B),$=!!a.tag&&a.tag!==!0||a.tag===!1?a.tag:"span";return $?e($,n,O):O}}};function A_(t){var e;for(e in t)if(e!=="default")return!1;return Boolean(e)}function O_(t,e){var r=e?w_(e):{};if(!t)return r;t=t.filter(function(i){return i.tag||i.text.trim()!==""});var n=t.every(I_);return t.reduce(n?P_:yd,r)}function w_(t){return Array.isArray(t)?t.reduce(yd,{}):Object.assign({},t)}function P_(t,e){return e.data&&e.data.attrs&&e.data.attrs.place&&(t[e.data.attrs.place]=e),t}function yd(t,e,r){return t[r]=e,t}function I_(t){return Boolean(t.data&&t.data.attrs&&t.data.attrs.place)}var mc={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(e,r){var n=r.props,i=r.parent,a=r.data,d=i.$i18n;if(!d)return null;var D=null,l=null;et(n.format)?D=n.format:kt(n.format)&&(n.format.key&&(D=n.format.key),l=Object.keys(n.format).reduce(function($,F){var k;return Pi(gd,F)?Object.assign({},$,(k={},k[F]=n.format[F],k)):$},null));var w=n.locale||d.locale,b=d._ntp(n.value,w,D,l),B=b.map(function($,F){var k,M=a.scopedSlots&&a.scopedSlots[$.type];return M?M((k={},k[$.type]=$.value,k.index=F,k.parts=b,k)):$.value}),O=!!n.tag&&n.tag!==!0||n.tag===!1?n.tag:"span";return O?e(O,{attrs:a.attrs,class:a.class,staticClass:a.staticClass},B):B}};function R_(t,e,r){!_d(t,r)||Ed(t,e,r)}function M_(t,e,r,n){if(!!_d(t,r)){var i=r.context.$i18n;F_(t,r)&&Ca(e.value,e.oldValue)&&Ca(t._localeMessage,i.getLocaleMessage(i.locale))||Ed(t,e,r)}}function k_(t,e,r,n){var i=r.context;if(!i){Mn("Vue instance does not exists in VNode context");return}var a=r.context.$i18n||{};!e.modifiers.preserve&&!a.preserveDirectiveContent&&(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}function _d(t,e){var r=e.context;return r?r.$i18n?!0:(Mn("VueI18n instance does not exists in Vue instance"),!1):(Mn("Vue instance does not exists in VNode context"),!1)}function F_(t,e){var r=e.context;return t._locale===r.$i18n.locale}function Ed(t,e,r){var n,i,a=e.value,d=N_(a),D=d.path,l=d.locale,w=d.args,b=d.choice;if(!D&&!l&&!w){Mn("value type not supported");return}if(!D){Mn("`path` is required in v-t directive");return}var B=r.context;b!=null?t._vt=t.textContent=(n=B.$i18n).tc.apply(n,[D,b].concat(gc(l,w))):t._vt=t.textContent=(i=B.$i18n).t.apply(i,[D].concat(gc(l,w))),t._locale=B.$i18n.locale,t._localeMessage=B.$i18n.getLocaleMessage(B.$i18n.locale)}function N_(t){var e,r,n,i;return et(t)?e=t:ir(t)&&(e=t.path,r=t.locale,n=t.args,i=t.choice),{path:e,locale:r,args:n,choice:i}}function gc(t,e){var r=[];return t&&r.push(t),e&&(Array.isArray(e)||ir(e))&&r.push(e),r}var st;function Cl(t,e){e===void 0&&(e={bridge:!1}),Cl.installed=!0,st=t,st.version&&Number(st.version.split(".")[0]),L_(st),st.mixin(D_(e.bridge)),st.directive("t",{bind:R_,update:M_,unbind:k_}),st.component(pc.name,pc),st.component(mc.name,mc);var r=st.config.optionMergeStrategies;r.i18n=function(n,i){return i===void 0?n:i}}var Td=function(){this._caches=Object.create(null)};Td.prototype.interpolate=function(e,r){if(!r)return[e];var n=this._caches[e];return n||(n=$_(e),this._caches[e]=n),K_(n,r)};var B_=/^(?:\d)+/,U_=/^(?:\w)+/;function $_(t){for(var e=[],r=0,n="";r<t.length;){var i=t[r++];if(i==="{"){n&&e.push({type:"text",value:n}),n="";var a="";for(i=t[r++];i!==void 0&&i!=="}";)a+=i,i=t[r++];var d=i==="}",D=B_.test(a)?"list":d&&U_.test(a)?"named":"unknown";e.push({value:a,type:D})}else i==="%"?t[r]!=="{"&&(n+=i):n+=i}return n&&e.push({type:"text",value:n}),e}function K_(t,e){var r=[],n=0,i=Array.isArray(e)?"list":kt(e)?"named":"unknown";if(i==="unknown")return r;for(;n<t.length;){var a=t[n];switch(a.type){case"text":r.push(a.value);break;case"list":r.push(e[parseInt(a.value,10)]);break;case"named":i==="named"&&r.push(e[a.value]);break}n++}return r}var qe=0,wn=1,Sd=2,xd=3,To=0,La=1,Da=2,Pr=3,hr=4,Aa=5,Oa=6,es=7,Si=8,Wr=[];Wr[To]={ws:[To],ident:[Pr,qe],"[":[hr],eof:[es]};Wr[La]={ws:[La],".":[Da],"[":[hr],eof:[es]};Wr[Da]={ws:[Da],ident:[Pr,qe],0:[Pr,qe],number:[Pr,qe]};Wr[Pr]={ident:[Pr,qe],0:[Pr,qe],number:[Pr,qe],ws:[La,wn],".":[Da,wn],"[":[hr,wn],eof:[es,wn]};Wr[hr]={"'":[Aa,qe],'"':[Oa,qe],"[":[hr,Sd],"]":[La,xd],eof:Si,else:[hr,qe]};Wr[Aa]={"'":[hr,qe],eof:Si,else:[Aa,qe]};Wr[Oa]={'"':[hr,qe],eof:Si,else:[Oa,qe]};var W_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function H_(t){return W_.test(t)}function j_(t){var e=t.charCodeAt(0),r=t.charCodeAt(t.length-1);return e===r&&(e===34||e===39)?t.slice(1,-1):t}function G_(t){if(t==null)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function V_(t){var e=t.trim();return t.charAt(0)==="0"&&isNaN(t)?!1:H_(e)?j_(e):"*"+e}function z_(t){var e=[],r=-1,n=To,i=0,a,d,D,l,w,b,B,O=[];O[wn]=function(){d!==void 0&&(e.push(d),d=void 0)},O[qe]=function(){d===void 0?d=D:d+=D},O[Sd]=function(){O[qe](),i++},O[xd]=function(){if(i>0)i--,n=hr,O[qe]();else{if(i=0,d===void 0||(d=V_(d),d===!1))return!1;O[wn]()}};function $(){var F=t[r+1];if(n===Aa&&F==="'"||n===Oa&&F==='"')return r++,D="\\"+F,O[qe](),!0}for(;n!==null;)if(r++,a=t[r],!(a==="\\"&&$())){if(l=G_(a),B=Wr[n],w=B[l]||B.else||Si,w===Si||(n=w[0],b=O[w[1]],b&&(D=w[2],D=D===void 0?a:D,b()===!1)))return;if(n===es)return e}}var Ll=function(){this._cache=Object.create(null)};Ll.prototype.parsePath=function(e){var r=this._cache[e];return r||(r=z_(e),r&&(this._cache[e]=r)),r||[]};Ll.prototype.getPathValue=function(e,r){if(!kt(e))return null;var n=this.parsePath(r);if(n.length===0)return null;for(var i=n.length,a=e,d=0;d<i;){var D=a[n[d]];if(D==null)return null;a=D,d++}return a};var Y_=/<\/?[\w\s="/.':;#-\/]+>/,X_=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,Q_=/^@(?:\.([a-zA-Z]+))?:/,Z_=/[()]/g,yc={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()},capitalize:function(t){return""+t.charAt(0).toLocaleUpperCase()+t.substr(1)}},So=new Td,le=function(e){var r=this;e===void 0&&(e={}),!st&&typeof window<"u"&&window.Vue&&Cl(window.Vue);var n=e.locale||"en-US",i=e.fallbackLocale===!1?!1:e.fallbackLocale||"en-US",a=e.messages||{},d=e.dateTimeFormats||e.datetimeFormats||{},D=e.numberFormats||{};this._vm=null,this._formatter=e.formatter||So,this._modifiers=e.modifiers||{},this._missing=e.missing||null,this._root=e.root||null,this._sync=e.sync===void 0?!0:!!e.sync,this._fallbackRoot=e.fallbackRoot===void 0?!0:!!e.fallbackRoot,this._fallbackRootWithEmptyString=e.fallbackRootWithEmptyString===void 0?!0:!!e.fallbackRootWithEmptyString,this._formatFallbackMessages=e.formatFallbackMessages===void 0?!1:!!e.formatFallbackMessages,this._silentTranslationWarn=e.silentTranslationWarn===void 0?!1:e.silentTranslationWarn,this._silentFallbackWarn=e.silentFallbackWarn===void 0?!1:!!e.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new Ll,this._dataListeners=new Set,this._componentInstanceCreatedListener=e.componentInstanceCreatedListener||null,this._preserveDirectiveContent=e.preserveDirectiveContent===void 0?!1:!!e.preserveDirectiveContent,this.pluralizationRules=e.pluralizationRules||{},this._warnHtmlInMessage=e.warnHtmlInMessage||"off",this._postTranslation=e.postTranslation||null,this._escapeParameterHtml=e.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in e&&(this.__VUE_I18N_BRIDGE__=e.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(l,w){var b=Object.getPrototypeOf(r);if(b&&b.getChoiceIndex){var B=b.getChoiceIndex;return B.call(r,l,w)}var O=function($,F){return $=Math.abs($),F===2?$?$>1?1:0:1:$?Math.min($,2):0};return r.locale in r.pluralizationRules?r.pluralizationRules[r.locale].apply(r,[l,w]):O(l,w)},this._exist=function(l,w){return!l||!w?!1:!!(!pt(r._path.getPathValue(l,w))||l[w])},(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&Object.keys(a).forEach(function(l){r._checkLocaleMessage(l,r._warnHtmlInMessage,a[l])}),this._initVM({locale:n,fallbackLocale:i,messages:a,dateTimeFormats:d,numberFormats:D})},De={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};le.prototype._checkLocaleMessage=function(e,r,n){var i=[],a=function(d,D,l,w){if(ir(l))Object.keys(l).forEach(function(O){var $=l[O];ir($)?(w.push(O),w.push("."),a(d,D,$,w),w.pop(),w.pop()):(w.push(O),a(d,D,$,w),w.pop())});else if(ar(l))l.forEach(function(O,$){ir(O)?(w.push("["+$+"]"),w.push("."),a(d,D,O,w),w.pop(),w.pop()):(w.push("["+$+"]"),a(d,D,O,w),w.pop())});else if(et(l)){var b=Y_.test(l);if(b){var B="Detected HTML in message '"+l+"' of keypath '"+w.join("")+"' at '"+D+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";d==="warn"?Mn(B):d==="error"&&m_(B)}}};a(r,e,n,i)};le.prototype._initVM=function(e){var r=st.config.silent;st.config.silent=!0,this._vm=new st({data:e,__VUE18N__INSTANCE__:!0}),st.config.silent=r};le.prototype.destroyVM=function(){this._vm.$destroy()};le.prototype.subscribeDataChanging=function(e){this._dataListeners.add(e)};le.prototype.unsubscribeDataChanging=function(e){E_(this._dataListeners,e)};le.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",function(){for(var r=T_(e._dataListeners),n=r.length;n--;)st.nextTick(function(){r[n]&&r[n].$forceUpdate()})},{deep:!0})};le.prototype.watchLocale=function(e){if(e){if(!this.__VUE_I18N_BRIDGE__)return null;var n=this,i=this._vm;return this.vm.$watch("locale",function(a){i.$set(i,"locale",a),n.__VUE_I18N_BRIDGE__&&e&&(e.locale.value=a),i.$forceUpdate()},{immediate:!0})}else{if(!this._sync||!this._root)return null;var r=this._vm;return this._root.$i18n.vm.$watch("locale",function(a){r.$set(r,"locale",a),r.$forceUpdate()},{immediate:!0})}};le.prototype.onComponentInstanceCreated=function(e){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(e,this)};De.vm.get=function(){return this._vm};De.messages.get=function(){return Zn(this._getMessages())};De.dateTimeFormats.get=function(){return Zn(this._getDateTimeFormats())};De.numberFormats.get=function(){return Zn(this._getNumberFormats())};De.availableLocales.get=function(){return Object.keys(this.messages).sort()};De.locale.get=function(){return this._vm.locale};De.locale.set=function(t){this._vm.$set(this._vm,"locale",t)};De.fallbackLocale.get=function(){return this._vm.fallbackLocale};De.fallbackLocale.set=function(t){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",t)};De.formatFallbackMessages.get=function(){return this._formatFallbackMessages};De.formatFallbackMessages.set=function(t){this._formatFallbackMessages=t};De.missing.get=function(){return this._missing};De.missing.set=function(t){this._missing=t};De.formatter.get=function(){return this._formatter};De.formatter.set=function(t){this._formatter=t};De.silentTranslationWarn.get=function(){return this._silentTranslationWarn};De.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t};De.silentFallbackWarn.get=function(){return this._silentFallbackWarn};De.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t};De.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent};De.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t};De.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage};De.warnHtmlInMessage.set=function(t){var e=this,r=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,r!==t&&(t==="warn"||t==="error")){var n=this._getMessages();Object.keys(n).forEach(function(i){e._checkLocaleMessage(i,e._warnHtmlInMessage,n[i])})}};De.postTranslation.get=function(){return this._postTranslation};De.postTranslation.set=function(t){this._postTranslation=t};De.sync.get=function(){return this._sync};De.sync.set=function(t){this._sync=t};le.prototype._getMessages=function(){return this._vm.messages};le.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats};le.prototype._getNumberFormats=function(){return this._vm.numberFormats};le.prototype._warnDefault=function(e,r,n,i,a,d){if(!pt(n))return n;if(this._missing){var D=this._missing.apply(null,[e,r,i,a]);if(et(D))return D}if(this._formatFallbackMessages){var l=qa.apply(void 0,a);return this._render(r,d,l.params,r)}else return r};le.prototype._isFallbackRoot=function(e){return(this._fallbackRootWithEmptyString?!e:pt(e))&&!pt(this._root)&&this._fallbackRoot};le.prototype._isSilentFallbackWarn=function(e){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(e):this._silentFallbackWarn};le.prototype._isSilentFallback=function(e,r){return this._isSilentFallbackWarn(r)&&(this._isFallbackRoot()||e!==this.fallbackLocale)};le.prototype._isSilentTranslationWarn=function(e){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(e):this._silentTranslationWarn};le.prototype._interpolate=function(e,r,n,i,a,d,D){if(!r)return null;var l=this._path.getPathValue(r,n);if(ar(l)||ir(l))return l;var w;if(pt(l))if(ir(r)){if(w=r[n],!(et(w)||Eo(w)))return null}else return null;else if(et(l)||Eo(l))w=l;else return null;return et(w)&&(w.indexOf("@:")>=0||w.indexOf("@.")>=0)&&(w=this._link(e,r,w,i,"raw",d,D)),this._render(w,a,d,n)};le.prototype._link=function(e,r,n,i,a,d,D){var l=n,w=l.match(X_);for(var b in w)if(!!w.hasOwnProperty(b)){var B=w[b],O=B.match(Q_),$=O[0],F=O[1],k=B.replace($,"").replace(Z_,"");if(Pi(D,k))return l;D.push(k);var M=this._interpolate(e,r,k,i,a==="raw"?"string":a,a==="raw"?void 0:d,D);if(this._isFallbackRoot(M)){if(!this._root)throw Error("unexpected error");var I=this._root.$i18n;M=I._translate(I._getMessages(),I.locale,I.fallbackLocale,k,i,a,d)}M=this._warnDefault(e,k,M,i,ar(d)?d:[d],a),this._modifiers.hasOwnProperty(F)?M=this._modifiers[F](M):yc.hasOwnProperty(F)&&(M=yc[F](M)),D.pop(),l=M?l.replace(B,M):l}return l};le.prototype._createMessageContext=function(e,r,n,i){var a=this,d=ar(e)?e:[],D=kt(e)?e:{},l=function(O){return d[O]},w=function(O){return D[O]},b=this._getMessages(),B=this.locale;return{list:l,named:w,values:e,formatter:r,path:n,messages:b,locale:B,linked:function(O){return a._interpolate(B,b[B]||{},O,null,i,void 0,[O])}}};le.prototype._render=function(e,r,n,i){if(Eo(e))return e(this._createMessageContext(n,this._formatter||So,i,r));var a=this._formatter.interpolate(e,n,i);return a||(a=So.interpolate(e,n,i)),r==="string"&&!et(a)?a.join(""):a};le.prototype._appendItemToChain=function(e,r,n){var i=!1;return Pi(e,r)||(i=!0,r&&(i=r[r.length-1]!=="!",r=r.replace(/!/g,""),e.push(r),n&&n[r]&&(i=n[r]))),i};le.prototype._appendLocaleToChain=function(e,r,n){var i,a=r.split("-");do{var d=a.join("-");i=this._appendItemToChain(e,d,n),a.splice(-1,1)}while(a.length&&i===!0);return i};le.prototype._appendBlockToChain=function(e,r,n){for(var i=!0,a=0;a<r.length&&g_(i);a++){var d=r[a];et(d)&&(i=this._appendLocaleToChain(e,d,n))}return i};le.prototype._getLocaleChain=function(e,r){if(e==="")return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[e];if(!n){r||(r=this.fallbackLocale),n=[];for(var i=[e];ar(i);)i=this._appendBlockToChain(n,i,r);var a;ar(r)?a=r:kt(r)?r.default?a=r.default:a=null:a=r,et(a)?i=[a]:i=a,i&&this._appendBlockToChain(n,i,null),this._localeChainCache[e]=n}return n};le.prototype._translate=function(e,r,n,i,a,d,D){for(var l=this._getLocaleChain(r,n),w,b=0;b<l.length;b++){var B=l[b];if(w=this._interpolate(B,e[B],i,a,d,D,[i]),!pt(w))return w}return null};le.prototype._t=function(e,r,n,i){for(var a,d=[],D=arguments.length-4;D-- >0;)d[D]=arguments[D+4];if(!e)return"";var l=qa.apply(void 0,d);this._escapeParameterHtml&&(l.params=C_(l.params));var w=l.locale||r,b=this._translate(n,w,this.fallbackLocale,e,i,"string",l.params);if(this._isFallbackRoot(b)){if(!this._root)throw Error("unexpected error");return(a=this._root).$t.apply(a,[e].concat(d))}else return b=this._warnDefault(w,e,b,i,d,"string"),this._postTranslation&&b!==null&&b!==void 0&&(b=this._postTranslation(b,e)),b};le.prototype.t=function(e){for(var r,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];return(r=this)._t.apply(r,[e,this.locale,this._getMessages(),null].concat(n))};le.prototype._i=function(e,r,n,i,a){var d=this._translate(n,r,this.fallbackLocale,e,i,"raw",a);if(this._isFallbackRoot(d)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(e,r,a)}else return this._warnDefault(r,e,d,i,[a],"raw")};le.prototype.i=function(e,r,n){return e?(et(r)||(r=this.locale),this._i(e,r,this._getMessages(),null,n)):""};le.prototype._tc=function(e,r,n,i,a){for(var d,D=[],l=arguments.length-5;l-- >0;)D[l]=arguments[l+5];if(!e)return"";a===void 0&&(a=1);var w={count:a,n:a},b=qa.apply(void 0,D);return b.params=Object.assign(w,b.params),D=b.locale===null?[b.params]:[b.locale,b.params],this.fetchChoice((d=this)._t.apply(d,[e,r,n,i].concat(D)),a)};le.prototype.fetchChoice=function(e,r){if(!e||!et(e))return null;var n=e.split("|");return r=this.getChoiceIndex(r,n.length),n[r]?n[r].trim():e};le.prototype.tc=function(e,r){for(var n,i=[],a=arguments.length-2;a-- >0;)i[a]=arguments[a+2];return(n=this)._tc.apply(n,[e,this.locale,this._getMessages(),null,r].concat(i))};le.prototype._te=function(e,r,n){for(var i=[],a=arguments.length-3;a-- >0;)i[a]=arguments[a+3];var d=qa.apply(void 0,i).locale||r;return this._exist(n[d],e)};le.prototype.te=function(e,r){return this._te(e,this.locale,this._getMessages(),r)};le.prototype.getLocaleMessage=function(e){return Zn(this._vm.messages[e]||{})};le.prototype.setLocaleMessage=function(e,r){(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&this._checkLocaleMessage(e,this._warnHtmlInMessage,r),this._vm.$set(this._vm.messages,e,r)};le.prototype.mergeLocaleMessage=function(e,r){(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&this._checkLocaleMessage(e,this._warnHtmlInMessage,r),this._vm.$set(this._vm.messages,e,qr(typeof this._vm.messages[e]<"u"&&Object.keys(this._vm.messages[e]).length?Object.assign({},this._vm.messages[e]):{},r))};le.prototype.getDateTimeFormat=function(e){return Zn(this._vm.dateTimeFormats[e]||{})};le.prototype.setDateTimeFormat=function(e,r){this._vm.$set(this._vm.dateTimeFormats,e,r),this._clearDateTimeFormat(e,r)};le.prototype.mergeDateTimeFormat=function(e,r){this._vm.$set(this._vm.dateTimeFormats,e,qr(this._vm.dateTimeFormats[e]||{},r)),this._clearDateTimeFormat(e,r)};le.prototype._clearDateTimeFormat=function(e,r){for(var n in r){var i=e+"__"+n;!this._dateTimeFormatters.hasOwnProperty(i)||delete this._dateTimeFormatters[i]}};le.prototype._localizeDateTime=function(e,r,n,i,a,d){for(var D=r,l=i[D],w=this._getLocaleChain(r,n),b=0;b<w.length;b++){var B=D,O=w[b];if(l=i[O],D=O,!(pt(l)||pt(l[a])))break}if(pt(l)||pt(l[a]))return null;var $=l[a],F;if(d)F=new Intl.DateTimeFormat(D,Object.assign({},$,d));else{var k=D+"__"+a;F=this._dateTimeFormatters[k],F||(F=this._dateTimeFormatters[k]=new Intl.DateTimeFormat(D,$))}return F.format(e)};le.prototype._d=function(e,r,n,i){if(!n){var a=i?new Intl.DateTimeFormat(r,i):new Intl.DateTimeFormat(r);return a.format(e)}var d=this._localizeDateTime(e,r,this.fallbackLocale,this._getDateTimeFormats(),n,i);if(this._isFallbackRoot(d)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(e,n,r)}else return d||""};le.prototype.d=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var i=this.locale,a=null,d=null;return r.length===1?(et(r[0])?a=r[0]:kt(r[0])&&(r[0].locale&&(i=r[0].locale),r[0].key&&(a=r[0].key)),d=Object.keys(r[0]).reduce(function(D,l){var w;return Pi(p_,l)?Object.assign({},D,(w={},w[l]=r[0][l],w)):D},null)):r.length===2&&(et(r[0])&&(a=r[0]),et(r[1])&&(i=r[1])),this._d(e,i,a,d)};le.prototype.getNumberFormat=function(e){return Zn(this._vm.numberFormats[e]||{})};le.prototype.setNumberFormat=function(e,r){this._vm.$set(this._vm.numberFormats,e,r),this._clearNumberFormat(e,r)};le.prototype.mergeNumberFormat=function(e,r){this._vm.$set(this._vm.numberFormats,e,qr(this._vm.numberFormats[e]||{},r)),this._clearNumberFormat(e,r)};le.prototype._clearNumberFormat=function(e,r){for(var n in r){var i=e+"__"+n;!this._numberFormatters.hasOwnProperty(i)||delete this._numberFormatters[i]}};le.prototype._getNumberFormatter=function(e,r,n,i,a,d){for(var D=r,l=i[D],w=this._getLocaleChain(r,n),b=0;b<w.length;b++){var B=D,O=w[b];if(l=i[O],D=O,!(pt(l)||pt(l[a])))break}if(pt(l)||pt(l[a]))return null;var $=l[a],F;if(d)F=new Intl.NumberFormat(D,Object.assign({},$,d));else{var k=D+"__"+a;F=this._numberFormatters[k],F||(F=this._numberFormatters[k]=new Intl.NumberFormat(D,$))}return F};le.prototype._n=function(e,r,n,i){if(!le.availabilities.numberFormat)return"";if(!n){var a=i?new Intl.NumberFormat(r,i):new Intl.NumberFormat(r);return a.format(e)}var d=this._getNumberFormatter(e,r,this.fallbackLocale,this._getNumberFormats(),n,i),D=d&&d.format(e);if(this._isFallbackRoot(D)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(e,Object.assign({},{key:n,locale:r},i))}else return D||""};le.prototype.n=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var i=this.locale,a=null,d=null;return r.length===1?et(r[0])?a=r[0]:kt(r[0])&&(r[0].locale&&(i=r[0].locale),r[0].key&&(a=r[0].key),d=Object.keys(r[0]).reduce(function(D,l){var w;return Pi(gd,l)?Object.assign({},D,(w={},w[l]=r[0][l],w)):D},null)):r.length===2&&(et(r[0])&&(a=r[0]),et(r[1])&&(i=r[1])),this._n(e,i,a,d)};le.prototype._ntp=function(e,r,n,i){if(!le.availabilities.numberFormat)return[];if(!n){var a=i?new Intl.NumberFormat(r,i):new Intl.NumberFormat(r);return a.formatToParts(e)}var d=this._getNumberFormatter(e,r,this.fallbackLocale,this._getNumberFormats(),n,i),D=d&&d.formatToParts(e);if(this._isFallbackRoot(D)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(e,r,n,i)}else return D||[]};Object.defineProperties(le.prototype,De);var Ks;Object.defineProperty(le,"availabilities",{get:function(){if(!Ks){var e=typeof Intl<"u";Ks={dateTimeFormat:e&&typeof Intl.DateTimeFormat<"u",numberFormat:e&&typeof Intl.NumberFormat<"u"}}return Ks}});le.install=Cl;le.version="8.28.2";const bd=le,J_={menu:"Main menu",findStations:"Find stations",manageLists:"Manage station lists",manageTitles:"Manage titles",importBackup:"Import backup",hotkeys:"Hotkeys",settings:"Settings",more:"More",learnMore:"Learn more",apply:"Apply",undo:"Undo",note:"Note",ok:"OK",done:"Done",cancel:"Cancel",yes:"Yes",no:"No",tryAgainLater:"Please try again later.",tags:"Tags",noTags:"(no tags)",country:"Country | Countries",state:"State | States",language:"Language | Languages",stationLists:"Station lists",list:"List",defaultListName:"Favorites",manage:"Manage\u2026",loading:"Loading\u2026",externalPlayback:"External playback",downloadPlaylist:"Download as playlist",downloadAs:"Download list as",yamlFile:"{0} file (for transfer)",listEmpty:["This station list is empty.","Press the lower right button to add some stations."],like:{submit:"Like",submitted:"Liked",count:"{0}+ people like this station.",alreadyVoted:"You have already voted.",submitMessage:"Your like has been submitted to the Community Radio Browser.",unableToVote:{title:"Failed to vote",description:"Unable to vote for the station. Error message received: \u201C{0}\u201D"}},visitHomepage:"Visit homepage",error:{generic:"Sorry, an error has occurred.",genericTryLater:"@:general.error.generic @:general.tryAgainLater",goOnline:"Please make sure that you are online.",fileNotSupported:{title:"File not supported",description:"The selected file was not created with this version of {0} or is corrupted."},networkIssue:{title:"Network error",description:`Sorry, there seems to be a network issue a the moment.
{0}`},hlsNotSupported:{title:"HLS not supported",description:"Sorry, the HLS protocol is required to play {0}, which your browser does not seem to support."},decode:{title:"Decode error",description:"Sorry, the stream could not be decoded and is apparently not supported."},noSupportedSource:{title:"No supported source",description:"Sorry, the stream is either not supported, is currently unavailable, or has been blocked."},timeout:{title:"Timeout",description:"Sorry, your network connection seems to be too slow at the moment. @:general.tryAgainLater"},hlsGeneric:{title:"Failed to play",description:"Sorry, {0} cannot be played due to a {1}.",network:"network error",media:"media error",other:"HLS error"}},undoableEvent:{station:"\u201C{0}\u201D has been removed from {1}.",list:"A list called \u201C{0}\u201D has been removed.",bookmark:"\u201C{0}\u201D has been removed from bookmarks."},newName:"New name"},q_={freeSoftware:"free software",licenseInfo:"{0} is {1}: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.",noWarranty:"{0} is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.",licenseCopy:"You should have received a copy of the GNU Affero General Public License along with {0}. If not, see {1} for more details.",code:"Code",issues:"Issues",donate:"Donate"},e1={fileAdded:"File added",usage:"Use drag & drop to add a file, or click here to add it manually\u2026",multipleFilesError:{title:"Multiple files selected",description:"Please select only one file per process."}},t1={title:"Station editor",newStation:"New station",field:{name:"Name",url:"Stream URL",homepage:"Homepage URL",icon:"Icon URL",required:"Required field",marked:"This is a @:(editor.field.required)."},notExisting:"The station to be edited does not exist."},r1={title:"Hotkey reference",space:"Space",bindings:{H:{name:"@:general.hotkeys",description:"Show or hide this hotkey overview."},M:{name:"@:general.menu",description:"Open up a dialog directly from the main menu."},"\u2013":{name:"Volume down",description:"Decrease the volume by 10 %."},"+":{name:"Volume up",description:"Increase the volume by 10 %."}," ":{name:"@:player.playStop",description:"Start or stop playing the most recently selected station."},C:{name:"@:settings.compactMode.name",description:"@:settings.compactMode.description"},F:{name:"@:player.toggleFullscreen",description:"Enter or exit fullscreen mode during video streams."},Esc:{name:"Close current view",description:"Close the current dialog. In addition, Escape usually exits fullscreen mode."},P:{name:"@:player.prevStation",description:"Switch to the previous station in the current list."},N:{name:"@:player.nextStation",description:"Switch to the next station in the current list."},"0-9":{name:"Station selection",description:"Switch to another station depending on its position in the current list."}},onScreenToasts:{volume:"Volume: {0}%",noVideoStream:"No video stream",playingPrevious:"Playing previous: {0}",playingNext:"Playing next: {0}",playingIndex:"Playing #{0}: {1}",notExisting:"Station {0} does not exist."}},n1={stationLists:"station lists",settings:"settings",description:"Here you may import backups of your {0}.",step:"Step {0}: {1}",chooseFile:"Choose file",setName:"Set name",selectStations:"Select stations",emptyName:{title:"Empty name",description:"Please enter a name for the list under \u201CStep 2\u201D."},nameTaken:{title:"Name already taken",description:"A list with this name already exists. Do you want to overwrite it?"}},i1={description:"Use this tool to manage your station lists.",specifyName:"Please specify a name",invalidName:"Invalid name",newList:"New list",nameTaken:"A list called \u201C{0}\u201D already exists.",nameEmpty:"The name needs to consist of at least one character."},a1={close:"Close"},s1={ready:"Ready",alreadyVoted:"Already voted",addBookmark:"Added current title to bookmarks",bookmarked:"Added to bookmarks",prevStation:"Previous station",nextStation:"Next station",playStop:"Play/stop",advancedView:"Advanced view",toggleFullscreen:"Toggle fullscreen",noHomepage:"No homepage registered"},o1={minimumShort:"min",to:"to",maximumShort:"max"},l1={credit:{free:"free",radioBrowser:"The search feature is powered by the {0} {1}."},error:"@:general.error.generic @:general.error.goOnline",optionsUnavailable:"Oh no! Some options are currently unavailable due to connectivity issues.",tryAgain:"Try again",byName:"Stations by name",showOptions:"Show options",hideOptions:"Hide options",filters:{label:"Filters",allCountries:"All countries",allStates:"All states",allLanguages:"All languages",noCountrySelected:"Please select a country first."},bitrate:{label:"Bitrate",description:"Only include stations with a certain bitrate (kbit/s) in the results."},stationBroken:"Broken",reverse:"Show results in reverse order",includeBroken:"Include stations marked as broken",loading:"Loading results\u2026",noMatches:"No matching stations found.",loadMore:"Load more results",comparison:{station:"station | stations",added:"added",removed:"removed",oneChange:"{name} has been {modified}.",stationsAdded:"{plus} stations added.",stationsRemoved:"{minus} stations removed.",diff:"{plus} {station} {added}, {minus} {removed}.",orderChanged:"Original order changed."},order:{sortBy:"Sort by",votes:"Votes",clicks:"Clicks",names:"Names",countries:"Countries",states:"States",languages:"Languages",codecs:"Codecs"}},u1={description:"Here you may customize {0} to your needs.",theme:"Theme | Themes",themes:{candy:"A simple yet elegant theme.",pure:"A simple and minimalistic theme."},colorScheme:{name:"Color scheme | Color schemes",auto:"Auto",light:"Light",dark:"Dark"},externalPlayback:{name:"@:general.externalPlayback",description:"When changing stations, download a playlist for opening in another app."},compactMode:{name:"Compact mode",description:"Reduce the display size of station entries."},colorChange:{name:"Color change",description:"Automatically pick an accent and background color depending on which stream is currently running."},visualization:{name:"Pseudo-visualization",description:"Display an audio visualization based on random values during an ongoing audio stream.",screenWidthIssue:"Screen or window not wide enough"},relaxMode:{name:"Relax mode",description:"For audio streams, only show station info and visualization on a colored background. Fired during user inactivity.",timer:"Trigger relax mode after"},loadIcons:{name:"Load icons"},sleep:{name:"@:sleepTimer.name",description:"Stops the current stream automatically after a certain number of minutes.",timer:"Stop stream after"},volume:"Default volume",playlistFormats:"Playlist formats",defaultPlaylistFormat:"Default playlist format",detect:"Detect",discard:"Discard",reset:"Reset to defaults",import:"Import from file",export:"Export to file"},c1={name:"Sleep timer",timePassed:"{n} is over | {n} are over",streamStopped:"{timePassed}. The stream has been stopped."},f1={options:"Options for \u201C{0}\u201D",edit:"Edit",moveUp:"Move up",moveDown:"Move down",delete:"Delete"},d1={label:"@:general.tags (separate with commas)",preview:"Preview"},h1={title:"Title manager",recentTitles:"Recent titles",bookmark:"Bookmark | Bookmarks",listEmpty:"This list is currently empty.",remove:"Remove"},v1={general:J_,about:q_,dropZone:e1,editor:t1,hotkeys:r1,importWizard:n1,listManager:i1,menu:a1,player:s1,rangeInput:o1,search:l1,settings:u1,sleepTimer:c1,station:f1,tagInput:d1,titleManager:h1},p1={menu:"Hauptmen\xFC",findStations:"Sender finden",manageLists:"Senderlisten verwalten",manageTitles:"Titel verwalten",importBackup:"Backup importieren",hotkeys:"Hotkeys",settings:"Einstellungen",more:"Mehr",learnMore:"Mehr erfahren",apply:"\xDCbernehmen",undo:"R\xFCckg\xE4ngig machen",note:"Hinweis",ok:"OK",done:"Fertig",cancel:"Abbrechen",yes:"Ja",no:"Nein",tryAgainLater:"Bitte versuchen Sie es sp\xE4ter erneut.",tags:"Stichw\xF6rter",noTags:"(keine @:general.tags)",country:"Land | L\xE4nder",state:"Region | Regionen",language:"Sprache | Sprachen",stationLists:"Senderlisten",list:"Liste",defaultListName:"Favoriten",manage:"Verwalten\u2026",loading:"Wird geladen\u2026",externalPlayback:"Externe Wiedergabe",downloadPlaylist:"Als Wiedergabeliste herunterladen",downloadAs:"Liste herunterladen als",yamlFile:"{0}-Datei (zum Transfer)",listEmpty:["Diese Senderliste ist leer.","Dr\xFCcken Sie die Schaltfl\xE4che unten rechts, um ein paar Sender hinzuzuf\xFCgen."],like:{submit:"Positiv bewerten",submitted:"Positiv bewertet",count:"{0}+ Leuten gef\xE4llt dieser Sender.",alreadyVoted:"Sie haben bereits abgestimmt.",submitMessage:"Ihre positive Bewertung wurde dem Community Radio Browser \xFCbermittelt.",unableToVote:{title:"Bewertung fehlgeschlagen",description:"Konnte nicht f\xFCr den Sender abstimmen. Erhaltene Fehlermeldung: \u201E{0}\u201C"}},visitHomepage:"Homepage besuchen",error:{generic:"Sorry, ein Fehler ist aufgetreten.",genericTryLater:"@:general.error.generic @:general.tryAgainLater",goOnline:"Bitte vergewissern Sie sich, dass Sie online sind.",fileNotSupported:{title:"Datei nicht unterst\xFCtzt",description:"Die ausgew\xE4hlte Datei wurde nicht mit dieser Version von {0} erstellt oder ist besch\xE4digt."},networkIssue:{title:"Netzwerkfehler",description:`Sorry, es scheint zurzeit ein Netzwerkproblem zu geben.
{0}`},hlsNotSupported:{title:"HLS nicht unterst\xFCtzt",description:"Sorry, {0} ben\xF6tigt das HLS-Protokoll, welches von Ihrem Browser anscheinend nicht unterst\xFCtzt wird."},decode:{title:"Dekodierfehler",description:"Sorry, der Stream konnte nicht dekodiert werden und wird offenbar nicht unterst\xFCtzt."},noSupportedSource:{title:"Keine unterst\xFCtzte Quelle",description:"Sorry, der Stream wird entweder nicht unterst\xFCtzt, ist derzeit nicht verf\xFCgbar oder wurde blockiert."},timeout:{title:"Zeit\xFCberschreitung",description:"Sorry, Ihre Netzwerkverbindung scheint im Moment zu langsam zu sein. @:general.tryAgainLater"},hlsGeneric:{title:"Wiedergabe gescheitert",description:"Sorry, {0} kann aufgrund eines {1} nicht abgespielt werden.",network:"Netzwerkfehlers",media:"Medienfehlers",other:"HLS-Fehlers"}},undoableEvent:{station:"\u201E{0}\u201C wurde aus {1} entfernt.",list:"Eine Liste namens \u201E{0}\u201C wurde entfernt.",bookmark:"\u201E{0}\u201C wurde aus den Lesezeichen entfernt."},newName:"Neuer Name"},m1={freeSoftware:"freie Software",licenseInfo:"{0} ist {1}: Sie k\xF6nnen sie unter den Bedingungen der GNU Affero General Public License, wie von der Free Software Foundation herausgegeben, weitergeben und/oder modifizieren, entweder unter Version 3 der Lizenz oder (wenn Sie es w\xFCnschen) jeder sp\xE4teren Version.",noWarranty:"{0} wird in der Hoffnung ver\xF6ffentlicht, dass es Ihnen von Nutzen sein wird, aber OHNE JEDE GEW\xC4HRLEISTUNG \u2013 sogar ohne die implizite Gew\xE4hrleistung der MARKTREIFE oder der EIGNUNG F\xDCR EINEN BESTIMMTEN ZWECK. Details finden Sie in der GNU Affero General Public License.",licenseCopy:"Sie sollten eine Kopie der GNU Affero General Public License zusammen mit {0} erhalten haben. Falls nicht, finden Sie sie unter {1}.",code:"Code",issues:"Issues",donate:"Spenden"},g1={fileAdded:"Datei hinzugef\xFCgt",usage:"Benutzen Sie Drag & Drop, um eine Datei hinzuzuf\xFCgen, oder klicken Sie hier, um sie manuell auszuw\xE4hlen\u2026",multipleFilesError:{title:"Mehrere Dateien ausgew\xE4hlt",description:"Bitte w\xE4hlen Sie pro Vorgang nur eine Datei aus."}},y1={title:"Sendereditor",newStation:"Neuer Sender",field:{name:"Name",url:"Stream-URL",homepage:"Homepage-URL",icon:"Symbol-URL",required:"Pflichtfeld",marked:"Dies ist ein @:(editor.field.required)."},notExisting:"Der zu editierende Sender existiert nicht."},_1={title:"Hotkey-Referenz",space:"Leer",bindings:{H:{name:"@:general.hotkeys",description:"Diese Hotkey-\xDCbersicht anzeigen oder ausblenden."},M:{name:"@:general.menu",description:"Direkt \xFCber das Hauptmen\xFC einen Dialog aufrufen."},"\u2013":{name:"Leiser",description:"Verringern der Lautst\xE4rke um 10 %."},"+":{name:"Lauter",description:"Erh\xF6hen der Lautst\xE4rke um 10 %."}," ":{name:"@:player.playStop",description:"Starten oder Stoppen der Wiedergabe des zuletzt ausgew\xE4hlten Senders."},C:{name:"@:settings.compactMode.name",description:"@:settings.compactMode.description"},F:{name:"@:player.toggleFullscreen",description:"Starten oder Beenden des Vollbildmodus bei Video-Streams."},Esc:{name:"Ansicht schlie\xDFen",description:"Aktuellen Dialog schlie\xDFen. Meist wird durch Escape auch der Vollbildmodus beendet."},P:{name:"@:player.prevStation",description:"Zum vorherigen Sender in der aktuellen Liste umschalten."},N:{name:"@:player.nextStation",description:"Zum n\xE4chsten Sender in der aktuellen Liste umschalten."},"0-9":{name:"Senderwahl",description:"Umschalten zu einem anderen Sender je nach seiner Position in der aktuellen Liste."}},onScreenToasts:{volume:"Lautst\xE4rke: {0}%",noVideoStream:"Kein Video-Stream",playingPrevious:"Spiele vorigen ab: {0}",playingNext:"Spiele n\xE4chsten ab: {0}",playingIndex:"Spiele #{0} ab: {1}",notExisting:"Sender {0} existiert nicht."}},E1={stationLists:"Senderlisten",settings:"Einstellungen",description:"Hier k\xF6nnen Sie Backups Ihrer {0} importieren.",step:"Schritt {0}: {1}",chooseFile:"Datei ausw\xE4hlen",setName:"Namen festlegen",selectStations:"Sender aussuchen",emptyName:{title:"Leerer Name",description:"Bitte tragen Sie unter \u201ESchritt 2\u201C einen Namen f\xFCr die Liste ein."},nameTaken:{title:"Name bereits vergeben",description:"Eine Liste mit diesem Namen existiert bereits. M\xF6chten Sie diese \xFCberschreiben?"}},T1={description:"Verwenden Sie dieses Tool, um Ihre Senderlisten zu verwalten.",specifyName:"Bitte einen Namen angeben",invalidName:"Ung\xFCltiger Name",newList:"Neue Liste",nameTaken:"Eine Liste mit dem Namen \u201E{0}\u201C existiert bereits.",nameEmpty:"Der Name muss aus mindestens einem Zeichen bestehen."},S1={close:"Schlie\xDFen"},x1={ready:"Bereit",alreadyVoted:"Bereits abgestimmt",addBookmark:"Aktuellen Titel zu Lesezeichen hinzuf\xFCgen",bookmarked:"Zu Lesezeichen hinzugef\xFCgt",prevStation:"Voriger Sender",nextStation:"N\xE4chster Sender",playStop:"Play/Stopp",advancedView:"Erweiterte Ansicht",toggleFullscreen:"Vollbild umschalten",noHomepage:"Keine Homepage hinterlegt"},b1={minimumShort:"min",to:"bis",maximumShort:"max"},C1={credit:{free:"freien",radioBrowser:"Die Suchfunktion wird erm\xF6glicht durch den {0} {1}."},error:"@:general.error.generic @:general.error.goOnline",optionsUnavailable:"Oh nein! Einige Optionen sind derzeit wegen Verbindungsproblemen nicht verf\xFCgbar.",tryAgain:"Erneut versuchen",byName:"Sender nach Namen",showOptions:"Optionen anzeigen",hideOptions:"Optionen ausblenden",filters:{label:"Filter",allCountries:"Alle L\xE4nder",allStates:"Alle Regionen",allLanguages:"Alle Sprachen",noCountrySelected:"Bitte w\xE4hlen Sie zun\xE4chst ein Land aus."},bitrate:{label:"Bitrate",description:"Nur Sender mit einer bestimmten Bitrate (kbit/s) in die Ergebnisse aufnehmen."},stationBroken:"Defekt",reverse:"Ergebnisse in umgekehrter Reihenfolge anzeigen",includeBroken:"Als defekt gekennzeichnete Sender einbeziehen",loading:"Ergebnisse werden geladen\u2026",noMatches:"Keine passenden Sender gefunden.",loadMore:"Weitere Ergebnisse laden",comparison:{station:"Sender",added:"hinzugef\xFCgt",removed:"entfernt",oneChange:"{name} wurde {modified}.",stationsAdded:"{plus} Sender hinzugef\xFCgt.",stationsRemoved:"{minus} Sender entfernt.",diff:"{plus} {station} {added}, {minus} {removed}.",orderChanged:"Urspr\xFCngliche Reihenfolge ver\xE4ndert."},order:{sortBy:"Sortieren nach",votes:"Bewertungen",clicks:"Klicks",names:"Namen",countries:"L\xE4ndern",states:"Regionen",languages:"Sprachen",codecs:"Codecs"}},L1={description:"Hier k\xF6nnen Sie {0} an Ihre Bed\xFCrfnisse anpassen.",theme:"Erscheinungsbild | Erscheinungsbilder",themes:{candy:"Ein einfaches, aber elegantes Erscheinungsbild.",pure:"Ein einfaches und minimalistisches Erscheinungsbild."},colorScheme:{name:"Farbschema | Farbschemen",auto:"Auto",light:"Hell",dark:"Dunkel"},externalPlayback:{name:"@:general.externalPlayback",description:"Beim Wechseln des Senders eine Wiedergabeliste zum \xD6ffnen in einer anderen App herunterladen."},compactMode:{name:"Kompakter Modus",description:"Die Anzeigegr\xF6\xDFe von Sendereintr\xE4gen verringern."},colorChange:{name:"Farbwechsel",description:"Automatisch eine Akzent- und Hintergrundfarbe abh\xE4ngig vom gerade laufenden Stream ausw\xE4hlen."},visualization:{name:"Pseudovisualisierung",description:"Eine Audiovisualisierung basierend auf zuf\xE4lligen Werten w\xE4hrend eines laufenden Audiostreams anzeigen.",screenWidthIssue:"Bildschirm oder Fenster nicht breit genug"},relaxMode:{name:"Entspannungsmodus",description:"Bei Audio-Streams nur noch Senderinfos und Visualisierung vor farbigem Hintergrund anzeigen. Geschieht bei Inaktivit\xE4t des Nutzers.",timer:"Entspannungsmodus aktivieren nach"},loadIcons:{name:"Symbole laden"},sleep:{name:"@:sleepTimer.name",description:"H\xE4lt den aktuellen Stream automatisch nach einer bestimmten Minutenzahl an.",timer:"Stream anhalten nach"},volume:"Voreingestellte Lautst\xE4rke",playlistFormats:"Playlist-Formate",defaultPlaylistFormat:"Standardformat f\xFCr Playlists",detect:"Erkennen",discard:"Verwerfen",reset:"Auf Standardwerte zur\xFCcksetzen",import:"Aus Datei importieren",export:"In Datei exportieren"},D1={name:"Sleep-Timer",timePassed:"{n} ist vergangen | {n} sind vergangen",streamStopped:"{timePassed}. Der Stream wurde angehalten."},A1={options:"Optionen f\xFCr \u201E{0}\u201C",edit:"Bearbeiten",moveUp:"Nach oben verschieben",moveDown:"Nach unten verschieben",delete:"L\xF6schen"},O1={label:"@:general.tags (mit Kommas abtrennen)",preview:"Vorschau"},w1={title:"Titelverwaltung",recentTitles:"Letzte Titel",bookmark:"Lesezeichen | Lesezeichen",listEmpty:"Diese Liste ist derzeit leer.",remove:"Entfernen"},P1={general:p1,about:m1,dropZone:g1,editor:y1,hotkeys:_1,importWizard:E1,listManager:T1,menu:S1,player:x1,rangeInput:b1,search:C1,settings:L1,sleepTimer:D1,station:A1,tagInput:O1,titleManager:w1},I1={menu:"Menu principal",findStations:"Trouver des stations",manageLists:"G\xE9rer la liste des stations",manageTitles:"G\xE9rer les titres",importBackup:"Importer une sauvegarde",hotkeys:"Raccourcis",settings:"Pr\xE9f\xE9rences",more:"Plus",learnMore:"En savoir plus",apply:"Appliquer",undo:"Annuler",note:"Note",ok:"OK",done:"Termin\xE9",cancel:"Annuler",yes:"Oui",no:"Non",tryAgainLater:"Veuillez r\xE9essayer plus tard.",tags:"\xC9tiquettes",noTags:"(pas d\u2019\xE9tiquettes)",country:"Pays",state:"\xC9tat | \xC9tats",language:"Langue | Langues",stationLists:"Listes des stations",list:"Liste",defaultListName:"Favoris",manage:"G\xE9rer\u2026",loading:"Chargement\u2026",downloadPlaylist:"T\xE9l\xE9charger comme liste de lecture",downloadAs:"Enregistrer la liste sous",yamlFile:"{0} file (for transfer)",listEmpty:["Cette liste de stations est vide.","Cliquez sur le bouton en bas \xE0 droite pour ajouter des stations."],like:{submit:"J\u2019aime",submitted:"J\u2019ai aim\xE9",count:"{0}+ personnes aiment cette station.",alreadyVoted:"Vous avez d\xE9j\xE0 vot\xE9.",submitMessage:"Votre vote a \xE9t\xE9 soumis \xE0 la communaut\xE9 Radio Browser.",unableToVote:{title:"\xC9chec du vote",description:"Impossible de voter pour la station. Message d\u2019erreur\xA0: \xAB\xA0{0}\xA0\xBB"}},visitHomepage:"Voir le site Web",error:{generic:"D\xE9sol\xE9, une erreur est survenue.",genericTryLater:"@:general.error.generic @:general.tryAgainLater",goOnline:"Veuillez vous assurez que vous \xEAtes connect\xE9 \xE0 Internet.",fileNotSupported:{title:"Fichier non pris en charge",description:"Le fichier s\xE9lectionn\xE9 n\u2019a pas \xE9t\xE9 cr\xE9\xE9 avec cette version de {0} ou bien a \xE9t\xE9 corrompu."},networkIssue:{title:"Erreur r\xE9seau",description:`D\xE9sol\xE9, il semblerait y avoir une erreur de connexion en ce moment.
{0}`},hlsNotSupported:{title:"HLS non pris en charge",description:"D\xE9sol\xE9, le protocole HLS est requis pour \xE9couter {0}, et votre navigateur ne semble pas le prendre en charge."},decode:{title:"Erreur de d\xE9codage",description:"D\xE9sol\xE9, le flux n\u2019a pas pu \xEAtre d\xE9cod\xE9 et ne semble pas \xEAtre pris en charge."},noSupportedSource:{title:"Aucune source prise en charge",description:"D\xE9sol\xE9, le flux est soit non pris en charge, indisponible pour le moment, ou a \xE9t\xE9 bloqu\xE9."},timeout:{title:"Expiration du d\xE9lai d\u2019attente",description:"D\xE9sol\xE9, votre connexion r\xE9seau semble \xEAtre trop lente pour l\u2019instant. @:general.tryAgainLater"},hlsGeneric:{title:"Impossible de lancer l\u2019\xE9coute",description:"D\xE9sol\xE9, {0} ne peut pas \xEAtre \xE9cout\xE9 \xE0 cause d\u2019une {1}.",network:"erreur de r\xE9seau",media:"erreur de m\xE9dia",other:"erreur HLS"}},undoableEvent:{station:"\xAB\xA0{0}\xA0\xBB a \xE9t\xE9 supprim\xE9 de {1}.",list:"Une liste \xAB\xA0{0}\xA0\xBB a \xE9t\xE9 supprim\xE9e.",bookmark:"\xAB\xA0{0}\xA0\xBB a \xE9t\xE9 supprim\xE9e des favoris."},newName:"Nouveau nom"},R1={freeSoftware:"free software",licenseInfo:"{0} is {1}: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.",noWarranty:"{0} is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.",licenseCopy:"You should have received a copy of the GNU Affero General Public License along with {0}. If not, see {1} for more details.",code:"Code",issues:"Bogues",donate:"Donnez"},M1={fileAdded:"Fichier ajout\xE9",usage:"Faites un glisser/d\xE9poser pour ajouter un fichier, ou cliquer ici pour l\u2019ajouter manuellement\u2026",multipleFilesError:{title:"Plusieurs fichiers s\xE9lectionn\xE9s",description:"Veuillez ne s\xE9lectionner qu\u2019un seul fichier par importation."}},k1={title:"\xC9diteur de station",newStation:"Nouvelle station",field:{name:"Nom",url:"URL du flux",homepage:"Site Web",icon:"Ic\xF4ne",required:"Champ requis",marked:"C\u2019est un @:(editor.field.required)."},notExisting:"La station \xE0 \xE9dit\xE9 n\u2019existe pas."},F1={title:"Liste des raccourcis",space:"Espace",bindings:{H:{name:"@:general.hotkeys",description:"Affiche ou masque la liste des raccourcis."},M:{name:"@:general.menu",description:"Ouvre le menu principal."},"\u2013":{name:"Moins fort",description:"Baisse le volume 10 %."},"+":{name:"Plus fort",description:"Augmente le volume de 10 %."}," ":{name:"@:player.playStop",description:"D\xE9marre ou arr\xEAte l\u2019\xE9coute de la station la plus r\xE9cente."},F:{name:"@:player.toggleFullscreen",description:"Entre ou quitte le mode plein \xE9cran pour les flux vid\xE9os."},Esc:{name:"Fermer la vue courante",description:"Ferme la bo\xEEte de dialogue courante. De plus, \xC9chap. quitte normalement le mode plein \xE9cran."},P:{name:"@:player.prevStation",description:"Bascule vers la station pr\xE9c\xE9dente de la liste courante."},N:{name:"@:player.nextStation",description:"Bascule vers la station suivante de la liste courante."},"0-9":{name:"S\xE9lection de station",description:"Bascule vers une autre station en fonction de sa position dans la liste."}},onScreenToasts:{volume:"Volume: {0}%",noVideoStream:"Pas de flux vid\xE9o",playingPrevious:"\xC9coute de la pr\xE9c\xE9dente\xA0: {0}",playingNext:"\xC9coute de la suivante\xA0: {0}",playingIndex:"\xC9coute de #{0}\xA0: {1}",notExisting:"La station {0} n\u2019existe pas."}},N1={stationLists:"listes de stations",settings:"pr\xE9f\xE9rences",description:"Vous pouvez importer ici les sauvegardes de vos {0}.",step:"\xC9tape {0}\xA0: {1}",chooseFile:"Choisir un fichier",setName:"D\xE9finir un nom",selectStations:"Choisir des stations",emptyName:{title:"Pas de nom",description:"Veuillez entrer un nom pour la liste \xE0 l\u2019\xE9tape 2."},nameTaken:{title:"Nom existant",description:"Un liste existe d\xE9j\xE0 sous ce nom. Voulez-vous l\u2019\xE9craser\xA0?"}},B1={description:"Utilisez cet outil pour g\xE9rer vos listes de stations.",specifyName:"Veuillez choisir un nom",invalidName:"Nom invalide",newList:"Nouvelle liste",nameTaken:"Une liste nomm\xE9 \xAB\xA0{0}\xA0\xBB existe d\xE9j\xE0.",nameEmpty:"Le nom doit comporter au moins un caract\xE8re."},U1={close:"Fermer"},$1={ready:"Pr\xEAt",alreadyVoted:"Vote d\xE9j\xE0 effectu\xE9",addBookmark:"Titre en cours ajout\xE9 aux favoris",bookmarked:"Ajout\xE9 aux favoris",prevStation:"Station pr\xE9c\xE9dente",nextStation:"Station suivante",playStop:"Lecture/arr\xEAt",advancedView:"Vue d\xE9taill\xE9e",toggleFullscreen:"Afficher en plein \xE9cran",noHomepage:"Pas de page d\u2019accueil d\xE9finie"},K1={credit:{free:"libre",radioBrowser:"La fonction de recherche est assur\xE9e par le projet {0} {1}."},error:"@:general.error.generic @:general.error.goOnline",optionsUnavailable:"Oh non\xA0! Certaines options sont indisponibles pour le moment \xE0 cause d\u2019un probl\xE8me de connexion.",tryAgain:"Nouvel essai",byName:"Stations par nom",showOptions:"Montrer les options",hideOptions:"Cacher les options",filters:{label:"Filtres",allCountries:"Tous les pays",allStates:"Tous les \xE9tats",allLanguages:"Toutes les langues",noCountrySelected:"Veuillez d\u2019abord choisir un pays."},stationBroken:"Non fonctionnelle",reverse:"Afficher les r\xE9sultats dans l\u2019ordre inverse",includeBroken:"Inclure les stations marqu\xE9es comme non fonctionnelles",loading:"Chargement des r\xE9sultats\u2026",noMatches:"Aucune station correspondant aux crit\xE8res.",loadMore:"Charger plus de r\xE9sultats",comparison:{station:"station | stations",added:"ajout\xE9e | ajout\xE9es",removed:"supprim\xE9e | supprim\xE9es",oneChange:"{name} a \xE9t\xE9 {modified}.",stationsAdded:"{plus} stations ajout\xE9es.",stationsRemoved:"{minus} stations supprim\xE9es.",diff:"{plus} {station} {added}, {minus} {removed}.",orderChanged:"L\u2019ordre original a \xE9t\xE9 modifi\xE9."},order:{sortBy:"Trier par",votes:"Votes",clicks:"Clics",names:"Noms",countries:"Pays",states:"\xC9tats",languages:"Langues",codecs:"Codecs"}},W1={description:"Vous pouvez personnaliser {0} ici pour correspondre \xE0 votre besoin.",theme:"Th\xE8me | Th\xE8mes",themes:{candy:"Un th\xE8me simple mais \xE9l\xE9gant.",pure:"Un th\xE8me simple et minimaliste."},colorScheme:{name:"Palette de couleurs | Palettes de couleurs",auto:"Auto",light:"Clair",dark:"Sombre"},colorChange:{name:"Changement de couleur",description:"Choisir automatiquement une couleur de premier et d\u2019arri\xE8re plan en fonction du flux en cours d\u2019\xE9coute."},visualization:{name:"Pseudo-visualisation",description:"Affiche une visualisation audio en fonction de valeur al\xE9atoire pendant l\u2019\xE9coute d\u2019un flux audio.",screenWidthIssue:"L\u2019\xE9cran ou la fen\xEAtre n\u2019est pas assez large"},relaxMode:{name:"Mode relax",description:"Apr\xE8s une p\xE9riode d\u2019inactivit\xE9 lors de l\u2019\xE9coute d\u2019un flux audio, affiche uniquement les informations de la stations et la visualisation sur un fond color\xE9.",timer:"D\xE9clencher le mode relax apr\xE8s"},loadIcons:{name:"Charger les ic\xF4nes"},sleep:{name:"@:sleepTimer.name",description:"Arr\xEAte l\u2019\xE9coute du flux automatiquement apr\xE8s un certain temps (en minutes).",timer:"Arr\xEAter l\u2019\xE9coute apr\xE8s"},volume:"Volume par d\xE9faut",detect:"D\xE9tecter",discard:"Annuler",reset:"R\xE9initialiser",import:"Importer depuis un fichier",export:"Exporter dans un fichier"},H1={name:"Minuterie",timePassed:"{n} est pass\xE9e | {n} sont pass\xE9es",streamStopped:"{timePassed}. Le flux a \xE9t\xE9 arr\xEAt\xE9."},j1={options:"Options pour \xAB\xA0{0}\xA0\xBB",edit:"\xC9diter",moveUp:"D\xE9placer vers le haut",moveDown:"D\xE9placer vers le bas",delete:"Supprimer"},G1={label:"@:general.tags (s\xE9par\xE9 par des virgules)",preview:"Pr\xE9visualisation"},V1={title:"Gestionnaire de titres",recentTitles:"Titres r\xE9cents",bookmark:"Favori | Favoris",listEmpty:"La liste est actuellement vide.",remove:"Supprimer"},z1={general:I1,about:R1,dropZone:M1,editor:k1,hotkeys:F1,importWizard:N1,listManager:B1,menu:U1,player:$1,search:K1,settings:W1,sleepTimer:H1,station:j1,tagInput:G1,titleManager:V1};ae.use(bd);const Cd=new bd({locale:"en",fallbackLocale:"en",messages:{en:v1,de:P1,fr:z1},silentTranslationWarn:!0});async function Y1(t){switch(t){case"de":return yi(()=>import("./index.ae3c758c.js").then(e=>e.i),["./index.ae3c758c.js","./index.65ea6169.js"],import.meta.url);case"fr":return yi(()=>import("./index.05ea986f.js").then(e=>e.i),["./index.05ea986f.js","./index.65ea6169.js"],import.meta.url);default:throw new Error("unknown locale")}}let Yi=pr.CancelToken.source(),Ws,ri,Vr,Hs;const X1={init({commit:t},e){t("INITIALIZE",e)},setDarkMode({commit:t},e){t("SET_DARK_MODE",e)},expandPlayer({commit:t,state:e},r){e.playerExpanded!==r&&(!r||!e.fullscreen)&&t("SET_PLAYER_EXPANDED",r)},stickPlayer({commit:t},e){t("SET_STICKY_PLAYER",e)},discardUndoableEvent({commit:t}){t("SET_UNDOABLE_EVENT",void 0)},validateListName({state:t},e){if(e==="")throw new Error("List name must not be empty.");if(t.memory.lists.map(n=>n.name).includes(e))throw new Error("List name already taken.")},createList({commit:t,dispatch:e},r){e("validateListName",r.name),t("PUSH_LIST",r)},renameList({commit:t,dispatch:e},r){e("validateListName",r.name),t("SET_LIST_NAME",r)},changeList({commit:t},e){t("SET_SELECTED_LIST",e)},removeList({commit:t,state:e},r){const n=[...e.memory.lists],{name:i}=e.memory.lists[r];t("SET_UNDOABLE_EVENT",{kind:si.LIST,affected:[i],undo(){t("SET_LISTS",n)}}),t("REMOVE_LIST",r),e.memory.lastList===r&&t("SET_SELECTED_LIST",0)},removeStation({commit:t,dispatch:e,state:r},n){const i=r.memory.lastList,a=r.memory.lists[i],d=[...a.content],{name:D}=d[n];r.stationBackup===void 0&&t("SET_UNDOABLE_EVENT",{kind:si.STATION,affected:[D,a.name],undo(){e("updateList",{content:d})}}),e("updateList",{content:a.content.filter((l,w)=>w!==n)})},startSorting({commit:t},e){t("SET_SORT_INDEX",e)},moveStation({dispatch:t,state:e},{index:r,newIndex:n}){const i=[...e.memory.lists[e.memory.lastList].content];i.splice(n,0,...i.splice(r,1)),t("updateList",{content:i})},editStation({commit:t},e){t("SET_EDITING_REF",e)},updateStation({commit:t},e){t("UPDATE_STATION",e)},setStationBackup({commit:t},e){t("SET_STATION_BACKUP",e)},updateColor({commit:t},e){t("SET_STATION_HUE",e)},applySettings({commit:t,dispatch:e,state:r},n){let i=!1,a=!1;(n.sleep!==r.memory.settings.sleep||n.sleepTimeout!==r.memory.settings.sleepTimeout)&&(ri&&clearTimeout(ri),r.playing&&(i=!0)),(n.relax!==r.memory.settings.relax||n.relaxTimeout!==r.memory.settings.relaxTimeout)&&(Vr&&clearTimeout(Vr),r.playing&&(a=!0)),n!==r.memory.settings&&t("SET_SETTINGS",n),i&&e("setSleepTimer"),a&&e("setRelaxTimer")},reset({dispatch:t}){t("applySettings",mi)},stop({dispatch:t}){t("play",void 0)},playClosestStation({dispatch:t,state:e},r){const{lastStation:n}=e.memory,i=e.memory.lists[e.memory.lastList].content;if(!e.active||n===null||i.length<2)return;const a=i.map(D=>D.id).indexOf(n.id),d=(i.length+a+(r?1:-1))%i.length;t("play",i[d])},toggleStation({dispatch:t,state:e},r){const{lastStation:n,lists:i}=e.memory;return r===void 0&&(r=n!=null?n:i[e.memory.lastList].content[0],r===void 0)?Promise.reject(new Error("There is no previous station.")):!e.active||(n==null?void 0:n.id)!==r.id?t("play",r):t("stop")},confirmFullscreen({commit:t,dispatch:e},r){t("SET_FULLSCREEN",r),r&&e("expandPlayer",!1)},toggleFullscreen({state:t}){t.hasVideo&&ba.isEnabled&&ba.toggle()},updateList({state:t,getters:e,commit:r,dispatch:n},i){const a=i.name!==void 0?t.memory.lists.map(D=>D.name).indexOf(i.name):t.memory.lastList;if(r("SET_LIST_CONTENT",{index:a,content:i.content}),i.name!==void 0&&n("changeList",a),t.stationBackup!==void 0){const D=t.stationBackup,l=e.currentList,w=v_(l,D,($,F)=>$.id===F.id),b=[],B=[],O=w.length===0&&l.some(($,F)=>$.id!==D[F].id);for(const $ of w){if(l.some(({id:F})=>$.id===F)){b.push($.name);continue}B.push($.name)}r("SET_SEARCH_STATS",{added:b,removed:B,orderChanged:O})}},resetSearchStats({commit:t}){t("SET_SEARCH_STATS",{added:[],removed:[],orderChanged:!1})},updateInfo({commit:t,dispatch:e,state:r},n){t("SET_CURRENT_INFO",n);const{mediaSession:i}=navigator;if(i!==void 0){const a=r.memory.lastStation;i.metadata=new MediaMetadata({title:n!=null?n:a.name,artist:n?a.name:void 0,album:"Radiolise"})}n!==void 0&&e("addHistoryItem",n)},addHistoryItem({commit:t,state:e},r){const n=[...e.memory.titles.history],i=e.memory.lastStation;for(const[a,d]of n.entries())d.station===i.name&&d.info===r&&n.splice(a,1);n.length===5&&n.splice(0,1),n.push({station:i.name,info:r,time:Math.floor(Date.now()/60)}),t("SET_HISTORY",n)},adjustVolume({commit:t,state:e},r){const n=Math.min(Math.max(e.volume+r,0),1),i=Math.round(n*10)/10;e.volume!==i&&t("SET_VOLUME",i)},changeVolume({commit:t},e){t("SET_VOLUME",e)},play({commit:t,dispatch:e,state:r},n){Yi&&(Yi.cancel(),Yi=pr.CancelToken.source()),Ws&&clearTimeout(Ws),e("setPlaying",!1);const i=n!==void 0;i?(r.fullscreen&&e("toggleFullscreen"),t("SET_LAST_STATION",n)):r.relaxed&&t("SET_RELAXED",!1),i!==r.active&&t("SET_ACTIVE",i),r.currentInfo!==void 0&&e("updateInfo",void 0)},confirmPlaying({dispatch:t},e){t("setPlaying",!0),t("requestInfo",e)},async requestInfo({dispatch:t,state:e},r){let n=!1;try{const i=await b0({url:r,cancelToken:Yi.token});let a=i.title;if(a){a==="-"&&(a="");const d=" - ",D=a.split(d);D.length>=2&&(a=[D.slice(0,2).reverse().join(" / "),...D.slice(2)].join(d))}else if(!e.currentInfo){const d=i.description;d!=="Unspecified description"&&(a=d)}a&&e.currentInfo!==a&&t("updateInfo",a)}catch(i){pr.isCancel(i)&&(n=!0)}finally{n||(Ws=window.setTimeout(()=>{t("requestInfo",r)},1e4))}},setSleepTimer({commit:t,dispatch:e,state:r}){const{settings:n}=r.memory;if(n.sleep){const i=n.sleepTimeout;ri=window.setTimeout(()=>{e("stop"),t("SET_FELL_ASLEEP",!0)},i*6e4)}},confirmSleepTimer({commit:t}){t("SET_FELL_ASLEEP",!1)},setRelaxTimer({state:t,commit:e}){t.relaxed&&e("SET_RELAXED",!1),Vr&&clearTimeout(Vr);const{settings:r}=t.memory;if(r.relax&&!t.hasVideo){const n=r.relaxTimeout;Vr=window.setTimeout(()=>{e("SET_RELAXED",!0)},n*1e3)}},handleBufferWaiting({commit:t},e){t("SET_BUFFER_FINE",!e)},setPlaying({commit:t,dispatch:e,state:r},n){r.playing!==n&&t("SET_PLAYING",n),ri&&clearTimeout(ri),Vr&&clearTimeout(Vr),n&&(e("setSleepTimer"),e("setRelaxTimer"))},allowFullscreen({commit:t},e){t("SET_HAS_VIDEO",e)},addBookmark({commit:t,state:e},{station:r,info:n}){t("PUSH_BOOKMARK",{station:r,info:n,time:Math.floor(Date.now()/60)});const{undoableEvent:i}=e;if(i!==void 0&&i.kind===si.BOOKMARK){const[a,d]=i.affected;r===d&&n===a&&t("SET_UNDOABLE_EVENT",void 0)}},removeBookmark({commit:t,state:e},r){const n=[...e.memory.titles.favorites],{station:i,info:a}=n[r];t("SET_UNDOABLE_EVENT",{kind:si.BOOKMARK,affected:[a,i],undo(){t("SET_BOOKMARKS",n)}}),t("REMOVE_BOOKMARK",r)},toggleBookmark({dispatch:t,state:e},{station:r,info:n}){const i=e.memory.titles.favorites.findIndex(d=>d.station===r&&d.info===n),a=i===-1;return a?t("addBookmark",{station:r,info:n}):t("removeBookmark",i),a},likeStation({state:t,getters:e,commit:r},n){r("SET_LIKE_STATE",{id:n,promise:(async()=>{if(e.likes.includes(n))throw!0;try{const i=await C0(n);return(i.ok||i.message.includes("too often"))&&r("SET_CACHE_ITEM",{[n]:{...t.memory.cache[n],liked:!0}}),i}catch{throw!1}})()})},async fetchLikeCount({state:t,commit:e},r){var i;r===void 0&&(r=t.memory.lastStation.id);const n=(i=t.memory.cache[r])==null?void 0:i.likeCount;try{const a=await L0(r);return a!==n&&e("SET_CACHE_ITEM",{[r]:{...t.memory.cache[r],likeCount:a}}),a}catch{if(n!==void 0)return n;throw new Error("Unable to fetch number of likes.")}},async showMessage({commit:t},e){const r=await new Promise(n=>{const i={type:We.NONE,buttons:["OK"],title:"",message:"",closeable:!0,handleButtonClicked:n};t("PUSH_MESSAGE",{...i,...e})});return t("SHIFT_MESSAGES"),r},showToast({commit:t},e){Hs&&clearTimeout(Hs),Hs=window.setTimeout(()=>{t("SET_TOAST",null)},5e3),t("SET_TOAST",e)},allowEnterKey({commit:t},e){t("SET_ENTER_KEY_ALLOWED",e)},async determineDateFnsLocale({state:t,commit:e},r){var n;if(t.dateFnsLocale===null&&r!=="en"){const i=await Y1(r);e("SET_DATE_FNS_LOCALE",i)}return(n=t.dateFnsLocale)!=null?n:void 0},unsetDateFnsLocale({commit:t}){t("SET_DATE_FNS_LOCALE",null)},updateDialog({state:t,commit:e,dispatch:r},n){n!==null&&t.fullscreen&&r("toggleFullscreen"),e("SET_DIALOG",n)},toggleNavbar({commit:t},e){t("SET_NAVBAR_SHOWN",e)}};ae.use(Mf);var We=(t=>(t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.QUESTION=2]="QUESTION",t[t.WARNING=3]="WARNING",t[t.INFO=4]="INFO",t))(We||{}),si=(t=>(t.STATION="station",t.LIST="list",t.BOOKMARK="bookmark",t))(si||{});const ts=new Mf.Store({strict:!1,plugins:[t=>{var e;t.subscribe((r,n)=>{n.ready&&(localStorage.data=JSON.stringify(n.memory))}),t.dispatch("applySettings",(e=t.state.memory)==null?void 0:e.settings)}],state:{active:!1,bufferFine:!0,currentDialog:null,currentInfo:void 0,darkMode:!1,dateFnsLocale:null,editing:void 0,enterKeyAllowed:!0,stickyPlayer:!1,fullscreen:!1,hasVideo:!1,likeState:void 0,memory:gi,messages:[],navbarShown:!0,playerExpanded:!1,playing:!1,ready:!1,relaxed:!1,fellAsleep:!1,searchStats:{added:[],removed:[],orderChanged:!1},sortMode:{index:void 0,newIndex:void 0},stationBackup:void 0,toast:null,undoableEvent:void 0,volume:gi.settings.volume/100},getters:cy,mutations:fy,actions:X1});function Ld(t,e){var n,i;const r=ts.state.currentDialog;return((n=r==null?void 0:r.viewId)!=null?n:null)===t&&(e===void 0||((i=r==null?void 0:r.props)==null?void 0:i.type)===e)}function _c({viewId:t,props:e,replace:r}){const n=t?{viewId:t,props:e}:null;if(ts.dispatch("updateDialog",n),r){window.history.replaceState(n,"");return}window.history.pushState(n,"")}function mt(t,e){var r;if((e==null?void 0:e.force)||!Ld(t,(r=e==null?void 0:e.props)==null?void 0:r.type)){_c({viewId:t,...e});return}e!=null&&e.toggle&&_c({viewId:null,...e})}var Q1=Object.defineProperty,Z1=Object.getOwnPropertyDescriptor,Zt=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z1(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Q1(e,r,i),i};let Dt=class extends ae{constructor(){super(...arguments);V(this,"timer");V(this,"message","");V(this,"autoHide",!1);V(this,"animationTrigger",0);V(this,"searchStats");V(this,"stationBackup");V(this,"undoableEvent");V(this,"currentList");V(this,"selectedList");V(this,"discardUndoableEvent");V(this,"updateList")}get itemRemoved(){return this.undoableEvent!==void 0}get listModified(){return this.searchStats.added.length>0||this.searchStats.removed.length>0||this.searchStats.orderChanged}get shown(){return this.itemRemoved||this.listModified}undo(){if(!this.itemRemoved){this.updateList({content:this.stationBackup});return}this.undoableEvent!==void 0&&(this.undoableEvent.undo(),this.discardUndoableEvent())}confirm(){if(this.itemRemoved){this.discardUndoableEvent();return}mt(null)}onSearchStatsChanged(e){if(e.orderChanged){this.message=this.$t("search.comparison.orderChanged");return}const r=e.added.length+e.removed.length;if(r!==0){if(r===1){const n=e.added.length===1;this.message=this.$t("search.comparison.oneChange",{name:n?e.added[0]:e.removed[0],modified:this.$tc(`search.comparison.${n?"added":"removed"}`,1)});return}this.message=this.$t(`search.comparison.${e.added.length>0?e.removed.length>0?"diff":"stationsAdded":"stationsRemoved"}`,{plus:e.added.length,minus:e.removed.length,station:this.$tc("search.comparison.station",e.added.length),added:this.$tc("search.comparison.added",e.added.length),removed:this.$tc("search.comparison.removed",e.removed.length)})}}onEventChanged(e){if(this.timer&&(clearTimeout(this.timer),this.timer=void 0),e!==void 0){this.autoHide=!0,this.animationTrigger=1-this.animationTrigger,this.message=this.$t(`general.undoableEvent.${e.kind}`,e.affected),this.timer=window.setTimeout(this.discardUndoableEvent,1e4);return}this.autoHide=!1}onListModified(e){e&&this.itemRemoved&&this.discardUndoableEvent()}};Zt([rt],Dt.prototype,"searchStats",2);Zt([rt],Dt.prototype,"stationBackup",2);Zt([rt],Dt.prototype,"undoableEvent",2);Zt([ie],Dt.prototype,"currentList",2);Zt([ie],Dt.prototype,"selectedList",2);Zt([se],Dt.prototype,"discardUndoableEvent",2);Zt([se],Dt.prototype,"updateList",2);Zt([ve("searchStats")],Dt.prototype,"onSearchStatsChanged",1);Zt([ve("undoableEvent")],Dt.prototype,"onEventChanged",1);Zt([ve("listModified")],Dt.prototype,"onListModified",1);Dt=Zt([fe],Dt);var J1=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"pointer-events-auto"},[r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.shown,expression:"shown"}],staticClass:"message-banner flex flex-col bg-surface text-xl text-on-surface shadow-theme backdrop-blur"},[r("div",{key:e.animationTrigger,class:["h-0.75 origin-left bg-accent",e.autoHide?"animate-progress":"invisible"]}),r("div",{staticClass:"mx-auto max-w-[800px] p-2.5 icons:w-fixed"},[r("div",{staticClass:"float-left px-5 py-4"},[r(El),e._v(" "+e._s(e.message))],1),r("div",{staticClass:"float-right whitespace-nowrap py-2.5"},[r(Ve,{on:{click:function(n){return e.undo()}}},[r(od),e._v(e._s(e.$t("general.undo")))],1),r(Ve,{on:{click:function(n){return e.confirm()}}},[r(Kr),e._v(e._s(e.$t("general.ok")))],1)],1)])])])},q1=[],eE=de(Dt,J1,q1,!1,null,null,null,null);const tE=eE.exports;var rE=Object.defineProperty,nE=Object.getOwnPropertyDescriptor,Ii=(t,e,r,n)=>{for(var i=n>1?void 0:n?nE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&rE(e,r,i),i};let on=class extends ae{constructor(){super(...arguments);V(this,"props");V(this,"to");V(this,"toggle");V(this,"replace")}get active(){var e;return Ld(this.to,(e=this.props)==null?void 0:e.type)}navigate(){mt(this.to,{props:this.props,toggle:this.toggle,replace:this.replace})}render(){var e,r;return(r=(e=this.$scopedSlots).default)==null?void 0:r.call(e,{navigate:this.navigate,active:this.active})}};Ii([_e({type:Object,required:!1})],on.prototype,"props",2);Ii([_e({type:String,default:null})],on.prototype,"to",2);Ii([_e({type:Boolean,default:!1})],on.prototype,"toggle",2);Ii([_e({type:Boolean,default:!1})],on.prototype,"replace",2);on=Ii([fe],on);const iE=null,aE=null;var sE=de(on,iE,aE,!1,null,null,null,null);const we=sE.exports;var oE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46s46-20.595 46-46s-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}})])};const lE={render:oE,name:"fa-solid-exclamation-circle"};var uE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758c-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122c17.864-22.658 30.113-35.797 57.303-35.797c20.429 0 45.698 13.148 45.698 32.958c0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667c0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46c0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}})])};const cE={render:uE,name:"fa-solid-question-circle"};var fE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46s46-20.595 46-46s-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}})])};const Br={render:fE,name:"fa-solid-exclamation-triangle"};var dE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M432 320h-32a16 16 0 0 0-16 16v112H64V128h144a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16H48a48 48 0 0 0-48 48v352a48 48 0 0 0 48 48h352a48 48 0 0 0 48-48V336a16 16 0 0 0-16-16ZM488 0H360c-21.37 0-32.05 25.91-17 41l35.73 35.73L135 320.37a24 24 0 0 0 0 34L157.67 377a24 24 0 0 0 34 0l243.61-243.68L471 169c15 15 41 4.5 41-17V24a24 24 0 0 0-24-24Z"}})])};const Xr={render:dE,name:"fa-solid-external-link-alt"};var hE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92c-13.4 30.2-35.5 54.2-35.8 54.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25c32.2 15.7 70.3 25 111.3 25c114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92c0-66.9-53.5-124.2-129.3-148.1c.9 6.6 1.3 13.3 1.3 20.1c0 105.9-107.7 192-240 192c-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25c21.8 12.7 52.1 25 88.7 25c3.2 0 6.1-1.9 7.3-4.8c1.3-2.9.7-6.3-1.5-8.7c-.3-.3-22.4-24.2-35.8-54.5z"}})])};const vE={render:hE,name:"fa-solid-comments"};var pE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M105.2 24.9c-3.1-8.9-15.7-8.9-18.9 0L29.8 199.7h132c-.1 0-56.6-174.8-56.6-174.8zM.9 287.7c-2.6 8 .3 16.9 7.1 22l247.9 184l-226.2-294zm160.8-88l94.3 294l94.3-294zm349.4 88l-28.8-88l-226.3 294l247.9-184c6.9-5.1 9.7-14 7.2-22zM425.7 24.9c-3.1-8.9-15.7-8.9-18.9 0l-56.6 174.8h132z"}})])};const mE={render:pE,name:"fa-brands-gitlab"};var gE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 384 512",width:"0.75em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8c-.6 16.1-4.2 28.5-11 36.9c-15.4 19.2-49.3 22.4-85.2 25.7c-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3c0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6c3.1-5.2 7.8-9.8 14.9-13.4c16.2-8.2 40.4-10.4 66.1-12.8c42.2-3.9 90-8.4 118.2-43.4c14-17.4 21.1-39.8 21.6-67.9c31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16s-16-7.2-16-16s7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16s16 7.2 16 16s-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16s-16-7.2-16-16s7.2-16 16-16z"}})])};const yE={render:gE,name:"fa-solid-code-branch"};var _E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65l-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7l65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}})])};const EE={render:_E,name:"fa-solid-times-circle"};var TE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}})])};const Dl={render:TE,name:"fa-solid-bars"};var SE=Object.defineProperty,xE=Object.getOwnPropertyDescriptor,Dd=(t,e,r,n)=>{for(var i=n>1?void 0:n?xE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&SE(e,r,i),i};let wa=class extends ae{constructor(){super(...arguments);V(this,"isMenu")}};Dd([_e({type:Boolean,default:!1})],wa.prototype,"isMenu",2);wa=Dd([fe],wa);var bE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"p-5 text-center transition-all"},[r("div",{staticClass:"float-right icons:w-fixed icons:text-icon-lg"},[e.isMenu?e._e():r(we,{attrs:{to:"menu"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r("a",{on:{click:n}},[r(Dl)],1)]}}],null,!1,1526604471)}),e._v(" "+e._s(" ")+" "),r(we,{attrs:{to:null},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r("a",{on:{click:n}},[r(EE)],1)]}}])})],1),e._t("default")],2)},CE=[],LE=de(wa,bE,CE,!1,null,null,null,null);const Er=LE.exports;var DE=Object.defineProperty,AE=Object.getOwnPropertyDescriptor,OE=(t,e,r,n)=>{for(var i=n>1?void 0:n?AE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&DE(e,r,i),i};let xo=class extends ae{constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"version","5.6.1");V(this,"copyright","\xA9 2017-2023 Marco Bauer");V(this,"repoUrl","https://gitlab.com/radiolise/radiolise.gitlab.io");V(this,"issuesUrl","https://gitlab.com/radiolise/radiolise.gitlab.io/-/issues");V(this,"versionShown",!1)}};xo=OE([fe],xo);const wE=""+new URL("logo.6222db1a.svg",import.meta.url).href;var PE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("br"),r("div",{on:{mouseenter:function(n){e.versionShown=!0},mouseleave:function(n){e.versionShown=!1},touchstart:function(n){e.versionShown=!e.versionShown}}},[r("div",{staticClass:"mb-2.5"},[r("img",{staticClass:"mr-1.25 inline h-12.5 align-middle",attrs:{src:wE,alt:"Logo"}}),r("span",{staticClass:"ml-1.25 align-middle text-3xl"},[e._v(e._s(e.appTitle))])]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.versionShown,expression:"versionShown"}]},[r("span",{class:["text-on-surface/50 transition-opacity",{"opacity-0":!e.versionShown}]},[r(yE),e._v(" "+e._s(e.version))],1)])]),r("br"),r("p",{staticClass:"my-4 py-2.5"},[e._v(e._s(e.copyright))]),r("i18n",{staticClass:"my-4 py-2.5 text-left leading-6",attrs:{path:"about.licenseInfo",tag:"p"}},[e._v(" "+e._s(e.appTitle)+" "),r("a",{attrs:{href:"https://fsfe.org/freesoftware/",target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("about.freeSoftware"))),r(Xr,{staticClass:"w-fixed"})],1)]),r("p",{staticClass:"my-4 py-2.5 text-left leading-6"},[e._v(" "+e._s(e.$t("about.noWarranty",[e.appTitle]))+" ")]),r("i18n",{staticClass:"my-4 py-2.5 text-left leading-6",attrs:{path:"about.licenseCopy",tag:"p"}},[e._v(" "+e._s(e.appTitle)),r("a",{attrs:{href:"http://www.gnu.org/licenses/",target:"_blank",rel:"noopener"}},[e._v("http://www.gnu.org/licenses/"),r(Xr,{staticClass:"w-fixed"})],1)]),r("p",{staticClass:"my-4 py-5"},[r(Ve,{attrs:{href:e.repoUrl,target:"_blank",rel:"noopener"}},[r(mE,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("about.code"))+" "),r(Xr,{staticClass:"w-fixed"})],1),r(Ve,{attrs:{href:e.issuesUrl,target:"_blank",rel:"noopener"}},[r(vE,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("about.issues"))+" "),r(Xr,{staticClass:"w-fixed"})],1)],1)],1)},IE=[],RE=de(xo,PE,IE,!1,null,null,null,null);const ME=RE.exports;var kE=Object.defineProperty,FE=Object.getOwnPropertyDescriptor,Al=(t,e,r,n)=>{for(var i=n>1?void 0:n?FE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&kE(e,r,i),i};let xi=class extends ae{constructor(){super(...arguments);V(this,"compact");V(this,"labels")}get renderedTags(){return this.labels.filter(e=>e!=="")}};Al([_e({type:Boolean,default:!1})],xi.prototype,"compact",2);Al([_e({type:Array,required:!0})],xi.prototype,"labels",2);xi=Al([fe],xi);var NE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"scrollbar-avoid"},[e._t("default"),e.renderedTags.length>0?[e._l(e.renderedTags,function(n,i){return[e._v(" "+e._s(" ")+" "),r("span",{key:i,class:["mb-0.5 inline-block text-xs",e.compact?"mr-0.5 text-on-surface/70 after:content-comma last:after:content-none":"rounded-sm bg-soft px-[0.6em] pt-[0.2em] pb-[0.3em]"]},[e._v(e._s(n))])]})]:r("span",{staticClass:"text-on-surface/50"},[e._v(" "+e._s(e.$t("general.noTags")))])],2)},BE=[],UE=de(xi,NE,BE,!1,null,null,null,null);const rs=UE.exports;var $E=Object.defineProperty,KE=Object.getOwnPropertyDescriptor,mn=(t,e,r,n)=>{for(var i=n>1?void 0:n?KE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&$E(e,r,i),i};let mr=class extends ae{constructor(){super(...arguments);V(this,"type");V(this,"value");V(this,"selectOnFocus");V(this,"input")}emitInput(){return this.input.value}emitChange(){return this.input.value}onFocus(){this.selectOnFocus&&this.input.select()}};mn([_e({type:String,default:"text"})],mr.prototype,"type",2);mn([_e({type:[String,Number],default:""})],mr.prototype,"value",2);mn([_e({type:Boolean,default:!1})],mr.prototype,"selectOnFocus",2);mn([ut()],mr.prototype,"input",2);mn([or("input")],mr.prototype,"emitInput",1);mn([or("change")],mr.prototype,"emitChange",1);mr=mn([fe],mr);var WE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("input",{ref:"input",class:["border-b-2 border-b-mute-contrast/50 focus:border-b-accent focus:bg-black/10",e.type==="number"?"w-[72px] text-center text-lg":"text-xl"],attrs:{type:e.type,spellcheck:"false"},domProps:{value:e.value},on:{input:function(n){return e.emitInput()},change:function(n){return e.emitChange()},focus:function(n){return e.onFocus()},keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.input.blur()}}})},HE=[],jE=de(mr,WE,HE,!1,null,null,null,null);const ht=jE.exports;var GE=Object.defineProperty,VE=Object.getOwnPropertyDescriptor,Ad=(t,e,r,n)=>{for(var i=n>1?void 0:n?VE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&GE(e,r,i),i};let Pa=class extends ae{constructor(){super(...arguments);V(this,"renderedTags","");V(this,"syncedTags")}created(){this.renderedTags=this.syncedTags}};Ad([Ka("tags",{type:String,required:!0})],Pa.prototype,"syncedTags",2);Pa=Ad([fe],Pa);var zE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"text-left"},[e._v(" "+e._s(e.$t("tagInput.label"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.renderedTags,placeholder:e.$t("general.tags"),type:"text"},on:{input:function(n){e.renderedTags=n},change:function(n){e.syncedTags=n}}}),r("div",{staticClass:"flex"},[e._v(" "+e._s(e.$t("tagInput.preview"))+":\xA0 "),r(rs,{attrs:{labels:e.renderedTags.split(",")}})],1)],1)},YE=[],XE=de(Pa,zE,YE,!1,null,null,null,null);const Od=XE.exports;var QE=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}})])};const wd={render:QE,name:"fa-solid-edit"};var ZE=Object.defineProperty,JE=Object.getOwnPropertyDescriptor,lr=(t,e,r,n)=>{for(var i=n>1?void 0:n?JE(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&ZE(e,r,i),i};let Ft=class extends ae{constructor(){super(...arguments);V(this,"stationReference",null);V(this,"stationClone",null);V(this,"closing",!1);V(this,"list");V(this,"id");V(this,"form");V(this,"submitButton");V(this,"lists");V(this,"editStation");V(this,"updateStation");V(this,"showMessage")}created(){var r;const e=(r=this.lists[this.list])==null?void 0:r.content.find(n=>n.id===this.id);if(e!==void 0){this.stationReference=e,this.editStation(e),this.stationClone={...e};return}this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],message:this.$t("editor.notExisting")}),mt(null,{replace:!0})}destroyed(){this.editStation(void 0)}onStationChanged(e,r){r!==null&&this.submitButton.click()}handleSubmit(){this.closing||this.updateStation(this.stationClone)}finish(){this.closing=!0,this.submitButton.click(),this.closing=!1,this.form.checkValidity()&&mt(null)}};lr([_e({type:Number,required:!0})],Ft.prototype,"list",2);lr([_e({type:String,required:!0})],Ft.prototype,"id",2);lr([ut()],Ft.prototype,"form",2);lr([ut("submit")],Ft.prototype,"submitButton",2);lr([ie],Ft.prototype,"lists",2);lr([se],Ft.prototype,"editStation",2);lr([se],Ft.prototype,"updateStation",2);lr([se],Ft.prototype,"showMessage",2);lr([ve("stationClone",{deep:!0})],Ft.prototype,"onStationChanged",1);Ft=lr([fe],Ft);var qE=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(wd,{staticClass:"w-fixed"}),e._v(" "+e._s(e.stationReference?e.stationReference.name:e.$t("editor.newStation"))+" \u2013 "+e._s(e.$t("editor.title"))+" ")],1),r("form",{ref:"form",on:{submit:function(n){return n.preventDefault(),e.handleSubmit()}}},[e.stationClone!==null?r("div",{staticClass:"text-left"},[r("sup",{staticClass:"align-text-top text-strong",attrs:{title:String(e.$t("editor.field.marked"))}},[e._v("\u2217")]),e._v(" "+e._s(e.$t("editor.field.name"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.name,placeholder:e.$t("editor.field.name"),type:"text",required:""},on:{change:function(n){e.stationClone.name=n}}}),r("sup",{staticClass:"align-text-top text-strong",attrs:{title:String(e.$t("editor.field.marked"))}},[e._v("\u2217")]),e._v(" "+e._s(e.$t("editor.field.url"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.url,placeholder:e.$t("editor.field.url"),type:"url",required:""},on:{change:function(n){e.stationClone.url=n}}}),r("sup",{staticClass:"align-text-top text-strong",attrs:{title:String(e.$t("editor.field.marked"))}},[e._v("\u2217")]),e._v(" "+e._s(e.$t("editor.field.homepage"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.homepage,placeholder:e.$t("editor.field.homepage"),type:"url",required:""},on:{change:function(n){e.stationClone.homepage=n}}}),e._v(" "+e._s(e.$t("editor.field.icon"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.icon,placeholder:e.$t("editor.field.icon"),type:"url"},on:{change:function(n){e.stationClone.icon=n}}}),e._v(" "+e._s(e.$tc("general.country"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.country,placeholder:e.$tc("general.country"),type:"text"},on:{change:function(n){e.stationClone.country=n}}}),e._v(" "+e._s(e.$tc("general.state"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.state,placeholder:e.$tc("general.state"),type:"text"},on:{change:function(n){e.stationClone.state=n}}}),e._v(" "+e._s(e.$tc("general.language"))+": "),r(ht,{staticClass:"mb-2.5 w-full",attrs:{value:e.stationClone.language,placeholder:e.$tc("general.language"),type:"text"},on:{change:function(n){e.stationClone.language=n}}}),r(Od,{attrs:{tags:e.stationClone.tags},on:{"update:tags":function(n){return e.$set(e.stationClone,"tags",n)}}}),r("br"),r("div",{staticClass:"text-left text-strong"},[e._v("\u2217 "+e._s(e.$t("editor.field.required")))])],1):e._e(),r("div",{staticClass:"py-2.5 text-right"},[r(Ve,{on:{click:function(n){return e.finish()}}},[r(Kr,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("general.done"))+" ")],1),r("input",{ref:"submit",attrs:{type:"submit",name:"submit",hidden:""}})],1)])])},eT=[],tT=de(Ft,qE,eT,!1,null,null,null,null);const rT=tT.exports;var nT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M528 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM128 180v-40c0-6.627-5.373-12-12-12H76c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm-336 96v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm-336 96v-40c0-6.627-5.373-12-12-12H76c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12zm288 0v-40c0-6.627-5.373-12-12-12H172c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h232c6.627 0 12-5.373 12-12zm96 0v-40c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12z"}})])};const Pd={render:nT,name:"fa-solid-keyboard"};var iT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95c-7.34 11.17-4.22 26.18 6.95 33.51c66.27 43.49 105.82 116.6 105.82 195.58c0 78.98-39.55 152.09-105.82 195.58c-11.17 7.32-14.29 22.34-6.95 33.5c7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24c-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36c6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45c-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81c-11.61 6.41-15.84 21-9.45 32.61c6.43 11.66 21.05 15.8 32.61 9.45c28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}})])};const bo={render:iT,name:"fa-solid-volume-up"};var aT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}})])};const sT={render:aT,name:"fa-solid-volume-mute"};var oT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128c0-70.8 57.3-128 128-128c70.8 0 128 57.3 128 128c0 70.8-57.3 128-128 128z"}})])};const lT={render:oT,name:"fa-solid-toggle-on"};var uT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128c70.741 0 128 57.249 128 128c0 70.741-57.249 128-128 128c-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128c0 70.74-57.249 128-128 128z"}})])};const cT={render:uT,name:"fa-solid-toggle-off"},oi={h:{alias:"H",trigger(){mt("hotkeys",{toggle:!0})}},m:{alias:"M",trigger(){mt("menu",{toggle:!0})}},"-":{alias:"\u2013",trigger(t){const{adjustVolume:e,showToast:r}=t;e(-.1),r({icon:t.volume===0?sT:bo,message:t.$t("hotkeys.onScreenToasts.volume",[t.volume*100])})}},"+":{alias:"+",trigger(t){const{adjustVolume:e,showToast:r}=t;e(.1),r({icon:bo,message:t.$t("hotkeys.onScreenToasts.volume",[t.volume*100])})}}," ":{alias:" ",trigger(t){const{toggleStation:e,showToast:r}=t;e().catch(()=>{r({icon:Br,message:t.$t("general.listEmpty[0]")})})}},c:{alias:"C",trigger(t){const{applySettings:e,settings:r,showToast:n}=t,i=!r.compactMode;e({...r,compactMode:i}),n({message:t.$t("settings.compactMode.name"),icon:i?lT:cT})}},f:{alias:"F",trigger(t){const{hasVideo:e,toggleFullscreen:r,showToast:n}=t;if(e){r();return}n({icon:Br,message:t.$t("hotkeys.onScreenToasts.noVideoStream")})}},Escape:{alias:"Esc",trigger({closeModal:t}){t()||mt(null)}},p:{alias:"P",trigger(t){if(t.currentStation!==void 0){const{playClosestStation:e,showToast:r}=t;e(!1),r({message:t.$t("hotkeys.onScreenToasts.playingPrevious",[t.currentStation.name])})}}},n:{alias:"N",trigger(t){if(t.currentStation===void 0)return;const{playClosestStation:e,showToast:r}=t;e(!0),r({message:t.$t("hotkeys.onScreenToasts.playingNext",[t.currentStation.name])})}},number:{alias:"0-9",trigger({handleNumberInput:t},e){t(e)}}};var fT=Object.defineProperty,dT=Object.getOwnPropertyDescriptor,hT=(t,e,r,n)=>{for(var i=n>1?void 0:n?dT(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&fT(e,r,i),i};let Co=class extends ae{get bindingAliases(){return Object.values(oi).map(t=>t.alias)}};Co=hT([fe],Co);var vT=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(Pd,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("hotkeys.title"))+" ")],1),r("div",{staticClass:"text-left"},e._l(e.bindingAliases,function(n){return r("div",{key:n,staticClass:"flex"},[r("div",{staticClass:"py-2 px-2.5 text-center text-xl"},[r("div",{staticClass:"mt-1.25 flex h-8.75 w-10 rounded-[5px] bg-soft"},[r("span",{staticClass:"m-auto"},[e._v(e._s(n))])]),n===" "?r("span",{staticClass:"text-xs"},[e._v(e._s(e.$t("hotkeys.space")))]):e._e()]),r("div",{staticClass:"py-2.5 pr-2.5"},[r("div",{staticClass:"mb-1.25 text-xl"},[e._v(" "+e._s(e.$t(`hotkeys.bindings.${n}.name`))+" ")]),r("div",{staticClass:"description"},[e._v(" "+e._s(e.$t(`hotkeys.bindings.${n}.description`))+" ")])])])}),0)])},pT=[],mT=de(Co,vT,pT,!1,null,null,null,null);const gT=mT.exports;var yT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}})])};const _T={render:yT,name:"fa-solid-arrow-right"};var ET=Object.defineProperty,TT=Object.getOwnPropertyDescriptor,Ol=(t,e,r,n)=>{for(var i=n>1?void 0:n?TT(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&ET(e,r,i),i};let bi=class extends ae{constructor(){super(...arguments);V(this,"selected")}toggleSelection(){return!this.selected}};Ol([$a("change",Boolean)],bi.prototype,"selected",2);Ol([or("change")],bi.prototype,"toggleSelection",1);bi=Ol([fe],bi);var ST=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"flex cursor-pointer p-2.5 transition-[background-color] duration-200 hover:bg-black/10",on:{click:function(n){return e.toggleSelection()}}},[r("div",{class:["w-0 text-emphasis duration-200",e.selected?"mr-6.25":"opacity-0"]},[r(Kr)],1),r("div",[r("h4",{staticClass:"m-0"},[e._t("default")],2),r("br"),e._t("tags")],2)])},xT=[],bT=de(bi,ST,xT,!1,null,null,null,null);const Id=bT.exports;var CT=Object.defineProperty,LT=Object.getOwnPropertyDescriptor,Ri=(t,e,r,n)=>{for(var i=n>1?void 0:n?LT(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&CT(e,r,i),i};let ln=class extends ae{constructor(){super(...arguments);V(this,"reader",new FileReader);V(this,"imported",!1);V(this,"fileInput");V(this,"showMessage")}created(){this.reader.addEventListener("load",async()=>{const e=await yi(()=>import("./index.a3ca5ec5.js"),[],import.meta.url);try{const r=e.parse(this.reader.result);this.handleReaderLoaded(r)}catch{this.handleReaderError()}})}handleFileChanged(e){const{files:r}=e.target;r!==null&&this.reader.readAsText(r[0])}handleReaderLoaded(e){return this.imported=!0,this.fileInput.value="",e}handleReaderError(){}handleDrop({dataTransfer:e}){if(e===null)return;const{files:r}=e;if(r.length>1){this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],title:this.$t("dropZone.multipleFilesError.title"),message:this.$t("dropZone.multipleFilesError.description")});return}this.reader.readAsText(r[0])}reset(){this.imported=!1}};Ri([ut()],ln.prototype,"fileInput",2);Ri([se],ln.prototype,"showMessage",2);Ri([or("change")],ln.prototype,"handleReaderLoaded",1);Ri([or("error")],ln.prototype,"handleReaderError",1);ln=Ri([fe],ln);var DT=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("label",{staticClass:"flex h-[142px] cursor-pointer border-[1px] border-dotted border-[#888] bg-soft p-2.5 text-center",on:{drop:function(n){return n.preventDefault(),e.handleDrop.apply(null,arguments)},dragover:function(n){n.preventDefault()}}},[r("div",{staticClass:"my-auto"},[r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.imported,expression:"imported"}]},[r("div",{staticClass:"text-[1.2em] text-emphasis"},[r(Kr),e._v(" "+e._s(e.$t("dropZone.fileAdded")))],1),r("br")]),e._v(" "+e._s(e.$t("dropZone.usage"))+" ")]),r("input",{ref:"fileInput",attrs:{hidden:"",type:"file",accept:"text/plain, application/x-yaml, .txt"},on:{change:e.handleFileChanged}})])},AT=[],OT=de(ln,DT,AT,!1,null,null,null,null);const wT=OT.exports;var PT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M16 288c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h112v-64zm489-183L407.1 7c-4.5-4.5-10.6-7-17-7H384v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H152c-13.3 0-24 10.7-24 24v264h128v-65.2c0-14.3 17.3-21.4 27.4-11.3L379 308c6.6 6.7 6.6 17.4 0 24l-95.7 96.4c-10.1 10.1-27.4 3-27.4-11.3V352H128v136c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H376c-13.2 0-24-10.8-24-24z"}})])};const ns={render:PT,name:"fa-solid-file-import"};var IT=Object.defineProperty,RT=Object.getOwnPropertyDescriptor,Hr=(t,e,r,n)=>{for(var i=n>1?void 0:n?RT(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&IT(e,r,i),i};let sr=class extends ae{constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"backup",null);V(this,"listName");V(this,"type");V(this,"dropZone");V(this,"applySettings");V(this,"changeList");V(this,"createList");V(this,"showMessage");V(this,"updateList")}get stationList(){return this.type==="list"?this.backup:null}setBackup(e){if(e.version!=="2"||this.type!==e.type){this.handleError();return}const r=e.data;if(this.type==="settings"){this.backup=r;return}const n=Object.entries(r)[0];[this.listName]=n,this.backup=n[1].map(i=>({...i,selected:!0}))}handleError(){this.showMessage({type:We.ERROR,buttons:[this.$t("general.ok")],title:this.$t("general.error.fileNotSupported.title"),message:this.$t("general.error.fileNotSupported.description",[this.appTitle])}),this.backup===null&&this.dropZone.reset()}async importItems(){if(this.type==="settings"){this.applySettings(this.backup),window.history.back();return}const e=this.listName,r=({selected:i,...a})=>a,n=this.backup.filter(i=>i.selected).map(i=>r(i));try{this.createList({name:e,content:n}),await this.$nextTick(),this.changeList(-1),mt(null)}catch(i){i.message.includes("empty")?this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],title:this.$t("importWizard.emptyName.title"),message:this.$t("importWizard.emptyName.description")}):await this.showMessage({type:We.QUESTION,title:this.$t("importWizard.nameTaken.title"),message:this.$t("importWizard.nameTaken.description"),buttons:[this.$t("general.yes"),this.$t("general.no")],closeable:!1})===0&&(mt(null),this.updateList({name:e,content:n}))}}};Hr([_e({type:String,required:!0})],sr.prototype,"type",2);Hr([ut()],sr.prototype,"dropZone",2);Hr([se],sr.prototype,"applySettings",2);Hr([se],sr.prototype,"changeList",2);Hr([se],sr.prototype,"createList",2);Hr([se],sr.prototype,"showMessage",2);Hr([se],sr.prototype,"updateList",2);sr=Hr([fe],sr);var MT=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(ns,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("general.importBackup"))+" ")],1),r("p",{staticClass:"description mb-3.75 py-2.5"},[e._v(" "+e._s(e.$t("importWizard.description",[e.$t(`importWizard.${e.type==="list"?"stationLists":"settings"}`)]))+" ")]),r("div",{staticClass:"text-left"},[r("div",[r("h4",{staticClass:"mt-0"},[e.type==="list"?[e._v(" "+e._s(e.$t("importWizard.step",[1,e.$t("importWizard.chooseFile")]))+" ")]:[e._v(" "+e._s(e.$t("importWizard.chooseFile"))+" ")]],2),r(wT,{ref:"dropZone",on:{change:e.setBackup,error:function(n){return e.handleError()}}})],1),e.backup?[r("br"),e.type==="list"?[r("br"),r("div",[r("h4",{staticClass:"mt-0"},[e._v(" "+e._s(e.$t("importWizard.step",[2,e.$t("importWizard.setName")]))+" ")]),r("div",{staticClass:"inline-block"},[r(ht,{attrs:{autocomplete:"off",placeholder:e.$t("general.newName"),"select-on-focus":""},model:{value:e.listName,callback:function(n){e.listName=n},expression:"listName"}})],1)]),r("br"),r("br"),r("div",[r("h4",{staticClass:"mt-0"},[e._v(" "+e._s(e.$t("importWizard.step",[3,e.$t("importWizard.selectStations")]))+" ")]),r("div",e._l(e.stationList,function(n,i){return r(Id,{key:i,scopedSlots:e._u([{key:"tags",fn:function(){return[r(rs,{attrs:{labels:[n.country,n.state,...n.tags.split(",")]}})]},proxy:!0}],null,!0),model:{value:n.selected,callback:function(a){e.$set(n,"selected",a)},expression:"station.selected"}},[e._v(" "+e._s(n.name)+" ")])}),1)]),r("br")]:e._e(),r("div",{staticClass:"py-2.5 text-right"},[r(we,{attrs:{to:e.type==="list"?null:"settings"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(Ve,{on:{click:n}},[r(yl),e._v(" "+e._s(e.$t("general.cancel")))],1)]}}],null,!1,1986702421)}),r(Ve,{on:{click:function(n){return e.importItems()}}},[r(_T),e._v(" "+e._s(e.$t("general.apply")))],1)],1)]:e._e()],2)])},kT=[],FT=de(sr,MT,kT,!1,null,null,null,null);const NT=FT.exports;var BT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}})])};const Ia={render:BT,name:"fa-solid-plus"};var UT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}})])};const $T={render:UT,name:"fa-solid-trash"};var KT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128c0-70.7 57.2-128 128-128c70.7 0 128 57.2 128 128c0 70.7-57.2 128-128 128z"}})])};const Gt={render:KT,name:"fa-solid-search"};var WT=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20s9 20 20 20s20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20s9 20 20 20s20-9 20-20z"}})])};const is={render:WT,name:"fa-solid-download"};function un(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Me(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ia(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ia=function(r){return typeof r}:ia=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ia(t)}function Pe(t){Me(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ia(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function HT(t,e){Me(2,arguments);var r=Pe(t).getTime(),n=un(e);return new Date(r+n)}var jT={};function Jn(){return jT}function Lo(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function aa(t,e){Me(2,arguments);var r=Pe(t),n=Pe(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function sa(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sa=function(r){return typeof r}:sa=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sa(t)}function GT(t){return Me(1,arguments),t instanceof Date||sa(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function VT(t){if(Me(1,arguments),!GT(t)&&typeof t!="number")return!1;var e=Pe(t);return!isNaN(Number(e))}function zT(t,e){Me(2,arguments);var r=Pe(t),n=Pe(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function YT(t,e){return Me(2,arguments),Pe(t).getTime()-Pe(e).getTime()}var Ec={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},XT="trunc";function QT(t){return t?Ec[t]:Ec[XT]}function ZT(t){Me(1,arguments);var e=Pe(t);return e.setHours(23,59,59,999),e}function JT(t){Me(1,arguments);var e=Pe(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function qT(t){Me(1,arguments);var e=Pe(t);return ZT(e).getTime()===JT(e).getTime()}function e2(t,e){Me(2,arguments);var r=Pe(t),n=Pe(e),i=aa(r,n),a=Math.abs(zT(r,n)),d;if(a<1)d=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);var D=aa(r,n)===-i;qT(Pe(t))&&a===1&&aa(t,n)===1&&(D=!1),d=i*(a-Number(D))}return d===0?0:d}function t2(t,e,r){Me(2,arguments);var n=YT(t,e)/1e3;return QT(r==null?void 0:r.roundingMethod)(n)}function r2(t,e){Me(2,arguments);var r=un(e);return HT(t,-r)}var n2=864e5;function i2(t){Me(1,arguments);var e=Pe(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),i=r-n;return Math.floor(i/n2)+1}function Ra(t){Me(1,arguments);var e=1,r=Pe(t),n=r.getUTCDay(),i=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function Rd(t){Me(1,arguments);var e=Pe(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=Ra(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var d=Ra(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=d.getTime()?r:r-1}function a2(t){Me(1,arguments);var e=Rd(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=Ra(r);return n}var s2=6048e5;function o2(t){Me(1,arguments);var e=Pe(t),r=Ra(e).getTime()-a2(e).getTime();return Math.round(r/s2)+1}function Ma(t,e){var r,n,i,a,d,D,l,w;Me(1,arguments);var b=Jn(),B=un((r=(n=(i=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(d=e.locale)===null||d===void 0||(D=d.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&i!==void 0?i:b.weekStartsOn)!==null&&n!==void 0?n:(l=b.locale)===null||l===void 0||(w=l.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&r!==void 0?r:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var O=Pe(t),$=O.getUTCDay(),F=($<B?7:0)+$-B;return O.setUTCDate(O.getUTCDate()-F),O.setUTCHours(0,0,0,0),O}function Md(t,e){var r,n,i,a,d,D,l,w;Me(1,arguments);var b=Pe(t),B=b.getUTCFullYear(),O=Jn(),$=un((r=(n=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(d=e.locale)===null||d===void 0||(D=d.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:O.firstWeekContainsDate)!==null&&n!==void 0?n:(l=O.locale)===null||l===void 0||(w=l.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!($>=1&&$<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=new Date(0);F.setUTCFullYear(B+1,0,$),F.setUTCHours(0,0,0,0);var k=Ma(F,e),M=new Date(0);M.setUTCFullYear(B,0,$),M.setUTCHours(0,0,0,0);var I=Ma(M,e);return b.getTime()>=k.getTime()?B+1:b.getTime()>=I.getTime()?B:B-1}function l2(t,e){var r,n,i,a,d,D,l,w;Me(1,arguments);var b=Jn(),B=un((r=(n=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(d=e.locale)===null||d===void 0||(D=d.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&i!==void 0?i:b.firstWeekContainsDate)!==null&&n!==void 0?n:(l=b.locale)===null||l===void 0||(w=l.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&r!==void 0?r:1),O=Md(t,e),$=new Date(0);$.setUTCFullYear(O,0,B),$.setUTCHours(0,0,0,0);var F=Ma($,e);return F}var u2=6048e5;function c2(t,e){Me(1,arguments);var r=Pe(t),n=Ma(r,e).getTime()-l2(r,e).getTime();return Math.round(n/u2)+1}function Ce(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var f2={y:function(e,r){var n=e.getUTCFullYear(),i=n>0?n:1-n;return Ce(r==="yy"?i%100:i,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):Ce(n+1,2)},d:function(e,r){return Ce(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return Ce(e.getUTCHours()%12||12,r.length)},H:function(e,r){return Ce(e.getUTCHours(),r.length)},m:function(e,r){return Ce(e.getUTCMinutes(),r.length)},s:function(e,r){return Ce(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,i=e.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,n-3));return Ce(a,r.length)}};const Cr=f2;var bn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},d2={G:function(e,r,n){var i=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var i=e.getUTCFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Cr.y(e,r)},Y:function(e,r,n,i){var a=Md(e,i),d=a>0?a:1-a;if(r==="YY"){var D=d%100;return Ce(D,2)}return r==="Yo"?n.ordinalNumber(d,{unit:"year"}):Ce(d,r.length)},R:function(e,r){var n=Rd(e);return Ce(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return Ce(n,r.length)},Q:function(e,r,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return Ce(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,r,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return Ce(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,r,n){var i=e.getUTCMonth();switch(r){case"M":case"MM":return Cr.M(e,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,r,n){var i=e.getUTCMonth();switch(r){case"L":return String(i+1);case"LL":return Ce(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,r,n,i){var a=c2(e,i);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):Ce(a,r.length)},I:function(e,r,n){var i=o2(e);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):Ce(i,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Cr.d(e,r)},D:function(e,r,n){var i=i2(e);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ce(i,r.length)},E:function(e,r,n){var i=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,r,n,i){var a=e.getUTCDay(),d=(a-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(d);case"ee":return Ce(d,2);case"eo":return n.ordinalNumber(d,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,r,n,i){var a=e.getUTCDay(),d=(a-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(d);case"cc":return Ce(d,r.length);case"co":return n.ordinalNumber(d,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,r,n){var i=e.getUTCDay(),a=i===0?7:i;switch(r){case"i":return String(a);case"ii":return Ce(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,r,n){var i=e.getUTCHours(),a=i/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,r,n){var i=e.getUTCHours(),a;switch(i===12?a=bn.noon:i===0?a=bn.midnight:a=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,r,n){var i=e.getUTCHours(),a;switch(i>=17?a=bn.evening:i>=12?a=bn.afternoon:i>=4?a=bn.morning:a=bn.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Cr.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Cr.H(e,r)},K:function(e,r,n){var i=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ce(i,r.length)},k:function(e,r,n){var i=e.getUTCHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ce(i,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Cr.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Cr.s(e,r)},S:function(e,r){return Cr.S(e,r)},X:function(e,r,n,i){var a=i._originalDate||e,d=a.getTimezoneOffset();if(d===0)return"Z";switch(r){case"X":return Sc(d);case"XXXX":case"XX":return Yr(d);case"XXXXX":case"XXX":default:return Yr(d,":")}},x:function(e,r,n,i){var a=i._originalDate||e,d=a.getTimezoneOffset();switch(r){case"x":return Sc(d);case"xxxx":case"xx":return Yr(d);case"xxxxx":case"xxx":default:return Yr(d,":")}},O:function(e,r,n,i){var a=i._originalDate||e,d=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Tc(d,":");case"OOOO":default:return"GMT"+Yr(d,":")}},z:function(e,r,n,i){var a=i._originalDate||e,d=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Tc(d,":");case"zzzz":default:return"GMT"+Yr(d,":")}},t:function(e,r,n,i){var a=i._originalDate||e,d=Math.floor(a.getTime()/1e3);return Ce(d,r.length)},T:function(e,r,n,i){var a=i._originalDate||e,d=a.getTime();return Ce(d,r.length)}};function Tc(t,e){var r=t>0?"-":"+",n=Math.abs(t),i=Math.floor(n/60),a=n%60;if(a===0)return r+String(i);var d=e||"";return r+String(i)+d+Ce(a,2)}function Sc(t,e){if(t%60===0){var r=t>0?"-":"+";return r+Ce(Math.abs(t)/60,2)}return Yr(t,e)}function Yr(t,e){var r=e||"",n=t>0?"-":"+",i=Math.abs(t),a=Ce(Math.floor(i/60),2),d=Ce(i%60,2);return n+a+r+d}const h2=d2;var xc=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},kd=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},v2=function(e,r){var n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return xc(e,r);var d;switch(i){case"P":d=r.dateTime({width:"short"});break;case"PP":d=r.dateTime({width:"medium"});break;case"PPP":d=r.dateTime({width:"long"});break;case"PPPP":default:d=r.dateTime({width:"full"});break}return d.replace("{{date}}",xc(i,r)).replace("{{time}}",kd(a,r))},p2={p:kd,P:v2};const m2=p2;var g2=["D","DD"],y2=["YY","YYYY"];function _2(t){return g2.indexOf(t)!==-1}function E2(t){return y2.indexOf(t)!==-1}function bc(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var T2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S2=function(e,r,n){var i,a=T2[e];return typeof a=="string"?i=a:r===1?i=a.one:i=a.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};const x2=S2;function js(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var b2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},L2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D2={date:js({formats:b2,defaultWidth:"full"}),time:js({formats:C2,defaultWidth:"full"}),dateTime:js({formats:L2,defaultWidth:"full"})};const A2=D2;var O2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w2=function(e,r,n,i){return O2[e]};const P2=w2;function ni(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",i;if(n==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,d=r!=null&&r.width?String(r.width):a;i=t.formattingValues[d]||t.formattingValues[a]}else{var D=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[l]||t.values[D]}var w=t.argumentCallback?t.argumentCallback(e):e;return i[w]}}var I2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},R2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},M2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},N2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},B2=function(e,r){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},U2={ordinalNumber:B2,era:ni({values:I2,defaultWidth:"wide"}),quarter:ni({values:R2,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ni({values:M2,defaultWidth:"wide"}),day:ni({values:k2,defaultWidth:"wide"}),dayPeriod:ni({values:F2,defaultWidth:"wide",formattingValues:N2,defaultFormattingWidth:"wide"})};const $2=U2;function ii(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;var d=a[0],D=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(D)?W2(D,function(B){return B.test(d)}):K2(D,function(B){return B.test(d)}),w;w=t.valueCallback?t.valueCallback(l):l,w=r.valueCallback?r.valueCallback(w):w;var b=e.slice(d.length);return{value:w,rest:b}}}function K2(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function W2(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function H2(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var i=n[0],a=e.match(t.parsePattern);if(!a)return null;var d=t.valueCallback?t.valueCallback(a[0]):a[0];d=r.valueCallback?r.valueCallback(d):d;var D=e.slice(i.length);return{value:d,rest:D}}}var j2=/^(\d+)(th|st|nd|rd)?/i,G2=/\d+/i,V2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z2={any:[/^b/i,/^(a|c)/i]},Y2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},X2={any:[/1/i,/2/i,/3/i,/4/i]},Q2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},J2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},q2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rS={ordinalNumber:H2({matchPattern:j2,parsePattern:G2,valueCallback:function(e){return parseInt(e,10)}}),era:ii({matchPatterns:V2,defaultMatchWidth:"wide",parsePatterns:z2,defaultParseWidth:"any"}),quarter:ii({matchPatterns:Y2,defaultMatchWidth:"wide",parsePatterns:X2,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ii({matchPatterns:Q2,defaultMatchWidth:"wide",parsePatterns:Z2,defaultParseWidth:"any"}),day:ii({matchPatterns:J2,defaultMatchWidth:"wide",parsePatterns:q2,defaultParseWidth:"any"}),dayPeriod:ii({matchPatterns:eS,defaultMatchWidth:"any",parsePatterns:tS,defaultParseWidth:"any"})};const nS=rS;var iS={code:"en-US",formatDistance:x2,formatLong:A2,formatRelative:P2,localize:$2,match:nS,options:{weekStartsOn:0,firstWeekContainsDate:1}};const wl=iS;var aS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oS=/^'([^]*?)'?$/,lS=/''/g,uS=/[a-zA-Z]/;function Do(t,e,r){var n,i,a,d,D,l,w,b,B,O,$,F,k,M,I,P,T,R;Me(2,arguments);var L=String(e),_=Jn(),y=(n=(i=r==null?void 0:r.locale)!==null&&i!==void 0?i:_.locale)!==null&&n!==void 0?n:wl,m=un((a=(d=(D=(l=r==null?void 0:r.firstWeekContainsDate)!==null&&l!==void 0?l:r==null||(w=r.locale)===null||w===void 0||(b=w.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&D!==void 0?D:_.firstWeekContainsDate)!==null&&d!==void 0?d:(B=_.locale)===null||B===void 0||(O=B.options)===null||O===void 0?void 0:O.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=un(($=(F=(k=(M=r==null?void 0:r.weekStartsOn)!==null&&M!==void 0?M:r==null||(I=r.locale)===null||I===void 0||(P=I.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&k!==void 0?k:_.weekStartsOn)!==null&&F!==void 0?F:(T=_.locale)===null||T===void 0||(R=T.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&$!==void 0?$:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!y.localize)throw new RangeError("locale must contain localize property");if(!y.formatLong)throw new RangeError("locale must contain formatLong property");var C=Pe(t);if(!VT(C))throw new RangeError("Invalid time value");var x=Lo(C),o=r2(C,x),c={firstWeekContainsDate:m,weekStartsOn:p,locale:y,_originalDate:C},S=L.match(sS).map(function(f){var h=f[0];if(h==="p"||h==="P"){var u=m2[h];return u(f,y.formatLong)}return f}).join("").match(aS).map(function(f){if(f==="''")return"'";var h=f[0];if(h==="'")return cS(f);var u=h2[h];if(u)return!(r!=null&&r.useAdditionalWeekYearTokens)&&E2(f)&&bc(f,e,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&_2(f)&&bc(f,e,String(t)),u(o,f,y.localize,c);if(h.match(uS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return f}).join("");return S}function cS(t){var e=t.match(oS);return e?e[1].replace(lS,"'"):t}function Fd(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function fS(t){return Fd({},t)}var Cc=1440,dS=2520,Gs=43200,hS=86400;function vS(t,e,r){var n,i;Me(2,arguments);var a=Jn(),d=(n=(i=r==null?void 0:r.locale)!==null&&i!==void 0?i:a.locale)!==null&&n!==void 0?n:wl;if(!d.formatDistance)throw new RangeError("locale must contain formatDistance property");var D=aa(t,e);if(isNaN(D))throw new RangeError("Invalid time value");var l=Fd(fS(r),{addSuffix:Boolean(r==null?void 0:r.addSuffix),comparison:D}),w,b;D>0?(w=Pe(e),b=Pe(t)):(w=Pe(t),b=Pe(e));var B=t2(b,w),O=(Lo(b)-Lo(w))/1e3,$=Math.round((B-O)/60),F;if($<2)return r!=null&&r.includeSeconds?B<5?d.formatDistance("lessThanXSeconds",5,l):B<10?d.formatDistance("lessThanXSeconds",10,l):B<20?d.formatDistance("lessThanXSeconds",20,l):B<40?d.formatDistance("halfAMinute",0,l):B<60?d.formatDistance("lessThanXMinutes",1,l):d.formatDistance("xMinutes",1,l):$===0?d.formatDistance("lessThanXMinutes",1,l):d.formatDistance("xMinutes",$,l);if($<45)return d.formatDistance("xMinutes",$,l);if($<90)return d.formatDistance("aboutXHours",1,l);if($<Cc){var k=Math.round($/60);return d.formatDistance("aboutXHours",k,l)}else{if($<dS)return d.formatDistance("xDays",1,l);if($<Gs){var M=Math.round($/Cc);return d.formatDistance("xDays",M,l)}else if($<hS)return F=Math.round($/Gs),d.formatDistance("aboutXMonths",F,l)}if(F=e2(b,w),F<12){var I=Math.round($/Gs);return d.formatDistance("xMonths",I,l)}else{var P=F%12,T=Math.floor(F/12);return P<3?d.formatDistance("aboutXYears",T,l):P<9?d.formatDistance("overXYears",T,l):d.formatDistance("almostXYears",T+1,l)}}function pS(t,e){return Me(1,arguments),vS(t,Date.now(),e)}var mS=["years","months","weeks","days","hours","minutes","seconds"];function gS(t,e){var r,n,i,a,d;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var D=Jn(),l=(r=(n=e==null?void 0:e.locale)!==null&&n!==void 0?n:D.locale)!==null&&r!==void 0?r:wl,w=(i=e==null?void 0:e.format)!==null&&i!==void 0?i:mS,b=(a=e==null?void 0:e.zero)!==null&&a!==void 0?a:!1,B=(d=e==null?void 0:e.delimiter)!==null&&d!==void 0?d:" ";if(!l.formatDistance)return"";var O=w.reduce(function($,F){var k="x".concat(F.replace(/(^.)/,function(I){return I.toUpperCase()})),M=t[F];return typeof M=="number"&&(b||t[F])?$.concat(l.formatDistance(k,M)):$},[]).join(B);return O}function Pl(t,e){return`(${e+1}) ${t}`}function as(t,e){const{start:r,getEntry:n,end:i}=e;return[r,...t.map(n),i].join(`
`)}function yS(t){return nd({version:"2",type:"list",data:{[t.name]:t.content}})}function _S(t){return as(t,{start:"[playlist]",getEntry:(e,r)=>`File${r+1}=${e.url}
Title${r+1}=${Pl(e.name,r)}`,end:`Version=2
`})}function ES(t){return as(t,{start:"#EXTM3U",getEntry:(e,r)=>`#EXTINF:-1,${Pl(e.name,r).replace(/(\s*[+\-[\]]\s*)+/g," ")}
${e.url}`,end:""})}function Vs(t){return t.replace(/[\u00A0-\u9999<>&]/g,e=>`&#${e.codePointAt(0)};`)}function TS(t){return as(t,{start:`<?xml version="1.0" encoding="UTF-8"?>
<playlist version="1" xmlns="http://xspf.org/ns/0/">
  <trackList>`,getEntry:(e,r)=>`    <track>
      <title>${Vs(Pl(e.name,r))}</title>
      <location>${Vs(e.url)}</location>
      <image>${Vs(e.icon)}</image>
    </track>`,end:`  </trackList>
</playlist>
`})}async function SS({type:t,name:e,content:r}){switch(t){case"txt":return yS({name:e,content:r});case"pls":return _S(r);case"m3u":return ES(r);case"xspf":return TS(r);default:throw new Error("List conversion failed: Unknown output type")}}async function Nd(t){const e=await SS(t),{name:r,type:n}=t;return Qa({name:r,type:n,output:e})}async function xS(t){const e="Bookmarks",r="txt",n=await ts.dispatch("determineDateFnsLocale",Cd.locale),i=as(t,{start:`# RADIOLISE BOOKMARKS
# As of: ${Do(new Date,"Pp",{locale:n})}
`,getEntry:({time:a,info:d,station:D})=>`- ${Do(a*60,"Pp",{locale:n})} | ${d} (${D})`,end:""});return Qa({name:e,type:r,output:i})}var bS=Object.defineProperty,CS=Object.getOwnPropertyDescriptor,Il=(t,e,r,n)=>{for(var i=n>1?void 0:n?CS(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&bS(e,r,i),i};let kn=class extends ae{constructor(){super(...arguments);V(this,"changeList");V(this,"showMessage")}checkForEmptyList(e){return e.length===0?(this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],message:this.$t("general.listEmpty[0]")}),!0):!1}download(e){this.checkForEmptyList(e.content)||Nd(e)}};Il([se],kn.prototype,"changeList",2);Il([se],kn.prototype,"showMessage",2);kn=Il([fe],kn);var LS=Object.defineProperty,DS=Object.getOwnPropertyDescriptor,Rt=(t,e,r,n)=>{for(var i=n>1?void 0:n?DS(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&LS(e,r,i),i};let lt=class extends Vn(kn){constructor(){super(...arguments);V(this,"active",!1);V(this,"name");V(this,"index");V(this,"content");V(this,"adding");V(this,"removable");V(this,"input");V(this,"createList");V(this,"allowEnterKey");V(this,"renameList");V(this,"removeList")}get isNewList(){return this.name===""}get shown(){return!this.isNewList||this.adding}async handleAddingChanged(e){e&&(await this.$nextTick(),this.input.focus())}handleFocus(){this.active=!0,this.input.select()}emitBlur(){}handleBlur(){this.active=!1,this.rename(),this.isNewList&&this.emitBlur()}handleEnterPress(){this.input.blur(),this.allowEnterKey(!1)}rename(){const e=this.input.value;if(e!==""){const r=this.name;if(e!==r)try{this.isNewList?this.createList({name:e,content:[]}):this.renameList({index:this.index,name:e})}catch{this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],title:this.$t("listManager.invalidName"),message:this.$t("listManager.nameTaken",[e])})}return}this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],title:this.$t("listManager.invalidName"),message:this.$t("listManager.nameEmpty")})}remove(){this.removeList(this.index)}exportList(){this.download({name:this.name,type:"txt",content:this.content})}change(){this.changeList(this.index),mt("search")}};Rt([_e({type:String,default:""})],lt.prototype,"name",2);Rt([_e({type:Number,default:-1})],lt.prototype,"index",2);Rt([_e({type:Array})],lt.prototype,"content",2);Rt([_e({type:Boolean,default:!1})],lt.prototype,"adding",2);Rt([_e({type:Boolean,default:!1})],lt.prototype,"removable",2);Rt([ut()],lt.prototype,"input",2);Rt([se],lt.prototype,"createList",2);Rt([se],lt.prototype,"allowEnterKey",2);Rt([se],lt.prototype,"renameList",2);Rt([se],lt.prototype,"removeList",2);Rt([ve("adding")],lt.prototype,"handleAddingChanged",1);Rt([or("blur")],lt.prototype,"emitBlur",1);lt=Rt([fe],lt);var AS=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:["flex max-w-sm",{hidden:!e.shown}]},[r("div",{staticClass:"px-2"},[r("input",{ref:"input",staticClass:"w-full border-b-2 border-b-mute-contrast/50 text-xl focus:border-b-accent focus:bg-black/10",attrs:{type:"text",placeholder:String(e.isNewList?e.$t("listManager.specifyName"):e.$t("general.newName")),spellcheck:"false"},domProps:{value:e.name},on:{focus:function(n){return e.handleFocus()},blur:function(n){return e.handleBlur()},keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.handleEnterPress()}}})]),r("div",{staticClass:"shrink-0 icons:w-fixed"},[r("a",{class:{hidden:!e.active}},[r(Kr)],1),r("a",{class:{hidden:e.active},on:{click:function(n){return e.input.focus()}}},[r(wd)],1),e.isNewList?e._e():[r("a",{on:{click:function(n){return e.exportList()}}},[r(is)],1),r("a",{on:{click:function(n){return e.change()}}},[r(Gt)],1),r("a",{class:{hidden:!e.removable},on:{click:function(n){return e.remove()}}},[r($T)],1)]],2)])},OS=[],wS=de(lt,AS,OS,!1,null,null,null,null);const Lc=wS.exports;var PS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40s40-17.909 40-40s-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40s40-17.909 40-40s-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40s40-17.909 40-40s-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"}})])};const Bd={render:PS,name:"fa-solid-list-alt"};var IS=Object.defineProperty,RS=Object.getOwnPropertyDescriptor,Ud=(t,e,r,n)=>{for(var i=n>1?void 0:n?RS(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&IS(e,r,i),i};let ka=class extends ae{constructor(){super(...arguments);V(this,"adding",!1);V(this,"lists")}get makeRemovable(){return this.lists.length>=2}};Ud([ie],ka.prototype,"lists",2);ka=Ud([fe],ka);var MS=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(Bd,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("general.stationLists"))+" ")],1),r("p",{staticClass:"description mb-3.75 py-2.5"},[e._v(e._s(e.$t("listManager.description")))]),r("div",[r("div",{staticClass:"mx-auto inline-block pb-2.5 text-xl"},[e._l(e.lists,function(n,i){return r(Lc,{key:i,attrs:{index:i,name:n.name,content:n.content,removable:e.makeRemovable}})}),r(Lc,{attrs:{adding:e.adding},on:{blur:function(n){e.adding=!1}}})],2),r("div",{staticClass:"py-2.5 text-right"},[r(we,{attrs:{to:"import-wizard",props:{type:"list"}},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(Ve,{on:{click:n}},[r(ns),e._v(" "+e._s(e.$t("general.importBackup"))+" ")],1)]}}])}),r(Ve,{on:{click:function(n){e.adding=!0}}},[r(Ia),e._v(" "+e._s(e.$t("listManager.newList"))+" ")],1)],1)])])},kS=[],FS=de(ka,MS,kS,!1,null,null,null,null);const NS=FS.exports;var BS=Object.defineProperty,US=Object.getOwnPropertyDescriptor,$d=(t,e,r,n)=>{for(var i=n>1?void 0:n?US(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&BS(e,r,i),i};let Fa=class extends ae{constructor(){super(...arguments);V(this,"active")}};$d([_e({type:Boolean,default:!1})],Fa.prototype,"active",2);Fa=$d([fe],Fa);var $S=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("button",e._g({class:["h-12.5 cursor-pointer px-2.5 text-xl duration-200",e.active?"bg-accent text-white icons:opacity-100":"bg-transparent hover:text-accent active:bg-accent active:text-white icons:opacity-70 icons:hover:opacity-100 icons:active:opacity-100"]},e.$listeners),[e._t("default")],2)},KS=[],WS=de(Fa,$S,KS,!1,null,null,null,null);const xt=WS.exports;var HS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14c-11.1-35.6-30-67.8-54.7-94.6c-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7c-36.7-8.2-74.3-7.8-109.2 0c-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3c-24.7 26.7-43.6 58.9-54.7 94.6c-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14c11.1 35.6 30 67.8 54.7 94.6c3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7c36.7 8.2 74.3 7.8 109.2 0c5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3c24.7-26.7 43.6-58.9 54.7-94.6c1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80s80 35.9 80 80s-35.9 80-80 80z"}})])};const Rl={render:HS,name:"fa-solid-cog"};var jS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468c-59.015.042-113.223-20.53-155.822-54.911c-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184c0-101.705-82.311-184-184-184c-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}})])};const Na={render:jS,name:"fa-solid-history"},GS={};var VS=function(){var e=this,r=e._self._c;return r(Er,{staticClass:"icons:w-fixed",attrs:{"is-menu":""}},[r("h3",[r(Dl),e._v(" "+e._s(e.$t("general.menu")))],1),r(we,{attrs:{to:"search"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(Gt),e._v(" "+e._s(e.$t("general.findStations"))+" ")],1)]}}])}),r(we,{attrs:{to:"list-manager"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(Bd),e._v(" "+e._s(e.$t("general.manageLists"))+" ")],1)]}}])}),r(we,{attrs:{to:"title-manager"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(Na),e._v(" "+e._s(e.$t("general.manageTitles"))+" ")],1)]}}])}),r(we,{attrs:{to:"import-wizard",props:{type:"list"}},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(ns),e._v(" "+e._s(e.$t("general.importBackup"))+" ")],1)]}}])}),r(we,{attrs:{to:"hotkeys"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(Pd),e._v(" "+e._s(e.$t("general.hotkeys"))+" ")],1)]}}])}),r(we,{attrs:{to:"settings"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(Rl),e._v(" "+e._s(e.$t("general.settings"))+" ")],1)]}}])}),r(we,{attrs:{to:"about"},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(xt,{staticClass:"w-full text-left",on:{click:n}},[r(El),e._v(" "+e._s(e.$t("general.learnMore"))+" ")],1)]}}])}),r("div",{staticClass:"py-2.5 text-right"},[r(we,{attrs:{to:null},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(Ve,{on:{click:n}},[r(_l),e._v(" "+e._s(e.$t("menu.close")))],1)]}}])})],1)],1)},zS=[],YS=de(GS,VS,zS,!1,null,null,null,null);const XS=YS.exports;var QS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19C8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91a12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"}})])};const Kd={render:QS,name:"fa-solid-redo"};var ZS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48s21.49-48 48-48s48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48s-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48s-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48s48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48s-21.491-48-48-48z"}})])};const ss={render:ZS,name:"fa-solid-spinner"};var JS=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 496 512",width:"0.96875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200s-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32zm160-64c-17.7 0-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32s-14.3-32-32-32zm8 144H160c-13.2 0-24 10.8-24 24s10.8 24 24 24h176c13.2 0 24-10.8 24-24s-10.8-24-24-24z"}})])};const qS={render:JS,name:"fa-regular-meh"};var ex=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 384 512",width:"0.75em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148c25.049-31.381 43.63-49.449 82.757-49.449c30.764 0 68.816 19.799 68.816 49.631c0 22.552-18.617 34.134-48.993 51.164c-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271c0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271s-31.075-69.27-69.271-69.27z"}})])};const tx={render:ex,name:"fa-solid-question"};var rx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"}})])};const nx={render:rx,name:"fa-regular-square"};var ix=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"}})])};const ax={render:ix,name:"fa-solid-check-square"};var sx=Object.defineProperty,ox=Object.getOwnPropertyDescriptor,os=(t,e,r,n)=>{for(var i=n>1?void 0:n?ox(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&sx(e,r,i),i};let Fn=class extends ae{constructor(){super(...arguments);V(this,"checked");V(this,"setting")}get hasDescription(){return this.$slots.description!==void 0}get strongHeading(){return this.hasDescription||this.setting}toggleChecked(){return!this.checked}};os([$a("change",{type:Boolean,default:!1})],Fn.prototype,"checked",2);os([_e({type:Boolean,default:!1})],Fn.prototype,"setting",2);os([or("change")],Fn.prototype,"toggleChecked",1);Fn=os([fe],Fn);var lx=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"flex cursor-pointer",on:{click:function(n){return e.toggleChecked()}}},[r("div",{staticClass:"w-6.25 text-xl"},[r("transition",{attrs:{mode:"out-in","enter-class":"scale-x-[0.8] scale-y-[0.7]","leave-to-class":"scale-x-[0.8] scale-y-[0.7]","enter-active-class":"transition-transform duration-75","leave-active-class":"transition-transform duration-75"}},[e.checked?r(ax,{key:"checked"}):r(nx,{key:"notChecked",staticClass:"opacity-70"})],1)],1),r("div",{staticClass:"flex-1 pt-0.75"},[e.strongHeading?r("strong",[e._t("default")],2):e._t("default"),e.hasDescription?[r("br"),r("span",{staticClass:"description"},[e._t("description")],2)]:e._e()],2)])},ux=[],cx=de(Fn,lx,ux,!1,null,null,null,null);const ur=cx.exports;var fx=Object.defineProperty,dx=Object.getOwnPropertyDescriptor,ls=(t,e,r,n)=>{for(var i=n>1?void 0:n?dx(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&fx(e,r,i),i};let Nn=class extends ae{constructor(){super(...arguments);V(this,"_min","");V(this,"_max","");V(this,"submitButton");V(this,"syncedMin");V(this,"syncedMax")}created(){this._min=this.syncedMin,this._max=this.syncedMax}onSubmit(){this.syncedMin=this._min,this.syncedMax=this._max}};ls([ut("submit")],Nn.prototype,"submitButton",2);ls([Ka("min",{type:[String,Number],default:0})],Nn.prototype,"syncedMin",2);ls([Ka("max",{type:[String,Number],default:""})],Nn.prototype,"syncedMax",2);Nn=ls([fe],Nn);var hx=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("form",{staticClass:"inline-block whitespace-nowrap",on:{submit:function(n){return n.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r(ht,{attrs:{type:"number","select-on-focus":"",min:"0",step:"1",placeholder:e.$t("rangeInput.minimumShort")},on:{change:function(n){return e.submitButton.click()}},model:{value:e._min,callback:function(n){e._min=e._n(n)},expression:"_min"}}),r("span",{staticClass:"px-2.5"},[e._v(e._s(e.$t("rangeInput.to")))]),r(ht,{attrs:{type:"number","select-on-focus":"",min:"0",step:"1",placeholder:e.$t("rangeInput.maximumShort")},on:{change:function(n){return e.submitButton.click()}},model:{value:e._max,callback:function(n){e._max=e._n(n)},expression:"_max"}}),r("input",{ref:"submit",attrs:{type:"submit",name:"submit",hidden:""}})],1)},vx=[],px=de(Nn,hx,vx,!1,null,null,null,null);const mx=px.exports;var gx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 640 512",width:"1.25em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"}})])};const yx={render:gx,name:"fa-solid-wave-square"};var _x=Object.defineProperty,Ex=Object.getOwnPropertyDescriptor,Jt=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ex(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&_x(e,r,i),i};let At=class extends ae{constructor(){super(...arguments);V(this,"value");V(this,"actions");V(this,"actionsEnabled");V(this,"data");V(this,"disabled");V(this,"loaded");V(this,"label");V(this,"select")}get currentOption(){return this.data.find(e=>e.id===this.value)}get enabled(){return this.loaded&&!this.disabled}get indexed(){return typeof this.value=="number"}get isMenu(){return this.$slots.default!==void 0}get optionCount(){return this.data.length}handleValueChanged(e){}handleActionSelected(e){}handleChange(){const{selectedIndex:e,value:r}=this.select;e<this.optionCount+Number(this.isMenu)?this.handleValueChanged(this.indexed?Number(r):r):this.handleActionSelected(e-this.optionCount),this.resetValue()}resetValue(){this.isMenu&&(this.select.value="")}};Jt([$a("change",{type:[String,Number],default:""})],At.prototype,"value",2);Jt([_e({type:Array,default:()=>[]})],At.prototype,"actions",2);Jt([_e({type:Boolean,default:!0})],At.prototype,"actionsEnabled",2);Jt([_e({type:Array,required:!0})],At.prototype,"data",2);Jt([_e({type:Boolean,default:!1})],At.prototype,"disabled",2);Jt([_e({type:Boolean,default:!0})],At.prototype,"loaded",2);Jt([_e({type:String,required:!0})],At.prototype,"label",2);Jt([ut()],At.prototype,"select",2);Jt([or("change")],At.prototype,"handleValueChanged",1);Jt([or("actionSelect")],At.prototype,"handleActionSelected",1);At=Jt([fe],At);var Tx=function(){var n,i;var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:["inline-block max-w-[200px]",{"text-lg":!e.isMenu,"opacity-50":!e.enabled}]},[r("div",{class:["relative inline-block h-full w-full cursor-pointer overflow-hidden align-text-top",{"h-6.25":!e.isMenu,"cursor-not-allowed":!e.enabled}]},[e.isMenu?e._e():r("div",{staticClass:"pointer-events-none absolute h-full w-full select-none truncate border-0 border-b-2 border-b-mute-contrast/50"},[e.loaded?[e._v(" "+e._s((n=e.currentOption)==null?void 0:n.name)+" "),((i=e.currentOption)==null?void 0:i.description)!==void 0?r("span",{staticClass:"opacity-50"},[e._v("("+e._s(e.currentOption.description)+")")]):e._e()]:[e._v(" "+e._s(e.$t("general.loading"))+" ")]],2),r("select",{ref:"select",class:["peer h-full w-full cursor-pointer appearance-none text-lg opacity-0",{absolute:e.isMenu,"pointer-events-none":!e.enabled}],attrs:{disabled:!e.enabled},domProps:{value:e.value},on:{change:function(a){return e.handleChange()}}},[r("optgroup",{attrs:{label:e.label}},[e.isMenu?r("option",{attrs:{value:"",hidden:"",disabled:"",selected:""}},[e._v("Please select...")]):e._e(),e._l(e.data,function(a,d){return r("option",{key:d,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" "),a.description!==void 0?[e._v(" ("+e._s(a.description)+")")]:e._e()],2)})],2),e._l(e.actions,function(a,d){return r("option",{key:d,attrs:{disabled:!e.actionsEnabled}},[e._v(" "+e._s(a)+" ")])})],2),e.isMenu?r("div",{staticClass:"pointer-events-none h-full w-full select-none truncate icons:opacity-70 icons:transition-opacity icons:duration-200 icons:peer-hover:opacity-100"},[e._t("default")],2):e._e()])])},Sx=[],xx=de(At,Tx,Sx,!1,null,null,null,null);const Ht=xx.exports;var bx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 320 512",width:"0.625em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}})])};const Cx={render:bx,name:"fa-solid-sort"};var Lx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}})])};const Dx={render:Lx,name:"fa-solid-filter"};var Ax=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}})])};const Ba={render:Ax,name:"fa-solid-chevron-down"};var Ox=Object.defineProperty,wx=Object.getOwnPropertyDescriptor,Ml=(t,e,r,n)=>{for(var i=n>1?void 0:n?wx(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Ox(e,r,i),i};let Ci=class extends ae{constructor(){super(...arguments);V(this,"showOptions",!1);V(this,"failedToLoadFilters",!1);V(this,"filters",{countries:null,states:[],languages:null});V(this,"syncedOptions");V(this,"showMessage")}get filterOptions(){return Object.keys(this.filters).reduce((e,r)=>{const n=this.filters[r];return n!==null?e[r]=[{id:"",name:this.noFilterLabels[r]},...n.map(i=>({id:i.name,name:i.name}))]:e[r]=[],e},{})}get noFilterLabels(){return{countries:this.$t("search.filters.allCountries"),states:this.$t("search.filters.allStates"),languages:this.$t("search.filters.allLanguages")}}created(){window.setTimeout(this.loadFilters,300)}async loadFilters(){this.failedToLoadFilters=!1,this.syncedOptions.country="",this.syncedOptions.language="";const e=_0(),r=T0();try{this.filters.countries=await e,this.filters.languages=await r,this.updateStates()}catch{this.failedToLoadFilters=!0}}async updateStates(){if(this.syncedOptions.state="",this.syncedOptions.country!==""){this.filters.states=null;try{this.filters.states=await E0(this.syncedOptions.country)}catch{this.failedToLoadFilters=!0}return}this.filters.states=[]}handleStatesClicked(){this.syncedOptions.country===""&&this.showMessage({buttons:[this.$t("general.ok")],type:We.WARNING,message:this.$t("search.filters.noCountrySelected")})}};Ml([Ka("options",{type:Object,required:!0})],Ci.prototype,"syncedOptions",2);Ml([se],Ci.prototype,"showMessage",2);Ci=Ml([fe],Ci);var Px=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",[r("div",{staticClass:"pb-2.5 text-left"},[r("a",{on:{click:function(n){e.showOptions=!e.showOptions}}},[r(Ba,{class:["w-fixed",{"-rotate-180":e.showOptions}]}),e._v(e._s(e.$t(`search.${e.showOptions?"hideOptions":"showOptions"}`)))],1)]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.showOptions,expression:"showOptions"}]},[r("div",{staticClass:"pb-2.5"},[r(Od,{attrs:{tags:e.syncedOptions.tags},on:{"update:tags":function(n){return e.$set(e.syncedOptions,"tags",n)}}})],1),r("div",{staticClass:"table w-full text-left"},[r("div",{staticClass:"table-row overflow-hidden"},[r("div",{staticClass:"table-cell whitespace-nowrap"},[r(Dx,{staticClass:"opacity-50"}),e._v(" "+e._s(e.$t("search.filters.label"))+":\xA0 ")],1),r("div",{staticClass:"table-cell w-full"},[e.failedToLoadFilters?r("div",[r("div",{staticClass:"flex"},[r("div",{staticClass:"whitespace-nowrap"},[r(Br,{staticClass:"w-fixed"}),e._v("\xA0 ")],1),r("div",[e._v(" "+e._s(e.$t("search.optionsUnavailable"))+" "),r("a",{on:{click:function(n){return e.loadFilters()}}},[r(Kd,{staticClass:"w-fixed"}),e._v(e._s(e.$t("search.tryAgain")))],1)])]),r("br")]):[r(Ht,{staticClass:"w-full",attrs:{label:e.$tc("general.country"),data:e.filterOptions.countries,loaded:e.filters.countries!==null},on:{change:function(n){return e.updateStates()}},model:{value:e.syncedOptions.country,callback:function(n){e.$set(e.syncedOptions,"country",n)},expression:"syncedOptions.country"}}),r("br"),r(Ht,{staticClass:"w-full",attrs:{title:e.syncedOptions.country===""?e.$t("search.filters.noCountrySelected"):"",disabled:e.syncedOptions.country==="",label:`${e.$tc("general.state")} (${e.syncedOptions.country})`,data:e.filterOptions.states,loaded:e.filters.states!==null},nativeOn:{click:function(n){return e.handleStatesClicked()}},model:{value:e.syncedOptions.state,callback:function(n){e.$set(e.syncedOptions,"state",n)},expression:"syncedOptions.state"}}),r("br"),r(Ht,{staticClass:"w-full",attrs:{label:e.$tc("general.language"),data:e.filterOptions.languages,loaded:e.filters.languages!==null},model:{value:e.syncedOptions.language,callback:function(n){e.$set(e.syncedOptions,"language",n)},expression:"syncedOptions.language"}})]],2)]),r("div",{staticClass:"table-row"},[r("div",{staticClass:"table-cell whitespace-nowrap"},[r(Cx,{staticClass:"opacity-50"}),e._v(" "+e._s(e.$t("search.order.sortBy"))+"\xA0 ")],1),r("div",{staticClass:"table-cell w-full"},[r(Ht,{staticClass:"w-full",attrs:{label:e.$t("search.order.sortBy"),data:[{id:"clickcount",name:e.$t("search.order.clicks")},{id:"votes",name:e.$t("search.order.votes")},{id:"name",name:e.$t("search.order.names")},{id:"country",name:e.$t("search.order.countries")},{id:"state",name:e.$t("search.order.states")},{id:"language",name:e.$t("search.order.languages")},{id:"codec",name:e.$t("search.order.codecs")}]},model:{value:e.syncedOptions.order,callback:function(n){e.$set(e.syncedOptions,"order",n)},expression:"syncedOptions.order"}})],1)])]),r("div",{staticClass:"pt-2.5 text-left"},[r("span",{staticClass:"cursor-help",attrs:{title:String(e.$t("search.bitrate.description"))}},[r(yx,{staticClass:"opacity-50"}),e._v(" "+e._s(e.$t("search.bitrate.label")))],1),e._v(": "),r(mx,{attrs:{min:e.syncedOptions.bitrate.min,max:e.syncedOptions.bitrate.max},on:{"update:min":function(n){return e.$set(e.syncedOptions.bitrate,"min",n)},"update:max":function(n){return e.$set(e.syncedOptions.bitrate,"max",n)}}})],1),r("div",{staticClass:"py-2.5 text-left"},[r(ur,{model:{value:e.syncedOptions.reverse,callback:function(n){e.$set(e.syncedOptions,"reverse",n)},expression:"syncedOptions.reverse"}},[e._v(" "+e._s(e.$t("search.reverse"))+" ")]),r(ur,{model:{value:e.syncedOptions.includeBroken,callback:function(n){e.$set(e.syncedOptions,"includeBroken",n)},expression:"syncedOptions.includeBroken"}},[e._v(" "+e._s(e.$t("search.includeBroken"))+" ")])],1)])])},Ix=[],Rx=de(Ci,Px,Ix,!1,null,null,null,null);const Mx=Rx.exports;var kx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048C34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122c53.588 0 97.844 34.783 165.217 34.783c48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016c-34.338 15.948-76.454 31.854-116.95 31.854z"}})])};const Fx={render:kx,name:"fa-solid-flag"};var Nx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 384 512",width:"0.75em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M172.268 501.67C26.97 291.031 0 269.413 0 192C0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67c-9.535 13.774-29.93 13.773-39.464 0z"}})])};const Bx={render:Nx,name:"fa-solid-map-marker"};var Ux=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4c32.7 12.3 69 19.4 107.4 19.4c141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"}})])};const Wd={render:Ux,name:"fa-solid-comment-dots"};var $x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 384 512",width:"0.75em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-64 268c0 10.7-12.9 16-20.5 8.5L104 376H76c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h28l35.5-36.5c7.6-7.6 20.5-2.2 20.5 8.5v136zm33.2-47.6c9.1-9.3 9.1-24.1 0-33.4c-22.1-22.8 12.2-56.2 34.4-33.5c27.2 27.9 27.2 72.4 0 100.4c-21.8 22.3-56.9-10.4-34.4-33.5zm86-117.1c54.4 55.9 54.4 144.8 0 200.8c-21.8 22.4-57-10.3-34.4-33.5c36.2-37.2 36.3-96.5 0-133.8c-22.1-22.8 12.3-56.3 34.4-33.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}})])};const Kx={render:$x,name:"fa-solid-file-audio"};var Wx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}})])};const Li={render:Wx,name:"fa-solid-play"};var Hx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24s24 10.745 24 24s-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098c.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469c8.681 25.895-.069 57.704-16.382 74.757c4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725c-15.957-7.099-36.821-15.887-52.651-16.178c-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521c39.614-39.144 56.648-80.587 89.117-113.111c14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"}})])};const Ao={render:Hx,name:"fa-solid-thumbs-up"};var jx=Object.defineProperty,Gx=Object.getOwnPropertyDescriptor,qt=(t,e,r,n)=>{for(var i=n>1?void 0:n?Gx(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&jx(e,r,i),i};let Xi=pr.CancelToken.source(),Ot=class extends ae{constructor(){super(...arguments);V(this,"searchTerm","");V(this,"active",!1);V(this,"results",[]);V(this,"transition","");V(this,"moreAvailable",!0);V(this,"failed",!1);V(this,"empty",!1);V(this,"offset",0);V(this,"showSpinner",!0);V(this,"loading",!0);V(this,"scrollOnceLoaded",!1);V(this,"options",{tags:"",country:"",state:"",language:"",order:"clickcount",bitrate:{min:0,max:""},reverse:!1,includeBroken:!1});V(this,"searchField");V(this,"currentList");V(this,"listName");V(this,"selectedList");V(this,"resetSearchStats");V(this,"setStationBackup");V(this,"updateList")}get ids(){return this.currentList.map(e=>e.id)}get descendingOrder(){return this.options.reverse!==this.numericalOrder}get moreExpected(){return!this.active||this.showSpinner||this.empty||this.scrollOnceLoaded}get numericalOrder(){return this.options.order==="clickcount"||this.options.order==="votes"}get sortIcon(){return{name:void 0,country:Fx,state:Bx,language:Wd,codec:Kx,clickcount:Li,votes:Ao}[this.options.order]}onListChanged(){this.resetSearchStats(),this.setStationBackup([...this.currentList])}onOptionsChanged(){this.reset()}onSearchTermChanged(){this.requestResults()}activated(){this.searchTerm="",this.reset(),this.setStationBackup([...this.currentList]),window.setTimeout(()=>{this.searchField.focus(),this.active=!0},300)}deactivated(){this.setStationBackup(void 0),this.resetSearchStats(),window.setTimeout(()=>{this.active=!1},300)}reset(){this.failed=!1,this.showSpinner=!0,this.results=[],this.requestResults()}requestResults(){this.offset=0,this.loadEntries()}async loadEntries(){Xi&&(Xi.cancel(),Xi=pr.CancelToken.source());let e=!1;this.loading=!0;try{const r=await x0({searchEntries:{name:this.searchTerm,tagList:this.options.tags,country:this.options.country,state:this.options.state,language:this.options.language,tagExact:!0,countryExact:this.options.country!=="",stateExact:this.options.state!=="",languageExact:this.options.language!=="",offset:this.offset,limit:20,order:this.options.order,bitrateMin:this.options.bitrate.min,bitrateMax:this.options.bitrate.max,reverse:this.descendingOrder,hidebroken:!this.options.includeBroken},cancelToken:Xi.token});this.offset===0&&(this.results=[],this.scrollOnceLoaded&&this.scrollDown());for(const n of r)this.results.push(Object.freeze(n));this.moreAvailable=this.results.length%20===0&&r.length>0,this.empty=!this.moreAvailable&&this.results.length===0}catch(r){pr.isCancel(r)?e=!0:this.failed=!0}finally{e||(this.loading=!1,this.scrollOnceLoaded=!1,this.showSpinner=!1)}}loadMore(){this.offset+=20,this.loadEntries(),this.showSpinner=!0}toggleResult(e){const n=this.ids.indexOf(e.stationuuid)===-1;this.updateList({content:n?[...this.currentList,{name:e.name,url:e.url,homepage:e.homepage,icon:e.favicon,country:e.country,state:e.state,language:e.language,tags:e.tags,id:e.stationuuid}]:this.currentList.filter(i=>i.id!==e.stationuuid)})}scrollDownIfLoaded(){if(this.loading){this.scrollOnceLoaded=!0;return}this.scrollDown()}scrollDown(){this.$scrollTo(this.searchField,300,{container:".drawer",cancelable:!1})}};qt([ut()],Ot.prototype,"searchField",2);qt([ie],Ot.prototype,"currentList",2);qt([ie],Ot.prototype,"listName",2);qt([ie],Ot.prototype,"selectedList",2);qt([se],Ot.prototype,"resetSearchStats",2);qt([se],Ot.prototype,"setStationBackup",2);qt([se],Ot.prototype,"updateList",2);qt([ve("listName")],Ot.prototype,"onListChanged",1);qt([ve("options",{deep:!0})],Ot.prototype,"onOptionsChanged",1);qt([ve("searchTerm")],Ot.prototype,"onSearchTermChanged",1);Ot=qt([fe],Ot);var Vx=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(Gt,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("general.findStations"))+" ")],1),r("i18n",{staticClass:"my-4 py-2.5 leading-6",attrs:{path:"search.credit.radioBrowser",tag:"p"}},[r("a",{attrs:{href:"https://fsfe.org/freesoftware/",target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("search.credit.free"))+" "),r(Xr,{staticClass:"w-fixed"})],1),r("a",{attrs:{href:"http://www.radio-browser.info",target:"_blank",rel:"noopener"}},[e._v("Community Radio Browser "),r(Xr,{staticClass:"w-fixed"})],1)]),r("div",{staticClass:"mb-5 flex border-b-2 border-b-mute-contrast/50 focus-within:border-b-accent focus-within:bg-black/10"},[r("input",{ref:"searchField",staticClass:"w-full appearance-none bg-transparent p-2.5 font-sans text-2xl",attrs:{autocomplete:"off",autocapitalize:"off",placeholder:String(e.$t("search.byName")),type:"text",spellcheck:"false"},domProps:{value:e.searchTerm},on:{input:function(n){e.searchTerm=e.searchField.value},change:function(n){e.searchTerm=e.searchField.value},focus:function(n){return e.searchField.select()},keypress:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.searchField.blur(),e.scrollDownIfLoaded()}}}),r("a",{staticClass:"my-auto w-10 shrink-0 border-none bg-transparent text-xl",on:{click:function(n){return e.scrollDownIfLoaded()}}},[r(Gt)],1)]),r(Mx,{attrs:{options:e.options},on:{"update:options":function(n){e.options=n}}}),r("div",[e.failed?e._e():[e.active&&e.results.length>0&&!e.scrollOnceLoaded?r("div",{staticClass:"mt-1.25 w-full text-left"},e._l(e.results,function(n){return r(Id,{key:n.stationuuid,attrs:{selected:e.ids.includes(n.stationuuid)},on:{change:function(i){return e.toggleResult(n)}},scopedSlots:e._u([{key:"tags",fn:function(){return[r(rs,{attrs:{labels:[...n.bitrate>0?[`${n.bitrate} kBit/s`]:[],n.country,n.state,...n.tags.split(",")]}},[n.lastcheckok===0?r("span",{staticClass:"mb-0.5 inline-block rounded-sm bg-strong px-[0.6em] pt-[0.2em] pb-[0.3em] text-xs font-bold uppercase text-on-strong"},[e._v(e._s(e.$t("search.stationBroken")))]):e._e(),e._v(" "+e._s(" ")),e.options.order!=="name"?r("span",{staticClass:"mb-0.5 inline-block rounded-sm bg-emphasis px-[0.6em] pt-[0.2em] pb-[0.3em] text-xs font-bold text-on-emphasis"},[r(e.sortIcon,{tag:"component"}),e._v(" "+e._s(" ")+" "),n[e.options.order]!==""?[e._v(e._s(e.numericalOrder?n[e.options.order].toLocaleString(e.$i18n.locale):n[e.options.order]))]:r(tx)],2):e._e()])]},proxy:!0}],null,!0)},[e._v(" "+e._s(n.name)+" ")])}),1):e._e(),e.moreExpected||e.moreAvailable?r("div",{staticClass:"mt-[18px] flex py-2.5 text-lg"},[e.moreExpected?r("div",{staticClass:"m-auto py-3.5"},[e.empty?[r(qS,{staticClass:"w-fixed"}),e._v(e._s(e.$t("search.noMatches"))+" ")]:[r(ss,{staticClass:"w-fixed animate-spin"}),e._v(e._s(e.$t("search.loading"))+" ")]],2):r(xt,{staticClass:"w-full",on:{click:e.loadMore}},[r(Gt,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("search.loadMore"))+" ")],1)],1):e._e()],e.failed?r("p",{staticClass:"my-4 py-2.5 text-lg"},[r(Br,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("search.error"))+" "),r("a",{on:{click:e.reset}},[r(Kd,{staticClass:"w-fixed"}),e._v(e._s(e.$t("search.tryAgain")))],1)],1):e._e()],2)],1)},zx=[],Yx=de(Ot,Vx,zx,!1,null,null,null,null);const Xx=Yx.exports;var Qx=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20s9 20 20 20s20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20s9 20 20 20s20-9 20-20z"}})])};const Hd={render:Qx,name:"fa-solid-upload"};var Zx=Object.defineProperty,Jx=Object.getOwnPropertyDescriptor,gn=(t,e,r,n)=>{for(var i=n>1?void 0:n?Jx(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Zx(e,r,i),i};let gr=class extends ae{constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"settings",null);V(this,"submitButton");V(this,"darkMode");V(this,"globalSettings");V(this,"applySettings");V(this,"onReset")}get detectedTheme(){return this.globalSettings.colorScheme==="auto"?this.darkMode?this.$t("settings.colorScheme.dark"):this.$t("settings.colorScheme.light"):void 0}get locales(){return[{id:"auto",name:this.$t("settings.detect"),...this.globalSettings.language==="auto"?{description:this.$i18n.locale}:{}},{id:"en",name:"English"},{id:"de",name:"Deutsch"},{id:"fr",name:"Fran\xE7ais"}]}initialize(){this.settings={...this.globalSettings}}created(){this.initialize()}reset(){this.onReset(),this.initialize()}onCompactModeToggled(e){this.settings.compactMode=e}onSubmit(){this.applySettings(this.settings),mt(null)}async exportSettings(){this.settings!==null&&Qa({name:"Settings",type:"txt",output:await nd({version:"2",type:"settings",data:this.settings})})}};gn([ut("submit")],gr.prototype,"submitButton",2);gn([rt],gr.prototype,"darkMode",2);gn([ie("settings")],gr.prototype,"globalSettings",2);gn([se],gr.prototype,"applySettings",2);gn([se("reset")],gr.prototype,"onReset",2);gn([ve("globalSettings.compactMode")],gr.prototype,"onCompactModeToggled",1);gr=gn([fe],gr);var qx=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(Rl,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("general.settings")))],1),r("p",{staticClass:"description py-2.5"},[e._v(" "+e._s(e.$t("settings.description",[e.appTitle]))+" ")]),r("form",{on:{submit:function(n){return n.preventDefault(),e.onSubmit()}}},[e.settings!==null?r("div",{staticClass:"text-left"},[r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$tc("settings.theme",1)))]),e._v(": "),r(Ht,{attrs:{label:e.$tc("settings.theme",0),data:[{id:"candy",name:"Candy"},{id:"pure",name:"Pure"}]},model:{value:e.settings.theme,callback:function(n){e.$set(e.settings,"theme",n)},expression:"settings.theme"}})],1),r("div",{staticClass:"mt-5 ml-2.5"},[r("span",{staticClass:"description"},[e._v(e._s(e.$t(`settings.themes.${e.settings.theme}`)))])]),r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$tc("settings.colorScheme.name")))]),e._v(": "),r(Ht,{attrs:{label:e.$tc("settings.colorScheme.name",3),data:[{id:"auto",name:e.$t("settings.colorScheme.auto"),description:e.detectedTheme},{id:"light",name:e.$t("settings.colorScheme.light")},{id:"dark",name:e.$t("settings.colorScheme.dark")}]},model:{value:e.settings.colorScheme,callback:function(n){e.$set(e.settings,"colorScheme",n)},expression:"settings.colorScheme"}})],1),r(ur,{staticClass:"mt-5 ml-2.5",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.compactMode.description"))+" ")]},proxy:!0}],null,!1,4186570336),model:{value:e.settings.compactMode,callback:function(n){e.$set(e.settings,"compactMode",n)},expression:"settings.compactMode"}},[e._v(" "+e._s(e.$t("settings.compactMode.name"))+" ")]),r(ur,{staticClass:"mt-5 ml-2.5",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.externalPlayback.description"))+" ")]},proxy:!0}],null,!1,2837283126),model:{value:e.settings.externalPlayback,callback:function(n){e.$set(e.settings,"externalPlayback",n)},expression:"settings.externalPlayback"}},[e._v(" "+e._s(e.$t("settings.externalPlayback.name"))+" ")]),r(ur,{staticClass:"mt-5 ml-2.5",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.colorChange.description"))+" ")]},proxy:!0}],null,!1,2918780991),model:{value:e.settings.changecolor,callback:function(n){e.$set(e.settings,"changecolor",n)},expression:"settings.changecolor"}},[e._v(" "+e._s(e.$t("settings.colorChange.name"))+" ")]),r(ur,{staticClass:"mt-5 ml-2.5 mobile:opacity-50",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.visualization.description"))+" ")]},proxy:!0}],null,!1,2157853406),model:{value:e.settings.visualization,callback:function(n){e.$set(e.settings,"visualization",n)},expression:"settings.visualization"}},[e._v(" "+e._s(e.$t("settings.visualization.name"))+" "),r("span",{staticClass:"hidden mobile:inline",attrs:{title:String(e.$t("settings.visualization.screenWidthIssue"))}},[r(Br)],1)]),r(ur,{staticClass:"mt-5 ml-2.5",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.relaxMode.description"))+" ")]},proxy:!0}],null,!1,3755826853),model:{value:e.settings.relax,callback:function(n){e.$set(e.settings,"relax",n)},expression:"settings.relax"}},[e._v(" "+e._s(e.$t("settings.relaxMode.name"))+" ")]),e.settings.relax?r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$t("settings.relaxMode.timer")))]),e._v(" "+e._s(" ")+" "),r("span",{staticClass:"opacity-70"},[e._v("(sec):")]),e._v(" "+e._s(" ")+" "),r(ht,{attrs:{type:"number","select-on-focus":"",min:"1",step:"1",required:""},model:{value:e.settings.relaxTimeout,callback:function(n){e.$set(e.settings,"relaxTimeout",e._n(n))},expression:"settings.relaxTimeout"}})],1):e._e(),r(ur,{staticClass:"mt-5 ml-2.5",scopedSlots:e._u([{key:"description",fn:function(){return[e._v(" "+e._s(e.$t("settings.sleep.description"))+" ")]},proxy:!0}],null,!1,3737701323),model:{value:e.settings.sleep,callback:function(n){e.$set(e.settings,"sleep",n)},expression:"settings.sleep"}},[e._v(" "+e._s(e.$t("settings.sleep.name"))+" ")]),e.settings.sleep?r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$t("settings.sleep.timer")))]),e._v(" "+e._s(" ")+" "),r("span",{staticClass:"opacity-70"},[e._v("(min):")]),e._v(" "+e._s(" ")+" "),r(ht,{attrs:{type:"number","select-on-focus":"",min:"1",step:"1",required:""},model:{value:e.settings.sleepTimeout,callback:function(n){e.$set(e.settings,"sleepTimeout",e._n(n))},expression:"settings.sleepTimeout"}})],1):e._e(),r(ur,{staticClass:"mt-5 ml-2.5",attrs:{setting:""},model:{value:e.settings.loadpolicy,callback:function(n){e.$set(e.settings,"loadpolicy",n)},expression:"settings.loadpolicy"}},[e._v(" "+e._s(e.$t("settings.loadIcons.name"))+" ")]),r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$t("settings.volume")))]),e._v(" "+e._s(" ")+" "),r("span",{staticClass:"opacity-70"},[e._v("(%):")]),e._v(" "+e._s(" ")+" "),r(ht,{attrs:{type:"number","select-on-focus":"",min:"0",max:"100",step:"1",required:""},model:{value:e.settings.volume,callback:function(n){e.$set(e.settings,"volume",e._n(n))},expression:"settings.volume"}})],1),r("div",{staticClass:"mt-5 ml-2.5"},[r("strong",[e._v(e._s(e.$t("settings.defaultPlaylistFormat")))]),e._v(": "),r(Ht,{attrs:{label:e.$t("settings.playlistFormats"),data:[{id:"xspf",name:"XSPF"},{id:"pls",name:"PLS"},{id:"m3u",name:"M3U"}]},model:{value:e.settings.defaultPlaylistFormat,callback:function(n){e.$set(e.settings,"defaultPlaylistFormat",n)},expression:"settings.defaultPlaylistFormat"}})],1),r("div",{staticClass:"mt-5 mb-2.5 ml-2.5"},[r(Wd,{staticClass:"-scale-x-100"}),e._v(e._s(" ")+" "),r("strong",[e._v(e._s(e.$tc("general.language",1)))]),e._v(": "),r(Ht,{attrs:{label:e.$tc("general.language",0),data:e.locales},model:{value:e.settings.language,callback:function(n){e.$set(e.settings,"language",n)},expression:"settings.language"}})],1)],1):e._e(),r("div",{staticClass:"py-2.5 text-right"},[r(we,{attrs:{to:null},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r(Ve,{on:{click:n}},[r(yl),e._v(" "+e._s(e.$t("settings.discard"))+" ")],1)]}}])}),r(Ve,{on:{click:function(n){return e.submitButton.click()}}},[r(Kr),e._v(" "+e._s(e.$t("general.apply"))+" ")],1),r("input",{ref:"submit",attrs:{type:"submit",name:"submit",hidden:""}})],1)]),r("div",{staticClass:"my-2.5 flow-root"},[r("div",{staticClass:"float-left my-1.25 mx-2.5"},[r("a",{on:{click:function(n){return e.reset()}}},[r(od,{staticClass:"w-fixed"}),e._v(e._s(e.$t("settings.reset")))],1),r("br")]),r("div",{staticClass:"float-right my-1.25 mx-2.5"},[r(we,{attrs:{to:"import-wizard",props:{type:"settings"}},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r("a",{on:{click:n}},[r(Hd,{staticClass:"w-fixed"}),e._v(e._s(e.$t("settings.import")))],1)]}}])}),r("br"),r("a",{on:{click:function(n){return e.exportSettings()}}},[r(is,{staticClass:"w-fixed"}),e._v(e._s(e.$t("settings.export"))+" ")],1)],1)])])},eb=[],tb=de(gr,qx,eb,!1,null,null,null,null);const rb=tb.exports;var nb=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64s96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64s96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"}})])};const Oo={render:nb,name:"fa-solid-music"};var ib=Object.defineProperty,ab=Object.getOwnPropertyDescriptor,kl=(t,e,r,n)=>{for(var i=n>1?void 0:n?ab(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&ib(e,r,i),i};let Bn=class extends ae{constructor(){super(...arguments);V(this,"showToast");V(this,"_toggleBookmark")}async toggleBookmark(e){await this._toggleBookmark(e)&&this.showToast({icon:Kr,message:this.$t("player.bookmarked")})}};kl([se],Bn.prototype,"showToast",2);kl([se("toggleBookmark")],Bn.prototype,"_toggleBookmark",2);Bn=kl([fe],Bn);var sb=Object.defineProperty,ob=Object.getOwnPropertyDescriptor,yn=(t,e,r,n)=>{for(var i=n>1?void 0:n?ob(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&sb(e,r,i),i};let yr=class extends Vn(Bn){constructor(){super(...arguments);V(this,"updateInterval",null);V(this,"timeStamp",null);V(this,"title");V(this,"active");V(this,"isBookmark");V(this,"bookmarks");V(this,"dateFnsLocale");V(this,"determineDateFnsLocale")}async created(){await this.$nextTick(),this.updateInterval=window.setInterval(this.updateTimestamp,1e3),this.updateTimestamp()}destroyed(){this.updateInterval!==null&&clearInterval(this.updateInterval)}get bookmarked(){return this.bookmarks.some(e=>e.station===this.title.station&&e.info===this.title.info)}updateTimestamp(){this.determineDateFnsLocale(this.$i18n.locale),this.timeStamp=pS(this.title.time*60,{addSuffix:!0,locale:this.dateFnsLocale})}};yn([_e({required:!0})],yr.prototype,"title",2);yn([_e({default:!1})],yr.prototype,"active",2);yn([_e({type:Boolean,default:!1})],yr.prototype,"isBookmark",2);yn([ie],yr.prototype,"bookmarks",2);yn([ie],yr.prototype,"dateFnsLocale",2);yn([se],yr.prototype,"determineDateFnsLocale",2);yr=yn([fe],yr);var lb=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"cursor-pointer p-2.5 transition-[background-color] duration-200 hover:bg-black/10"},[r("div",{staticClass:"mb-1.25 text-[17px] font-bold"},[e._v(" "+e._s(e.title.info)+" ")]),r("div",{staticClass:"text-on-surface/70"},[r("span",[e._v(e._s(e.title.station))]),r("span",{staticClass:"float-right ml-3.75"},[e._v(e._s(e.timeStamp))])]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.active,expression:"active"}]},[r("div",{staticClass:"cursor-default pt-2.5",on:{click:function(n){n.stopPropagation()}}},[e.isBookmark?e._e():r(Ve,{staticClass:"px-3 py-1.5 text-lg",attrs:{active:e.bookmarked},on:{click:function(n){return e.toggleBookmark({station:e.title.station,info:e.title.info})}}},[r(Oo),r(Ia,{staticClass:"relative -top-2 m-0 w-fixed text-icon-xs"}),e._v(e._s(e.$tc("titleManager.bookmark",1))+" ")],1),r(Ve,{staticClass:"px-3 py-1.5 text-lg",attrs:{href:`https://musicbrainz.org/search?query=${encodeURIComponent(e.title.info)}&type=recording`,target:"_blank"}},[r(Gt,{staticClass:"w-fixed"}),e._v("MscBrainz ")],1),r(Ve,{staticClass:"px-3 py-1.5 text-lg",attrs:{href:`spotify:search:${encodeURIComponent(e.title.info)}`,target:"_blank"}},[r(Gt,{staticClass:"w-fixed"}),e._v("Spotify ")],1),e.isBookmark?r(Ve,{staticClass:"px-3 py-1.5 text-lg",on:{click:function(n){return e.toggleBookmark({station:e.title.station,info:e.title.info})}}},[r(_l,{staticClass:"w-fixed"}),e._v(e._s(e.$t("titleManager.remove"))+" ")],1):e._e()],1)])])},ub=[],cb=de(yr,lb,ub,!1,null,null,null,null);const Dc=cb.exports;var fb=Object.defineProperty,db=Object.getOwnPropertyDescriptor,us=(t,e,r,n)=>{for(var i=n>1?void 0:n?db(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&fb(e,r,i),i};let Un=class extends ae{constructor(){super(...arguments);V(this,"showTitles",!1);V(this,"showBookmarks",!0);V(this,"activeTitle",-1);V(this,"activeBookmark",-1);V(this,"memory");V(this,"dateFnsLocale");V(this,"determineDateFnsLocale")}get bookmarksEmpty(){return this.memory.titles.favorites.length===0}get bookmarks(){return this.generateBookmarks()}get history(){return this.memory.titles.history}formatMonth(e){return this.determineDateFnsLocale(this.$i18n.locale),Do(e,"MMMM yyyy",{locale:this.dateFnsLocale})}generateBookmarks(){return this.memory.titles.favorites.reduce((e,r)=>{const n=this.formatMonth(r.time*60);return e[n]!==void 0?e[n].push(r):e[n]=[r],e},{})}exportBookmarks(){xS(this.memory.titles.favorites)}};us([rt],Un.prototype,"memory",2);us([ie],Un.prototype,"dateFnsLocale",2);us([se],Un.prototype,"determineDateFnsLocale",2);Un=us([fe],Un);var hb=function(){var e=this,r=e._self._c;return e._self._setupProxy,r(Er,[r("h3",[r(Na,{staticClass:"w-fixed"}),e._v(" "+e._s(e.$t("titleManager.title"))+" ")],1),r(xt,{staticClass:"w-full text-left",on:{click:function(n){e.showTitles=!e.showTitles}}},[r(Ba,{class:["w-fixed",{"-rotate-180":e.showTitles}]}),e._v(" "+e._s(e.$t("titleManager.recentTitles"))+" ")],1),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.showTitles,expression:"showTitles"}],staticClass:"text-left"},[e.history.length===0?r("div",{staticClass:"py-3.75 text-center"},[e._v(" "+e._s(e.$t("titleManager.listEmpty"))+" ")]):r("div",{staticClass:"flex flex-col-reverse"},e._l(e.history,function(n){return r(Dc,{key:n.time,attrs:{title:n,active:e.activeTitle===n.time},nativeOn:{click:function(i){e.activeTitle=e.activeTitle!==n.time?n.time:-1}}})}),1)]),r("div",{staticClass:"flex items-center"},[r(xt,{staticClass:"w-full text-left",on:{click:function(n){e.showBookmarks=!e.showBookmarks}}},[r(Ba,{class:["w-fixed",{"-rotate-180":e.showBookmarks}]}),e._v(" "+e._s(e.$tc("titleManager.bookmark",0))+" ")],1),e.bookmarksEmpty?e._e():r("div",{staticClass:"ml-2.5 text-xl"},[r("a",{on:{click:function(n){return e.exportBookmarks()}}},[r(is,{staticClass:"w-fixed"})],1)])],1),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.showBookmarks,expression:"showBookmarks"}],staticClass:"text-left"},[e.bookmarksEmpty?r("div",{staticClass:"py-3.75 text-center"},[e._v(" "+e._s(e.$t("titleManager.listEmpty"))+" ")]):r("div",{staticClass:"flex flex-col-reverse"},e._l(e.bookmarks,function(n,i){return r("div",{key:i},[r("div",{staticClass:"my-2.5 border-b-2 border-b-mute-contrast/50 py-1.25 px-2.5 text-xl font-bold text-on-surface/70"},[e._v(" "+e._s(i)+" ")]),r("div",{staticClass:"flex flex-col-reverse"},e._l(n,function(a){return r(Dc,{key:a.time,attrs:{title:a,active:e.activeBookmark===a.time,"is-bookmark":""},nativeOn:{click:function(d){e.activeBookmark=e.activeBookmark!==a.time?a.time:-1}}})}),1)])}),0)])],1)},vb=[],pb=de(Un,hb,vb,!1,null,null,null,null);const mb=pb.exports;var gb=Object.defineProperty,yb=Object.getOwnPropertyDescriptor,Tr=(t,e,r,n)=>{for(var i=n>1?void 0:n?yb(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&gb(e,r,i),i};let Nt=class extends ae{constructor(){super(...arguments);V(this,"animationTrigger",0);V(this,"viewIndex",0);V(this,"currentView",null);V(this,"currentDialog");V(this,"relaxed");V(this,"toast");V(this,"fullscreen");V(this,"modalOptions");V(this,"updateDialog")}static get views(){return{about:ME,editor:rT,hotkeys:gT,"import-wizard":NT,"list-manager":NS,menu:XS,search:Xx,settings:rb,"title-manager":mb}}created(){window.addEventListener("popstate",this.syncHistoryStack),window.history.state!==null&&this.syncHistoryStack()}get dialogProps(){var e;return(e=this.currentDialog)==null?void 0:e.props}get modalTitle(){var e;return((e=this.modalOptions)==null?void 0:e.title)||this.$t("general.note")}get modalIcon(){var e;switch((e=this.modalOptions)==null?void 0:e.type){case We.ERROR:return lE;case We.QUESTION:return cE;case We.WARNING:return Br;case We.INFO:return El;default:return!1}}onModalOptionsChanged(){this.animationTrigger=1-this.animationTrigger}onDialogChanged(e){e!==null&&(this.currentView=Nt.views[e.viewId]),this.viewIndex++}syncHistoryStack(){this.updateDialog(window.history.state)}isPositiveButton(e){return[this.$t("general.ok"),this.$t("general.yes")].includes(e)}isNegativeButton(e){return[this.$t("general.cancel"),this.$t("general.no")].includes(e)}closeModal(){this.modalOptions!==void 0&&this.modalOptions.closeable&&this.modalOptions.handleButtonClicked(0)}};Tr([rt],Nt.prototype,"currentDialog",2);Tr([rt],Nt.prototype,"relaxed",2);Tr([rt],Nt.prototype,"toast",2);Tr([ie],Nt.prototype,"fullscreen",2);Tr([ie],Nt.prototype,"modalOptions",2);Tr([se],Nt.prototype,"updateDialog",2);Tr([ve("modalOptions.message")],Nt.prototype,"onModalOptionsChanged",1);Tr([ve("currentDialog")],Nt.prototype,"onDialogChanged",1);Nt=Tr([fe],Nt);var _b=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:["fixed left-0 top-0 z-20 flex h-full w-full flex-col transition",{"bg-black/50 lg:pointer-events-none lg:bg-transparent":e.currentDialog,"pointer-events-none":!e.currentDialog||e.relaxed,"opacity-0":e.relaxed}]},[r(we,{attrs:{to:null},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r("div",{staticClass:"h-full overflow-hidden",on:{click:n}},[r("div",{class:["drawer z-20 h-full w-full max-w-sidebar overflow-y-auto overflow-x-hidden overscroll-contain scroll-smooth bg-surface text-on-surface shadow-theme backdrop-blur transition-all",e.currentDialog?{"pointer-events-auto":!e.relaxed}:"invisible -translate-x-[200px] opacity-0"],on:{click:function(i){i.stopPropagation()}}},[r("transition",{attrs:{"enter-class":"-translate-x-12.5 opacity-0","leave-to-class":"-translate-x-12.5 opacity-0",mode:"out-in"}},[r("keep-alive",{attrs:{exclude:["RadEditor","RadImportWizard","RadListManager","RadSettings","RadTitleManager"]}},[e.currentDialog?r(e.currentView,e._b({key:e.viewIndex,tag:"component"},"component",e.dialogProps,!1)):e._e()],1)],1)],1)])]}}])}),r(tE),r("transition",{attrs:{"enter-class":"opacity-0","leave-to-class":"opacity-0"}},[e.toast?r("div",{class:["pointer-events-none absolute z-20 mx-auto mt-12.5 w-full overflow-hidden px-1.25 text-center transition",{"scale-150":e.fullscreen}]},[r("div",{staticClass:"toast mx-auto w-[340px] max-w-full rounded-tr rounded-bl bg-surface p-5 text-on-surface"},[e.toast.icon?r(e.toast.icon,{tag:"component",staticClass:"w-fixed"}):e._e(),e._v(" "+e._s(e.toast.message)+" ")],1)]):e._e()]),r("transition",{attrs:{"enter-class":"scale-125 opacity-0","leave-to-class":"opacity-0","enter-active-class":"ease-out","leave-active-class":"duration-200"}},[e.modalOptions?r("div",{key:e.animationTrigger,staticClass:"pointer-events-auto absolute flex h-full w-full items-center justify-center bg-black/50 transition",on:{click:function(n){return e.closeModal()}}},[r("div",{staticClass:"m-2.5 w-[640px] rounded-tl rounded-br bg-surface text-on-surface shadow-[0_25px_50px_-12px] shadow-white/20 dark:shadow-black/20",on:{click:function(n){n.stopPropagation()}}},[r("div",{staticClass:"relative"},[r("div",{staticClass:"px-8 pt-8"},[r("div",{class:["absolute right-6.5 top-6.5",{hidden:!e.modalOptions.closeable}]},[r("a",{on:{click:function(n){return e.closeModal()}}},[r(_l,{staticClass:"w-fixed text-icon-lg"})],1)]),r("div",{staticClass:"mb-5 text-xl font-bold"},[e._v(" "+e._s(e.modalTitle)+" ")]),r("div",{staticClass:"flex leading-normal"},[e.modalIcon?r("div",{staticClass:"pr-1.25"},[r(e.modalIcon,{tag:"component",staticClass:"opacity-70"})],1):e._e(),r("div",[e._l(e.modalOptions.message.split(`
`),function(n,i){return[e._v(" "+e._s(n)),r("br",{key:i})]})],2)])]),r("div",{staticClass:"flex flex-row-reverse px-5 py-7"},e._l(e.modalOptions.buttons,function(n,i){return r(Ve,{key:n,on:{click:function(a){var d;(d=e.modalOptions)==null||d.handleButtonClicked(i)}}},[e.isNegativeButton(n)?r(yl):e._e(),e.isPositiveButton(n)?r(Kr):e._e(),e._v(" "+e._s(n)+" ")],1)}),1)])])]):e._e()])],1)},Eb=[],Tb=de(Nt,_b,Eb,!1,null,null,null,null);const Sb=Tb.exports;var xb=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 192 512",width:"0.375em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72s32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8S24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72s-32.2-72-72-72s-72 32.2-72 72z"}})])};const bb={render:xb,name:"fa-solid-ellipsis-v"};var Cb=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}})])};const wo={render:Cb,name:"fa-solid-stop"};var Lb=Object.defineProperty,Db=Object.getOwnPropertyDescriptor,Sr=(t,e,r,n)=>{for(var i=n>1?void 0:n?Db(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Lb(e,r,i),i};let Vt=class extends ae{constructor(){super(...arguments);V(this,"loaded",!1);V(this,"playing");V(this,"station");V(this,"settings");V(this,"currentStation");V(this,"loading");V(this,"updateColor")}created(){if(this.station.hue===void 0){const e=this.station.name.toUpperCase().codePointAt(0);this.updateColor({station:this.station,hue:e*20%360})}}get url(){return this.station.icon}get overlay(){return this.buffering?ss:this.active?wo:Li}get active(){var e;return((e=this.currentStation)==null?void 0:e.id)===this.station.id}get buffering(){return this.active&&this.loading}handleLoadPolicyChanged(){this.showPlaceholder()}handleUrlChanged(){this.showPlaceholder()}showPlaceholder(){this.loaded=!1}hidePlaceholder(){this.loaded=!0}};Sr([_e(Boolean)],Vt.prototype,"playing",2);Sr([_e({type:Object,required:!0})],Vt.prototype,"station",2);Sr([ie],Vt.prototype,"settings",2);Sr([ie],Vt.prototype,"currentStation",2);Sr([ie],Vt.prototype,"loading",2);Sr([se],Vt.prototype,"updateColor",2);Sr([ve("settings.loadpolicy")],Vt.prototype,"handleLoadPolicyChanged",1);Sr([ve("url")],Vt.prototype,"handleUrlChanged",1);Vt=Sr([fe],Vt);var Ab=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",[r("div",{class:["absolute z-10 flex h-8.75 w-8.75 items-center justify-center overflow-hidden rounded-full bg-black/50 text-center text-white",{"opacity-0 group-hover:opacity-100":!e.playing}]},[r("div",[r(e.overlay,{tag:"component",class:["w-fixed",{"animate-spin":e.buffering}]})],1)]),r("div",{staticClass:"h-8.75 w-8.75 overflow-hidden rounded-full shadow-[0_0_1px_0] shadow-black"},[e.settings.loadpolicy?r("div",{class:["flex h-full items-center bg-white",e.playing?"blur":"group-hover:blur",{hidden:!e.loaded}]},[r("img",{staticClass:"w-full",attrs:{src:e.url,alt:"Logo"},on:{load:function(n){return e.hidePlaceholder()}}})]):e._e(),e.loaded?e._e():r("div",{class:["flex h-full w-full items-center text-center text-xl text-white",e.playing?"blur":"group-hover:blur"],style:{backgroundColor:`hsl(${e.station.hue} 50% 50%)`}},[r("div",{staticClass:"w-full"},[e._v(e._s(e.station.name[0].toUpperCase()))])])])])},Ob=[],wb=de(Vt,Ab,Ob,!1,null,null,null,null);const Pb=wb.exports;var Ib=Object.defineProperty,Rb=Object.getOwnPropertyDescriptor,_n=(t,e,r,n)=>{for(var i=n>1?void 0:n?Rb(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Ib(e,r,i),i};let _r=class extends ae{constructor(){super(...arguments);V(this,"dragOrigin",0);V(this,"newIndex",0);V(this,"currentTranslation",0);V(this,"index");V(this,"stationRow");V(this,"currentList");V(this,"sortIndex");V(this,"moveStation");V(this,"startSorting")}get dragged(){return this.sortIndex===this.index}set dragged(e){this.startSorting(e?this.index:void 0)}getSiblingTranslationValue(e){return this.index<e?this.newIndex>=e?-1:0:this.newIndex<=e?1:0}handleMouseDown(e){this.dragOrigin=e.pageY,document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}handleMouseMove(e){const r=e.pageY-this.dragOrigin;if(!this.dragged){if(Math.abs(r)<20)return;this.dragged=!0}this.currentTranslation=r;const n=this.stationRow.parentElement,{top:i}=n.getBoundingClientRect(),a=e.pageY-document.documentElement.scrollTop-i,d=Math.floor(a/this.stationRow.offsetHeight);this.newIndex=Math.min(Math.max(d,0),this.currentList.length-1);const D=n.childNodes;for(const[l,w]of D.entries())if(this.stationRow!==w){const b=this.getSiblingTranslationValue(l);w.classList.toggle("-translate-y-full",b===-1),w.classList.toggle("translate-y-full",b===1)}}handleMouseUp(){this.dragged&&(this.dragged=!1,this.currentTranslation=0,this.finishSorting(),this.moveStation({index:this.index,newIndex:this.newIndex}))}finishSorting(){this.dragOrigin=0,document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}};_n([_e({type:Number,required:!0})],_r.prototype,"index",2);_n([ut()],_r.prototype,"stationRow",2);_n([ie],_r.prototype,"currentList",2);_n([ie],_r.prototype,"sortIndex",2);_n([se],_r.prototype,"moveStation",2);_n([se],_r.prototype,"startSorting",2);_r=_n([fe],_r);var Mb=Object.defineProperty,kb=Object.getOwnPropertyDescriptor,xr=(t,e,r,n)=>{for(var i=n>1?void 0:n?kb(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&Mb(e,r,i),i};let zt=class extends Vn(_r){constructor(){super(...arguments);V(this,"station");V(this,"editing");V(this,"currentStation");V(this,"selectedList");V(this,"settings");V(this,"handleDelete");V(this,"like");V(this,"toggleStation")}get transition(){return!this.dragged&&this.sortIndex!==void 0}get labels(){return[this.station.country,this.station.state,...this.station.tags.split(",")]}get menuOptions(){const e=[{id:"like",name:this.$t("general.like.submit")},{id:"visitHomepage",name:this.$t("general.visitHomepage")},{id:"edit",name:this.$t("station.edit")}];return this.index>0&&e.push({id:"moveUp",name:this.$t("station.moveUp")}),this.index<this.currentList.length-1&&e.push({id:"moveDown",name:this.$t("station.moveDown")}),e.push({id:"delete",name:this.$t("station.delete")}),e}get playing(){return this.currentStation===void 0?!1:this.currentStation.id===this.station.id}handleClick(){this.finishSorting(),this.toggleStation(this.station)}visitHomepage(){window.open(this.station.homepage,"_blank")}edit(){const e={list:this.selectedList,id:this.station.id},r=window.history.state;((r==null?void 0:r.viewId)!=="editor"||(r==null?void 0:r.props.list)!==e.list||(r==null?void 0:r.props.id)!==e.id)&&mt("editor",{props:e,force:!0})}moveUp(){this.moveStation({index:this.index,newIndex:this.index-1})}moveDown(){this.moveStation({index:this.index,newIndex:this.index+1})}delete(e=this.index){this.editing===this.station&&mt(null,{replace:!0}),this.handleDelete(e)}trigger(e){const r=this[e];if(typeof r=="function")return r();throw new Error(`Unknown option '${e}'.`)}};xr([_e({type:Object,required:!0})],zt.prototype,"station",2);xr([rt],zt.prototype,"editing",2);xr([ie],zt.prototype,"currentStation",2);xr([ie],zt.prototype,"selectedList",2);xr([ie],zt.prototype,"settings",2);xr([se("removeStation")],zt.prototype,"handleDelete",2);xr([se("likeStation")],zt.prototype,"like",2);xr([se],zt.prototype,"toggleStation",2);zt=xr([fe],zt);var Fb=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{ref:"stationRow",class:["station group flex cursor-pointer duration-200 hover:bg-black/10",e.transition?"transition-transform":"transition-[background-color]",{"relative z-50 bg-mute opacity-80":e.dragged}],style:{transform:e.dragged?`translateY(${e.currentTranslation}px)`:""},on:{click:function(n){return e.handleClick()},mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&n.button!==0?null:e.handleMouseDown.apply(null,arguments)}}},[r("div",{staticClass:"p-station"},[r(Pb,{attrs:{station:e.station,playing:e.playing}})],1),r("div",{staticClass:"w-full overflow-x-hidden py-station"},[r("div",{staticClass:"block pb-station-inner"},[r("h4",{staticClass:"mt-0 inline font-bold"},[e._v(" "+e._s(e.station.name)+" ")])]),r("div",{staticClass:"h-tags max-w-full"},[r("div",{staticClass:"scrollbar-avoid overflow-y-hidden overflow-x-scroll"},[r("div",{staticClass:"h-tags max-w-0 whitespace-nowrap"},[r(rs,{attrs:{labels:e.labels,compact:e.settings.compactMode}})],1)])])]),r("div",{staticClass:"flex cursor-auto items-center pr-station-sm",on:{click:function(n){n.stopPropagation()},mousedown:function(n){n.stopPropagation()}}},[r(Ht,{attrs:{actions:[e.$t("general.cancel")],label:e.$t("station.options",[e.station.name]),data:e.menuOptions},on:{change:e.trigger}},[r("div",{staticClass:"flex h-10 w-10 items-center justify-center text-lg"},[r(bb,{staticClass:"w-fixed"})],1)])],1)])},Nb=[],Bb=de(zt,Fb,Nb,!1,null,null,null,null);const Ub=Bb.exports;var $b=Object.defineProperty,Kb=Object.getOwnPropertyDescriptor,cs=(t,e,r,n)=>{for(var i=n>1?void 0:n?Kb(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&$b(e,r,i),i};let $n=class extends ae{constructor(){super(...arguments);V(this,"currentList");V(this,"dragging");V(this,"settings")}};cs([ie],$n.prototype,"currentList",2);cs([ie],$n.prototype,"dragging",2);cs([ie],$n.prototype,"settings",2);$n=cs([fe],$n);var Wb=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:{"compact-mode":e.settings.compactMode,"pointer-events-none":e.dragging}},e._l(e.currentList,function(n,i){return r(Ub,{key:n.id,attrs:{index:i,station:n}})}),1)},Hb=[],jb=de($n,Wb,Hb,!1,null,null,null,null);const Gb=jb.exports,Vb={};var zb=function(){var e=this,r=e._self._c;return r("svg",{staticClass:"mt-5 inline w-[200px] max-w-full dark:drop-shadow-[0_0_12px_rgb(255_255_255/0.3)]",attrs:{viewBox:"0 0 887.77227 772.83071"}},[r("circle",{attrs:{cx:"731.82227",cy:"101.66024",r:"101.66024",fill:"#ff6584"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M335.9542,797.01953s1.487-31.15875,31.97119-27.537",transform:"translate(-156.11386 -63.58465)"}}),r("circle",{attrs:{cx:"171.2269",cy:"688.52637",r:"15.25711",fill:"#6495ed"}}),r("rect",{staticClass:"fill-bird-accent",attrs:{x:"168.74434",y:"714.21843",width:"4.30672",height:"30.14703"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M838.40061,802.34205s1.487-31.15874,31.97119-27.537",transform:"translate(-156.11386 -63.58465)"}}),r("circle",{attrs:{cx:"673.67331",cy:"693.8489",r:"15.25711",fill:"#6495ed"}}),r("rect",{staticClass:"fill-bird-accent",attrs:{x:"671.19075",y:"719.54095",width:"4.30672",height:"30.14703"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M911.85146,807.66458s1.487-31.15874,31.9712-27.537",transform:"translate(-156.11386 -63.58465)"}}),r("circle",{attrs:{cx:"747.12416",cy:"699.17142",r:"15.25711",fill:"#6495ed"}}),r("rect",{staticClass:"fill-bird-accent",attrs:{x:"744.64161",y:"724.86348",width:"4.30672",height:"30.14703"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M456.24328,782.11645s1.487-31.15874,31.97119-27.53695",transform:"translate(-156.11386 -63.58465)"}}),r("circle",{attrs:{cx:"291.51598",cy:"673.6233",r:"15.25711",fill:"#6495ed"}}),r("rect",{staticClass:"fill-bird-accent",attrs:{x:"289.03342",y:"699.31536",width:"4.30672",height:"30.14703"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M229.50369,787.439s1.487-31.15874,31.97119-27.537",transform:"translate(-156.11386 -63.58465)"}}),r("circle",{attrs:{cx:"64.77639",cy:"678.94583",r:"15.25711",fill:"#6495ed"}}),r("rect",{staticClass:"fill-bird-accent",attrs:{x:"62.29383",y:"704.63788",width:"4.30672",height:"30.14703"}}),r("circle",{attrs:{cx:"442.27688",cy:"503.48191",r:"166.22823",fill:"#3f3d56"}}),r("path",{attrs:{d:"M493.73979,580.41025a43.98767,43.98767,0,0,1,67.51907,0,48.89067,48.89067,0,1,0-67.51907,0Z",transform:"translate(-156.11386 -63.58465)",fill:"#fff"}}),r("path",{attrs:{d:"M625.74457,580.41025a43.98759,43.98759,0,0,1,67.519,0,48.89064,48.89064,0,1,0-67.519,0Z",transform:"translate(-156.11386 -63.58465)",fill:"#fff"}}),r("circle",{attrs:{cx:"354.70738",cy:"464.81392",r:"16.81788",fill:"#3f3d56"}}),r("circle",{attrs:{cx:"486.70738",cy:"464.81392",r:"16.81788",fill:"#3f3d56"}}),r("circle",{attrs:{cx:"322.49478",cy:"545.03897",r:"19.55626",fill:"#ff6584"}}),r("circle",{attrs:{cx:"547.39179",cy:"545.03897",r:"19.55626",fill:"#ff6584"}}),r("polygon",{attrs:{points:"434.943 505.926 420.276 569.484 444.721 545.039 434.943 505.926",fill:"#ff6584"}}),r("polygon",{attrs:{points:"510.307 750.38 493.655 736.404 494.043 750.38 488.871 750.38 488.458 735.602 465.975 750.38 456.563 750.38 488.29 729.526 487.061 685.737 486.143 652.666 491.302 652.524 492.233 685.737 493.461 729.487 518.348 750.38 510.307 750.38",fill:"#3f3d56"}}),r("polygon",{attrs:{points:"432.076 750.38 415.424 736.404 415.812 750.38 410.654 750.38 410.24 735.602 387.757 750.38 378.345 750.38 410.059 729.526 408.831 685.737 407.913 652.666 413.084 652.524 414.015 685.737 415.23 729.487 440.118 750.38 432.076 750.38",fill:"#3f3d56"}}),r("path",{attrs:{d:"M600.83528,388.61566c-4.56112,0-8.58481,3.543-11.27493,8.985-2.37112-8.18315-7.3527-13.874-13.1704-13.874a8.84714,8.84714,0,0,0-1.17422.19724c-2.23625-8.737-7.43356-14.86444-13.493-14.86444-8.1005,0-14.6672,10.9446-14.6672,24.44533s6.5667,24.44533,14.6672,24.44533a8.84716,8.84716,0,0,0,1.17422-.19725c2.23625,8.737,7.43356,14.86444,13.493,14.86444,4.56112,0,8.58481-3.543,11.27493-8.985,2.37113,8.18316,7.3527,13.874,13.1704,13.874,8.1005,0,14.6672-10.9446,14.6672-24.44533S608.93578,388.61566,600.83528,388.61566Z",transform:"translate(-156.11386 -63.58465)",fill:"#3f3d56"}}),r("path",{attrs:{d:"M393.47351,507.83307h0a48.89061,48.89061,0,0,1,48.89061,48.89061v24.44543a48.89061,48.89061,0,0,1-48.89061,48.89061h0a0,0,0,0,1,0,0V507.83307A0,0,0,0,1,393.47351,507.83307Z",transform:"translate(679.72382 1074.30814) rotate(180)",fill:"#6495ed"}}),r("path",{attrs:{d:"M598.30346,444.24843h0A48.89061,48.89061,0,0,1,647.19412,493.139v24.44543a48.89061,48.89061,0,0,1-48.89061,48.89061h0a0,0,0,0,1,0,0V444.24843A0,0,0,0,1,598.30346,444.24843Z",fill:"#6495ed"}}),r("path",{attrs:{d:"M780.03662,560.56514H772.2795c0-98.37742-80.03569-178.41374-178.41374-178.41374-98.37742,0-178.41374,80.03632-178.41374,178.41374H407.6949c0-102.655,83.51592-186.17086,186.17086-186.17086C696.52134,374.39428,780.03662,457.91019,780.03662,560.56514Z",transform:"translate(-156.11386 -63.58465)",fill:"#6495ed"}}),r("polygon",{staticClass:"fill-bird-accent",attrs:{points:"131.69 367.997 131.69 367.997 131.69 367.997 131.69 367.997"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M327.66117,411.058l.00139-.0029-3.64431-1.51771-15.37654-6.50027-5.51164-2.32988-.423,1.06789h0l-7.40381,18.694L316.14,429.28836l.1094.09906-1.40416,3.31082a5.86169,5.86169,0,0,0-.4899.95547c-.98358,2.48353.87418,4.95394,2.63035,5.6494s3.9773-.75381,4.96087-3.23734c.97022-2.44974.02206-5.5618-1.68937-6.31373l.00151-.0029-3.64431-1.51771-12.46676-4.84631,7.12325-17.98534-1.0558-.41806-7.12577,17.992-1.54154-.59929,7.15363-18.06223.18843.07978,14.6541,6.20232.10928.09906-1.404,3.31082a5.85137,5.85137,0,0,0-.48989.95547c-.98371,2.48353.87405,4.95394,2.63022,5.6494s3.9773-.75381,4.96087-3.23734C330.32064,414.922,329.37248,411.80993,327.66117,411.058Z",transform:"translate(-156.11386 -63.58465)"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M399.78108,456.95208c-7.564-4.32464-6.05044-13.815-6.05044-13.815-.19032-6.16526-5.284-5.29259-5.284-5.29259l-1.85385.4231a5.62911,5.62911,0,0,0-2.75664-.50981l-2.82.47452c6.42137,1.50877,5.89378,6.88051,5.89378,6.88051l.89964,6.281-16.82582-6.78775,1.93187-4.555a8.12868,8.12868,0,0,0,.68046-1.32715c1.3661-3.44946-1.21409-6.88051-3.65325-7.84645-2.43916-.96618-5.524,1.0471-6.89022,4.49643-1.34744,3.40232-.0305,7.7247,2.3464,8.769l-.002.00415,5.06157,2.10782.03769-.11936Zm-8.54443-11.036.53956,6.012a13.8665,13.8665,0,0,1-2.52575-9.20675,5.82316,5.82316,0,0,0-1.12688-3.22524A6.83065,6.83065,0,0,1,391.23665,445.91606Z",transform:"translate(-156.11386 -63.58465)"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M271.4328,368.0405l.002-.004-5.06157-2.10794-21.1545-8.22341,5.33923-4.75027a6.74419,6.74419,0,0,1,9.21683-1.5099l-1.65686-2.46248s-3.11483-4.12374-7.475.23935c0,0-5.39481,7.95307-13.86878,5.92579l28.94032,12.249.15187.13763-1.95014,4.59827a8.12429,8.12429,0,0,0-.68047,1.32715c-1.36609,3.44933,1.2141,6.88038,3.65326,7.84644s5.524-1.0471,6.89022-4.49643C275.12664,373.40733,273.8097,369.085,271.4328,368.0405Z",transform:"translate(-156.11386 -63.58465)"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M348.87976,341.126l-1.95027,4.59826a8.13218,8.13218,0,0,0-.68034,1.32715c-1.36622,3.44933,1.214,6.88039,3.65313,7.84645s5.52412-1.0471,6.89022-4.49643c1.34756-3.40232.03062-7.7247-2.34627-8.76915l.002-.004-5.06157-2.10794-17.31509-6.73091,9.89338-24.97992-1.46629-.58077-9.89716,24.98925-2.141-.83221,9.9356-25.0868.26178.11078,20.353,8.61438.152.13763L357.2127,319.76a8.13743,8.13743,0,0,0-.68034,1.32715c-1.36622,3.44946,1.214,6.88051,3.65313,7.84657s5.52412-1.0471,6.89022-4.49656c1.34756-3.40231.03062-7.72469-2.34628-8.769l.002-.00416-5.06157-2.10781L338.98511,304.812h0l-.00088-.00038-.67088-.28358-7.65513-3.23608-10.87066,27.44744,28.9402,12.249Zm-18.809-38.35074Z",transform:"translate(-156.11386 -63.58465)"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M257.16744,200.55646l.00353-.00706-8.71319-3.62856-36.41622-14.15627,9.19111-8.17728s6.11371-8.4828,15.86619-2.5991l-2.852-4.23907s-5.36217-7.09893-12.86781.41189c0,0-9.2869,13.69082-23.87434,10.201l49.81893,21.08581.26152.237-3.35707,7.91563a14.00544,14.00544,0,0,0-1.17137,2.28464c-2.35169,5.9379,2.08991,11.84429,6.28877,13.50732s9.50936-1.80256,11.86117-7.74045C263.52617,209.795,261.25917,202.35435,257.16744,200.55646Z",transform:"translate(-156.11386 -63.58465)"}}),r("path",{staticClass:"fill-bird-accent",attrs:{d:"M283.90741,319.4701c-18.08491-10.33993-14.46594-33.03029-14.46594-33.03029-.455-14.7407-12.63376-12.65406-12.63376-12.65406l-4.43241,1.01143a13.4583,13.4583,0,0,0-6.59088-1.219l-6.7425,1.13469c15.353,3.60738,14.09161,16.45074,14.09161,16.45074l2.15092,15.0171-40.229-16.2288,4.61893-10.89082a19.45075,19.45075,0,0,0,1.627-3.17306c3.26633-8.24724-2.90271-16.45062-8.73461-18.76034s-13.20748,2.50356-16.47381,10.75068c-3.22184,8.13468-.07322,18.46919,5.60983,20.96607l-.00479.00983,12.10177,5.03977.09011-.28534Zm-20.429-26.3861,1.29451,14.42385c-7.59564-10.08294-6.04314-22.06233-6.04314-22.06233a13.925,13.925,0,0,0-2.69425-7.71121C264.76078,282.95569,263.47837,293.084,263.47837,293.084Z",transform:"translate(-156.11386 -63.58465)"}})])},Yb=[],Xb=de(Vb,zb,Yb,!1,null,null,null,null);const Qb=Xb.exports,Zb={};var Jb=function(){var e=this,r=e._self._c;return r("div",{staticClass:"flex justify-center"},[r("div",{staticClass:"mb-[40px] w-full max-w-[440px] rounded bg-soft px-5 py-2.5 text-center shadow-sm shadow-black/25"},[r(Qb),r("h3",{staticClass:"mb-0 pt-1"},[e._v(" "+e._s(e.$t("general.listEmpty[0]"))+" ")]),r("div",{staticClass:"py-2.5 icons:w-fixed"},[r(we,{attrs:{to:"search",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(Ve,{staticClass:"text-lg",attrs:{active:n},on:{click:i}},[r(Gt),e._v(" "+e._s(e.$t("general.findStations"))+" ")],1)]}}])}),r(we,{attrs:{to:"import-wizard",props:{type:"list"},toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(Ve,{staticClass:"text-lg",attrs:{active:n},on:{click:i}},[r(ns),e._v(" "+e._s(e.$t("general.importBackup"))+" ")],1)]}}])})],1)],1)])},qb=[],eC=de(Zb,Jb,qb,!1,null,null,null,null);const tC=eC.exports;var rC=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 512 512",width:"1em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36l-67.88-11.31l-11.31-67.88l74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16c-47.38-11.74-99.55.91-136.58 37.93c-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5c24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22c37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}})])};const nC={render:rC,name:"fa-solid-wrench"};var iC=Object.defineProperty,aC=Object.getOwnPropertyDescriptor,Mi=(t,e,r,n)=>{for(var i=n>1?void 0:n?aC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&iC(e,r,i),i};let cn=class extends Vn(kn){constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"currentList");V(this,"listName");V(this,"lists");V(this,"selectedList")}get dropdownOptions(){return this.lists.map((e,r)=>({id:r,name:e.name,description:e.content.length}))}get downloadOptions(){return[{id:"txt",name:this.$t("general.yamlFile",[this.appTitle])},{id:"xspf",name:"XSPF"},{id:"pls",name:"PLS"},{id:"m3u",name:"M3U"}]}exportList(e){this.download({name:this.listName,type:e,content:this.currentList})}};Mi([ie],cn.prototype,"currentList",2);Mi([ie],cn.prototype,"listName",2);Mi([ie],cn.prototype,"lists",2);Mi([ie],cn.prototype,"selectedList",2);cn=Mi([fe],cn);var sC=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"mb-5"},[r("strong",[e._v(e._s(e.$t("general.list")))]),e._v(": "),r(we,{attrs:{to:"list-manager"},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(Ht,{attrs:{value:e.selectedList,actions:[e.$t("general.manage")],"actions-enabled":!n,label:e.$t("general.stationLists"),data:e.dropdownOptions,"aria-label":e.$t("general.stationLists")},on:{change:e.changeList,actionSelect:i}})]}}])}),e._v(" "+e._s(" ")+" "),r(we,{attrs:{to:"import-wizard",props:{type:"list"},toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r("a",{class:{"text-accent icons:opacity-100":n},attrs:{title:String(e.$t("general.importBackup"))},on:{click:i}},[r(Hd,{staticClass:"w-fixed"})],1)]}}])}),e._v(" "+e._s(" ")+" "),r(Ht,{attrs:{actions:[e.$t("general.cancel")],label:e.$t("general.downloadAs"),data:e.downloadOptions,title:e.$t("general.downloadPlaylist")},on:{change:e.exportList}},[r(is,{staticClass:"w-fixed"})],1),e._v(" "+e._s(" ")+" "),r(we,{attrs:{to:"list-manager",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r("a",{class:{"text-accent icons:opacity-100":n},attrs:{title:String(e.$t("general.manageLists"))},on:{click:i}},[r(nC,{staticClass:"w-fixed"})],1)]}}])})],1)},oC=[],lC=de(cn,sC,oC,!1,null,null,null,null);const uC=lC.exports;var cC=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 576 512",width:"1.125em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}})])};const Ac={render:cC,name:"fa-solid-home"};var fC=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 256 512",width:"0.5em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"m215 71l-89 89H24a24 24 0 0 0-24 24v144a24 24 0 0 0 24 24h102.06L215 441c15 15 41 4.47 41-17V88c0-21.47-26-32-41-17z"}})])};const dC={render:fC,name:"fa-solid-volume-off"};var hC=Object.defineProperty,vC=Object.getOwnPropertyDescriptor,fs=(t,e,r,n)=>{for(var i=n>1?void 0:n?vC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&hC(e,r,i),i};let Kn=class extends ae{constructor(){super(...arguments);V(this,"value");V(this,"slider")}resetHandlers(){document.removeEventListener("mousemove",this.handleMouseEvent),document.removeEventListener("mouseup",this.resetHandlers),document.removeEventListener("touchmove",this.handleTouchEvent),document.removeEventListener("touchend",this.resetHandlers)}handleTouchEvent({changedTouches:e}){this.handleUIUpdate(e[0].pageX)}handleMouseEvent({pageX:e}){this.handleUIUpdate(e)}emitUpdate(e){}addResetListeners(){document.addEventListener("mouseup",this.resetHandlers),document.addEventListener("touchend",this.resetHandlers)}handleTouchStart(e){this.handleTouchEvent(e),document.addEventListener("touchmove",this.handleTouchEvent),this.addResetListeners()}handleMouseDown(e){this.handleMouseEvent(e),document.addEventListener("mousemove",this.handleMouseEvent),this.addResetListeners()}handleScroll({deltaY:e}){this.setValue(this.value+.1*Math.sign(-e))}handleUIUpdate(e){const{left:r,width:n}=this.slider.getBoundingClientRect();this.setValue((e-r)/n)}setValue(e){const r=Math.round(Math.min(Math.max(e,0),1)*100)/100;this.value!==r&&this.emitUpdate(r)}};fs([$a("update",{type:Number,required:!0})],Kn.prototype,"value",2);fs([ut()],Kn.prototype,"slider",2);fs([or("update")],Kn.prototype,"emitUpdate",1);Kn=fs([fe],Kn);var pC=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"inline-block px-1.25 text-lg",on:{wheel:function(n){return n.preventDefault(),e.handleScroll.apply(null,arguments)}}},[r("a",{on:{click:function(n){return e.setValue(e.value-.1)}}},[e._t("minusIcon")],2),e._v(" "+e._s(" ")+" "),r("div",{ref:"slider",staticClass:"mx-1.25 inline-flex h-[9px] w-25 align-[2px]",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&n.button!==0?null:e.handleMouseDown.apply(null,arguments)},touchstart:function(n){return n.preventDefault(),e.handleTouchStart.apply(null,arguments)}}},[r("div",{staticClass:"h-full bg-current opacity-70",style:{width:`${e.value*100}%`}}),r("div",{staticClass:"grow bg-mute"})]),e._v(" "+e._s(" ")+" "),r("a",{on:{click:function(n){return e.setValue(e.value+.1)}}},[e._t("plusIcon")],2)])},mC=[],gC=de(Kn,pC,mC,!1,null,null,null,null);const yC=gC.exports;var _C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}})])};const Oc={render:_C,name:"fa-solid-step-forward"};var EC=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"icon",attrs:{viewBox:"0 0 448 512",width:"0.875em",height:"1em"}},[r("path",{attrs:{fill:"currentColor",d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}})])};const wc={render:EC,name:"fa-solid-step-backward"};var jd={exports:{}};(function(t,e){typeof window<"u"&&function(n,i){t.exports=i()}(On,()=>(()=>{var r={"./src/config.ts":(d,D,l)=>{l.r(D),l.d(D,{enableStreamingMode:()=>g,hlsDefaultConfig:()=>f,mergeConfig:()=>u});var w=l("./src/controller/abr-controller.ts"),b=l("./src/controller/audio-stream-controller.ts"),B=l("./src/controller/audio-track-controller.ts"),O=l("./src/controller/subtitle-stream-controller.ts"),$=l("./src/controller/subtitle-track-controller.ts"),F=l("./src/controller/buffer-controller.ts"),k=l("./src/controller/timeline-controller.ts"),M=l("./src/controller/cap-level-controller.ts"),I=l("./src/controller/fps-controller.ts"),P=l("./src/controller/eme-controller.ts"),T=l("./src/controller/cmcd-controller.ts"),R=l("./src/utils/xhr-loader.ts"),L=l("./src/utils/fetch-loader.ts"),_=l("./src/utils/cues.ts"),y=l("./src/utils/mediakeys-helper.ts"),m=l("./src/utils/logger.ts");function p(){return p=Object.assign?Object.assign.bind():function(s){for(var E=1;E<arguments.length;E++){var A=arguments[E];for(var v in A)Object.prototype.hasOwnProperty.call(A,v)&&(s[v]=A[v])}return s},p.apply(this,arguments)}function C(s,E){var A=Object.keys(s);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(s);E&&(v=v.filter(function(N){return Object.getOwnPropertyDescriptor(s,N).enumerable})),A.push.apply(A,v)}return A}function x(s){for(var E=1;E<arguments.length;E++){var A=arguments[E]!=null?arguments[E]:{};E%2?C(Object(A),!0).forEach(function(v){o(s,v,A[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(A)):C(Object(A)).forEach(function(v){Object.defineProperty(s,v,Object.getOwnPropertyDescriptor(A,v))})}return s}function o(s,E,A){return E=c(E),E in s?Object.defineProperty(s,E,{value:A,enumerable:!0,configurable:!0,writable:!0}):s[E]=A,s}function c(s){var E=S(s,"string");return typeof E=="symbol"?E:String(E)}function S(s,E){if(typeof s!="object"||s===null)return s;var A=s[Symbol.toPrimitive];if(A!==void 0){var v=A.call(s,E||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(s)}var f=x(x({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:R.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:w.default,bufferController:F.default,capLevelController:M.default,fpsController:I.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:y.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},h()),{},{subtitleStreamController:O.SubtitleStreamController,subtitleTrackController:$.default,timelineController:k.TimelineController,audioStreamController:b.default,audioTrackController:B.default,emeController:P.default,cmcdController:T.default});function h(){return{cueHandler:_.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function u(s,E){if((E.liveSyncDurationCount||E.liveMaxLatencyDurationCount)&&(E.liveSyncDuration||E.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(E.liveMaxLatencyDurationCount!==void 0&&(E.liveSyncDurationCount===void 0||E.liveMaxLatencyDurationCount<=E.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(E.liveMaxLatencyDuration!==void 0&&(E.liveSyncDuration===void 0||E.liveMaxLatencyDuration<=E.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return p({},s,E)}function g(s){var E=s.loader;if(E!==L.default&&E!==R.default)m.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),s.progressive=!1;else{var A=(0,L.fetchSupported)();A&&(s.loader=L.default,s.progressive=!0,s.enableSoftwareAES=!0,m.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>R});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/ewma-bandwidth-estimator.ts"),B=l("./src/events.ts"),O=l("./src/errors.ts"),$=l("./src/types/loader.ts"),F=l("./src/utils/logger.ts");function k(L,_){for(var y=0;y<_.length;y++){var m=_[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(L,I(m.key),m)}}function M(L,_,y){return _&&k(L.prototype,_),y&&k(L,y),Object.defineProperty(L,"prototype",{writable:!1}),L}function I(L){var _=P(L,"string");return typeof _=="symbol"?_:String(_)}function P(L,_){if(typeof L!="object"||L===null)return L;var y=L[Symbol.toPrimitive];if(y!==void 0){var m=y.call(L,_||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(L)}var T=function(){function L(y){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=y;var m=y.config;this.bwEstimator=new b.default(m.abrEwmaSlowVoD,m.abrEwmaFastVoD,m.abrEwmaDefaultEstimate),this.registerListeners()}var _=L.prototype;return _.registerListeners=function(){var m=this.hls;m.on(B.Events.FRAG_LOADING,this.onFragLoading,this),m.on(B.Events.FRAG_LOADED,this.onFragLoaded,this),m.on(B.Events.FRAG_BUFFERED,this.onFragBuffered,this),m.on(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.on(B.Events.ERROR,this.onError,this)},_.unregisterListeners=function(){var m=this.hls;m.off(B.Events.FRAG_LOADING,this.onFragLoading,this),m.off(B.Events.FRAG_LOADED,this.onFragLoaded,this),m.off(B.Events.FRAG_BUFFERED,this.onFragBuffered,this),m.off(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.off(B.Events.ERROR,this.onError,this)},_.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},_.onFragLoading=function(m,p){var C=p.frag;if(C.type===$.PlaylistLevelType.MAIN&&!this.timer){var x;this.fragCurrent=C,this.partCurrent=(x=p.part)!=null?x:null,this.timer=self.setInterval(this.onCheck,100)}},_.onLevelLoaded=function(m,p){var C=this.hls.config;p.details.live?this.bwEstimator.update(C.abrEwmaSlowLive,C.abrEwmaFastLive):this.bwEstimator.update(C.abrEwmaSlowVoD,C.abrEwmaFastVoD)},_._abandonRulesCheck=function(){var m=this.fragCurrent,p=this.partCurrent,C=this.hls,x=C.autoLevelEnabled,o=C.media;if(!(!m||!o)){var c=p?p.stats:m.stats,S=p?p.duration:m.duration;if(c.aborted||c.loaded&&c.loaded===c.total||m.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!x||o.paused||!o.playbackRate||!o.readyState)){var f=C.mainForwardBufferInfo;if(f!==null){var h=performance.now()-c.loading.start,u=Math.abs(o.playbackRate);if(!(h<=500*S/u)){var g=c.loaded&&c.loading.first,s=this.bwEstimator.getEstimate(),E=C.levels,A=C.minAutoLevel,v=E[m.level],N=c.total||Math.max(c.loaded,Math.round(S*v.maxBitrate/8)),U=g?c.loaded*1e3/h:0,K=U?(N-c.loaded)/U:N*8/s,W=f.len/u;if(!(K<=W)){var H=Number.POSITIVE_INFINITY,j;for(j=m.level-1;j>A;j--){var G=E[j].maxBitrate;if(H=U?S*G/(8*.8*U):S*G/s,H<W)break}H>=K||(F.logger.warn("Fragment "+m.sn+(p?" part "+p.index:"")+" of level "+m.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+j+`
      Current BW estimate: `+((0,w.isFiniteNumber)(s)?(s/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+K.toFixed(3)+` s
      Estimated load time for the next fragment: `+H.toFixed(3)+` s
      Time to underbuffer: `+W.toFixed(3)+" s"),C.nextLoadLevel=j,g&&this.bwEstimator.sample(h,c.loaded),this.clearTimer(),(m.loader||m.keyLoader)&&(this.fragCurrent=this.partCurrent=null,m.abortRequests()),C.trigger(B.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:m,part:p,stats:c}))}}}}}},_.onFragLoaded=function(m,p){var C=p.frag,x=p.part;if(C.type===$.PlaylistLevelType.MAIN&&(0,w.isFiniteNumber)(C.sn)){var o=x?x.stats:C.stats,c=x?x.duration:C.duration;if(this.clearTimer(),this.lastLoadedFragLevel=C.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var S=this.hls.levels[C.level],f=(S.loaded?S.loaded.bytes:0)+o.loaded,h=(S.loaded?S.loaded.duration:0)+c;S.loaded={bytes:f,duration:h},S.realBitrate=Math.round(8*f/h)}if(C.bitrateTest){var u={stats:o,frag:C,part:x,id:C.type};this.onFragBuffered(B.Events.FRAG_BUFFERED,u)}}},_.onFragBuffered=function(m,p){var C=p.frag,x=p.part,o=x?x.stats:C.stats;if(!o.aborted&&!(C.type!==$.PlaylistLevelType.MAIN||C.sn==="initSegment")){var c=o.parsing.end-o.loading.start;this.bwEstimator.sample(c,o.loaded),o.bwEstimate=this.bwEstimator.getEstimate(),C.bitrateTest?this.bitrateTestDelay=c/1e3:this.bitrateTestDelay=0}},_.onError=function(m,p){var C;if(((C=p.frag)===null||C===void 0?void 0:C.type)===$.PlaylistLevelType.MAIN){if(p.type===O.ErrorTypes.KEY_SYSTEM_ERROR){this.clearTimer();return}switch(p.details){case O.ErrorDetails.FRAG_LOAD_ERROR:case O.ErrorDetails.FRAG_LOAD_TIMEOUT:case O.ErrorDetails.KEY_LOAD_ERROR:case O.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer();break}}},_.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},_.getNextABRAutoLevel=function(){var m=this.fragCurrent,p=this.partCurrent,C=this.hls,x=C.maxAutoLevel,o=C.config,c=C.minAutoLevel,S=C.media,f=p?p.duration:m?m.duration:0,h=S&&S.playbackRate!==0?Math.abs(S.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():o.abrEwmaDefaultEstimate,g=C.mainForwardBufferInfo,s=(g?g.len:0)/h,E=this.findBestLevel(u,c,x,s,o.abrBandWidthFactor,o.abrBandWidthUpFactor);if(E>=0)return E;F.logger.trace((s?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var A=f?Math.min(f,o.maxStarvationDelay):o.maxStarvationDelay,v=o.abrBandWidthFactor,N=o.abrBandWidthUpFactor;if(!s){var U=this.bitrateTestDelay;if(U){var K=f?Math.min(f,o.maxLoadingDelay):o.maxLoadingDelay;A=K-U,F.logger.trace("bitrate test took "+Math.round(1e3*U)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*A)+" ms"),v=N=1}}return E=this.findBestLevel(u,c,x,s+A,v,N),Math.max(E,0)},_.findBestLevel=function(m,p,C,x,o,c){for(var S,f=this.fragCurrent,h=this.partCurrent,u=this.lastLoadedFragLevel,g=this.hls.levels,s=g[u],E=!!(s!=null&&(S=s.details)!==null&&S!==void 0&&S.live),A=s==null?void 0:s.codecSet,v=h?h.duration:f?f.duration:0,N=C;N>=p;N--){var U=g[N];if(!(!U||A&&U.codecSet!==A)){var K=U.details,W=(h?K==null?void 0:K.partTarget:K==null?void 0:K.averagetargetduration)||v,H=void 0;N<=u?H=o*m:H=c*m;var j=g[N].maxBitrate,G=j*W/H;if(F.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+N+"/"+Math.round(H)+"/"+j+"/"+W+"/"+x+"/"+G),H>j&&(G===0||!(0,w.isFiniteNumber)(G)||E&&!this.bitrateTestDelay||G<x))return N}}return-1},M(L,[{key:"nextAutoLevel",get:function(){var m=this._nextAutoLevel,p=this.bwEstimator;if(m!==-1&&!p.canEstimate())return m;var C=this.getNextABRAutoLevel();return m!==-1&&this.hls.levels[C].loadError?m:(m!==-1&&(C=Math.min(m,C)),C)},set:function(m){this._nextAutoLevel=m}}]),L}();const R=T},"./src/controller/audio-stream-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>o});var w=l("./src/polyfills/number.ts"),b=l("./src/controller/base-stream-controller.ts"),B=l("./src/events.ts"),O=l("./src/utils/buffer-helper.ts"),$=l("./src/controller/fragment-tracker.ts"),F=l("./src/types/level.ts"),k=l("./src/types/loader.ts"),M=l("./src/loader/fragment.ts"),I=l("./src/demux/chunk-cache.ts"),P=l("./src/demux/transmuxer-interface.ts"),T=l("./src/types/transmuxer.ts"),R=l("./src/controller/fragment-finders.ts"),L=l("./src/utils/discontinuities.ts"),_=l("./src/errors.ts");function y(){return y=Object.assign?Object.assign.bind():function(c){for(var S=1;S<arguments.length;S++){var f=arguments[S];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])}return c},y.apply(this,arguments)}function m(c,S){c.prototype=Object.create(S.prototype),c.prototype.constructor=c,p(c,S)}function p(c,S){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,u){return h.__proto__=u,h},p(c,S)}var C=100,x=function(c){m(S,c);function S(h,u,g){var s;return s=c.call(this,h,u,g,"[audio-stream-controller]")||this,s.videoBuffer=null,s.videoTrackCC=-1,s.waitingVideoCC=-1,s.audioSwitch=!1,s.trackId=-1,s.waitingData=null,s.mainDetails=null,s.bufferFlushed=!1,s.cachedTrackLoadedData=null,s._registerListeners(),s}var f=S.prototype;return f.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},f._registerListeners=function(){var u=this.hls;u.on(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(B.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.on(B.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(B.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(B.Events.ERROR,this.onError,this),u.on(B.Events.BUFFER_RESET,this.onBufferReset,this),u.on(B.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(B.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.on(B.Events.FRAG_BUFFERED,this.onFragBuffered,this)},f._unregisterListeners=function(){var u=this.hls;u.off(B.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(B.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(B.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(B.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(B.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.off(B.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(B.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(B.Events.ERROR,this.onError,this),u.off(B.Events.BUFFER_RESET,this.onBufferReset,this),u.off(B.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(B.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(B.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.off(B.Events.FRAG_BUFFERED,this.onFragBuffered,this)},f.onInitPtsFound=function(u,g){var s=g.frag,E=g.id,A=g.initPTS;if(E==="main"){var v=s.cc;this.initPTS[s.cc]=A,this.log("InitPTS for cc: "+v+" found from main: "+A),this.videoTrackCC=v,this.state===b.State.WAITING_INIT_PTS&&this.tick()}},f.startLoad=function(u){if(!this.levels){this.startPosition=u,this.state=b.State.STOPPED;return}var g=this.lastCurrentTime;this.stopLoad(),this.setInterval(C),this.fragLoadError=0,g>0&&u===-1?(this.log("Override startPosition with lastCurrentTime @"+g.toFixed(3)),u=g,this.state=b.State.IDLE):(this.loadedmetadata=!1,this.state=b.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()},f.doTick=function(){switch(this.state){case b.State.IDLE:this.doTickIdle();break;case b.State.WAITING_TRACK:{var u,g=this.levels,s=this.trackId,E=g==null||(u=g[s])===null||u===void 0?void 0:u.details;if(E){if(this.waitForCdnTuneIn(E))break;this.state=b.State.WAITING_INIT_PTS}break}case b.State.FRAG_LOADING_WAITING_RETRY:{var A,v=performance.now(),N=this.retryDate;(!N||v>=N||(A=this.media)!==null&&A!==void 0&&A.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=b.State.IDLE);break}case b.State.WAITING_INIT_PTS:{var U=this.waitingData;if(U){var K=U.frag,W=U.part,H=U.cache,j=U.complete;if(this.initPTS[K.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=b.State.FRAG_LOADING;var G=H.flush(),z={frag:K,part:W,payload:G,networkDetails:null};this._handleFragmentLoadProgress(z),j&&c.prototype._handleFragmentLoadComplete.call(this,z)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+K.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Y=this.getLoadPosition(),X=O.BufferHelper.bufferInfo(this.mediaBuffer,Y,this.config.maxBufferHole),Q=(0,R.fragmentWithinToleranceTest)(X.end,this.config.maxFragLookUpTolerance,K);Q<0&&(this.log("Waiting fragment cc ("+K.cc+") @ "+K.start+" cancelled because another fragment at "+X.end+" is needed"),this.clearWaitingFragment())}}else this.state=b.State.IDLE}}this.onTickEnd()},f.clearWaitingFragment=function(){var u=this.waitingData;u&&(this.fragmentTracker.removeFragment(u.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=b.State.IDLE)},f.resetLoadingState=function(){this.clearWaitingFragment(),c.prototype.resetLoadingState.call(this)},f.onTickEnd=function(){var u=this.media;!u||!u.readyState||(this.lastCurrentTime=u.currentTime)},f.doTickIdle=function(){var u=this.hls,g=this.levels,s=this.media,E=this.trackId,A=u.config;if(!(!g||!g[E])&&!(!s&&(this.startFragRequested||!A.startFragPrefetch))){var v=g[E],N=v.details;if(!N||N.live&&this.levelLastLoaded!==E||this.waitForCdnTuneIn(N)){this.state=b.State.WAITING_TRACK;return}var U=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&U&&(this.bufferFlushed=!1,this.afterBufferFlushed(U,M.ElementaryStreamTypes.AUDIO,k.PlaylistLevelType.AUDIO));var K=this.getFwdBufferInfo(U,k.PlaylistLevelType.AUDIO);if(K!==null){var W=this.audioSwitch;if(!W&&this._streamEnded(K,N)){u.trigger(B.Events.BUFFER_EOS,{type:"audio"}),this.state=b.State.ENDED;return}var H=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,k.PlaylistLevelType.MAIN),j=K.len,G=this.getMaxBufferLength(H==null?void 0:H.len);if(!(j>=G&&!W)){var z=N.fragments,Y=z[0].start,X=K.end;if(W&&s){var Q=this.getLoadPosition();X=Q,N.PTSKnown&&Q<Y&&(K.end>Y||K.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=Y+.05)}if(!(H&&X>H.end+N.targetduration)&&!((!H||!H.len)&&K.len)){var q=this.getNextFragment(X,N);if(!q){this.bufferFlushed=!0;return}this.loadFragment(q,N,X)}}}}},f.getMaxBufferLength=function(u){var g=c.prototype.getMaxBufferLength.call(this);return u?Math.max(g,u):g},f.onMediaDetaching=function(){this.videoBuffer=null,c.prototype.onMediaDetaching.call(this)},f.onAudioTracksUpdated=function(u,g){var s=g.audioTracks;this.resetTransmuxer(),this.levels=s.map(function(E){return new F.Level(E)})},f.onAudioTrackSwitching=function(u,g){var s=!!g.url;this.trackId=g.id;var E=this.fragCurrent;E&&E.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),s?this.setInterval(C):this.resetTransmuxer(),s?(this.audioSwitch=!0,this.state=b.State.IDLE):this.state=b.State.STOPPED,this.tick()},f.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},f.onLevelLoaded=function(u,g){this.mainDetails=g.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(B.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},f.onAudioTrackLoaded=function(u,g){var s;if(this.mainDetails==null){this.cachedTrackLoadedData=g;return}var E=this.levels,A=g.details,v=g.id;if(!E){this.warn("Audio tracks were reset while loading level "+v);return}this.log("Track "+v+" loaded ["+A.startSN+","+A.endSN+"],duration:"+A.totalduration);var N=E[v],U=0;if(A.live||(s=N.details)!==null&&s!==void 0&&s.live){var K=this.mainDetails;if(A.fragments[0]||(A.deltaUpdateFailed=!0),A.deltaUpdateFailed||!K)return;!N.details&&A.hasProgramDateTime&&K.hasProgramDateTime?((0,L.alignMediaPlaylistByPDT)(A,K),U=A.fragments[0].start):U=this.alignPlaylists(A,N.details)}N.details=A,this.levelLastLoaded=v,!this.startFragRequested&&(this.mainDetails||!A.live)&&this.setStartPosition(N.details,U),this.state===b.State.WAITING_TRACK&&!this.waitForCdnTuneIn(A)&&(this.state=b.State.IDLE),this.tick()},f._handleFragmentLoadProgress=function(u){var g,s=u.frag,E=u.part,A=u.payload,v=this.config,N=this.trackId,U=this.levels;if(!U){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+s.sn+" of level "+s.level+" will not be buffered");return}var K=U[N];console.assert(K,"Audio track is defined on fragment load progress");var W=K.details;console.assert(W,"Audio track details are defined on fragment load progress");var H=v.defaultAudioCodec||K.audioCodec||"mp4a.40.2",j=this.transmuxer;j||(j=this.transmuxer=new P.default(this.hls,k.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var G=this.initPTS[s.cc],z=(g=s.initSegment)===null||g===void 0?void 0:g.data;if(G!==void 0){var Y=!1,X=E?E.index:-1,Q=X!==-1,q=new T.ChunkMetadata(s.level,s.sn,s.stats.chunkCount,A.byteLength,X,Q);j.push(A,z,H,"",s,E,W.totalduration,Y,q,G)}else{this.log("Unknown video PTS for cc "+s.cc+", waiting for video PTS before demuxing audio frag "+s.sn+" of ["+W.startSN+" ,"+W.endSN+"],track "+N);var J=this.waitingData=this.waitingData||{frag:s,part:E,cache:new I.default,complete:!1},ee=J.cache;ee.push(new Uint8Array(A)),this.waitingVideoCC=this.videoTrackCC,this.state=b.State.WAITING_INIT_PTS}},f._handleFragmentLoadComplete=function(u){if(this.waitingData){this.waitingData.complete=!0;return}c.prototype._handleFragmentLoadComplete.call(this,u)},f.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},f.onBufferCreated=function(u,g){var s=g.tracks.audio;s&&(this.mediaBuffer=s.buffer||null),g.tracks.video&&(this.videoBuffer=g.tracks.video.buffer||null)},f.onFragBuffered=function(u,g){var s=g.frag,E=g.part;if(s.type!==k.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&s.type===k.PlaylistLevelType.MAIN){var A;(A=this.videoBuffer||this.media)!==null&&A!==void 0&&A.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(s)){this.warn("Fragment "+s.sn+(E?" p: "+E.index:"")+" of level "+s.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}s.sn!=="initSegment"&&(this.fragPrevious=s,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(B.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(s,E)},f.onError=function(u,g){if(g.type===_.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,g);return}switch(g.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.FRAG_PARSING_ERROR:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,g);break;case _.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==b.State.ERROR&&this.state!==b.State.STOPPED&&(this.state=g.fatal?b.State.ERROR:b.State.IDLE,this.warn(g.details+" while loading frag, switching to "+this.state+" state"));break;case _.ErrorDetails.BUFFER_FULL_ERROR:if(g.parent==="audio"&&(this.state===b.State.PARSING||this.state===b.State.PARSED)){var s=!0,E=this.getFwdBufferInfo(this.mediaBuffer,k.PlaylistLevelType.AUDIO);E&&E.len>.5&&(s=!this.reduceMaxBufferLength(E.len)),s&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,c.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},f.onBufferFlushed=function(u,g){var s=g.type;s===M.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===b.State.ENDED&&(this.state=b.State.IDLE))},f._handleTransmuxComplete=function(u){var g,s="audio",E=this.hls,A=u.remuxResult,v=u.chunkMeta,N=this.getCurrentContext(v);if(!N){this.warn("The loading context changed while buffering fragment "+v.sn+" of level "+v.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(v.level);return}var U=N.frag,K=N.part,W=N.level.details,H=A.audio,j=A.text,G=A.id3,z=A.initSegment;if(!(this.fragContextChanged(U)||!W)){if(this.state=b.State.PARSING,this.audioSwitch&&H&&this.completeAudioSwitch(),z!=null&&z.tracks&&(this._bufferInitSegment(z.tracks,U,v),E.trigger(B.Events.FRAG_PARSING_INIT_SEGMENT,{frag:U,id:s,tracks:z.tracks})),H){var Y=H.startPTS,X=H.endPTS,Q=H.startDTS,q=H.endDTS;K&&(K.elementaryStreams[M.ElementaryStreamTypes.AUDIO]={startPTS:Y,endPTS:X,startDTS:Q,endDTS:q}),U.setElementaryStreamInfo(M.ElementaryStreamTypes.AUDIO,Y,X,Q,q),this.bufferFragmentData(H,U,K,v)}if(G!=null&&(g=G.samples)!==null&&g!==void 0&&g.length){var J=y({id:s,frag:U,details:W},G);E.trigger(B.Events.FRAG_PARSING_METADATA,J)}if(j){var ee=y({id:s,frag:U,details:W},j);E.trigger(B.Events.FRAG_PARSING_USERDATA,ee)}}},f._bufferInitSegment=function(u,g,s){if(this.state===b.State.PARSING){u.video&&delete u.video;var E=u.audio;if(!!E){E.levelCodec=E.codec,E.id="audio",this.log("Init audio buffer, container:"+E.container+", codecs[parsed]=["+E.codec+"]"),this.hls.trigger(B.Events.BUFFER_CODECS,u);var A=E.initSegment;if(A!=null&&A.byteLength){var v={type:"audio",frag:g,part:null,chunkMeta:s,parent:g.type,data:A};this.hls.trigger(B.Events.BUFFER_APPENDING,v)}this.tick()}}},f.loadFragment=function(u,g,s){var E=this.fragmentTracker.getState(u);this.fragCurrent=u,(this.audioSwitch||E===$.FragmentState.NOT_LOADED||E===$.FragmentState.PARTIAL)&&(u.sn==="initSegment"?this._loadInitSegment(u,g):g.live&&!(0,w.isFiniteNumber)(this.initPTS[u.cc])?(this.log("Waiting for video PTS in continuity counter "+u.cc+" of live stream before loading audio fragment "+u.sn+" of level "+this.trackId),this.state=b.State.WAITING_INIT_PTS):(this.startFragRequested=!0,c.prototype.loadFragment.call(this,u,g,s)))},f.completeAudioSwitch=function(){var u=this.hls,g=this.media,s=this.trackId;g&&(this.log("Switching audio track : flushing all audio"),c.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,u.trigger(B.Events.AUDIO_TRACK_SWITCHED,{id:s})},S}(b.default);const o=x},"./src/controller/audio-track-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>R});var w=l("./src/events.ts"),b=l("./src/errors.ts"),B=l("./src/controller/base-playlist-controller.ts"),O=l("./src/types/loader.ts");function $(L,_){for(var y=0;y<_.length;y++){var m=_[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(L,k(m.key),m)}}function F(L,_,y){return _&&$(L.prototype,_),y&&$(L,y),Object.defineProperty(L,"prototype",{writable:!1}),L}function k(L){var _=M(L,"string");return typeof _=="symbol"?_:String(_)}function M(L,_){if(typeof L!="object"||L===null)return L;var y=L[Symbol.toPrimitive];if(y!==void 0){var m=y.call(L,_||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(L)}function I(L,_){L.prototype=Object.create(_.prototype),L.prototype.constructor=L,P(L,_)}function P(L,_){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,p){return m.__proto__=p,m},P(L,_)}var T=function(L){I(_,L);function _(m){var p;return p=L.call(this,m,"[audio-track-controller]")||this,p.tracks=[],p.groupId=null,p.tracksInGroup=[],p.trackId=-1,p.trackName="",p.selectDefaultTrack=!0,p.registerListeners(),p}var y=_.prototype;return y.registerListeners=function(){var p=this.hls;p.on(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.on(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.on(w.Events.LEVEL_LOADING,this.onLevelLoading,this),p.on(w.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),p.on(w.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),p.on(w.Events.ERROR,this.onError,this)},y.unregisterListeners=function(){var p=this.hls;p.off(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.off(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.off(w.Events.LEVEL_LOADING,this.onLevelLoading,this),p.off(w.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),p.off(w.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),p.off(w.Events.ERROR,this.onError,this)},y.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,L.prototype.destroy.call(this)},y.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},y.onManifestParsed=function(p,C){this.tracks=C.audioTracks||[]},y.onAudioTrackLoaded=function(p,C){var x=C.id,o=C.details,c=this.tracksInGroup[x];if(!c){this.warn("Invalid audio track id "+x);return}var S=c.details;c.details=C.details,this.log("audioTrack "+x+" loaded ["+o.startSN+"-"+o.endSN+"]"),x===this.trackId&&(this.retryCount=0,this.playlistLoaded(x,C,S))},y.onLevelLoading=function(p,C){this.switchLevel(C.level)},y.onLevelSwitching=function(p,C){this.switchLevel(C.level)},y.switchLevel=function(p){var C=this.hls.levels[p];if(!!(C!=null&&C.audioGroupIds)){var x=C.audioGroupIds[C.urlId];if(this.groupId!==x){this.groupId=x;var o=this.tracks.filter(function(S){return!x||S.groupId===x});this.selectDefaultTrack&&!o.some(function(S){return S.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=o;var c={audioTracks:o};this.log("Updating audio tracks, "+o.length+' track(s) found in "'+x+'" group-id'),this.hls.trigger(w.Events.AUDIO_TRACKS_UPDATED,c),this.selectInitialTrack()}}},y.onError=function(p,C){L.prototype.onError.call(this,p,C),!(C.fatal||!C.context)&&C.context.type===O.PlaylistContextType.AUDIO_TRACK&&C.context.id===this.trackId&&C.context.groupId===this.groupId&&this.retryLoadingOrFail(C)},y.setAudioTrack=function(p){var C=this.tracksInGroup;if(p<0||p>=C.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var x=C[this.trackId];this.log("Now switching to audio-track index "+p);var o=C[p],c=o.id,S=o.groupId,f=S===void 0?"":S,h=o.name,u=o.type,g=o.url;if(this.trackId=p,this.trackName=h,this.selectDefaultTrack=!1,this.hls.trigger(w.Events.AUDIO_TRACK_SWITCHING,{id:c,groupId:f,name:h,type:u,url:g}),!(o.details&&!o.details.live)){var s=this.switchParams(o.url,x==null?void 0:x.details);this.loadPlaylist(s)}},y.selectInitialTrack=function(){var p=this.tracksInGroup;console.assert(p.length,"Initial audio track should be selected when tracks are known");var C=this.trackName,x=this.findTrackId(C)||this.findTrackId();x!==-1?this.setAudioTrack(x):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(w.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},y.findTrackId=function(p){for(var C=this.tracksInGroup,x=0;x<C.length;x++){var o=C[x];if((!this.selectDefaultTrack||o.default)&&(!p||p===o.name))return o.id}return-1},y.loadPlaylist=function(p){L.prototype.loadPlaylist.call(this);var C=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(C)){var x=C.id,o=C.groupId,c=C.url;if(p)try{c=p.addDirectives(c)}catch(S){this.warn("Could not construct new URL with HLS Delivery Directives: "+S)}this.log("loading audio-track playlist for id: "+x),this.clearTimer(),this.hls.trigger(w.Events.AUDIO_TRACK_LOADING,{url:c,id:x,groupId:o,deliveryDirectives:p||null})}},F(_,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(p){this.selectDefaultTrack=!1,this.setAudioTrack(p)}}]),_}(B.default);const R=T},"./src/controller/base-playlist-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>$});var w=l("./src/types/level.ts"),b=l("./src/controller/level-helper.ts"),B=l("./src/utils/logger.ts"),O=l("./src/errors.ts"),$=function(){function F(M,I){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=B.logger.log.bind(B.logger,I+":"),this.warn=B.logger.warn.bind(B.logger,I+":"),this.hls=M}var k=F.prototype;return k.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},k.onError=function(I,P){P.fatal&&(P.type===O.ErrorTypes.NETWORK_ERROR||P.type===O.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},k.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},k.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},k.stopLoad=function(){this.canLoad=!1,this.clearTimer()},k.switchParams=function(I,P){var T=P==null?void 0:P.renditionReports;if(T)for(var R=0;R<T.length;R++){var L=T[R],_=void 0;try{_=new self.URL(L.URI,P.url).href}catch(C){B.logger.warn("Could not construct new URL for Rendition Report: "+C),_=L.URI||""}if(_===I.slice(-_.length)){var y=parseInt(L["LAST-MSN"])||(P==null?void 0:P.lastPartSn),m=parseInt(L["LAST-PART"])||(P==null?void 0:P.lastPartIndex);if(this.hls.config.lowLatencyMode){var p=Math.min(P.age-P.partTarget,P.targetduration);m>=0&&p>P.partTarget&&(m+=1)}return new w.HlsUrlParameters(y,m>=0?m:void 0,w.HlsSkip.No)}}},k.loadPlaylist=function(I){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},k.shouldLoadTrack=function(I){return this.canLoad&&I&&!!I.url&&(!I.details||I.details.live)},k.playlistLoaded=function(I,P,T){var R=this,L=P.details,_=P.stats,y=self.performance.now(),m=_.loading.first?Math.max(0,y-_.loading.first):0;if(L.advancedDateTime=Date.now()-m,L.live||T!=null&&T.live){if(L.reloaded(T),T&&this.log("live playlist "+I+" "+(L.advanced?"REFRESHED "+L.lastPartSn+"-"+L.lastPartIndex:"MISSED")),T&&L.fragments.length>0&&(0,b.mergeDetails)(T,L),!this.canLoad||!L.live)return;var p,C=void 0,x=void 0;if(L.canBlockReload&&L.endSN&&L.advanced){var o=this.hls.config.lowLatencyMode,c=L.lastPartSn,S=L.endSN,f=L.lastPartIndex,h=f!==-1,u=c===S,g=o?0:f;h?(C=u?S+1:c,x=u?g:f+1):C=S+1;var s=L.age,E=s+L.ageHeader,A=Math.min(E-L.partTarget,L.targetduration*1.5);if(A>0){if(T&&A>T.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+T.tuneInGoal+" to: "+A+" with playlist age: "+L.age),A=0;else{var v=Math.floor(A/L.targetduration);if(C+=v,x!==void 0){var N=Math.round(A%L.targetduration/L.partTarget);x+=N}this.log("CDN Tune-in age: "+L.ageHeader+"s last advanced "+s.toFixed(2)+"s goal: "+A+" skip sn "+v+" to part "+x)}L.tuneInGoal=A}if(p=this.getDeliveryDirectives(L,P.deliveryDirectives,C,x),o||!u){this.loadPlaylist(p);return}}else p=this.getDeliveryDirectives(L,P.deliveryDirectives,C,x);var U=this.hls.mainForwardBufferInfo,K=U?U.end-U.len:0,W=(L.edge-K)*1e3,H=(0,b.computeReloadInterval)(L,W);L.updated?y>this.requestScheduled+H&&(this.requestScheduled=_.loading.start):this.requestScheduled=-1,C!==void 0&&L.canBlockReload?this.requestScheduled=_.loading.first+H-(L.partTarget*1e3||1e3):this.requestScheduled=(this.requestScheduled===-1?y:this.requestScheduled)+H;var j=this.requestScheduled-y;j=Math.max(0,j),this.log("reload live playlist "+I+" in "+Math.round(j)+" ms"),this.timer=self.setTimeout(function(){return R.loadPlaylist(p)},j)}else this.clearTimer()},k.getDeliveryDirectives=function(I,P,T,R){var L=(0,w.getSkipValue)(I,T);return P!=null&&P.skip&&I.deltaUpdateFailed&&(T=P.msn,R=P.part,L=w.HlsSkip.No),new w.HlsUrlParameters(T,R,L)},k.retryLoadingOrFail=function(I){var P=this,T=this.hls.config,R=this.retryCount<T.levelLoadingMaxRetry;if(R){var L;if(this.requestScheduled=-1,this.retryCount++,I.details.indexOf("LoadTimeOut")>-1&&(L=I.context)!==null&&L!==void 0&&L.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+I.details+'"'),this.loadPlaylist();else{var _=Math.min(Math.pow(2,this.retryCount)*T.levelLoadingRetryDelay,T.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return P.loadPlaylist()},_),this.warn("retry playlist loading #"+this.retryCount+" in "+_+' ms after "'+I.details+'"')}}else this.warn('cannot recover from error "'+I.details+'"'),this.clearTimer(),I.fatal=!0;return R},F}()},"./src/controller/base-stream-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{State:()=>h,default:()=>u});var w=l("./src/polyfills/number.ts"),b=l("./src/task-loop.ts"),B=l("./src/controller/fragment-tracker.ts"),O=l("./src/utils/buffer-helper.ts"),$=l("./src/utils/logger.ts"),F=l("./src/events.ts"),k=l("./src/errors.ts"),M=l("./src/types/transmuxer.ts"),I=l("./src/utils/mp4-tools.ts"),P=l("./src/utils/discontinuities.ts"),T=l("./src/controller/fragment-finders.ts"),R=l("./src/controller/level-helper.ts"),L=l("./src/loader/fragment-loader.ts"),_=l("./src/crypt/decrypter.ts"),y=l("./src/utils/time-ranges.ts"),m=l("./src/types/loader.ts");function p(g,s){for(var E=0;E<s.length;E++){var A=s[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,x(A.key),A)}}function C(g,s,E){return s&&p(g.prototype,s),E&&p(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function x(g){var s=o(g,"string");return typeof s=="symbol"?s:String(s)}function o(g,s){if(typeof g!="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var A=E.call(g,s||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(g)}function c(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function S(g,s){g.prototype=Object.create(s.prototype),g.prototype.constructor=g,f(g,s)}function f(g,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,v){return A.__proto__=v,A},f(g,s)}var h={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},u=function(g){S(s,g);function s(A,v,N,U){var K;return K=g.call(this)||this,K.hls=void 0,K.fragPrevious=null,K.fragCurrent=null,K.fragmentTracker=void 0,K.transmuxer=null,K._state=h.STOPPED,K.media=null,K.mediaBuffer=null,K.config=void 0,K.bitrateTest=!1,K.lastCurrentTime=0,K.nextLoadPosition=0,K.startPosition=0,K.loadedmetadata=!1,K.fragLoadError=0,K.retryDate=0,K.levels=null,K.fragmentLoader=void 0,K.keyLoader=void 0,K.levelLastLoaded=null,K.startFragRequested=!1,K.decrypter=void 0,K.initPTS=[],K.onvseeking=null,K.onvended=null,K.logPrefix="",K.log=void 0,K.warn=void 0,K.logPrefix=U,K.log=$.logger.log.bind($.logger,U+":"),K.warn=$.logger.warn.bind($.logger,U+":"),K.hls=A,K.fragmentLoader=new L.default(A.config),K.keyLoader=N,K.fragmentTracker=v,K.config=A.config,K.decrypter=new _.default(A.config),A.on(F.Events.LEVEL_SWITCHING,K.onLevelSwitching,c(K)),K}var E=s.prototype;return E.doTick=function(){this.onTickEnd()},E.onTickEnd=function(){},E.startLoad=function(v){},E.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var v=this.fragCurrent;v&&(v.abortRequests(),this.fragmentTracker.removeFragment(v)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=h.STOPPED},E._streamEnded=function(v,N){if(N.live||v.nextStart||!v.end||!this.media)return!1;var U=N.partList;if(U!=null&&U.length){var K=U[U.length-1],W=O.BufferHelper.isBuffered(this.media,K.start+K.duration/2);return W}var H=N.fragments[N.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(H)},E.getLevelDetails=function(){if(this.levels&&this.levelLastLoaded!==null){var v;return(v=this.levels[this.levelLastLoaded])===null||v===void 0?void 0:v.details}},E.onMediaAttached=function(v,N){var U=this.media=this.mediaBuffer=N.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),U.addEventListener("seeking",this.onvseeking),U.addEventListener("ended",this.onvended);var K=this.config;this.levels&&K.autoStartLoad&&this.state===h.STOPPED&&this.startLoad(K.startPosition)},E.onMediaDetaching=function(){var v=this.media;v!=null&&v.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),v&&this.onvseeking&&this.onvended&&(v.removeEventListener("seeking",this.onvseeking),v.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},E.onMediaSeeking=function(){var v=this.config,N=this.fragCurrent,U=this.media,K=this.mediaBuffer,W=this.state,H=U?U.currentTime:0,j=O.BufferHelper.bufferInfo(K||U,H,v.maxBufferHole);if(this.log("media seeking to "+((0,w.isFiniteNumber)(H)?H.toFixed(3):H)+", state: "+W),this.state===h.ENDED)this.resetLoadingState();else if(N){var G=v.maxFragLookUpTolerance,z=N.start-G,Y=N.start+N.duration+G;if(!j.len||Y<j.start||z>j.end){var X=H>Y;(H<z||X)&&(X&&N.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),N.abortRequests()),this.resetLoadingState())}}U&&(this.lastCurrentTime=H),!this.loadedmetadata&&!j.len&&(this.nextLoadPosition=this.startPosition=H),this.tickImmediate()},E.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},E.onLevelSwitching=function(v,N){this.fragLoadError=0},E.onHandlerDestroying=function(){this.stopLoad(),g.prototype.onHandlerDestroying.call(this)},E.onHandlerDestroyed=function(){this.state=h.STOPPED,this.hls.off(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,g.prototype.onHandlerDestroyed.call(this)},E.loadFragment=function(v,N,U){this._loadFragForPlayback(v,N,U)},E._loadFragForPlayback=function(v,N,U){var K=this,W=function(j){if(K.fragContextChanged(v)){K.warn("Fragment "+v.sn+(j.part?" p: "+j.part.index:"")+" of level "+v.level+" was dropped during download."),K.fragmentTracker.removeFragment(v);return}v.stats.chunkCount++,K._handleFragmentLoadProgress(j)};this._doFragLoad(v,N,U,W).then(function(H){if(!!H){K.fragLoadError=0;var j=K.state;if(K.fragContextChanged(v)){(j===h.FRAG_LOADING||!K.fragCurrent&&j===h.PARSING)&&(K.fragmentTracker.removeFragment(v),K.state=h.IDLE);return}"payload"in H&&(K.log("Loaded fragment "+v.sn+" of level "+v.level),K.hls.trigger(F.Events.FRAG_LOADED,H)),K._handleFragmentLoadComplete(H)}}).catch(function(H){K.state===h.STOPPED||K.state===h.ERROR||(K.warn(H),K.resetFragmentLoading(v))})},E.flushMainBuffer=function(v,N,U){if(U===void 0&&(U=null),!!(v-N)){var K={startOffset:v,endOffset:N,type:U};this.fragLoadError=0,this.hls.trigger(F.Events.BUFFER_FLUSHING,K)}},E._loadInitSegment=function(v,N){var U=this;this._doFragLoad(v,N).then(function(K){if(!K||U.fragContextChanged(v)||!U.levels)throw new Error("init load aborted");return K}).then(function(K){var W=U.hls,H=K.payload,j=v.decryptdata;if(H&&H.byteLength>0&&j&&j.key&&j.iv&&j.method==="AES-128"){var G=self.performance.now();return U.decrypter.decrypt(new Uint8Array(H),j.key.buffer,j.iv.buffer).then(function(z){var Y=self.performance.now();return W.trigger(F.Events.FRAG_DECRYPTED,{frag:v,payload:z,stats:{tstart:G,tdecrypt:Y}}),K.payload=z,K})}return K}).then(function(K){var W=U.fragCurrent,H=U.hls,j=U.levels;if(!j)throw new Error("init load aborted, missing levels");var G=j[v.level].details;console.assert(G,"Level details are defined when init segment is loaded");var z=v.stats;U.state=h.IDLE,U.fragLoadError=0,v.data=new Uint8Array(K.payload),z.parsing.start=z.buffering.start=self.performance.now(),z.parsing.end=z.buffering.end=self.performance.now(),K.frag===W&&H.trigger(F.Events.FRAG_BUFFERED,{stats:z,frag:W,part:null,id:v.type}),U.tick()}).catch(function(K){U.state===h.STOPPED||U.state===h.ERROR||(U.warn(K),U.resetFragmentLoading(v))})},E.fragContextChanged=function(v){var N=this.fragCurrent;return!v||!N||v.level!==N.level||v.sn!==N.sn||v.urlId!==N.urlId},E.fragBufferedComplete=function(v,N){var U,K,W=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+v.type+" sn: "+v.sn+(N?" part: "+N.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+v.level+" (frag:["+(v.startPTS||NaN).toFixed(3)+"-"+(v.endPTS||NaN).toFixed(3)+"] > buffer:"+(W?y.default.toString(O.BufferHelper.getBuffered(W)):"(detached)")+")"),this.state=h.IDLE,W&&(!this.loadedmetadata&&v.type==m.PlaylistLevelType.MAIN&&W.buffered.length&&((U=this.fragCurrent)===null||U===void 0?void 0:U.sn)===((K=this.fragPrevious)===null||K===void 0?void 0:K.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},E.seekToStartPos=function(){},E._handleFragmentLoadComplete=function(v){var N=this.transmuxer;if(!!N){var U=v.frag,K=v.part,W=v.partsLoaded,H=!W||W.length===0||W.some(function(G){return!G}),j=new M.ChunkMetadata(U.level,U.sn,U.stats.chunkCount+1,0,K?K.index:-1,!H);N.flush(j)}},E._handleFragmentLoadProgress=function(v){},E._doFragLoad=function(v,N,U,K){var W,H=this;if(U===void 0&&(U=null),!this.levels)throw new Error("frag load aborted, missing levels");var j=null;if(v.encrypted&&!((W=v.decryptdata)!==null&&W!==void 0&&W.key)?(this.log("Loading key for "+v.sn+" of ["+N.startSN+"-"+N.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+v.level),this.state=h.KEY_LOADING,this.fragCurrent=v,j=this.keyLoader.load(v).then(function(Q){if(!H.fragContextChanged(Q.frag))return H.hls.trigger(F.Events.KEY_LOADED,Q),H.state===h.KEY_LOADING&&(H.state=h.IDLE),Q}),this.hls.trigger(F.Events.KEY_LOADING,{frag:v}),this.throwIfFragContextChanged("KEY_LOADING")):!v.encrypted&&N.encryptedFragments.length&&this.keyLoader.loadClear(v,N.encryptedFragments),U=Math.max(v.start,U||0),this.config.lowLatencyMode&&N){var G=N.partList;if(G&&K){U>v.end&&N.fragmentHint&&(v=N.fragmentHint);var z=this.getNextPart(G,v,U);if(z>-1){var Y=G[z];return this.log("Loading part sn: "+v.sn+" p: "+Y.index+" cc: "+v.cc+" of playlist ["+N.startSN+"-"+N.endSN+"] parts [0-"+z+"-"+(G.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+v.level+", target: "+parseFloat(U.toFixed(3))),this.nextLoadPosition=Y.start+Y.duration,this.state=h.FRAG_LOADING,this.hls.trigger(F.Events.FRAG_LOADING,{frag:v,part:G[z],targetBufferTime:U}),this.throwIfFragContextChanged("FRAG_LOADING parts"),j?j.then(function(Q){return!Q||H.fragContextChanged(Q.frag)?null:H.doFragPartsLoad(v,G,z,K)}).catch(function(Q){return H.handleFragLoadError(Q)}):this.doFragPartsLoad(v,G,z,K).catch(function(Q){return H.handleFragLoadError(Q)})}else if(!v.url||this.loadedEndOfParts(G,U))return Promise.resolve(null)}}this.log("Loading fragment "+v.sn+" cc: "+v.cc+" "+(N?"of ["+N.startSN+"-"+N.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+v.level+", target: "+parseFloat(U.toFixed(3))),(0,w.isFiniteNumber)(v.sn)&&!this.bitrateTest&&(this.nextLoadPosition=v.start+v.duration),this.state=h.FRAG_LOADING,this.hls.trigger(F.Events.FRAG_LOADING,{frag:v,targetBufferTime:U}),this.throwIfFragContextChanged("FRAG_LOADING");var X=this.config.progressive;return X&&j?j.then(function(Q){return!Q||H.fragContextChanged(Q==null?void 0:Q.frag)?null:H.fragmentLoader.load(v,K)}).catch(function(Q){return H.handleFragLoadError(Q)}):Promise.all([this.fragmentLoader.load(v,X?K:void 0),j]).then(function(Q){var q=Q[0];return!X&&q&&K&&K(q),q}).catch(function(Q){return H.handleFragLoadError(Q)})},E.throwIfFragContextChanged=function(v){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+v)},E.doFragPartsLoad=function(v,N,U,K){var W=this;return new Promise(function(H,j){var G=[],z=function Y(X){var Q=N[X];W.fragmentLoader.loadPart(v,Q,K).then(function(q){G[Q.index]=q;var J=q.part;W.hls.trigger(F.Events.FRAG_LOADED,q);var ee=N[X+1];if(ee&&ee.fragment===v)Y(X+1);else return H({frag:v,part:J,partsLoaded:G})}).catch(j)};z(U)})},E.handleFragLoadError=function(v){if("data"in v){var N=v.data;v.data&&N.details===k.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(N.frag,N.part):this.hls.trigger(F.Events.ERROR,N)}else this.hls.trigger(F.Events.ERROR,{type:k.ErrorTypes.OTHER_ERROR,details:k.ErrorDetails.INTERNAL_EXCEPTION,err:v,fatal:!0});return null},E._handleTransmuxerFlush=function(v){var N=this.getCurrentContext(v);if(!N||this.state!==h.PARSING){!this.fragCurrent&&this.state!==h.STOPPED&&this.state!==h.ERROR&&(this.state=h.IDLE);return}var U=N.frag,K=N.part,W=N.level,H=self.performance.now();U.stats.parsing.end=H,K&&(K.stats.parsing.end=H),this.updateLevelTiming(U,K,W,v.partial)},E.getCurrentContext=function(v){var N=this.levels,U=v.level,K=v.sn,W=v.part;if(!N||!N[U])return this.warn("Levels object was unset while buffering fragment "+K+" of level "+U+". The current chunk will not be buffered."),null;var H=N[U],j=W>-1?(0,R.getPartWith)(H,K,W):null,G=j?j.fragment:(0,R.getFragmentWithSN)(H,K,this.fragCurrent);return G?{frag:G,part:j,level:H}:null},E.bufferFragmentData=function(v,N,U,K){if(!(!v||this.state!==h.PARSING)){var W=v.data1,H=v.data2,j=W;if(W&&H&&(j=(0,I.appendUint8Array)(W,H)),!(!j||!j.length)){var G={type:v.type,frag:N,part:U,chunkMeta:K,parent:N.type,data:j};this.hls.trigger(F.Events.BUFFER_APPENDING,G),v.dropped&&v.independent&&!U&&this.flushBufferGap(N)}}},E.flushBufferGap=function(v){var N=this.media;if(!!N){if(!O.BufferHelper.isBuffered(N,N.currentTime)){this.flushMainBuffer(0,v.start);return}var U=N.currentTime,K=O.BufferHelper.bufferInfo(N,U,0),W=v.duration,H=Math.min(this.config.maxFragLookUpTolerance*2,W*.25),j=Math.max(Math.min(v.start-H,K.end-H),U+H);v.start-j>H&&this.flushMainBuffer(j,v.start)}},E.getFwdBufferInfo=function(v,N){var U=this.config,K=this.getLoadPosition();if(!(0,w.isFiniteNumber)(K))return null;var W=O.BufferHelper.bufferInfo(v,K,U.maxBufferHole);if(W.len===0&&W.nextStart!==void 0){var H=this.fragmentTracker.getBufferedFrag(K,N);if(H&&W.nextStart<H.end)return O.BufferHelper.bufferInfo(v,K,Math.max(W.nextStart,U.maxBufferHole))}return W},E.getMaxBufferLength=function(v){var N=this.config,U;return v?U=Math.max(8*N.maxBufferSize/v,N.maxBufferLength):U=N.maxBufferLength,Math.min(U,N.maxMaxBufferLength)},E.reduceMaxBufferLength=function(v){var N=this.config,U=v||N.maxBufferLength;return N.maxMaxBufferLength>=U?(N.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+N.maxMaxBufferLength+"s"),!0):!1},E.getNextFragment=function(v,N){var U=N.fragments,K=U.length;if(!K)return null;var W=this.config,H=U[0].start,j;if(N.live){var G=W.initialLiveManifestSize;if(K<G)return this.warn("Not enough fragments to start playback (have: "+K+", need: "+G+")"),null;!N.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(j=this.getInitialLiveFragment(N,U),this.startPosition=j?this.hls.liveSyncPosition||j.start:v)}else v<=H&&(j=U[0]);if(!j){var z=W.lowLatencyMode?N.partEnd:N.fragmentEnd;j=this.getFragmentAtPosition(v,z,N)}return this.mapToInitFragWhenRequired(j)},E.mapToInitFragWhenRequired=function(v){return v!=null&&v.initSegment&&!(v!=null&&v.initSegment.data)&&!this.bitrateTest?v.initSegment:v},E.getNextPart=function(v,N,U){for(var K=-1,W=!1,H=!0,j=0,G=v.length;j<G;j++){var z=v[j];if(H=H&&!z.independent,K>-1&&U<z.start)break;var Y=z.loaded;Y?K=-1:(W||z.independent||H)&&z.fragment===N&&(K=j),W=Y}return K},E.loadedEndOfParts=function(v,N){var U=v[v.length-1];return U&&N>U.start&&U.loaded},E.getInitialLiveFragment=function(v,N){var U=this.fragPrevious,K=null;if(U){if(v.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+U.programDateTime),K=(0,T.findFragmentByPDT)(N,U.endProgramDateTime,this.config.maxFragLookUpTolerance)),!K){var W=U.sn+1;if(W>=v.startSN&&W<=v.endSN){var H=N[W-v.startSN];U.cc===H.cc&&(K=H,this.log("Live playlist, switching playlist, load frag with next SN: "+K.sn))}K||(K=(0,T.findFragWithCC)(N,U.cc),K&&this.log("Live playlist, switching playlist, load frag with same CC: "+K.sn))}}else{var j=this.hls.liveSyncPosition;j!==null&&(K=this.getFragmentAtPosition(j,this.bitrateTest?v.fragmentEnd:v.edge,v))}return K},E.getFragmentAtPosition=function(v,N,U){var K=this.config,W=this.fragPrevious,H=U.fragments,j=U.endSN,G=U.fragmentHint,z=K.maxFragLookUpTolerance,Y=!!(K.lowLatencyMode&&U.partList&&G);Y&&G&&!this.bitrateTest&&(H=H.concat(G),j=G.sn);var X;if(v<N){var Q=v>N-z?0:z;X=(0,T.findFragmentByPTS)(W,H,v,Q)}else X=H[H.length-1];if(X){var q=X.sn-U.startSN;if(this.fragmentTracker.getState(X)===B.FragmentState.OK&&(W=X),W&&X.sn===W.sn&&!Y){var J=W&&X.level===W.level;if(J){var ee=H[q+1];X.sn<j&&this.fragmentTracker.getState(ee)!==B.FragmentState.OK?(this.log("SN "+X.sn+" just loaded, load next one: "+ee.sn),X=ee):X=null}}}return X},E.synchronizeToLiveEdge=function(v){var N=this.config,U=this.media;if(!!U){var K=this.hls.liveSyncPosition,W=U.currentTime,H=v.fragments[0].start,j=v.edge,G=W>=H-N.maxFragLookUpTolerance&&W<=j;if(K!==null&&U.duration>K&&(W<K||!G)){var z=N.liveMaxLatencyDuration!==void 0?N.liveMaxLatencyDuration:N.liveMaxLatencyDurationCount*v.targetduration;(!G&&U.readyState<4||W<j-z)&&(this.loadedmetadata||(this.nextLoadPosition=K),U.readyState&&(this.warn("Playback: "+W.toFixed(3)+" is located too far from the end of live sliding playlist: "+j+", reset currentTime to : "+K.toFixed(3)),U.currentTime=K))}}},E.alignPlaylists=function(v,N){var U=this.levels,K=this.levelLastLoaded,W=this.fragPrevious,H=K!==null?U[K]:null,j=v.fragments.length;if(!j)return this.warn("No fragments in live playlist"),0;var G=v.fragments[0].start,z=!N,Y=v.alignedSliding&&(0,w.isFiniteNumber)(G);if(z||!Y&&!G){(0,P.alignStream)(W,H,v);var X=v.fragments[0].start;return this.log("Live playlist sliding: "+X.toFixed(2)+" start-sn: "+(N?N.startSN:"na")+"->"+v.startSN+" prev-sn: "+(W?W.sn:"na")+" fragments: "+j),X}return G},E.waitForCdnTuneIn=function(v){var N=3;return v.live&&v.canBlockReload&&v.partTarget&&v.tuneInGoal>Math.max(v.partHoldBack,v.partTarget*N)},E.setStartPosition=function(v,N){var U=this.startPosition;if(U<N&&(U=-1),U===-1||this.lastCurrentTime===-1){var K=v.startTimeOffset;(0,w.isFiniteNumber)(K)?(U=N+K,K<0&&(U+=v.totalduration),U=Math.min(Math.max(N,U),N+v.totalduration),this.log("Start time offset "+K+" found in playlist, adjust startPosition to "+U),this.startPosition=U):v.live?U=this.hls.liveSyncPosition||N:this.startPosition=U=0,this.lastCurrentTime=U}this.nextLoadPosition=U},E.getLoadPosition=function(){var v=this.media,N=0;return this.loadedmetadata&&v?N=v.currentTime:this.nextLoadPosition&&(N=this.nextLoadPosition),N},E.handleFragLoadAborted=function(v,N){this.transmuxer&&v.sn!=="initSegment"&&v.stats.aborted&&(this.warn("Fragment "+v.sn+(N?" part"+N.index:"")+" of level "+v.level+" was aborted"),this.resetFragmentLoading(v))},E.resetFragmentLoading=function(v){(!this.fragCurrent||!this.fragContextChanged(v)&&this.state!==h.FRAG_LOADING_WAITING_RETRY)&&(this.state=h.IDLE)},E.onFragmentOrKeyLoadError=function(v,N){if(N.fatal){this.stopLoad(),this.state=h.ERROR;return}var U=this.config;if(N.chunkMeta){var K=this.getCurrentContext(N.chunkMeta);K&&(N.frag=K.frag,N.levelRetry=!0,this.fragLoadError=U.fragLoadingMaxRetry)}var W=N.frag;if(!(!W||W.type!==v)){var H=this.fragCurrent;if(console.assert(H&&W.sn===H.sn&&W.level===H.level&&W.urlId===H.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=U.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var j=Math.min(Math.pow(2,this.fragLoadError)*U.fragLoadingRetryDelay,U.fragLoadingMaxRetryTimeout);this.warn("Fragment "+W.sn+" of "+v+" "+W.level+" failed to load, retrying in "+j+"ms"),this.retryDate=self.performance.now()+j,this.fragLoadError++,this.state=h.FRAG_LOADING_WAITING_RETRY}else N.levelRetry?(v===m.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=h.IDLE):($.logger.error(N.details+" reaches max retry, redispatch as fatal ..."),N.fatal=!0,this.hls.stopLoad(),this.state=h.ERROR)}},E.afterBufferFlushed=function(v,N,U){if(!!v){var K=O.BufferHelper.getBuffered(v);this.fragmentTracker.detectEvictedFragments(N,K,U),this.state===h.ENDED&&this.resetLoadingState()}},E.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=h.IDLE},E.resetStartWhenNotLoaded=function(v){if(!this.loadedmetadata){this.startFragRequested=!1;var N=this.levels?this.levels[v].details:null;N!=null&&N.live?(this.startPosition=-1,this.setStartPosition(N,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},E.updateLevelTiming=function(v,N,U,K){var W=this,H=U.details;console.assert(!!H,"level.details must be defined");var j=Object.keys(v.elementaryStreams).reduce(function(G,z){var Y=v.elementaryStreams[z];if(Y){var X=Y.endPTS-Y.startPTS;if(X<=0)return W.warn("Could not parse fragment "+v.sn+" "+z+" duration reliably ("+X+")"),G||!1;var Q=K?0:(0,R.updateFragPTSDTS)(H,v,Y.startPTS,Y.endPTS,Y.startDTS,Y.endDTS);return W.hls.trigger(F.Events.LEVEL_PTS_UPDATED,{details:H,level:U,drift:Q,type:z,frag:v,start:Y.startPTS,end:Y.endPTS}),!0}return G},!1);j||(this.warn("Found no media in fragment "+v.sn+" of level "+U.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=h.PARSED,this.hls.trigger(F.Events.FRAG_PARSED,{frag:v,part:N})},E.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},C(s,[{key:"state",get:function(){return this._state},set:function(v){var N=this._state;N!==v&&(this._state=v,this.log(N+"->"+v))}}]),s}(b.default)},"./src/controller/buffer-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>T});var w=l("./src/polyfills/number.ts"),b=l("./src/events.ts"),B=l("./src/utils/logger.ts"),O=l("./src/errors.ts"),$=l("./src/utils/buffer-helper.ts"),F=l("./src/utils/mediasource-helper.ts"),k=l("./src/loader/fragment.ts"),M=l("./src/controller/buffer-operation-queue.ts"),I=(0,F.getMediaSource)(),P=/([ha]vc.)(?:\.[^.,]+)+/,T=function(){function R(_){var y=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var m=y.media,p=y.mediaSource;B.logger.log("[buffer-controller]: Media source opened"),m&&(m.removeEventListener("emptied",y._onMediaEmptied),y.updateMediaElementDuration(),y.hls.trigger(b.Events.MEDIA_ATTACHED,{media:m})),p&&p.removeEventListener("sourceopen",y._onMediaSourceOpen),y.checkPendingTracks()},this._onMediaSourceClose=function(){B.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){B.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var m=y.media,p=y._objectUrl;m&&m.src!==p&&B.logger.error("Media element src was set while attaching MediaSource ("+p+" > "+m.src+")")},this.hls=_,this._initSourceBuffer(),this.registerListeners()}var L=R.prototype;return L.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},L.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},L.registerListeners=function(){var y=this.hls;y.on(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),y.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),y.on(b.Events.BUFFER_RESET,this.onBufferReset,this),y.on(b.Events.BUFFER_APPENDING,this.onBufferAppending,this),y.on(b.Events.BUFFER_CODECS,this.onBufferCodecs,this),y.on(b.Events.BUFFER_EOS,this.onBufferEos,this),y.on(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),y.on(b.Events.LEVEL_UPDATED,this.onLevelUpdated,this),y.on(b.Events.FRAG_PARSED,this.onFragParsed,this),y.on(b.Events.FRAG_CHANGED,this.onFragChanged,this)},L.unregisterListeners=function(){var y=this.hls;y.off(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),y.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),y.off(b.Events.BUFFER_RESET,this.onBufferReset,this),y.off(b.Events.BUFFER_APPENDING,this.onBufferAppending,this),y.off(b.Events.BUFFER_CODECS,this.onBufferCodecs,this),y.off(b.Events.BUFFER_EOS,this.onBufferEos,this),y.off(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),y.off(b.Events.LEVEL_UPDATED,this.onLevelUpdated,this),y.off(b.Events.FRAG_PARSED,this.onFragParsed,this),y.off(b.Events.FRAG_CHANGED,this.onFragChanged,this)},L._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new M.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},L.onManifestParsed=function(y,m){var p=2;(m.audio&&!m.video||!m.altAudio)&&(p=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=p,this.details=null,B.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},L.onMediaAttaching=function(y,m){var p=this.media=m.media;if(p&&I){var C=this.mediaSource=new I;C.addEventListener("sourceopen",this._onMediaSourceOpen),C.addEventListener("sourceended",this._onMediaSourceEnded),C.addEventListener("sourceclose",this._onMediaSourceClose),p.src=self.URL.createObjectURL(C),this._objectUrl=p.src,p.addEventListener("emptied",this._onMediaEmptied)}},L.onMediaDetaching=function(){var y=this.media,m=this.mediaSource,p=this._objectUrl;if(m){if(B.logger.log("[buffer-controller]: media source detaching"),m.readyState==="open")try{m.endOfStream()}catch(C){B.logger.warn("[buffer-controller]: onMediaDetaching: "+C.message+" while calling endOfStream")}this.onBufferReset(),m.removeEventListener("sourceopen",this._onMediaSourceOpen),m.removeEventListener("sourceended",this._onMediaSourceEnded),m.removeEventListener("sourceclose",this._onMediaSourceClose),y&&(y.removeEventListener("emptied",this._onMediaEmptied),p&&self.URL.revokeObjectURL(p),y.src===p?(y.removeAttribute("src"),y.load()):B.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(b.Events.MEDIA_DETACHED,void 0)},L.onBufferReset=function(){var y=this;this.getSourceBufferTypes().forEach(function(m){var p=y.sourceBuffer[m];try{p&&(y.removeBufferListeners(m),y.mediaSource&&y.mediaSource.removeSourceBuffer(p),y.sourceBuffer[m]=void 0)}catch(C){B.logger.warn("[buffer-controller]: Failed to reset the "+m+" buffer",C)}}),this._initSourceBuffer()},L.onBufferCodecs=function(y,m){var p=this,C=this.getSourceBufferTypes().length;Object.keys(m).forEach(function(x){if(C){var o=p.tracks[x];if(o&&typeof o.buffer.changeType=="function"){var c=m[x],S=c.id,f=c.codec,h=c.levelCodec,u=c.container,g=c.metadata,s=(o.levelCodec||o.codec).replace(P,"$1"),E=(h||f).replace(P,"$1");if(s!==E){var A=u+";codecs="+(h||f);p.appendChangeType(x,A),B.logger.log("[buffer-controller]: switching codec "+s+" to "+E),p.tracks[x]={buffer:o.buffer,codec:f,container:u,levelCodec:h,metadata:g,id:S}}}}else p.pendingTracks[x]=m[x]}),!C&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},L.appendChangeType=function(y,m){var p=this,C=this.operationQueue,x={execute:function(){var c=p.sourceBuffer[y];c&&(B.logger.log("[buffer-controller]: changing "+y+" sourceBuffer type to "+m),c.changeType(m)),C.shiftAndExecuteNext(y)},onStart:function(){},onComplete:function(){},onError:function(c){B.logger.warn("[buffer-controller]: Failed to change "+y+" SourceBuffer type",c)}};C.append(x,y)},L.onBufferAppending=function(y,m){var p=this,C=this.hls,x=this.operationQueue,o=this.tracks,c=m.data,S=m.type,f=m.frag,h=m.part,u=m.chunkMeta,g=u.buffering[S],s=self.performance.now();g.start=s;var E=f.stats.buffering,A=h?h.stats.buffering:null;E.start===0&&(E.start=s),A&&A.start===0&&(A.start=s);var v=o.audio,N=!1;S==="audio"&&(v==null?void 0:v.container)==="audio/mpeg"&&(N=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var U=f.start,K={execute:function(){if(g.executeStart=self.performance.now(),N){var H=p.sourceBuffer[S];if(H){var j=U-H.timestampOffset;Math.abs(j)>=.1&&(B.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+U+" (delta: "+j+") sn: "+f.sn+")"),H.timestampOffset=U)}}p.appendExecutor(c,S)},onStart:function(){},onComplete:function(){var H=self.performance.now();g.executeEnd=g.end=H,E.first===0&&(E.first=H),A&&A.first===0&&(A.first=H);var j=p.sourceBuffer,G={};for(var z in j)G[z]=$.BufferHelper.getBuffered(j[z]);p.appendError=0,p.hls.trigger(b.Events.BUFFER_APPENDED,{type:S,frag:f,part:h,chunkMeta:u,parent:f.type,timeRanges:G})},onError:function(H){B.logger.error("[buffer-controller]: Error encountered while trying to append to the "+S+" SourceBuffer",H);var j={type:O.ErrorTypes.MEDIA_ERROR,parent:f.type,details:O.ErrorDetails.BUFFER_APPEND_ERROR,err:H,fatal:!1};H.code===DOMException.QUOTA_EXCEEDED_ERR?j.details=O.ErrorDetails.BUFFER_FULL_ERROR:(p.appendError++,j.details=O.ErrorDetails.BUFFER_APPEND_ERROR,p.appendError>C.config.appendErrorMaxRetry&&(B.logger.error("[buffer-controller]: Failed "+C.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),j.fatal=!0,C.stopLoad())),C.trigger(b.Events.ERROR,j)}};x.append(K,S)},L.onBufferFlushing=function(y,m){var p=this,C=this.operationQueue,x=function(c){return{execute:p.removeExecutor.bind(p,c,m.startOffset,m.endOffset),onStart:function(){},onComplete:function(){p.hls.trigger(b.Events.BUFFER_FLUSHED,{type:c})},onError:function(f){B.logger.warn("[buffer-controller]: Failed to remove from "+c+" SourceBuffer",f)}}};m.type?C.append(x(m.type),m.type):this.getSourceBufferTypes().forEach(function(o){C.append(x(o),o)})},L.onFragParsed=function(y,m){var p=this,C=m.frag,x=m.part,o=[],c=x?x.elementaryStreams:C.elementaryStreams;c[k.ElementaryStreamTypes.AUDIOVIDEO]?o.push("audiovideo"):(c[k.ElementaryStreamTypes.AUDIO]&&o.push("audio"),c[k.ElementaryStreamTypes.VIDEO]&&o.push("video"));var S=function(){var h=self.performance.now();C.stats.buffering.end=h,x&&(x.stats.buffering.end=h);var u=x?x.stats:C.stats;p.hls.trigger(b.Events.FRAG_BUFFERED,{frag:C,part:x,stats:u,id:C.type})};o.length===0&&B.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+C.type+" level: "+C.level+" sn: "+C.sn),this.blockBuffers(S,o)},L.onFragChanged=function(y,m){this.flushBackBuffer()},L.onBufferEos=function(y,m){var p=this,C=this.getSourceBufferTypes().reduce(function(x,o){var c=p.sourceBuffer[o];return c&&(!m.type||m.type===o)&&(c.ending=!0,c.ended||(c.ended=!0,B.logger.log("[buffer-controller]: "+o+" sourceBuffer now EOS"))),x&&!!(!c||c.ended)},!0);C&&(B.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){p.getSourceBufferTypes().forEach(function(o){var c=p.sourceBuffer[o];c&&(c.ending=!1)});var x=p.mediaSource;if(!x||x.readyState!=="open"){x&&B.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+x.readyState);return}B.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),x.endOfStream()}))},L.onLevelUpdated=function(y,m){var p=m.details;!p.fragments.length||(this.details=p,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},L.flushBackBuffer=function(){var y=this.hls,m=this.details,p=this.media,C=this.sourceBuffer;if(!(!p||m===null)){var x=this.getSourceBufferTypes();if(!!x.length){var o=m.live&&y.config.liveBackBufferLength!==null?y.config.liveBackBufferLength:y.config.backBufferLength;if(!(!(0,w.isFiniteNumber)(o)||o<0)){var c=p.currentTime,S=m.levelTargetDuration,f=Math.max(o,S),h=Math.floor(c/S)*S-f;x.forEach(function(u){var g=C[u];if(g){var s=$.BufferHelper.getBuffered(g);if(s.length>0&&h>s.start(0)){if(y.trigger(b.Events.BACK_BUFFER_REACHED,{bufferEnd:h}),m.live)y.trigger(b.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:h});else if(g.ended&&s.end(s.length-1)-c<S*2){B.logger.info("[buffer-controller]: Cannot flush "+u+" back buffer while SourceBuffer is in ended state");return}y.trigger(b.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:h,type:u})}}})}}}},L.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var y=this.details,m=this.hls,p=this.media,C=this.mediaSource,x=y.fragments[0].start+y.totalduration,o=p.duration,c=(0,w.isFiniteNumber)(C.duration)?C.duration:0;y.live&&m.config.liveDurationInfinity?(B.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),C.duration=1/0,this.updateSeekableRange(y)):(x>c&&x>o||!(0,w.isFiniteNumber)(o))&&(B.logger.log("[buffer-controller]: Updating Media Source duration to "+x.toFixed(3)),C.duration=x)}},L.updateSeekableRange=function(y){var m=this.mediaSource,p=y.fragments,C=p.length;if(C&&y.live&&m!==null&&m!==void 0&&m.setLiveSeekableRange){var x=Math.max(0,p[0].start),o=Math.max(x,x+y.totalduration);m.setLiveSeekableRange(x,o)}},L.checkPendingTracks=function(){var y=this.bufferCodecEventsExpected,m=this.operationQueue,p=this.pendingTracks,C=Object.keys(p).length;if(C&&!y||C===2){this.createSourceBuffers(p),this.pendingTracks={};var x=this.getSourceBufferTypes();if(x.length===0){this.hls.trigger(b.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}x.forEach(function(o){m.executeNext(o)})}},L.createSourceBuffers=function(y){var m=this.sourceBuffer,p=this.mediaSource;if(!p)throw Error("createSourceBuffers called when mediaSource was null");var C=0;for(var x in y)if(!m[x]){var o=y[x];if(!o)throw Error("source buffer exists for track "+x+", however track does not");var c=o.levelCodec||o.codec,S=o.container+";codecs="+c;B.logger.log("[buffer-controller]: creating sourceBuffer("+S+")");try{var f=m[x]=p.addSourceBuffer(S),h=x;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[x]={buffer:f,codec:c,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id},C++}catch(u){B.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(b.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:S})}}C&&this.hls.trigger(b.Events.BUFFER_CREATED,{tracks:this.tracks})},L._onSBUpdateStart=function(y){var m=this.operationQueue,p=m.current(y);p.onStart()},L._onSBUpdateEnd=function(y){var m=this.operationQueue,p=m.current(y);p.onComplete(),m.shiftAndExecuteNext(y)},L._onSBUpdateError=function(y,m){B.logger.error("[buffer-controller]: "+y+" SourceBuffer error",m),this.hls.trigger(b.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var p=this.operationQueue.current(y);p&&p.onError(m)},L.removeExecutor=function(y,m,p){var C=this.media,x=this.mediaSource,o=this.operationQueue,c=this.sourceBuffer,S=c[y];if(!C||!x||!S){B.logger.warn("[buffer-controller]: Attempting to remove from the "+y+" SourceBuffer, but it does not exist"),o.shiftAndExecuteNext(y);return}var f=(0,w.isFiniteNumber)(C.duration)?C.duration:1/0,h=(0,w.isFiniteNumber)(x.duration)?x.duration:1/0,u=Math.max(0,m),g=Math.min(p,f,h);g>u&&!S.ending?(S.ended=!1,B.logger.log("[buffer-controller]: Removing ["+u+","+g+"] from the "+y+" SourceBuffer"),console.assert(!S.updating,y+" sourceBuffer must not be updating"),S.remove(u,g)):o.shiftAndExecuteNext(y)},L.appendExecutor=function(y,m){var p=this.operationQueue,C=this.sourceBuffer,x=C[m];if(!x){B.logger.warn("[buffer-controller]: Attempting to append to the "+m+" SourceBuffer, but it does not exist"),p.shiftAndExecuteNext(m);return}x.ended=!1,console.assert(!x.updating,m+" sourceBuffer must not be updating"),x.appendBuffer(y)},L.blockBuffers=function(y,m){var p=this;if(m===void 0&&(m=this.getSourceBufferTypes()),!m.length){B.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(y);return}var C=this.operationQueue,x=m.map(function(o){return C.appendBlocker(o)});Promise.all(x).then(function(){y(),m.forEach(function(o){var c=p.sourceBuffer[o];(!c||!c.updating)&&C.shiftAndExecuteNext(o)})})},L.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},L.addBufferListener=function(y,m,p){var C=this.sourceBuffer[y];if(!!C){var x=p.bind(this,y);this.listeners[y].push({event:m,listener:x}),C.addEventListener(m,x)}},L.removeBufferListeners=function(y){var m=this.sourceBuffer[y];!m||this.listeners[y].forEach(function(p){m.removeEventListener(p.event,p.listener)})},R}()},"./src/controller/buffer-operation-queue.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w=l("./src/utils/logger.ts"),b=function(){function B($){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=$}var O=B.prototype;return O.append=function(F,k){var M=this.queues[k];M.push(F),M.length===1&&this.buffers[k]&&this.executeNext(k)},O.insertAbort=function(F,k){var M=this.queues[k];M.unshift(F),this.executeNext(k)},O.appendBlocker=function(F){var k,M=new Promise(function(P){k=P}),I={execute:k,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(I,F),M},O.executeNext=function(F){var k=this.buffers,M=this.queues,I=k[F],P=M[F];if(P.length){var T=P[0];try{T.execute()}catch(R){w.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),T.onError(R),(!I||!I.updating)&&(P.shift(),this.executeNext(F))}}},O.shiftAndExecuteNext=function(F){this.queues[F].shift(),this.executeNext(F)},O.current=function(F){return this.queues[F][0]},B}()},"./src/controller/cap-level-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>k});var w=l("./src/events.ts");function b(M,I){for(var P=0;P<I.length;P++){var T=I[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(M,O(T.key),T)}}function B(M,I,P){return I&&b(M.prototype,I),P&&b(M,P),Object.defineProperty(M,"prototype",{writable:!1}),M}function O(M){var I=$(M,"string");return typeof I=="symbol"?I:String(I)}function $(M,I){if(typeof M!="object"||M===null)return M;var P=M[Symbol.toPrimitive];if(P!==void 0){var T=P.call(M,I||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(M)}var F=function(){function M(P){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=P,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var I=M.prototype;return I.setStreamController=function(T){this.streamController=T},I.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},I.registerListeners=function(){var T=this.hls;T.on(w.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),T.on(w.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),T.on(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),T.on(w.Events.BUFFER_CODECS,this.onBufferCodecs,this),T.on(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},I.unregisterListener=function(){var T=this.hls;T.off(w.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),T.off(w.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),T.off(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),T.off(w.Events.BUFFER_CODECS,this.onBufferCodecs,this),T.off(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},I.onFpsDropLevelCapping=function(T,R){M.isLevelAllowed(R.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(R.droppedLevel)},I.onMediaAttaching=function(T,R){this.media=R.media instanceof HTMLVideoElement?R.media:null,this.clientRect=null},I.onManifestParsed=function(T,R){var L=this.hls;this.restrictedLevels=[],this.firstLevel=R.firstLevel,L.config.capLevelToPlayerSize&&R.video&&this.startCapping()},I.onBufferCodecs=function(T,R){var L=this.hls;L.config.capLevelToPlayerSize&&R.video&&this.startCapping()},I.onMediaDetaching=function(){this.stopCapping()},I.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var T=this.hls.levels;if(T.length){var R=this.hls;R.autoLevelCapping=this.getMaxLevel(T.length-1),R.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=R.autoLevelCapping}}},I.getMaxLevel=function(T){var R=this,L=this.hls.levels;if(!L.length)return-1;var _=L.filter(function(y,m){return M.isLevelAllowed(m,R.restrictedLevels)&&m<=T});return this.clientRect=null,M.getMaxLevelByMediaSize(_,this.mediaWidth,this.mediaHeight)},I.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},I.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},I.getDimensions=function(){if(this.clientRect)return this.clientRect;var T=this.media,R={width:0,height:0};if(T){var L=T.getBoundingClientRect();R.width=L.width,R.height=L.height,!R.width&&!R.height&&(R.width=L.right-L.left||T.width||0,R.height=L.bottom-L.top||T.height||0)}return this.clientRect=R,R},M.isLevelAllowed=function(T,R){return R===void 0&&(R=[]),R.indexOf(T)===-1},M.getMaxLevelByMediaSize=function(T,R,L){if(!T||!T.length)return-1;for(var _=function(x,o){return o?x.width!==o.width||x.height!==o.height:!0},y=T.length-1,m=0;m<T.length;m+=1){var p=T[m];if((p.width>=R||p.height>=L)&&_(p,T[m+1])){y=m;break}}return y},B(M,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var T=1;if(!this.hls.config.ignoreDevicePixelRatio)try{T=self.devicePixelRatio}catch{}return T}}]),M}();const k=F},"./src/controller/cmcd-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>L});var w=l("./src/events.ts"),b=l("./src/types/cmcd.ts"),B=l("./src/utils/buffer-helper.ts"),O=l("./src/utils/logger.ts");function $(_,y){for(var m=0;m<y.length;m++){var p=y[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,k(p.key),p)}}function F(_,y,m){return y&&$(_.prototype,y),m&&$(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function k(_){var y=M(_,"string");return typeof y=="symbol"?y:String(y)}function M(_,y){if(typeof _!="object"||_===null)return _;var m=_[Symbol.toPrimitive];if(m!==void 0){var p=m.call(_,y||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(_)}function I(_,y){var m=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(m)return(m=m.call(_)).next.bind(m);if(Array.isArray(_)||(m=P(_))||y&&_&&typeof _.length=="number"){m&&(_=m);var p=0;return function(){return p>=_.length?{done:!0}:{done:!1,value:_[p++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(_,y){if(!!_){if(typeof _=="string")return T(_,y);var m=Object.prototype.toString.call(_).slice(8,-1);if(m==="Object"&&_.constructor&&(m=_.constructor.name),m==="Map"||m==="Set")return Array.from(_);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return T(_,y)}}function T(_,y){(y==null||y>_.length)&&(y=_.length);for(var m=0,p=new Array(y);m<y;m++)p[m]=_[m];return p}function R(){return R=Object.assign?Object.assign.bind():function(_){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(_[p]=m[p])}return _},R.apply(this,arguments)}var L=function(){function _(m){var p=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){p.initialized&&(p.starved=!0),p.buffering=!0},this.onPlaying=function(){p.initialized||(p.initialized=!0),p.buffering=!1},this.applyPlaylistData=function(o){try{p.apply(o,{ot:b.CMCDObjectType.MANIFEST,su:!p.initialized})}catch(c){O.logger.warn("Could not generate manifest CMCD data.",c)}},this.applyFragmentData=function(o){try{var c=o.frag,S=p.hls.levels[c.level],f=p.getObjectType(c),h={d:c.duration*1e3,ot:f};(f===b.CMCDObjectType.VIDEO||f===b.CMCDObjectType.AUDIO||f==b.CMCDObjectType.MUXED)&&(h.br=S.bitrate/1e3,h.tb=p.getTopBandwidth(f)/1e3,h.bl=p.getBufferLength(f)),p.apply(o,h)}catch(u){O.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=m;var C=this.config=m.config,x=C.cmcd;x!=null&&(C.pLoader=this.createPlaylistLoader(),C.fLoader=this.createFragmentLoader(),this.sid=x.sessionId||_.uuid(),this.cid=x.contentId,this.useHeaders=x.useHeaders===!0,this.registerListeners())}var y=_.prototype;return y.registerListeners=function(){var p=this.hls;p.on(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.on(w.Events.MEDIA_DETACHED,this.onMediaDetached,this),p.on(w.Events.BUFFER_CREATED,this.onBufferCreated,this)},y.unregisterListeners=function(){var p=this.hls;p.off(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.off(w.Events.MEDIA_DETACHED,this.onMediaDetached,this),p.off(w.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},y.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},y.onMediaAttached=function(p,C){this.media=C.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},y.onMediaDetached=function(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},y.onBufferCreated=function(p,C){var x,o;this.audioBuffer=(x=C.tracks.audio)===null||x===void 0?void 0:x.buffer,this.videoBuffer=(o=C.tracks.video)===null||o===void 0?void 0:o.buffer},y.createData=function(){var p;return{v:b.CMCDVersion,sf:b.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(p=this.media)===null||p===void 0?void 0:p.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},y.apply=function(p,C){C===void 0&&(C={}),R(C,this.createData());var x=C.ot===b.CMCDObjectType.INIT||C.ot===b.CMCDObjectType.VIDEO||C.ot===b.CMCDObjectType.MUXED;if(this.starved&&x&&(C.bs=!0,C.su=!0,this.starved=!1),C.su==null&&(C.su=this.buffering),this.useHeaders){var o=_.toHeaders(C);if(!Object.keys(o).length)return;p.headers||(p.headers={}),R(p.headers,o)}else{var c=_.toQuery(C);if(!c)return;p.url=_.appendQueryToUri(p.url,c)}},y.getObjectType=function(p){var C=p.type;if(C==="subtitle")return b.CMCDObjectType.TIMED_TEXT;if(p.sn==="initSegment")return b.CMCDObjectType.INIT;if(C==="audio")return b.CMCDObjectType.AUDIO;if(C==="main")return this.hls.audioTracks.length?b.CMCDObjectType.VIDEO:b.CMCDObjectType.MUXED},y.getTopBandwidth=function(p){var C=0,x,o=this.hls;if(p===b.CMCDObjectType.AUDIO)x=o.audioTracks;else{var c=o.maxAutoLevel,S=c>-1?c+1:o.levels.length;x=o.levels.slice(0,S)}for(var f=I(x),h;!(h=f()).done;){var u=h.value;u.bitrate>C&&(C=u.bitrate)}return C>0?C:NaN},y.getBufferLength=function(p){var C=this.hls.media,x=p===b.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!x||!C)return NaN;var o=B.BufferHelper.bufferInfo(x,C.currentTime,this.config.maxBufferHole);return o.len*1e3},y.createPlaylistLoader=function(){var p=this.config.pLoader,C=this.applyPlaylistData,x=p||this.config.loader;return function(){function o(S){this.loader=void 0,this.loader=new x(S)}var c=o.prototype;return c.destroy=function(){this.loader.destroy()},c.abort=function(){this.loader.abort()},c.load=function(f,h,u){C(f),this.loader.load(f,h,u)},F(o,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),o}()},y.createFragmentLoader=function(){var p=this.config.fLoader,C=this.applyFragmentData,x=p||this.config.loader;return function(){function o(S){this.loader=void 0,this.loader=new x(S)}var c=o.prototype;return c.destroy=function(){this.loader.destroy()},c.abort=function(){this.loader.abort()},c.load=function(f,h,u){C(f),this.loader.load(f,h,u)},F(o,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),o}()},_.uuid=function(){var p=URL.createObjectURL(new Blob),C=p.toString();return URL.revokeObjectURL(p),C.slice(C.lastIndexOf("/")+1)},_.serialize=function(p){for(var C=[],x=function(K){return!Number.isNaN(K)&&K!=null&&K!==""&&K!==!1},o=function(K){return Math.round(K)},c=function(K){return o(K/100)*100},S=function(K){return encodeURIComponent(K)},f={br:o,d:o,bl:c,dl:c,mtp:c,nor:S,rtp:c,tb:o},h=Object.keys(p||{}).sort(),u=I(h),g;!(g=u()).done;){var s=g.value,E=p[s];if(!!x(E)&&!(s==="v"&&E===1)&&!(s=="pr"&&E===1)){var A=f[s];A&&(E=A(E));var v=typeof E,N=void 0;s==="ot"||s==="sf"||s==="st"?N=s+"="+E:v==="boolean"?N=s:v==="number"?N=s+"="+E:N=s+"="+JSON.stringify(E),C.push(N)}}return C.join(",")},_.toHeaders=function(p){for(var C=Object.keys(p),x={},o=["Object","Request","Session","Status"],c=[{},{},{},{}],S={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},f=0,h=C;f<h.length;f++){var u=h[f],g=S[u]!=null?S[u]:1;c[g][u]=p[u]}for(var s=0;s<c.length;s++){var E=_.serialize(c[s]);E&&(x["CMCD-"+o[s]]=E)}return x},_.toQuery=function(p){return"CMCD="+encodeURIComponent(_.serialize(p))},_.appendQueryToUri=function(p,C){if(!C)return p;var x=p.includes("?")?"&":"?";return""+p+x+C},_}()},"./src/controller/eme-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>f});var w=l("./src/events.ts"),b=l("./src/errors.ts"),B=l("./src/utils/logger.ts"),O=l("./src/utils/mediakeys-helper.ts"),$=l("./src/utils/keysystem-util.ts"),F=l("./src/utils/numeric-encoding-utils.ts"),k=l("./src/loader/level-key.ts"),M=l("./src/utils/hex.ts"),I=l("./src/utils/mp4-tools.ts"),P=l("./node_modules/eventemitter3/index.js"),T=l.n(P);function R(h,u){h.prototype=Object.create(u.prototype),h.prototype.constructor=h,p(h,u)}function L(h){var u=typeof Map=="function"?new Map:void 0;return L=function(s){if(s===null||!m(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(s))return u.get(s);u.set(s,E)}function E(){return _(s,arguments,C(this).constructor)}return E.prototype=Object.create(s.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),p(E,s)},L(h)}function _(h,u,g){return y()?_=Reflect.construct.bind():_=function(E,A,v){var N=[null];N.push.apply(N,A);var U=Function.bind.apply(E,N),K=new U;return v&&p(K,v.prototype),K},_.apply(null,arguments)}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(h){return Function.toString.call(h).indexOf("[native code]")!==-1}function p(h,u){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,E){return s.__proto__=E,s},p(h,u)}function C(h){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},C(h)}var x=3,o="[eme]",c=function(){function h(g){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=h.CDMCleanupPromise?[h.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=B.logger.debug.bind(B.logger,o),this.log=B.logger.log.bind(B.logger,o),this.warn=B.logger.warn.bind(B.logger,o),this.error=B.logger.error.bind(B.logger,o),this.hls=g,this.config=g.config,this.registerListeners()}var u=h.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},u.registerListeners=function(){this.hls.on(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.unregisterListeners=function(){this.hls.off(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.getLicenseServerUrl=function(s){var E=this.config,A=E.drmSystems,v=E.widevineLicenseUrl,N=A[s];if(N)return N.licenseUrl;if(s===O.KeySystems.WIDEVINE&&v)return v;throw new Error('no license server URL configured for key-system "'+s+'"')},u.getServerCertificateUrl=function(s){var E=this.config.drmSystems,A=E[s];if(A)return A.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+s+'"]')},u.attemptKeySystemAccess=function(s){var E=this,A=this.hls.levels,v=function(W,H,j){return!!W&&j.indexOf(W)===H},N=A.map(function(K){return K.audioCodec}).filter(v),U=A.map(function(K){return K.videoCodec}).filter(v);return N.length+U.length===0&&U.push("avc1.42e01e"),new Promise(function(K,W){var H=function j(G){var z=G.shift();E.getMediaKeysPromise(z,N,U).then(function(Y){return K({keySystem:z,mediaKeys:Y})}).catch(function(Y){G.length?j(G):Y instanceof S?W(Y):W(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Y,fatal:!0},Y.message))})};H(s)})},u.requestMediaKeySystemAccess=function(s,E){var A=this.config.requestMediaKeySystemAccessFunc;if(typeof A!="function"){var v="Configured requestMediaKeySystemAccess is not a function "+A;return O.requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(v="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(v))}return A(s,E)},u.getMediaKeysPromise=function(s,E,A){var v=this,N=(0,O.getSupportedMediaKeySystemConfigurations)(s,E,A,this.config.drmSystemOptions),U=this.keySystemAccessPromises[s],K=U==null?void 0:U.keySystemAccess;if(!K){this.log('Requesting encrypted media "'+s+'" key-system access with config: '+JSON.stringify(N)),K=this.requestMediaKeySystemAccess(s,N);var W=this.keySystemAccessPromises[s]={keySystemAccess:K};return K.catch(function(H){v.log('Failed to obtain access to key-system "'+s+'": '+H)}),K.then(function(H){v.log('Access for key-system "'+H.keySystem+'" obtained');var j=v.fetchServerCertificate(s);return v.log('Create media-keys for "'+s+'"'),W.mediaKeys=H.createMediaKeys().then(function(G){return v.log('Media-keys created for "'+s+'"'),j.then(function(z){return z?v.setMediaKeysServerCertificate(G,s,z):G})}),W.mediaKeys.catch(function(G){v.error('Failed to create media-keys for "'+s+'"}: '+G)}),W.mediaKeys})}return K.then(function(){return U.mediaKeys})},u.createMediaKeySessionContext=function(s){var E=s.decryptdata,A=s.keySystem,v=s.mediaKeys;console.assert(!!v,"mediaKeys is defined"),this.log('Creating key-system session "'+A+'" keyId: '+M.default.hexDump(E.keyId||[]));var N=v.createSession(),U={decryptdata:E,keySystem:A,mediaKeys:v,mediaKeysSession:N,keyStatus:"status-pending"};return this.mediaKeySessions.push(U),U},u.renewKeySession=function(s){var E=s.decryptdata;if(E.pssh){var A=this.createMediaKeySessionContext(s),v=this.getKeyIdString(E),N="cenc";this.keyIdToKeySessionPromise[v]=this.generateRequestWithPreferredKeySession(A,N,E.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(s)},u.getKeyIdString=function(s){if(!s)throw new Error("Could not read keyId of undefined decryptdata");if(s.keyId===null)throw new Error("keyId is null");return M.default.hexDump(s.keyId)},u.updateKeySession=function(s,E){var A,v=s.mediaKeysSession;return this.log('Updating key-session "'+v.sessionId+'" for keyID '+M.default.hexDump(((A=s.decryptdata)===null||A===void 0?void 0:A.keyId)||[])+`
      } (data length: `+(E&&E.byteLength)+")"),v.update(E)},u.selectKeySystemFormat=function(s){var E=Object.keys(s.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+s.sn+" "+s.type+": "+s.level+") key formats "+E.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(E)),this.keyFormatPromise},u.getKeyFormatPromise=function(s){var E=this;return new Promise(function(A,v){var N=(0,O.getKeySystemsForConfig)(E.config),U=s.map(O.keySystemFormatToKeySystemDomain).filter(function(K){return!!K&&N.indexOf(K)!==-1});return E.getKeySystemSelectionPromise(U).then(function(K){var W=K.keySystem,H=(0,O.keySystemDomainToKeySystemFormat)(W);H?A(H):v(new Error('Unable to find format for key-system "'+W+'"'))}).catch(v)})},u.loadKey=function(s){var E=this,A=s.keyInfo.decryptdata,v=this.getKeyIdString(A),N="(keyId: "+v+' format: "'+A.keyFormat+'" method: '+A.method+" uri: "+A.uri+")";this.log("Starting session for key "+N);var U=this.keyIdToKeySessionPromise[v];return U||(U=this.keyIdToKeySessionPromise[v]=this.getKeySystemForKeyPromise(A).then(function(K){var W=K.keySystem,H=K.mediaKeys;return E.throwIfDestroyed(),E.log("Handle encrypted media sn: "+s.frag.sn+" "+s.frag.type+": "+s.frag.level+" using key "+N),E.attemptSetMediaKeys(W,H).then(function(){E.throwIfDestroyed();var j=E.createMediaKeySessionContext({keySystem:W,mediaKeys:H,decryptdata:A}),G="cenc";return E.generateRequestWithPreferredKeySession(j,G,A.pssh,"playlist-key")})}),U.catch(function(K){return E.handleError(K)})),U},u.throwIfDestroyed=function(s){if(!this.hls)throw new Error("invalid state")},u.handleError=function(s){!this.hls||(this.error(s.message),s instanceof S?this.hls.trigger(w.Events.ERROR,s.data):this.hls.trigger(w.Events.ERROR,{type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:s,fatal:!0}))},u.getKeySystemForKeyPromise=function(s){var E=this.getKeyIdString(s),A=this.keyIdToKeySessionPromise[E];if(!A){var v=(0,O.keySystemFormatToKeySystemDomain)(s.keyFormat),N=v?[v]:(0,O.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(N)}return A},u.getKeySystemSelectionPromise=function(s){if(s.length||(s=(0,O.getKeySystemsForConfig)(this.config)),s.length===0)throw new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(s)},u._onMediaEncrypted=function(s){var E=this,A=s.initDataType,v=s.initData;if(this.debug('"'+s.type+'" event: init data type: "'+A+'"'),v!==null){var N,U;if(A==="sinf"&&this.config.drmSystems[O.KeySystems.FAIRPLAY]){var K=(0,I.bin2str)(new Uint8Array(v));try{var W=(0,F.base64Decode)(JSON.parse(K).sinf),H=(0,I.parseSinf)(new Uint8Array(W));if(!H)return;N=H.subarray(8,24),U=O.KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{var j=(0,I.parsePssh)(v);if(j===null)return;j.version===0&&j.systemId===O.KeySystemIds.WIDEVINE&&j.data&&(N=j.data.subarray(8,24)),U=(0,O.keySystemIdToKeySystemDomain)(j.systemId)}if(!(!U||!N)){for(var G=M.default.hexDump(N),z=this.keyIdToKeySessionPromise,Y=this.mediaKeySessions,X=z[G],Q=function(re){var oe=Y[re],ne=oe.decryptdata;if(ne.pssh||!ne.keyId)return"continue";var te=M.default.hexDump(ne.keyId);if(G===te||ne.uri.replace(/-/g,"").indexOf(G)!==-1)return X=z[te],delete z[te],ne.pssh=new Uint8Array(v),ne.keyId=N,X=z[G]=X.then(function(){return E.generateRequestWithPreferredKeySession(oe,A,v,"encrypted-event-key-match")}),"break"},q=0;q<Y.length;q++){var J=Q(q);if(J!=="continue"&&J==="break")break}X||(X=z[G]=this.getKeySystemSelectionPromise([U]).then(function(ee){var re,oe=ee.keySystem,ne=ee.mediaKeys;E.throwIfDestroyed();var te=new k.LevelKey("ISO-23001-7",G,(re=(0,O.keySystemDomainToKeySystemFormat)(oe))!=null?re:"");return te.pssh=new Uint8Array(v),te.keyId=N,E.attemptSetMediaKeys(oe,ne).then(function(){E.throwIfDestroyed();var ue=E.createMediaKeySessionContext({decryptdata:te,keySystem:oe,mediaKeys:ne});return E.generateRequestWithPreferredKeySession(ue,A,v,"encrypted-event-no-match")})})),X.catch(function(ee){return E.handleError(ee)})}}},u._onWaitingForKey=function(s){this.log('"'+s.type+'" event')},u.attemptSetMediaKeys=function(s,E){var A=this,v=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+s+'"');var N=Promise.all(v).then(function(){if(!A.media)throw new Error("Attempted to set mediaKeys without media element attached");return A.media.setMediaKeys(E)});return this.setMediaKeysQueue.push(N),N.then(function(){A.log('Media-keys set for "'+s+'"'),v.push(N),A.setMediaKeysQueue=A.setMediaKeysQueue.filter(function(U){return v.indexOf(U)===-1})})},u.generateRequestWithPreferredKeySession=function(s,E,A,v){var N,U,K=this,W=(N=this.config.drmSystems)===null||N===void 0||(U=N[s.keySystem])===null||U===void 0?void 0:U.generateRequest;if(W)try{var H=W.call(this.hls,E,A,s);if(!H)throw new Error("Invalid response from configured generateRequest filter");E=H.initDataType,A=s.decryptdata.pssh=H.initData?new Uint8Array(H.initData):null}catch(X){var j;if(this.warn(X.message),(j=this.hls)!==null&&j!==void 0&&j.config.debug)throw X}if(A===null)return this.log('Skipping key-session request for "'+v+'" (no initData)'),Promise.resolve(s);var G=this.getKeyIdString(s.decryptdata);this.log('Generating key-session request for "'+v+'": '+G+" (init data type: "+E+" length: "+(A?A.byteLength:null)+")");var z=new(T());s.mediaKeysSession.onmessage=function(X){var Q=s.mediaKeysSession;if(!Q){z.emit("error",new Error("invalid state"));return}var q=X.messageType,J=X.message;K.log('"'+q+'" message event for session "'+Q.sessionId+'" message size: '+J.byteLength),q==="license-request"||q==="license-renewal"?K.renewLicense(s,J).catch(function(ee){K.handleError(ee),z.emit("error",ee)}):q==="license-release"?s.keySystem===O.KeySystems.FAIRPLAY&&(K.updateKeySession(s,(0,$.strToUtf8array)("acknowledged")),K.removeSession(s)):K.warn('unhandled media key message type "'+q+'"')},s.mediaKeysSession.onkeystatuseschange=function(X){var Q=s.mediaKeysSession;if(!Q){z.emit("error",new Error("invalid state"));return}K.onKeyStatusChange(s);var q=s.keyStatus;z.emit("keyStatus",q),q==="expired"&&(K.warn(s.keySystem+" expired for key "+G),K.renewKeySession(s))};var Y=new Promise(function(X,Q){z.on("error",Q),z.on("keyStatus",function(q){q.startsWith("usable")?X():q==="output-restricted"?Q(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):q==="internal-error"?Q(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+q+'"')):q==="expired"?Q(new Error("key expired while generating request")):K.warn('unhandled key status change "'+q+'"')})});return s.mediaKeysSession.generateRequest(E,A).then(function(){var X;K.log('Request generated for key-session "'+((X=s.mediaKeysSession)===null||X===void 0?void 0:X.sessionId)+'" keyId: '+G)}).catch(function(X){throw new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:X,fatal:!1},"Error generating key-session request: "+X)}).then(function(){return Y}).catch(function(X){throw z.removeAllListeners(),K.removeSession(s),X}).then(function(){return z.removeAllListeners(),s})},u.onKeyStatusChange=function(s){var E=this;s.mediaKeysSession.keyStatuses.forEach(function(A,v){E.log('key status change "'+A+'" for keyStatuses keyId: '+M.default.hexDump("buffer"in v?new Uint8Array(v.buffer,v.byteOffset,v.byteLength):new Uint8Array(v))+" session keyId: "+M.default.hexDump(new Uint8Array(s.decryptdata.keyId||[]))+" uri: "+s.decryptdata.uri),s.keyStatus=A})},u.fetchServerCertificate=function(s){var E=this;return new Promise(function(A,v){var N=E.getServerCertificateUrl(s);if(!N)return A();E.log('Fetching serverCertificate for "'+s+'"');var U=new XMLHttpRequest;U.open("GET",N,!0),U.responseType="arraybuffer",U.onreadystatechange=function(){U.readyState===XMLHttpRequest.DONE&&(U.status===200?A(U.response):v(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:U},'"'+s+'" certificate request XHR failed ('+N+"). Status: "+U.status+" ("+U.statusText+")")))},U.send()})},u.setMediaKeysServerCertificate=function(s,E,A){var v=this;return new Promise(function(N,U){s.setServerCertificate(A).then(function(K){v.log("setServerCertificate "+(K?"success":"not supported by CDM")+" ("+(A==null?void 0:A.byteLength)+') on "'+E+'"'),N(s)}).catch(function(K){U(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:K,fatal:!0},K.message))})})},u.renewLicense=function(s,E){var A=this;return this.requestLicense(s,new Uint8Array(E)).then(function(v){return A.updateKeySession(s,new Uint8Array(v)).catch(function(N){throw new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:N,fatal:!0},N.message)})})},u.setupLicenseXHR=function(s,E,A,v){var N=this,U=this.config.licenseXhrSetup;return U?Promise.resolve().then(function(){if(!A.decryptdata)throw new Error("Key removed");return U.call(N.hls,s,E,A,v)}).catch(function(K){if(!A.decryptdata)throw K;return s.open("POST",E,!0),U.call(N.hls,s,E,A,v)}).then(function(K){s.readyState||s.open("POST",E,!0);var W=K||v;return{xhr:s,licenseChallenge:W}}):(s.open("POST",E,!0),Promise.resolve({xhr:s,licenseChallenge:v}))},u.requestLicense=function(s,E){var A=this;return new Promise(function(v,N){var U=A.getLicenseServerUrl(s.keySystem);A.log("Sending license request to URL: "+U);var K=new XMLHttpRequest;K.responseType="arraybuffer",K.onreadystatechange=function(){if(!A.hls||!s.mediaKeysSession)return N(new Error("invalid state"));if(K.readyState===4)if(K.status===200){A._requestLicenseFailureCount=0;var W=K.response;A.log("License received "+(W instanceof ArrayBuffer?W.byteLength:W));var H=A.config.licenseResponseCallback;if(H)try{W=H.call(A.hls,K,U,s)}catch(G){A.error(G)}v(W)}else if(A._requestLicenseFailureCount++,A._requestLicenseFailureCount>x||K.status>=400&&K.status<500)N(new S({type:b.ErrorTypes.KEY_SYSTEM_ERROR,details:b.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:K},"License Request XHR failed ("+U+"). Status: "+K.status+" ("+K.statusText+")"));else{var j=x-A._requestLicenseFailureCount+1;A.warn("Retrying license request, "+j+" attempts left"),A.requestLicense(s,E).then(v,N)}},s.licenseXhr&&s.licenseXhr.readyState!==XMLHttpRequest.DONE&&s.licenseXhr.abort(),s.licenseXhr=K,A.setupLicenseXHR(K,U,s,E).then(function(W){var H=W.xhr,j=W.licenseChallenge;H.send(j)})})},u.onMediaAttached=function(s,E){if(!!this.config.emeEnabled){var A=E.media;this.media=A,A.addEventListener("encrypted",this.onMediaEncrypted),A.addEventListener("waitingforkey",this.onWaitingForKey)}},u.onMediaDetached=function(){var s=this,E=this.media,A=this.mediaKeySessions;E&&(E.removeEventListener("encrypted",this.onMediaEncrypted),E.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},k.LevelKey.clearKeyUriToKeyIdMap();var v=A.length;h.CDMCleanupPromise=Promise.all(A.map(function(N){return s.removeSession(N)}).concat(E==null?void 0:E.setMediaKeys(null).catch(function(N){s.log("Could not clear media keys: "+N+". media.src: "+(E==null?void 0:E.src))}))).then(function(){v&&(s.log("finished closing key sessions and clearing media keys"),A.length=0)}).catch(function(N){s.log("Could not close sessions and clear media keys: "+N+". media.src: "+(E==null?void 0:E.src))})},u.onManifestLoaded=function(s,E){var A=E.sessionKeys;if(!(!A||!this.config.emeEnabled)&&!this.keyFormatPromise){var v=A.reduce(function(N,U){return N.indexOf(U.keyFormat)===-1&&N.push(U.keyFormat),N},[]);this.log("Selecting key-system from session-keys "+v.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(v)}},u.removeSession=function(s){var E=this,A=s.mediaKeysSession,v=s.licenseXhr;if(A){this.log("Remove licenses and keys and close session "+A.sessionId),A.onmessage=null,A.onkeystatuseschange=null,v&&v.readyState!==XMLHttpRequest.DONE&&v.abort(),s.mediaKeysSession=s.decryptdata=s.licenseXhr=void 0;var N=this.mediaKeySessions.indexOf(s);return N>-1&&this.mediaKeySessions.splice(N,1),A.remove().catch(function(U){E.log("Could not remove session: "+U)}).then(function(){return A.close()}).catch(function(U){E.log("Could not close session: "+U)})}},h}();c.CDMCleanupPromise=void 0;var S=function(h){R(u,h);function u(g,s){var E;return E=h.call(this,s)||this,E.data=void 0,E.data=g,g.err=g.error,E}return u}(L(Error));const f=c},"./src/controller/fps-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>O});var w=l("./src/events.ts"),b=l("./src/utils/logger.ts"),B=function(){function $(k){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=k,this.registerListeners()}var F=$.prototype;return F.setStreamController=function(M){this.streamController=M},F.registerListeners=function(){this.hls.on(w.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},F.unregisterListeners=function(){this.hls.off(w.Events.MEDIA_ATTACHING,this.onMediaAttaching)},F.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},F.onMediaAttaching=function(M,I){var P=this.hls.config;if(P.capLevelOnFPSDrop){var T=I.media instanceof self.HTMLVideoElement?I.media:null;this.media=T,T&&typeof T.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),P.fpsDroppedMonitoringPeriod)}},F.checkFPS=function(M,I,P){var T=performance.now();if(I){if(this.lastTime){var R=T-this.lastTime,L=P-this.lastDroppedFrames,_=I-this.lastDecodedFrames,y=1e3*L/R,m=this.hls;if(m.trigger(w.Events.FPS_DROP,{currentDropped:L,currentDecoded:_,totalDroppedFrames:P}),y>0&&L>m.config.fpsDroppedMonitoringThreshold*_){var p=m.currentLevel;b.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+p),p>0&&(m.autoLevelCapping===-1||m.autoLevelCapping>=p)&&(p=p-1,m.trigger(w.Events.FPS_DROP_LEVEL_CAPPING,{level:p,droppedLevel:m.currentLevel}),m.autoLevelCapping=p,this.streamController.nextLevelSwitch())}}this.lastTime=T,this.lastDroppedFrames=P,this.lastDecodedFrames=I}},F.checkFPSInterval=function(){var M=this.media;if(M)if(this.isVideoPlaybackQualityAvailable){var I=M.getVideoPlaybackQuality();this.checkFPS(M,I.totalVideoFrames,I.droppedVideoFrames)}else this.checkFPS(M,M.webkitDecodedFrameCount,M.webkitDroppedFrameCount)},$}();const O=B},"./src/controller/fragment-finders.ts":(d,D,l)=>{l.r(D),l.d(D,{findFragWithCC:()=>k,findFragmentByPDT:()=>B,findFragmentByPTS:()=>O,fragmentWithinToleranceTest:()=>$,pdtWithinToleranceTest:()=>F});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/binary-search.ts");function B(M,I,P){if(I===null||!Array.isArray(M)||!M.length||!(0,w.isFiniteNumber)(I))return null;var T=M[0].programDateTime;if(I<(T||0))return null;var R=M[M.length-1].endProgramDateTime;if(I>=(R||0))return null;P=P||0;for(var L=0;L<M.length;++L){var _=M[L];if(F(I,P,_))return _}return null}function O(M,I,P,T){P===void 0&&(P=0),T===void 0&&(T=0);var R=null;if(M?R=I[M.sn-I[0].sn+1]||null:P===0&&I[0].start===0&&(R=I[0]),R&&$(P,T,R)===0)return R;var L=b.default.search(I,$.bind(null,P,T));return L&&(L!==M||!R)?L:R}function $(M,I,P){if(M===void 0&&(M=0),I===void 0&&(I=0),P.start<=M&&P.start+P.duration>M)return 0;var T=Math.min(I,P.duration+(P.deltaPTS?P.deltaPTS:0));return P.start+P.duration-T<=M?1:P.start-T>M&&P.start?-1:0}function F(M,I,P){var T=Math.min(I,P.duration+(P.deltaPTS?P.deltaPTS:0))*1e3,R=P.endProgramDateTime||0;return R-T>M}function k(M,I){return b.default.search(M,function(P){return P.cc<I?1:P.cc>I?-1:0})}},"./src/controller/fragment-tracker.ts":(d,D,l)=>{l.r(D),l.d(D,{FragmentState:()=>B,FragmentTracker:()=>O});var w=l("./src/events.ts"),b=l("./src/types/loader.ts"),B;(function(k){k.NOT_LOADED="NOT_LOADED",k.APPENDING="APPENDING",k.PARTIAL="PARTIAL",k.OK="OK"})(B||(B={}));var O=function(){function k(I){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=I,this._registerListeners()}var M=k.prototype;return M._registerListeners=function(){var P=this.hls;P.on(w.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.on(w.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.on(w.Events.FRAG_LOADED,this.onFragLoaded,this)},M._unregisterListeners=function(){var P=this.hls;P.off(w.Events.BUFFER_APPENDED,this.onBufferAppended,this),P.off(w.Events.FRAG_BUFFERED,this.onFragBuffered,this),P.off(w.Events.FRAG_LOADED,this.onFragLoaded,this)},M.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},M.getAppendedFrag=function(P,T){if(T===b.PlaylistLevelType.MAIN){var R=this.activeFragment,L=this.activeParts;if(!R)return null;if(L)for(var _=L.length;_--;){var y=L[_],m=y?y.end:R.appendedPTS;if(y.start<=P&&m!==void 0&&P<=m)return _>9&&(this.activeParts=L.slice(_-9)),y}else if(R.start<=P&&R.appendedPTS!==void 0&&P<=R.appendedPTS)return R}return this.getBufferedFrag(P,T)},M.getBufferedFrag=function(P,T){for(var R=this.fragments,L=Object.keys(R),_=L.length;_--;){var y=R[L[_]];if((y==null?void 0:y.body.type)===T&&y.buffered){var m=y.body;if(m.start<=P&&P<=m.end)return m}}return null},M.detectEvictedFragments=function(P,T,R){var L=this;this.timeRanges&&(this.timeRanges[P]=T),Object.keys(this.fragments).forEach(function(_){var y=L.fragments[_];if(!!y){if(!y.buffered&&!y.loaded){y.body.type===R&&L.removeFragment(y.body);return}var m=y.range[P];!m||m.time.some(function(p){var C=!L.isTimeBuffered(p.startPTS,p.endPTS,T);return C&&L.removeFragment(y.body),C})}})},M.detectPartialFragments=function(P){var T=this,R=this.timeRanges,L=P.frag,_=P.part;if(!(!R||L.sn==="initSegment")){var y=F(L),m=this.fragments[y];!m||(Object.keys(R).forEach(function(p){var C=L.elementaryStreams[p];if(!!C){var x=R[p],o=_!==null||C.partial===!0;m.range[p]=T.getBufferedTimes(L,_,o,x)}}),m.loaded=null,Object.keys(m.range).length?(m.buffered=!0,m.body.endList&&(this.endListFragments[m.body.type]=m)):this.removeFragment(m.body))}},M.fragBuffered=function(P){var T=F(P),R=this.fragments[T];R&&(R.loaded=null,R.buffered=!0)},M.getBufferedTimes=function(P,T,R,L){for(var _={time:[],partial:R},y=T?T.start:P.start,m=T?T.end:P.end,p=P.minEndPTS||m,C=P.maxStartPTS||y,x=0;x<L.length;x++){var o=L.start(x)-this.bufferPadding,c=L.end(x)+this.bufferPadding;if(C>=o&&p<=c){_.time.push({startPTS:Math.max(y,L.start(x)),endPTS:Math.min(m,L.end(x))});break}else if(y<c&&m>o)_.partial=!0,_.time.push({startPTS:Math.max(y,L.start(x)),endPTS:Math.min(m,L.end(x))});else if(m<=o)break}return _},M.getPartialFragment=function(P){var T=null,R,L,_,y=0,m=this.bufferPadding,p=this.fragments;return Object.keys(p).forEach(function(C){var x=p[C];!x||$(x)&&(L=x.body.start-m,_=x.body.end+m,P>=L&&P<=_&&(R=Math.min(P-L,_-P),y<=R&&(T=x.body,y=R)))}),T},M.isEndListAppended=function(P){var T=this.endListFragments[P];return T!==void 0&&(T.buffered||$(T))},M.getState=function(P){var T=F(P),R=this.fragments[T];return R?R.buffered?$(R)?B.PARTIAL:B.OK:B.APPENDING:B.NOT_LOADED},M.isTimeBuffered=function(P,T,R){for(var L,_,y=0;y<R.length;y++){if(L=R.start(y)-this.bufferPadding,_=R.end(y)+this.bufferPadding,P>=L&&T<=_)return!0;if(T<=L)return!1}return!1},M.onFragLoaded=function(P,T){var R=T.frag,L=T.part;if(!(R.sn==="initSegment"||R.bitrateTest||L)){var _=F(R);this.fragments[_]={body:R,loaded:T,buffered:!1,range:Object.create(null)}}},M.onBufferAppended=function(P,T){var R=this,L=T.frag,_=T.part,y=T.timeRanges;if(L.type===b.PlaylistLevelType.MAIN)if(this.activeFragment!==L&&(this.activeFragment=L,L.appendedPTS=void 0),_){var m=this.activeParts;m||(this.activeParts=m=[]),m.push(_)}else this.activeParts=null;this.timeRanges=y,Object.keys(y).forEach(function(p){var C=y[p];if(R.detectEvictedFragments(p,C),!_&&L.type===b.PlaylistLevelType.MAIN){var x=L.elementaryStreams[p];if(!x)return;for(var o=0;o<C.length;o++){var c=C.end(o);c<=x.endPTS&&c>x.startPTS?L.appendedPTS=Math.max(c,L.appendedPTS||0):L.appendedPTS=x.endPTS}}})},M.onFragBuffered=function(P,T){this.detectPartialFragments(T)},M.hasFragment=function(P){var T=F(P);return!!this.fragments[T]},M.removeFragmentsInRange=function(P,T,R){var L=this;Object.keys(this.fragments).forEach(function(_){var y=L.fragments[_];if(!!y&&y.buffered){var m=y.body;m.type===R&&m.start<T&&m.end>P&&L.removeFragment(m)}})},M.removeFragment=function(P){var T=F(P);P.stats.loaded=0,P.clearElementaryStreamInfo(),P.appendedPTS=void 0,delete this.fragments[T],P.endList&&delete this.endListFragments[P.type]},M.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},k}();function $(k){var M,I;return k.buffered&&(((M=k.range.video)===null||M===void 0?void 0:M.partial)||((I=k.range.audio)===null||I===void 0?void 0:I.partial))}function F(k){return k.type+"_"+k.level+"_"+k.urlId+"_"+k.sn}},"./src/controller/gap-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{MAX_START_GAP_JUMP:()=>F,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>k,SKIP_BUFFER_RANGE_START:()=>M,STALL_MINIMUM_DURATION_MS:()=>$,default:()=>I});var w=l("./src/utils/buffer-helper.ts"),b=l("./src/errors.ts"),B=l("./src/events.ts"),O=l("./src/utils/logger.ts"),$=250,F=2,k=.1,M=.05,I=function(){function P(R,L,_,y){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=R,this.media=L,this.fragmentTracker=_,this.hls=y}var T=P.prototype;return T.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},T.poll=function(L,_){var y=this.config,m=this.media,p=this.stalled;if(m!==null){var C=m.currentTime,x=m.seeking,o=this.seeking&&!x,c=!this.seeking&&x;if(this.seeking=x,C!==L){if(this.moved=!0,p!==null){if(this.stallReported){var S=self.performance.now()-p;O.logger.warn("playback not stuck anymore @"+C+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((c||o)&&(this.stalled=null),!(m.paused&&!x||m.ended||m.playbackRate===0||!w.BufferHelper.getBuffered(m).length)){var f=w.BufferHelper.bufferInfo(m,C,0),h=f.len>0,u=f.nextStart||0;if(!(!h&&!u)){if(x){var g=f.len>F,s=!u||_&&_.start<=C||u-C>F&&!this.fragmentTracker.getPartialFragment(C);if(g||s)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var E,A=Math.max(u,f.start||0)-C,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,N=v==null||(E=v.details)===null||E===void 0?void 0:E.live,U=N?v.details.targetduration*2:F;if(A>0&&A<=U){this._trySkipBufferHole(null);return}}var K=self.performance.now();if(p===null){this.stalled=K;return}var W=K-p;if(!(!x&&W>=$&&(this._reportStall(f),!this.media))){var H=w.BufferHelper.bufferInfo(m,C,y.maxBufferHole);this._tryFixBufferStall(H,W)}}}}},T._tryFixBufferStall=function(L,_){var y=this.config,m=this.fragmentTracker,p=this.media;if(p!==null){var C=p.currentTime,x=m.getPartialFragment(C);if(x){var o=this._trySkipBufferHole(x);if(o||!this.media)return}L.len>y.maxBufferHole&&_>y.highBufferWatchdogPeriod*1e3&&(O.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},T._reportStall=function(L){var _=this.hls,y=this.media,m=this.stallReported;!m&&y&&(this.stallReported=!0,O.logger.warn("Playback stalling at @"+y.currentTime+" due to low buffer ("+JSON.stringify(L)+")"),_.trigger(B.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:L.len}))},T._trySkipBufferHole=function(L){var _=this.config,y=this.hls,m=this.media;if(m===null)return 0;for(var p=m.currentTime,C=0,x=w.BufferHelper.getBuffered(m),o=0;o<x.length;o++){var c=x.start(o);if(p+_.maxBufferHole>=C&&p<c){var S=Math.max(c+M,m.currentTime+k);return O.logger.warn("skipping hole, adjusting currentTime from "+p+" to "+S),this.moved=!0,this.stalled=null,m.currentTime=S,L&&y.trigger(B.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+p+" to "+S,frag:L}),S}C=x.end(o)}return 0},T._tryNudgeBuffer=function(){var L=this.config,_=this.hls,y=this.media,m=this.nudgeRetry;if(y!==null){var p=y.currentTime;if(this.nudgeRetry++,m<L.nudgeMaxRetry){var C=p+(m+1)*L.nudgeOffset;O.logger.warn("Nudging 'currentTime' from "+p+" to "+C),y.currentTime=C,_.trigger(B.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else O.logger.error("Playhead still not moving while enough data buffered @"+p+" after "+L.nudgeMaxRetry+" nudges"),_.trigger(B.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},P}()},"./src/controller/id3-track-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>L});var w=l("./src/polyfills/number.ts"),b=l("./src/events.ts"),B=l("./src/utils/texttrack-utils.ts"),O=l("./src/demux/id3.ts"),$=l("./src/loader/date-range.ts"),F=l("./src/types/demuxer.ts"),k=.25;function M(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var I=function(){var _=M();try{new _(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function P(_,y){return _.getTime()/1e3-y}function T(_){return Uint8Array.from(_.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var R=function(){function _(m){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=m,this._registerListeners()}var y=_.prototype;return y.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},y._registerListeners=function(){var p=this.hls;p.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.on(b.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),p.on(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),p.on(b.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},y._unregisterListeners=function(){var p=this.hls;p.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),p.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.off(b.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),p.off(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),p.off(b.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},y.onMediaAttached=function(p,C){this.media=C.media},y.onMediaDetaching=function(){!this.id3Track||((0,B.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},y.onManifestLoading=function(){this.dateRangeCuesAppended={}},y.createTrack=function(p){var C=this.getID3Track(p.textTracks);return C.mode="hidden",C},y.getID3Track=function(p){if(!!this.media){for(var C=0;C<p.length;C++){var x=p[C];if(x.kind==="metadata"&&x.label==="id3")return(0,B.sendAddTrackEvent)(x,this.media),x}return this.media.addTextTrack("metadata","id3")}},y.onFragParsingMetadata=function(p,C){if(!!this.media){var x=this.hls.config,o=x.enableEmsgMetadataCues,c=x.enableID3MetadataCues;if(!(!o&&!c)){var S=C.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var f=M(),h=0;h<S.length;h++){var u=S[h].type;if(!(u===F.MetadataSchema.emsg&&!o||!c)){var g=O.getID3Frames(S[h].data);if(g){var s=S[h].pts,E=s+S[h].duration;E>I&&(E=I);var A=E-s;A<=0&&(E=s+k);for(var v=0;v<g.length;v++){var N=g[v];if(!O.isTimeStampFrame(N)){this.updateId3CueEnds(s);var U=new f(s,E,"");U.value=N,u&&(U.type=u),this.id3Track.addCue(U)}}}}}}}},y.updateId3CueEnds=function(p){var C,x=(C=this.id3Track)===null||C===void 0?void 0:C.cues;if(x)for(var o=x.length;o--;){var c=x[o];c.startTime<p&&c.endTime===I&&(c.endTime=p)}},y.onBufferFlushing=function(p,C){var x=C.startOffset,o=C.endOffset,c=C.type,S=this.id3Track,f=this.hls;if(!!f){var h=f.config,u=h.enableEmsgMetadataCues,g=h.enableID3MetadataCues;if(S&&(u||g)){var s;c==="audio"?s=function(A){return A.type===F.MetadataSchema.audioId3&&g}:c==="video"?s=function(A){return A.type===F.MetadataSchema.emsg&&u}:s=function(A){return A.type===F.MetadataSchema.audioId3&&g||A.type===F.MetadataSchema.emsg&&u},(0,B.removeCuesInRange)(S,x,o,s)}}},y.onLevelUpdated=function(p,C){var x=this,o=C.details;if(!(!this.media||!o.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var c=this.dateRangeCuesAppended,S=this.id3Track,f=o.dateRanges,h=Object.keys(f);if(S)for(var u=Object.keys(c).filter(function(K){return!h.includes(K)}),g=function(W){var H=u[W];Object.keys(c[H].cues).forEach(function(j){S.removeCue(c[H].cues[j])}),delete c[H]},s=u.length;s--;)g(s);var E=o.fragments[o.fragments.length-1];if(!(h.length===0||!(0,w.isFiniteNumber)(E==null?void 0:E.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var A=E.programDateTime/1e3-E.start,v=M(),N=function(W){var H=h[W],j=f[H],G=c[H],z=(G==null?void 0:G.cues)||{},Y=(G==null?void 0:G.durationKnown)||!1,X=P(j.startDate,A),Q=I,q=j.endDate;if(q)Q=P(q,A),Y=!0;else if(j.endOnNext&&!Y){var J=h.reduce(function(ue,he){var pe=f[he];return pe.class===j.class&&pe.id!==he&&pe.startDate>j.startDate&&ue.push(pe),ue},[]).sort(function(ue,he){return ue.startDate.getTime()-he.startDate.getTime()})[0];J&&(Q=P(J.startDate,A),Y=!0)}for(var ee=Object.keys(j.attr),re=0;re<ee.length;re++){var oe=ee[re];if(!(oe===$.DateRangeAttribute.ID||oe===$.DateRangeAttribute.CLASS||oe===$.DateRangeAttribute.START_DATE||oe===$.DateRangeAttribute.DURATION||oe===$.DateRangeAttribute.END_DATE||oe===$.DateRangeAttribute.END_ON_NEXT)){var ne=z[oe];if(ne)Y&&!G.durationKnown&&(ne.endTime=Q);else{var te=j.attr[oe];ne=new v(X,Q,""),(oe===$.DateRangeAttribute.SCTE35_OUT||oe===$.DateRangeAttribute.SCTE35_IN)&&(te=T(te)),ne.value={key:oe,data:te},ne.type=F.MetadataSchema.dateRange,x.id3Track.addCue(ne),z[oe]=ne}}}c[H]={cues:z,dateRange:j,durationKnown:Y}},U=0;U<h.length;U++)N(U)}}},_}();const L=R},"./src/controller/latency-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>M});var w=l("./src/errors.ts"),b=l("./src/events.ts"),B=l("./src/utils/logger.ts");function O(I,P){for(var T=0;T<P.length;T++){var R=P[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,F(R.key),R)}}function $(I,P,T){return P&&O(I.prototype,P),T&&O(I,T),Object.defineProperty(I,"prototype",{writable:!1}),I}function F(I){var P=k(I,"string");return typeof P=="symbol"?P:String(P)}function k(I,P){if(typeof I!="object"||I===null)return I;var T=I[Symbol.toPrimitive];if(T!==void 0){var R=T.call(I,P||"default");if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(I)}var M=function(){function I(T){var R=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return R.timeupdate()},this.hls=T,this.config=T.config,this.registerListeners()}var P=I.prototype;return P.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},P.registerListeners=function(){this.hls.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(b.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(b.Events.ERROR,this.onError,this)},P.unregisterListeners=function(){this.hls.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(b.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(b.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(b.Events.ERROR,this.onError)},P.onMediaAttached=function(R,L){this.media=L.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},P.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},P.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},P.onLevelUpdated=function(R,L){var _=L.details;this.levelDetails=_,_.advanced&&this.timeupdate(),!_.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},P.onError=function(R,L){L.details===w.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,B.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},P.timeupdate=function(){var R=this.media,L=this.levelDetails;if(!(!R||!L)){this.currentTime=R.currentTime;var _=this.computeLatency();if(_!==null){this._latency=_;var y=this.config,m=y.lowLatencyMode,p=y.maxLiveSyncPlaybackRate;if(!(!m||p===1)){var C=this.targetLatency;if(C!==null){var x=_-C,o=Math.min(this.maxLatency,C+L.targetduration),c=x<o;if(L.live&&c&&x>.05&&this.forwardBufferLength>1){var S=Math.min(2,Math.max(1,p)),f=Math.round(2/(1+Math.exp(-.75*x-this.edgeStalled))*20)/20;R.playbackRate=Math.min(S,Math.max(1,f))}else R.playbackRate!==1&&R.playbackRate!==0&&(R.playbackRate=1)}}}}},P.estimateLiveEdge=function(){var R=this.levelDetails;return R===null?null:R.edge+R.age},P.computeLatency=function(){var R=this.estimateLiveEdge();return R===null?null:R-this.currentTime},$(I,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var R=this.config,L=this.levelDetails;return R.liveMaxLatencyDuration!==void 0?R.liveMaxLatencyDuration:L?R.liveMaxLatencyDurationCount*L.targetduration:0}},{key:"targetLatency",get:function(){var R=this.levelDetails;if(R===null)return null;var L=R.holdBack,_=R.partHoldBack,y=R.targetduration,m=this.config,p=m.liveSyncDuration,C=m.liveSyncDurationCount,x=m.lowLatencyMode,o=this.hls.userConfig,c=x&&_||L;(o.liveSyncDuration||o.liveSyncDurationCount||c===0)&&(c=p!==void 0?p:C*y);var S=y,f=1;return c+Math.min(this.stallCount*f,S)}},{key:"liveSyncPosition",get:function(){var R=this.estimateLiveEdge(),L=this.targetLatency,_=this.levelDetails;if(R===null||L===null||_===null)return null;var y=_.edge,m=R-L-this.edgeStalled,p=y-_.totalduration,C=y-(this.config.lowLatencyMode&&_.partTarget||_.targetduration);return Math.min(Math.max(p,m),C)}},{key:"drift",get:function(){var R=this.levelDetails;return R===null?1:R.drift}},{key:"edgeStalled",get:function(){var R=this.levelDetails;if(R===null)return 0;var L=(this.config.lowLatencyMode&&R.partTarget||R.targetduration)*3;return Math.max(R.age-L,0)}},{key:"forwardBufferLength",get:function(){var R=this.media,L=this.levelDetails;if(!R||!L)return 0;var _=R.buffered.length;return(_?R.buffered.end(_-1):L.edge)-this.currentTime}}]),I}()},"./src/controller/level-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>m});var w=l("./src/types/level.ts"),b=l("./src/events.ts"),B=l("./src/errors.ts"),O=l("./src/utils/codecs.ts"),$=l("./src/controller/level-helper.ts"),F=l("./src/controller/base-playlist-controller.ts"),k=l("./src/types/loader.ts");function M(){return M=Object.assign?Object.assign.bind():function(p){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var o in x)Object.prototype.hasOwnProperty.call(x,o)&&(p[o]=x[o])}return p},M.apply(this,arguments)}function I(p,C){for(var x=0;x<C.length;x++){var o=C[x];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,T(o.key),o)}}function P(p,C,x){return C&&I(p.prototype,C),x&&I(p,x),Object.defineProperty(p,"prototype",{writable:!1}),p}function T(p){var C=R(p,"string");return typeof C=="symbol"?C:String(C)}function R(p,C){if(typeof p!="object"||p===null)return p;var x=p[Symbol.toPrimitive];if(x!==void 0){var o=x.call(p,C||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(p)}function L(p,C){p.prototype=Object.create(C.prototype),p.prototype.constructor=p,_(p,C)}function _(p,C){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,c){return o.__proto__=c,o},_(p,C)}var y=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),m=function(p){L(C,p);function C(o){var c;return c=p.call(this,o,"[level-controller]")||this,c._levels=[],c._firstLevel=-1,c._startLevel=void 0,c.currentLevelIndex=-1,c.manualLevelIndex=-1,c.onParsedComplete=void 0,c._registerListeners(),c}var x=C.prototype;return x._registerListeners=function(){var c=this.hls;c.on(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this),c.on(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.on(b.Events.FRAG_LOADED,this.onFragLoaded,this),c.on(b.Events.ERROR,this.onError,this)},x._unregisterListeners=function(){var c=this.hls;c.off(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this),c.off(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.off(b.Events.FRAG_LOADED,this.onFragLoaded,this),c.off(b.Events.ERROR,this.onError,this)},x.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,p.prototype.destroy.call(this)},x.startLoad=function(){var c=this._levels;c.forEach(function(S){S.loadError=0}),p.prototype.startLoad.call(this)},x.onManifestLoaded=function(c,S){var f=[],h=[],u=[],g,s={},E,A=!1,v=!1,N=!1;if(S.levels.forEach(function(H){var j=H.attrs;A=A||!!(H.width&&H.height),v=v||!!H.videoCodec,N=N||!!H.audioCodec,y&&H.audioCodec&&H.audioCodec.indexOf("mp4a.40.34")!==-1&&(H.audioCodec=void 0);var G=H.bitrate+"-"+H.attrs.RESOLUTION+"-"+H.attrs.CODECS;E=s[G],E?E.url.push(H.url):(E=new w.Level(H),s[G]=E,f.push(E)),j&&(j.AUDIO&&(0,$.addGroupId)(E,"audio",j.AUDIO),j.SUBTITLES&&(0,$.addGroupId)(E,"text",j.SUBTITLES))}),(A||v)&&N&&(f=f.filter(function(H){var j=H.videoCodec,G=H.width,z=H.height;return!!j||!!(G&&z)})),f=f.filter(function(H){var j=H.audioCodec,G=H.videoCodec;return(!j||(0,O.isCodecSupportedInMp4)(j,"audio"))&&(!G||(0,O.isCodecSupportedInMp4)(G,"video"))}),S.audioTracks&&(h=S.audioTracks.filter(function(H){return!H.audioCodec||(0,O.isCodecSupportedInMp4)(H.audioCodec,"audio")}),(0,$.assignTrackIdsByGroup)(h)),S.subtitles&&(u=S.subtitles,(0,$.assignTrackIdsByGroup)(u)),f.length>0){g=f[0].bitrate,f.sort(function(H,j){return H.attrs["HDCP-LEVEL"]!==j.attrs["HDCP-LEVEL"]?(H.attrs["HDCP-LEVEL"]||"")>(j.attrs["HDCP-LEVEL"]||"")?1:-1:H.bitrate!==j.bitrate?H.bitrate-j.bitrate:H.attrs.SCORE!==j.attrs.SCORE?H.attrs.decimalFloatingPoint("SCORE")-j.attrs.decimalFloatingPoint("SCORE"):A&&H.height!==j.height?H.height-j.height:0}),this._levels=f;for(var U=0;U<f.length;U++)if(f[U].bitrate===g){this._firstLevel=U,this.log("manifest loaded, "+f.length+" level(s) found, first bitrate: "+g);break}var K=N&&!v,W={levels:f,audioTracks:h,subtitleTracks:u,sessionData:S.sessionData,sessionKeys:S.sessionKeys,firstLevel:this._firstLevel,stats:S.stats,audio:N,video:v,altAudio:!K&&h.some(function(H){return!!H.url})};this.hls.trigger(b.Events.MANIFEST_PARSED,W),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(b.Events.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:S.url,reason:"no level with compatible codecs found in manifest"})},x.onError=function(c,S){var f,h;if(p.prototype.onError.call(this,c,S),!S.fatal){var u=S.context,g=this._levels[this.currentLevelIndex];if(u&&(u.type===k.PlaylistContextType.AUDIO_TRACK&&g.audioGroupIds&&u.groupId===g.audioGroupIds[g.urlId]||u.type===k.PlaylistContextType.SUBTITLE_TRACK&&g.textGroupIds&&u.groupId===g.textGroupIds[g.urlId])){this.redundantFailover(this.currentLevelIndex);return}var s=!1,E=!0,A;switch(S.details){case B.ErrorDetails.FRAG_LOAD_ERROR:case B.ErrorDetails.FRAG_LOAD_TIMEOUT:case B.ErrorDetails.KEY_LOAD_ERROR:case B.ErrorDetails.KEY_LOAD_TIMEOUT:if(S.frag){var v=S.frag.type===k.PlaylistLevelType.MAIN?S.frag.level:this.currentLevelIndex,N=this._levels[v];N?(N.fragmentError++,N.fragmentError>this.hls.config.fragLoadingMaxRetry&&(A=v)):A=v}break;case B.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{var U=g.attrs["HDCP-LEVEL"];U&&(this.hls.maxHdcpLevel=w.HdcpLevels[w.HdcpLevels.indexOf(U)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'))}case B.ErrorDetails.FRAG_PARSING_ERROR:case B.ErrorDetails.KEY_SYSTEM_NO_SESSION:A=((f=S.frag)===null||f===void 0?void 0:f.type)===k.PlaylistLevelType.MAIN?S.frag.level:this.currentLevelIndex,S.levelRetry=!1;break;case B.ErrorDetails.LEVEL_LOAD_ERROR:case B.ErrorDetails.LEVEL_LOAD_TIMEOUT:u&&(u.deliveryDirectives&&(E=!1),A=u.level),s=!0;break;case B.ErrorDetails.REMUX_ALLOC_ERROR:A=(h=S.level)!=null?h:this.currentLevelIndex,s=!0;break}A!==void 0&&this.recoverLevel(S,A,s,E)}},x.recoverLevel=function(c,S,f,h){var u=c.details,g=this._levels[S];if(g.loadError++,f){var s=this.retryLoadingOrFail(c);if(s)c.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(h){var E=g.url.length;if(E>1&&g.loadError<E)c.levelRetry=!0,this.redundantFailover(S);else if(this.manualLevelIndex===-1){for(var A=-1,v=this._levels,N=v.length;N--;){var U=(N+this.currentLevelIndex)%v.length;if(U!==this.currentLevelIndex&&v[U].loadError===0){A=U;break}}A>-1&&this.currentLevelIndex!==A?(this.warn(u+": switch to "+A),c.levelRetry=!0,this.hls.nextAutoLevel=A):c.levelRetry===!1&&(c.fatal=!0)}}},x.redundantFailover=function(c){var S=this._levels[c],f=S.url.length;if(f>1){var h=(S.urlId+1)%f;this.warn("Switching to redundant URL-id "+h),this._levels.forEach(function(u){u.urlId=h}),this.level=c}},x.onFragLoaded=function(c,S){var f=S.frag;if(f!==void 0&&f.type===k.PlaylistLevelType.MAIN){var h=this._levels[f.level];h!==void 0&&(h.fragmentError=0,h.loadError=0)}},x.onLevelLoaded=function(c,S){var f,h=S.level,u=S.details,g=this._levels[h];if(!g){var s;this.warn("Invalid level index "+h),(s=S.deliveryDirectives)!==null&&s!==void 0&&s.skip&&(u.deltaUpdateFailed=!0);return}h===this.currentLevelIndex?(g.fragmentError===0&&(g.loadError=0,this.retryCount=0),this.playlistLoaded(h,S,g.details)):(f=S.deliveryDirectives)!==null&&f!==void 0&&f.skip&&(u.deltaUpdateFailed=!0)},x.onAudioTrackSwitched=function(c,S){var f=this.hls.levels[this.currentLevelIndex];if(!!f&&f.audioGroupIds){for(var h=-1,u=this.hls.audioTracks[S.id].groupId,g=0;g<f.audioGroupIds.length;g++)if(f.audioGroupIds[g]===u){h=g;break}h!==f.urlId&&(f.urlId=h,this.startLoad())}},x.loadPlaylist=function(c){p.prototype.loadPlaylist.call(this);var S=this.currentLevelIndex,f=this._levels[S];if(this.canLoad&&f&&f.url.length>0){var h=f.urlId,u=f.url[h];if(c)try{u=c.addDirectives(u)}catch(g){this.warn("Could not construct new URL with HLS Delivery Directives: "+g)}this.log("Attempt loading level index "+S+((c==null?void 0:c.msn)!==void 0?" at sn "+c.msn+" part "+c.part:"")+" with URL-id "+h+" "+u),this.clearTimer(),this.hls.trigger(b.Events.LEVEL_LOADING,{url:u,level:S,id:h,deliveryDirectives:c||null})}},x.removeLevel=function(c,S){var f=function(g,s){return s!==S},h=this._levels.filter(function(u,g){return g!==c?!0:u.url.length>1&&S!==void 0?(u.url=u.url.filter(f),u.audioGroupIds&&(u.audioGroupIds=u.audioGroupIds.filter(f)),u.textGroupIds&&(u.textGroupIds=u.textGroupIds.filter(f)),u.urlId=0,!0):!1}).map(function(u,g){var s=u.details;return s!=null&&s.fragments&&s.fragments.forEach(function(E){E.level=g}),u});this._levels=h,this.hls.trigger(b.Events.LEVELS_UPDATED,{levels:h})},P(C,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(c){var S,f=this._levels;if(f.length!==0&&!(this.currentLevelIndex===c&&(S=f[c])!==null&&S!==void 0&&S.details)){if(c<0||c>=f.length){var h=c<0;if(this.hls.trigger(b.Events.ERROR,{type:B.ErrorTypes.OTHER_ERROR,details:B.ErrorDetails.LEVEL_SWITCH_ERROR,level:c,fatal:h,reason:"invalid level idx"}),h)return;c=Math.min(c,f.length-1)}this.clearTimer();var u=this.currentLevelIndex,g=f[u],s=f[c];this.log("switching to level "+c+" from "+u),this.currentLevelIndex=c;var E=M({},s,{level:c,maxBitrate:s.maxBitrate,uri:s.uri,urlId:s.urlId});delete E._urlId,this.hls.trigger(b.Events.LEVEL_SWITCHING,E);var A=s.details;if(!A||A.live){var v=this.switchParams(s.uri,g==null?void 0:g.details);this.loadPlaylist(v)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(c){this.manualLevelIndex=c,this._startLevel===void 0&&(this._startLevel=c),c!==-1&&(this.level=c)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(c){this._firstLevel=c}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var c=this.hls.config.startLevel;return c!==void 0?c:this._firstLevel}else return this._startLevel},set:function(c){this._startLevel=c}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(c){this.level=c,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=c)}}]),C}(F.default)},"./src/controller/level-helper.ts":(d,D,l)=>{l.r(D),l.d(D,{addGroupId:()=>$,addSliding:()=>y,adjustSliding:()=>_,assignTrackIdsByGroup:()=>F,computeReloadInterval:()=>m,getFragmentWithSN:()=>p,getPartWith:()=>C,mapFragmentIntersection:()=>L,mapPartIntersection:()=>R,mergeDetails:()=>P,updateFragPTSDTS:()=>I,updatePTS:()=>k});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/logger.ts"),B=l("./src/loader/date-range.ts");function O(){return O=Object.assign?Object.assign.bind():function(x){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var S in c)Object.prototype.hasOwnProperty.call(c,S)&&(x[S]=c[S])}return x},O.apply(this,arguments)}function $(x,o,c){switch(o){case"audio":x.audioGroupIds||(x.audioGroupIds=[]),x.audioGroupIds.push(c);break;case"text":x.textGroupIds||(x.textGroupIds=[]),x.textGroupIds.push(c);break}}function F(x){var o={};x.forEach(function(c){var S=c.groupId||"";c.id=o[S]=o[S]||0,o[S]++})}function k(x,o,c){var S=x[o],f=x[c];M(S,f)}function M(x,o){var c=o.startPTS;if((0,w.isFiniteNumber)(c)){var S=0,f;o.sn>x.sn?(S=c-x.start,f=x):(S=x.start-c,f=o),f.duration!==S&&(f.duration=S)}else if(o.sn>x.sn){var h=x.cc===o.cc;h&&x.minEndPTS?o.start=x.start+(x.minEndPTS-x.start):o.start=x.start+x.duration}else o.start=Math.max(x.start-o.duration,0)}function I(x,o,c,S,f,h){var u=S-c;u<=0&&(b.logger.warn("Fragment should have a positive duration",o),S=c+o.duration,h=f+o.duration);var g=c,s=S,E=o.startPTS,A=o.endPTS;if((0,w.isFiniteNumber)(E)){var v=Math.abs(E-c);(0,w.isFiniteNumber)(o.deltaPTS)?o.deltaPTS=Math.max(v,o.deltaPTS):o.deltaPTS=v,g=Math.max(c,E),c=Math.min(c,E),f=Math.min(f,o.startDTS),s=Math.min(S,A),S=Math.max(S,A),h=Math.max(h,o.endDTS)}o.duration=S-c;var N=c-o.start;o.start=o.startPTS=c,o.maxStartPTS=g,o.startDTS=f,o.endPTS=S,o.minEndPTS=s,o.endDTS=h;var U=o.sn;if(!x||U<x.startSN||U>x.endSN)return 0;var K,W=U-x.startSN,H=x.fragments;for(H[W]=o,K=W;K>0;K--)M(H[K],H[K-1]);for(K=W;K<H.length-1;K++)M(H[K],H[K+1]);return x.fragmentHint&&M(H[H.length-1],x.fragmentHint),x.PTSKnown=x.alignedSliding=!0,N}function P(x,o){for(var c=null,S=x.fragments,f=S.length-1;f>=0;f--){var h=S[f].initSegment;if(h){c=h;break}}x.fragmentHint&&delete x.fragmentHint.endPTS;var u=0,g;if(L(x,o,function(K,W){K.relurl&&(u=K.cc-W.cc),(0,w.isFiniteNumber)(K.startPTS)&&(0,w.isFiniteNumber)(K.endPTS)&&(W.start=W.startPTS=K.startPTS,W.startDTS=K.startDTS,W.appendedPTS=K.appendedPTS,W.maxStartPTS=K.maxStartPTS,W.endPTS=K.endPTS,W.endDTS=K.endDTS,W.minEndPTS=K.minEndPTS,W.duration=K.endPTS-K.startPTS,W.duration&&(g=W),o.PTSKnown=o.alignedSliding=!0),W.elementaryStreams=K.elementaryStreams,W.loader=K.loader,W.stats=K.stats,W.urlId=K.urlId,K.initSegment&&(W.initSegment=K.initSegment,c=K.initSegment)}),c){var s=o.fragmentHint?o.fragments.concat(o.fragmentHint):o.fragments;s.forEach(function(K){var W;(!K.initSegment||K.initSegment.relurl===((W=c)===null||W===void 0?void 0:W.relurl))&&(K.initSegment=c)})}if(o.skippedSegments)if(o.deltaUpdateFailed=o.fragments.some(function(K){return!K}),o.deltaUpdateFailed){b.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var E=o.skippedSegments;E--;)o.fragments.shift();o.startSN=o.fragments[0].sn,o.startCC=o.fragments[0].cc}else o.canSkipDateRanges&&(o.dateRanges=T(x.dateRanges,o.dateRanges,o.recentlyRemovedDateranges));var A=o.fragments;if(u){b.logger.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<A.length;v++)A[v].cc+=u}o.skippedSegments&&(o.startCC=o.fragments[0].cc),R(x.partList,o.partList,function(K,W){W.elementaryStreams=K.elementaryStreams,W.stats=K.stats}),g?I(o,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):_(x,o),A.length&&(o.totalduration=o.edge-A[0].start),o.driftStartTime=x.driftStartTime,o.driftStart=x.driftStart;var N=o.advancedDateTime;if(o.advanced&&N){var U=o.edge;o.driftStart||(o.driftStartTime=N,o.driftStart=U),o.driftEndTime=N,o.driftEnd=U}else o.driftEndTime=x.driftEndTime,o.driftEnd=x.driftEnd,o.advancedDateTime=x.advancedDateTime}function T(x,o,c){var S=O({},x);return c&&c.forEach(function(f){delete S[f]}),Object.keys(o).forEach(function(f){var h=new B.DateRange(o[f].attr,S[f]);h.isValid?S[f]=h:b.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(o[f].attr)+'"')}),S}function R(x,o,c){if(x&&o)for(var S=0,f=0,h=x.length;f<=h;f++){var u=x[f],g=o[f+S];u&&g&&u.index===g.index&&u.fragment.sn===g.fragment.sn?c(u,g):S--}}function L(x,o,c){for(var S=o.skippedSegments,f=Math.max(x.startSN,o.startSN)-o.startSN,h=(x.fragmentHint?1:0)+(S?o.endSN:Math.min(x.endSN,o.endSN))-o.startSN,u=o.startSN-x.startSN,g=o.fragmentHint?o.fragments.concat(o.fragmentHint):o.fragments,s=x.fragmentHint?x.fragments.concat(x.fragmentHint):x.fragments,E=f;E<=h;E++){var A=s[u+E],v=g[E];S&&!v&&E<S&&(v=o.fragments[E]=A),A&&v&&c(A,v)}}function _(x,o){var c=o.startSN+o.skippedSegments-x.startSN,S=x.fragments;c<0||c>=S.length||y(o,S[c].start)}function y(x,o){if(o){for(var c=x.fragments,S=x.skippedSegments;S<c.length;S++)c[S].start+=o;x.fragmentHint&&(x.fragmentHint.start+=o)}}function m(x,o){o===void 0&&(o=1/0);var c=1e3*x.targetduration;if(x.updated){var S=x.fragments,f=4;if(S.length&&c*f>o){var h=S[S.length-1].duration*1e3;h<c&&(c=h)}}else c/=2;return Math.round(c)}function p(x,o,c){if(!x||!x.details)return null;var S=x.details,f=S.fragments[o-S.startSN];return f||(f=S.fragmentHint,f&&f.sn===o)?f:o<S.startSN&&c&&c.sn===o?c:null}function C(x,o,c){if(!x||!x.details)return null;var S=x.details.partList;if(S)for(var f=S.length;f--;){var h=S[f];if(h.index===c&&h.fragment.sn===o)return h}return null}},"./src/controller/stream-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>o});var w=l("./src/polyfills/number.ts"),b=l("./src/controller/base-stream-controller.ts"),B=l("./src/is-supported.ts"),O=l("./src/events.ts"),$=l("./src/utils/buffer-helper.ts"),F=l("./src/controller/fragment-tracker.ts"),k=l("./src/types/loader.ts"),M=l("./src/loader/fragment.ts"),I=l("./src/demux/transmuxer-interface.ts"),P=l("./src/types/transmuxer.ts"),T=l("./src/controller/gap-controller.ts"),R=l("./src/errors.ts");function L(c,S){for(var f=0;f<S.length;f++){var h=S[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,y(h.key),h)}}function _(c,S,f){return S&&L(c.prototype,S),f&&L(c,f),Object.defineProperty(c,"prototype",{writable:!1}),c}function y(c){var S=m(c,"string");return typeof S=="symbol"?S:String(S)}function m(c,S){if(typeof c!="object"||c===null)return c;var f=c[Symbol.toPrimitive];if(f!==void 0){var h=f.call(c,S||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(c)}function p(c,S){c.prototype=Object.create(S.prototype),c.prototype.constructor=c,C(c,S)}function C(c,S){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,u){return h.__proto__=u,h},C(c,S)}var x=100,o=function(c){p(S,c);function S(h,u,g){var s;return s=c.call(this,h,u,g,"[stream-controller]")||this,s.audioCodecSwap=!1,s.gapController=null,s.level=-1,s._forceStartLoad=!1,s.altAudio=!1,s.audioOnly=!1,s.fragPlaying=null,s.onvplaying=null,s.onvseeked=null,s.fragLastKbps=0,s.couldBacktrack=!1,s.backtrackFragment=null,s.audioCodecSwitch=!1,s.videoBuffer=null,s._registerListeners(),s}var f=S.prototype;return f._registerListeners=function(){var u=this.hls;u.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(O.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(O.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.on(O.Events.ERROR,this.onError,this),u.on(O.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(O.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.on(O.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(O.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(O.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.on(O.Events.FRAG_BUFFERED,this.onFragBuffered,this)},f._unregisterListeners=function(){var u=this.hls;u.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(O.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.off(O.Events.ERROR,this.onError,this),u.off(O.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(O.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.off(O.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(O.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(O.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.off(O.Events.FRAG_BUFFERED,this.onFragBuffered,this)},f.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},f.startLoad=function(u){if(this.levels){var g=this.lastCurrentTime,s=this.hls;if(this.stopLoad(),this.setInterval(x),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var E=s.startLevel;E===-1&&(s.config.testBandwidth&&this.levels.length>1?(E=0,this.bitrateTest=!0):E=s.nextAutoLevel),this.level=s.nextLoadLevel=E,this.loadedmetadata=!1}g>0&&u===-1&&(this.log("Override startPosition with lastCurrentTime @"+g.toFixed(3)),u=g),this.state=b.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()}else this._forceStartLoad=!0,this.state=b.State.STOPPED},f.stopLoad=function(){this._forceStartLoad=!1,c.prototype.stopLoad.call(this)},f.doTick=function(){switch(this.state){case b.State.IDLE:this.doTickIdle();break;case b.State.WAITING_LEVEL:{var u,g=this.levels,s=this.level,E=g==null||(u=g[s])===null||u===void 0?void 0:u.details;if(E&&(!E.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(E))break;this.state=b.State.IDLE;break}break}case b.State.FRAG_LOADING_WAITING_RETRY:{var A,v=self.performance.now(),N=this.retryDate;(!N||v>=N||(A=this.media)!==null&&A!==void 0&&A.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=b.State.IDLE)}break}this.onTickEnd()},f.onTickEnd=function(){c.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},f.doTickIdle=function(){var u=this.hls,g=this.levelLastLoaded,s=this.levels,E=this.media,A=u.config,v=u.nextLoadLevel;if(!(g===null||!E&&(this.startFragRequested||!A.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!s||!s[v])){var N=s[v],U=this.getMainFwdBufferInfo();if(U!==null){var K=this.getLevelDetails();if(K&&this._streamEnded(U,K)){var W={};this.altAudio&&(W.type="video"),this.hls.trigger(O.Events.BUFFER_EOS,W),this.state=b.State.ENDED;return}this.level=u.nextLoadLevel=v;var H=N.details;if(!H||this.state===b.State.WAITING_LEVEL||H.live&&this.levelLastLoaded!==v){this.level=v,this.state=b.State.WAITING_LEVEL;return}var j=U.len,G=this.getMaxBufferLength(N.maxBitrate);if(!(j>=G)){this.backtrackFragment&&this.backtrackFragment.start>U.end&&(this.backtrackFragment=null);var z=this.backtrackFragment?this.backtrackFragment.start:U.end,Y=this.getNextFragment(z,H);if(this.couldBacktrack&&!this.fragPrevious&&Y&&Y.sn!=="initSegment"&&this.fragmentTracker.getState(Y)!==F.FragmentState.OK){var X,Q=((X=this.backtrackFragment)!=null?X:Y).sn,q=Q-H.startSN,J=H.fragments[q-1];J&&Y.cc===J.cc&&(Y=J,this.fragmentTracker.removeFragment(J))}else this.backtrackFragment&&U.len&&(this.backtrackFragment=null);if(Y&&this.fragmentTracker.getState(Y)===F.FragmentState.OK&&this.nextLoadPosition>z){var ee=this.audioOnly&&!this.altAudio?M.ElementaryStreamTypes.AUDIO:M.ElementaryStreamTypes.VIDEO,re=(ee===M.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;re&&this.afterBufferFlushed(re,ee,k.PlaylistLevelType.MAIN),Y=this.getNextFragment(this.nextLoadPosition,H)}!Y||(Y.initSegment&&!Y.initSegment.data&&!this.bitrateTest&&(Y=Y.initSegment),this.loadFragment(Y,H,z))}}}},f.loadFragment=function(u,g,s){var E,A=this.fragmentTracker.getState(u);this.fragCurrent=u,A===F.FragmentState.NOT_LOADED?u.sn==="initSegment"?this._loadInitSegment(u,g):this.bitrateTest?(this.log("Fragment "+u.sn+" of level "+u.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(u,g)):(this.startFragRequested=!0,c.prototype.loadFragment.call(this,u,g,s)):A===F.FragmentState.APPENDING?this.reduceMaxBufferLength(u.duration)&&this.fragmentTracker.removeFragment(u):((E=this.media)===null||E===void 0?void 0:E.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},f.getAppendedFrag=function(u){var g=this.fragmentTracker.getAppendedFrag(u,k.PlaylistLevelType.MAIN);return g&&"fragment"in g?g.fragment:g},f.getBufferedFrag=function(u){return this.fragmentTracker.getBufferedFrag(u,k.PlaylistLevelType.MAIN)},f.followingBufferedFrag=function(u){return u?this.getBufferedFrag(u.end+.5):null},f.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},f.nextLevelSwitch=function(){var u=this.levels,g=this.media;if(g!=null&&g.readyState){var s,E=this.getAppendedFrag(g.currentTime);if(E&&E.start>1&&this.flushMainBuffer(0,E.start-1),!g.paused&&u){var A=this.hls.nextLoadLevel,v=u[A],N=this.fragLastKbps;N&&this.fragCurrent?s=this.fragCurrent.duration*v.maxBitrate/(1e3*N)+1:s=0}else s=0;var U=this.getBufferedFrag(g.currentTime+s);if(U){var K=this.followingBufferedFrag(U);if(K){this.abortCurrentFrag();var W=K.maxStartPTS?K.maxStartPTS:K.start,H=K.duration,j=Math.max(U.end,W+Math.min(Math.max(H-this.config.maxFragLookUpTolerance,H*.5),H*.75));this.flushMainBuffer(j,Number.POSITIVE_INFINITY)}}}},f.abortCurrentFrag=function(){var u=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,u&&u.abortRequests(),this.state){case b.State.KEY_LOADING:case b.State.FRAG_LOADING:case b.State.FRAG_LOADING_WAITING_RETRY:case b.State.PARSING:case b.State.PARSED:this.state=b.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},f.flushMainBuffer=function(u,g){c.prototype.flushMainBuffer.call(this,u,g,this.altAudio?"video":null)},f.onMediaAttached=function(u,g){c.prototype.onMediaAttached.call(this,u,g);var s=g.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),s.addEventListener("playing",this.onvplaying),s.addEventListener("seeked",this.onvseeked),this.gapController=new T.default(this.config,s,this.fragmentTracker,this.hls)},f.onMediaDetaching=function(){var u=this.media;u&&this.onvplaying&&this.onvseeked&&(u.removeEventListener("playing",this.onvplaying),u.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),c.prototype.onMediaDetaching.call(this)},f.onMediaPlaying=function(){this.tick()},f.onMediaSeeked=function(){var u=this.media,g=u?u.currentTime:null;(0,w.isFiniteNumber)(g)&&this.log("Media seeked to "+g.toFixed(3)),this.tick()},f.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(O.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},f.onManifestParsed=function(u,g){var s=!1,E=!1,A;g.levels.forEach(function(v){A=v.audioCodec,A&&(A.indexOf("mp4a.40.2")!==-1&&(s=!0),A.indexOf("mp4a.40.5")!==-1&&(E=!0))}),this.audioCodecSwitch=s&&E&&!(0,B.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=g.levels,this.startFragRequested=!1},f.onLevelLoading=function(u,g){var s=this.levels;if(!(!s||this.state!==b.State.IDLE)){var E=s[g.level];(!E.details||E.details.live&&this.levelLastLoaded!==g.level||this.waitForCdnTuneIn(E.details))&&(this.state=b.State.WAITING_LEVEL)}},f.onLevelLoaded=function(u,g){var s,E=this.levels,A=g.level,v=g.details,N=v.totalduration;if(!E){this.warn("Levels were reset while loading level "+A);return}this.log("Level "+A+" loaded ["+v.startSN+","+v.endSN+"], cc ["+v.startCC+", "+v.endCC+"] duration:"+N);var U=this.fragCurrent;U&&(this.state===b.State.FRAG_LOADING||this.state===b.State.FRAG_LOADING_WAITING_RETRY)&&U.level!==g.level&&U.loader&&(this.state=b.State.IDLE,this.backtrackFragment=null,U.abortRequests());var K=E[A],W=0;if(v.live||(s=K.details)!==null&&s!==void 0&&s.live){if(v.fragments[0]||(v.deltaUpdateFailed=!0),v.deltaUpdateFailed)return;W=this.alignPlaylists(v,K.details)}if(K.details=v,this.levelLastLoaded=A,this.hls.trigger(O.Events.LEVEL_UPDATED,{details:v,level:A}),this.state===b.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(v))return;this.state=b.State.IDLE}this.startFragRequested?v.live&&this.synchronizeToLiveEdge(v):this.setStartPosition(v,W),this.tick()},f._handleFragmentLoadProgress=function(u){var g,s=u.frag,E=u.part,A=u.payload,v=this.levels;if(!v){this.warn("Levels were reset while fragment load was in progress. Fragment "+s.sn+" of level "+s.level+" will not be buffered");return}var N=v[s.level],U=N.details;if(!U){this.warn("Dropping fragment "+s.sn+" of level "+s.level+" after level details were reset");return}var K=N.videoCodec,W=U.PTSKnown||!U.live,H=(g=s.initSegment)===null||g===void 0?void 0:g.data,j=this._getAudioCodec(N),G=this.transmuxer=this.transmuxer||new I.default(this.hls,k.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),z=E?E.index:-1,Y=z!==-1,X=new P.ChunkMetadata(s.level,s.sn,s.stats.chunkCount,A.byteLength,z,Y),Q=this.initPTS[s.cc];G.push(A,H,j,K,s,E,U.totalduration,W,X,Q)},f.onAudioTrackSwitching=function(u,g){var s=this.altAudio,E=!!g.url,A=g.id;if(!E){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var v=this.fragCurrent;v&&(this.log("Switching to main audio track, cancel main fragment load"),v.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var N=this.hls;s&&N.trigger(O.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),N.trigger(O.Events.AUDIO_TRACK_SWITCHED,{id:A})}},f.onAudioTrackSwitched=function(u,g){var s=g.id,E=!!this.hls.audioTracks[s].url;if(E){var A=this.videoBuffer;A&&this.mediaBuffer!==A&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=A)}this.altAudio=E,this.tick()},f.onBufferCreated=function(u,g){var s=g.tracks,E,A,v=!1;for(var N in s){var U=s[N];if(U.id==="main"){if(A=N,E=U,N==="video"){var K=s[N];K&&(this.videoBuffer=K.buffer)}}else v=!0}v&&E?(this.log("Alternate track found, use "+A+".buffered to schedule main fragment loading"),this.mediaBuffer=E.buffer):this.mediaBuffer=this.media},f.onFragBuffered=function(u,g){var s=g.frag,E=g.part;if(!(s&&s.type!==k.PlaylistLevelType.MAIN)){if(this.fragContextChanged(s)){this.warn("Fragment "+s.sn+(E?" p: "+E.index:"")+" of level "+s.level+" finished buffering, but was aborted. state: "+this.state),this.state===b.State.PARSED&&(this.state=b.State.IDLE);return}var A=E?E.stats:s.stats;this.fragLastKbps=Math.round(8*A.total/(A.buffering.end-A.loading.first)),s.sn!=="initSegment"&&(this.fragPrevious=s),this.fragBufferedComplete(s,E)}},f.onError=function(u,g){if(g.type===R.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,g);return}switch(g.details){case R.ErrorDetails.FRAG_LOAD_ERROR:case R.ErrorDetails.FRAG_LOAD_TIMEOUT:case R.ErrorDetails.FRAG_PARSING_ERROR:case R.ErrorDetails.KEY_LOAD_ERROR:case R.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,g);break;case R.ErrorDetails.LEVEL_LOAD_ERROR:case R.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==b.State.ERROR&&(g.fatal?(this.warn(""+g.details),this.state=b.State.ERROR):!g.levelRetry&&this.state===b.State.WAITING_LEVEL&&(this.state=b.State.IDLE));break;case R.ErrorDetails.BUFFER_FULL_ERROR:if(g.parent==="main"&&(this.state===b.State.PARSING||this.state===b.State.PARSED)){var s=!0,E=this.getFwdBufferInfo(this.media,k.PlaylistLevelType.MAIN);E&&E.len>.5&&(s=!this.reduceMaxBufferLength(E.len)),s&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},f.checkBuffer=function(){var u=this.media,g=this.gapController;if(!(!u||!g||!u.readyState)){if(this.loadedmetadata||!$.BufferHelper.getBuffered(u).length){var s=this.state!==b.State.IDLE?this.fragCurrent:null;g.poll(this.lastCurrentTime,s)}this.lastCurrentTime=u.currentTime}},f.onFragLoadEmergencyAborted=function(){this.state=b.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},f.onBufferFlushed=function(u,g){var s=g.type;if(s!==M.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var E=(s===M.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(E,s,k.PlaylistLevelType.MAIN)}},f.onLevelsUpdated=function(u,g){this.levels=g.levels},f.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},f.seekToStartPos=function(){var u=this.media;if(!!u){var g=u.currentTime,s=this.startPosition;if(s>=0&&g<s){if(u.seeking){this.log("could not seek to "+s+", already seeking at "+g);return}var E=$.BufferHelper.getBuffered(u),A=E.length?E.start(0):0,v=A-s;v>0&&(v<this.config.maxBufferHole||v<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+v+" to match buffer start"),s+=v,this.startPosition=s),this.log("seek to target start position "+s+" from current time "+g),u.currentTime=s}}},f._getAudioCodec=function(u){var g=this.config.defaultAudioCodec||u.audioCodec;return this.audioCodecSwap&&g&&(this.log("Swapping audio codec"),g.indexOf("mp4a.40.5")!==-1?g="mp4a.40.2":g="mp4a.40.5"),g},f._loadBitrateTestFrag=function(u,g){var s=this;u.bitrateTest=!0,this._doFragLoad(u,g).then(function(E){var A=s.hls;if(!(!E||s.fragContextChanged(u))){s.fragLoadError=0,s.state=b.State.IDLE,s.startFragRequested=!1,s.bitrateTest=!1;var v=u.stats;v.parsing.start=v.parsing.end=v.buffering.start=v.buffering.end=self.performance.now(),A.trigger(O.Events.FRAG_LOADED,E),u.bitrateTest=!1}})},f._handleTransmuxComplete=function(u){var g,s="main",E=this.hls,A=u.remuxResult,v=u.chunkMeta,N=this.getCurrentContext(v);if(!N){this.warn("The loading context changed while buffering fragment "+v.sn+" of level "+v.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(v.level);return}var U=N.frag,K=N.part,W=N.level,H=A.video,j=A.text,G=A.id3,z=A.initSegment,Y=W.details,X=this.altAudio?void 0:A.audio;if(!this.fragContextChanged(U)){if(this.state=b.State.PARSING,z){z.tracks&&(this._bufferInitSegment(W,z.tracks,U,v),E.trigger(O.Events.FRAG_PARSING_INIT_SEGMENT,{frag:U,id:s,tracks:z.tracks}));var Q=z.initPTS,q=z.timescale;(0,w.isFiniteNumber)(Q)&&(this.initPTS[U.cc]=Q,E.trigger(O.Events.INIT_PTS_FOUND,{frag:U,id:s,initPTS:Q,timescale:q}))}if(H&&A.independent!==!1){if(Y){var J=H.startPTS,ee=H.endPTS,re=H.startDTS,oe=H.endDTS;if(K)K.elementaryStreams[H.type]={startPTS:J,endPTS:ee,startDTS:re,endDTS:oe};else if(H.firstKeyFrame&&H.independent&&v.id===1&&(this.couldBacktrack=!0),H.dropped&&H.independent){var ne=this.getMainFwdBufferInfo(),te=(ne?ne.end:this.getLoadPosition())+this.config.maxBufferHole,ue=H.firstKeyFramePTS?H.firstKeyFramePTS:J;if(te<ue-this.config.maxBufferHole){this.backtrack(U);return}U.setElementaryStreamInfo(H.type,U.start,ee,U.start,oe,!0)}U.setElementaryStreamInfo(H.type,J,ee,re,oe),this.backtrackFragment&&(this.backtrackFragment=U),this.bufferFragmentData(H,U,K,v)}}else if(A.independent===!1){this.backtrack(U);return}if(X){var he=X.startPTS,pe=X.endPTS,Re=X.startDTS,Te=X.endDTS;K&&(K.elementaryStreams[M.ElementaryStreamTypes.AUDIO]={startPTS:he,endPTS:pe,startDTS:Re,endDTS:Te}),U.setElementaryStreamInfo(M.ElementaryStreamTypes.AUDIO,he,pe,Re,Te),this.bufferFragmentData(X,U,K,v)}if(Y&&G!==null&&G!==void 0&&(g=G.samples)!==null&&g!==void 0&&g.length){var Oe={id:s,frag:U,details:Y,samples:G.samples};E.trigger(O.Events.FRAG_PARSING_METADATA,Oe)}if(Y&&j){var ye={id:s,frag:U,details:Y,samples:j.samples};E.trigger(O.Events.FRAG_PARSING_USERDATA,ye)}}},f._bufferInitSegment=function(u,g,s,E){var A=this;if(this.state===b.State.PARSING){this.audioOnly=!!g.audio&&!g.video,this.altAudio&&!this.audioOnly&&delete g.audio;var v=g.audio,N=g.video,U=g.audiovideo;if(v){var K=u.audioCodec,W=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(K&&(K.indexOf("mp4a.40.5")!==-1?K="mp4a.40.2":K="mp4a.40.5"),v.metadata.channelCount!==1&&W.indexOf("firefox")===-1&&(K="mp4a.40.5")),W.indexOf("android")!==-1&&v.container!=="audio/mpeg"&&(K="mp4a.40.2",this.log("Android: force audio codec to "+K)),u.audioCodec&&u.audioCodec!==K&&this.log('Swapping manifest audio codec "'+u.audioCodec+'" for "'+K+'"'),v.levelCodec=K,v.id="main",this.log("Init audio buffer, container:"+v.container+", codecs[selected/level/parsed]=["+(K||"")+"/"+(u.audioCodec||"")+"/"+v.codec+"]")}N&&(N.levelCodec=u.videoCodec,N.id="main",this.log("Init video buffer, container:"+N.container+", codecs[level/parsed]=["+(u.videoCodec||"")+"/"+N.codec+"]")),U&&this.log("Init audiovideo buffer, container:"+U.container+", codecs[level/parsed]=["+(u.attrs.CODECS||"")+"/"+U.codec+"]"),this.hls.trigger(O.Events.BUFFER_CODECS,g),Object.keys(g).forEach(function(H){var j=g[H],G=j.initSegment;G!=null&&G.byteLength&&A.hls.trigger(O.Events.BUFFER_APPENDING,{type:H,data:G,frag:s,part:null,chunkMeta:E,parent:s.type})}),this.tick()}},f.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,k.PlaylistLevelType.MAIN)},f.backtrack=function(u){this.couldBacktrack=!0,this.backtrackFragment=u,this.resetTransmuxer(),this.flushBufferGap(u),this.fragmentTracker.removeFragment(u),this.fragPrevious=null,this.nextLoadPosition=u.start,this.state=b.State.IDLE},f.checkFragmentChanged=function(){var u=this.media,g=null;if(u&&u.readyState>1&&u.seeking===!1){var s=u.currentTime;if($.BufferHelper.isBuffered(u,s)?g=this.getAppendedFrag(s):$.BufferHelper.isBuffered(u,s+.1)&&(g=this.getAppendedFrag(s+.1)),g){this.backtrackFragment=null;var E=this.fragPlaying,A=g.level;(!E||g.sn!==E.sn||E.level!==A||g.urlId!==E.urlId)&&(this.fragPlaying=g,this.hls.trigger(O.Events.FRAG_CHANGED,{frag:g}),(!E||E.level!==A)&&this.hls.trigger(O.Events.LEVEL_SWITCHED,{level:A}))}}},_(S,[{key:"nextLevel",get:function(){var u=this.nextBufferedFrag;return u?u.level:-1}},{key:"currentFrag",get:function(){var u=this.media;return u?this.fragPlaying||this.getAppendedFrag(u.currentTime):null}},{key:"currentProgramDateTime",get:function(){var u=this.media;if(u){var g=u.currentTime,s=this.currentFrag;if(s&&(0,w.isFiniteNumber)(g)&&(0,w.isFiniteNumber)(s.programDateTime)){var E=s.programDateTime+(g-s.start)*1e3;return new Date(E)}}return null}},{key:"currentLevel",get:function(){var u=this.currentFrag;return u?u.level:-1}},{key:"nextBufferedFrag",get:function(){var u=this.currentFrag;return u?this.followingBufferedFrag(u):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),S}(b.default)},"./src/controller/subtitle-stream-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{SubtitleStreamController:()=>p});var w=l("./src/events.ts"),b=l("./src/utils/buffer-helper.ts"),B=l("./src/controller/fragment-finders.ts"),O=l("./src/utils/discontinuities.ts"),$=l("./src/controller/level-helper.ts"),F=l("./src/controller/fragment-tracker.ts"),k=l("./src/controller/base-stream-controller.ts"),M=l("./src/types/loader.ts"),I=l("./src/types/level.ts");function P(x,o){for(var c=0;c<o.length;c++){var S=o[c];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,R(S.key),S)}}function T(x,o,c){return o&&P(x.prototype,o),c&&P(x,c),Object.defineProperty(x,"prototype",{writable:!1}),x}function R(x){var o=L(x,"string");return typeof o=="symbol"?o:String(o)}function L(x,o){if(typeof x!="object"||x===null)return x;var c=x[Symbol.toPrimitive];if(c!==void 0){var S=c.call(x,o||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(x)}function _(x,o){x.prototype=Object.create(o.prototype),x.prototype.constructor=x,y(x,o)}function y(x,o){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,f){return S.__proto__=f,S},y(x,o)}var m=500,p=function(x){_(o,x);function o(S,f,h){var u;return u=x.call(this,S,f,h,"[subtitle-stream-controller]")||this,u.levels=[],u.currentTrackId=-1,u.tracksBuffered=[],u.mainDetails=null,u._registerListeners(),u}var c=o.prototype;return c.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},c._registerListeners=function(){var f=this.hls;f.on(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(w.Events.LEVEL_LOADED,this.onLevelLoaded,this),f.on(w.Events.ERROR,this.onError,this),f.on(w.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.on(w.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),f.on(w.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.on(w.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),f.on(w.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.on(w.Events.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var f=this.hls;f.off(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(w.Events.LEVEL_LOADED,this.onLevelLoaded,this),f.off(w.Events.ERROR,this.onError,this),f.off(w.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.off(w.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),f.off(w.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.off(w.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),f.off(w.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.off(w.Events.FRAG_BUFFERED,this.onFragBuffered,this)},c.startLoad=function(f){this.stopLoad(),this.state=k.State.IDLE,this.setInterval(m),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=f,this.tick()},c.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},c.onLevelLoaded=function(f,h){this.mainDetails=h.details},c.onSubtitleFragProcessed=function(f,h){var u=h.frag,g=h.success;if(this.fragPrevious=u,this.state=k.State.IDLE,!!g){var s=this.tracksBuffered[this.currentTrackId];if(!!s){for(var E,A=u.start,v=0;v<s.length;v++)if(A>=s[v].start&&A<=s[v].end){E=s[v];break}var N=u.start+u.duration;E?E.end=N:(E={start:A,end:N},s.push(E)),this.fragmentTracker.fragBuffered(u)}}},c.onBufferFlushing=function(f,h){var u=h.startOffset,g=h.endOffset;if(u===0&&g!==Number.POSITIVE_INFINITY){var s=this.currentTrackId,E=this.levels;if(!E.length||!E[s]||!E[s].details)return;var A=E[s].details,v=A.targetduration,N=g-v;if(N<=0)return;h.endOffsetSubtitles=Math.max(0,N),this.tracksBuffered.forEach(function(U){for(var K=0;K<U.length;){if(U[K].end<=N){U.shift();continue}else if(U[K].start<N)U[K].start=N;else break;K++}}),this.fragmentTracker.removeFragmentsInRange(u,N,M.PlaylistLevelType.SUBTITLE)}},c.onFragBuffered=function(f,h){if(!this.loadedmetadata&&h.frag.type===M.PlaylistLevelType.MAIN){var u;(u=this.media)!==null&&u!==void 0&&u.buffered.length&&(this.loadedmetadata=!0)}},c.onError=function(f,h){var u=h.frag;!u||u.type!==M.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=k.State.IDLE)},c.onSubtitleTracksUpdated=function(f,h){var u=this,g=h.subtitleTracks;this.tracksBuffered=[],this.levels=g.map(function(s){return new I.Level(s)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(s){u.tracksBuffered[s.id]=[]}),this.mediaBuffer=null},c.onSubtitleTrackSwitch=function(f,h){if(this.currentTrackId=h.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var u=this.levels[this.currentTrackId];u!=null&&u.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,u&&this.setInterval(m)},c.onSubtitleTrackLoaded=function(f,h){var u,g=h.details,s=h.id,E=this.currentTrackId,A=this.levels;if(!!A.length){var v=A[E];if(!(s>=A.length||s!==E||!v)){this.mediaBuffer=this.mediaBufferTimeRanges;var N=0;if(g.live||(u=v.details)!==null&&u!==void 0&&u.live){var U=this.mainDetails;if(g.deltaUpdateFailed||!U)return;var K=U.fragments[0];v.details?(N=this.alignPlaylists(g,v.details),N===0&&K&&(N=K.start,(0,$.addSliding)(g,N))):g.hasProgramDateTime&&U.hasProgramDateTime?((0,O.alignMediaPlaylistByPDT)(g,U),N=g.fragments[0].start):K&&(N=K.start,(0,$.addSliding)(g,N))}if(v.details=g,this.levelLastLoaded=s,!this.startFragRequested&&(this.mainDetails||!g.live)&&this.setStartPosition(v.details,N),this.tick(),g.live&&!this.fragCurrent&&this.media&&this.state===k.State.IDLE){var W=(0,B.findFragmentByPTS)(null,g.fragments,this.media.currentTime,0);W||(this.warn("Subtitle playlist not aligned with playback"),v.details=void 0)}}}},c._handleFragmentLoadComplete=function(f){var h=this,u=f.frag,g=f.payload,s=u.decryptdata,E=this.hls;if(!this.fragContextChanged(u)&&g&&g.byteLength>0&&s&&s.key&&s.iv&&s.method==="AES-128"){var A=performance.now();this.decrypter.decrypt(new Uint8Array(g),s.key.buffer,s.iv.buffer).then(function(v){var N=performance.now();E.trigger(w.Events.FRAG_DECRYPTED,{frag:u,payload:v,stats:{tstart:A,tdecrypt:N}})}).catch(function(v){h.warn(v.name+": "+v.message),h.state=k.State.IDLE})}},c.doTick=function(){if(!this.media){this.state=k.State.IDLE;return}if(this.state===k.State.IDLE){var f=this.currentTrackId,h=this.levels;if(!h.length||!h[f]||!h[f].details)return;var u=h[f].details,g=u.targetduration,s=this.config,E=this.getLoadPosition(),A=b.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],E-g,s.maxBufferHole),v=A.end,N=A.len,U=this.getFwdBufferInfo(this.media,M.PlaylistLevelType.MAIN),K=this.getMaxBufferLength(U==null?void 0:U.len)+g;if(N>K)return;console.assert(u,"Subtitle track details are defined on idle subtitle stream controller tick");var W=u.fragments,H=W.length,j=u.edge,G=null,z=this.fragPrevious;if(v<j){var Y=s.maxFragLookUpTolerance;G=(0,B.findFragmentByPTS)(z,W,Math.max(W[0].start,v),Y),!G&&z&&z.start<W[0].start&&(G=W[0])}else G=W[H-1];if(!G)return;G=this.mapToInitFragWhenRequired(G),this.fragmentTracker.getState(G)===F.FragmentState.NOT_LOADED&&this.loadFragment(G,u,v)}},c.getMaxBufferLength=function(f){var h=x.prototype.getMaxBufferLength.call(this);return f?Math.max(h,f):h},c.loadFragment=function(f,h,u){this.fragCurrent=f,f.sn==="initSegment"?this._loadInitSegment(f,h):(this.startFragRequested=!0,x.prototype.loadFragment.call(this,f,h,u))},T(o,[{key:"mediaBufferTimeRanges",get:function(){return new C(this.tracksBuffered[this.currentTrackId]||[])}}]),o}(k.default),C=function(o){this.buffered=void 0;var c=function(f,h,u){if(h=h>>>0,h>u-1)throw new DOMException("Failed to execute '"+f+"' on 'TimeRanges': The index provided ("+h+") is greater than the maximum bound ("+u+")");return o[h][f]};this.buffered={get length(){return o.length},end:function(f){return c("end",f,o.length)},start:function(f){return c("start",f,o.length)}}}},"./src/controller/subtitle-track-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>L});var w=l("./src/events.ts"),b=l("./src/utils/texttrack-utils.ts"),B=l("./src/controller/base-playlist-controller.ts"),O=l("./src/types/loader.ts");function $(_,y){for(var m=0;m<y.length;m++){var p=y[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,k(p.key),p)}}function F(_,y,m){return y&&$(_.prototype,y),m&&$(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function k(_){var y=M(_,"string");return typeof y=="symbol"?y:String(y)}function M(_,y){if(typeof _!="object"||_===null)return _;var m=_[Symbol.toPrimitive];if(m!==void 0){var p=m.call(_,y||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(_)}function I(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,P(_,y)}function P(_,y){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,C){return p.__proto__=C,p},P(_,y)}var T=function(_){I(y,_);function y(p){var C;return C=_.call(this,p,"[subtitle-track-controller]")||this,C.media=null,C.tracks=[],C.groupId=null,C.tracksInGroup=[],C.trackId=-1,C.selectDefaultTrack=!0,C.queuedDefaultTrack=-1,C.trackChangeListener=function(){return C.onTextTracksChanged()},C.asyncPollTrackChange=function(){return C.pollTrackChange(0)},C.useTextTrackPolling=!1,C.subtitlePollingInterval=-1,C._subtitleDisplay=!0,C.registerListeners(),C}var m=y.prototype;return m.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,_.prototype.destroy.call(this)},m.registerListeners=function(){var C=this.hls;C.on(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),C.on(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this),C.on(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),C.on(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),C.on(w.Events.LEVEL_LOADING,this.onLevelLoading,this),C.on(w.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),C.on(w.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),C.on(w.Events.ERROR,this.onError,this)},m.unregisterListeners=function(){var C=this.hls;C.off(w.Events.MEDIA_ATTACHED,this.onMediaAttached,this),C.off(w.Events.MEDIA_DETACHING,this.onMediaDetaching,this),C.off(w.Events.MANIFEST_LOADING,this.onManifestLoading,this),C.off(w.Events.MANIFEST_PARSED,this.onManifestParsed,this),C.off(w.Events.LEVEL_LOADING,this.onLevelLoading,this),C.off(w.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),C.off(w.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),C.off(w.Events.ERROR,this.onError,this)},m.onMediaAttached=function(C,x){this.media=x.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},m.pollTrackChange=function(C){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,C)},m.onMediaDetaching=function(){if(!!this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var C=R(this.media.textTracks);C.forEach(function(x){(0,b.clearCurrentCues)(x)}),this.subtitleTrack=-1,this.media=null}},m.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},m.onManifestParsed=function(C,x){this.tracks=x.subtitleTracks},m.onSubtitleTrackLoaded=function(C,x){var o=x.id,c=x.details,S=this.trackId,f=this.tracksInGroup[S];if(!f){this.warn("Invalid subtitle track id "+o);return}var h=f.details;f.details=x.details,this.log("subtitle track "+o+" loaded ["+c.startSN+"-"+c.endSN+"]"),o===this.trackId&&(this.retryCount=0,this.playlistLoaded(o,x,h))},m.onLevelLoading=function(C,x){this.switchLevel(x.level)},m.onLevelSwitching=function(C,x){this.switchLevel(x.level)},m.switchLevel=function(C){var x=this.hls.levels[C];if(!!(x!=null&&x.textGroupIds)){var o=x.textGroupIds[x.urlId];if(this.groupId!==o){var c=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,S=this.tracks.filter(function(u){return!o||u.groupId===o});this.tracksInGroup=S;var f=this.findTrackId(c==null?void 0:c.name)||this.findTrackId();this.groupId=o;var h={subtitleTracks:S};this.log("Updating subtitle tracks, "+S.length+' track(s) found in "'+o+'" group-id'),this.hls.trigger(w.Events.SUBTITLE_TRACKS_UPDATED,h),f!==-1&&this.setSubtitleTrack(f,c)}}},m.findTrackId=function(C){for(var x=this.tracksInGroup,o=0;o<x.length;o++){var c=x[o];if((!this.selectDefaultTrack||c.default)&&(!C||C===c.name))return c.id}return-1},m.onError=function(C,x){_.prototype.onError.call(this,C,x),!(x.fatal||!x.context)&&x.context.type===O.PlaylistContextType.SUBTITLE_TRACK&&x.context.id===this.trackId&&x.context.groupId===this.groupId&&this.retryLoadingOrFail(x)},m.loadPlaylist=function(C){_.prototype.loadPlaylist.call(this);var x=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(x)){var o=x.id,c=x.groupId,S=x.url;if(C)try{S=C.addDirectives(S)}catch(f){this.warn("Could not construct new URL with HLS Delivery Directives: "+f)}this.log("Loading subtitle playlist for id "+o),this.hls.trigger(w.Events.SUBTITLE_TRACK_LOADING,{url:S,id:o,groupId:c,deliveryDirectives:C||null})}},m.toggleTrackModes=function(C){var x=this,o=this.media,c=this.trackId;if(!!o){var S=R(o.textTracks),f=S.filter(function(g){return g.groupId===x.groupId});if(C===-1)[].slice.call(S).forEach(function(g){g.mode="disabled"});else{var h=f[c];h&&(h.mode="disabled")}var u=f[C];u&&(u.mode=this.subtitleDisplay?"showing":"hidden")}},m.setSubtitleTrack=function(C,x){var o,c=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=C;return}if(this.trackId!==C&&this.toggleTrackModes(C),!(this.trackId===C&&(C===-1||(o=c[C])!==null&&o!==void 0&&o.details)||C<-1||C>=c.length)){this.clearTimer();var S=c[C];if(this.log("Switching to subtitle track "+C),this.trackId=C,S){var f=S.id,h=S.groupId,u=h===void 0?"":h,g=S.name,s=S.type,E=S.url;this.hls.trigger(w.Events.SUBTITLE_TRACK_SWITCH,{id:f,groupId:u,name:g,type:s,url:E});var A=this.switchParams(S.url,x==null?void 0:x.details);this.loadPlaylist(A)}else this.hls.trigger(w.Events.SUBTITLE_TRACK_SWITCH,{id:C})}},m.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var C=-1,x=R(this.media.textTracks),o=0;o<x.length;o++)if(x[o].mode==="hidden")C=o;else if(x[o].mode==="showing"){C=o;break}this.subtitleTrack!==C&&(this.subtitleTrack=C)}},F(y,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(C){this._subtitleDisplay=C,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(C){this.selectDefaultTrack=!1;var x=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(C,x)}}]),y}(B.default);function R(_){for(var y=[],m=0;m<_.length;m++){var p=_[m];p.kind==="subtitles"&&p.label&&y.push(_[m])}return y}const L=T},"./src/controller/timeline-controller.ts":(d,D,l)=>{l.r(D),l.d(D,{TimelineController:()=>T});var w=l("./src/polyfills/number.ts"),b=l("./src/events.ts"),B=l("./src/utils/cea-608-parser.ts"),O=l("./src/utils/output-filter.ts"),$=l("./src/utils/webvtt-parser.ts"),F=l("./src/utils/texttrack-utils.ts"),k=l("./src/utils/imsc1-ttml-parser.ts"),M=l("./src/utils/mp4-tools.ts"),I=l("./src/types/loader.ts"),P=l("./src/utils/logger.ts"),T=function(){function y(p){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=_(),this.captionsProperties=void 0,this.hls=p,this.config=p.config,this.Cues=p.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var C=new O.default(this,"textTrack1"),x=new O.default(this,"textTrack2"),o=new O.default(this,"textTrack3"),c=new O.default(this,"textTrack4");this.cea608Parser1=new B.default(1,C,x),this.cea608Parser2=new B.default(3,o,c)}p.on(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),p.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),p.on(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this),p.on(b.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),p.on(b.Events.FRAG_LOADING,this.onFragLoading,this),p.on(b.Events.FRAG_LOADED,this.onFragLoaded,this),p.on(b.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),p.on(b.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),p.on(b.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),p.on(b.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),p.on(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var m=y.prototype;return m.destroy=function(){var C=this.hls;C.off(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),C.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),C.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),C.off(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this),C.off(b.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),C.off(b.Events.FRAG_LOADING,this.onFragLoading,this),C.off(b.Events.FRAG_LOADED,this.onFragLoaded,this),C.off(b.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),C.off(b.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),C.off(b.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),C.off(b.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),C.off(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},m.addCues=function(C,x,o,c,S){for(var f=!1,h=S.length;h--;){var u=S[h],g=L(u[0],u[1],x,o);if(g>=0&&(u[0]=Math.min(u[0],x),u[1]=Math.max(u[1],o),f=!0,g/(o-x)>.5))return}if(f||S.push([x,o]),this.config.renderTextTracksNatively){var s=this.captionsTracks[C];this.Cues.newCue(s,x,o,c)}else{var E=this.Cues.newCue(null,x,o,c);this.hls.trigger(b.Events.CUES_PARSED,{type:"captions",cues:E,track:C})}},m.onInitPtsFound=function(C,x){var o=this,c=x.frag,S=x.id,f=x.initPTS,h=x.timescale,u=this.unparsedVttFrags;S==="main"&&(this.initPTS[c.cc]=f,this.timescale[c.cc]=h),u.length&&(this.unparsedVttFrags=[],u.forEach(function(g){o.onFragLoaded(b.Events.FRAG_LOADED,g)}))},m.getExistingTrack=function(C){var x=this.media;if(x)for(var o=0;o<x.textTracks.length;o++){var c=x.textTracks[o];if(c[C])return c}return null},m.createCaptionsTrack=function(C){this.config.renderTextTracksNatively?this.createNativeTrack(C):this.createNonNativeTrack(C)},m.createNativeTrack=function(C){if(!this.captionsTracks[C]){var x=this.captionsProperties,o=this.captionsTracks,c=this.media,S=x[C],f=S.label,h=S.languageCode,u=this.getExistingTrack(C);if(u)o[C]=u,(0,F.clearCurrentCues)(o[C]),(0,F.sendAddTrackEvent)(o[C],c);else{var g=this.createTextTrack("captions",f,h);g&&(g[C]=!0,o[C]=g)}}},m.createNonNativeTrack=function(C){if(!this.nonNativeCaptionsTracks[C]){var x=this.captionsProperties[C];if(!!x){var o=x.label,c={_id:C,label:o,kind:"captions",default:x.media?!!x.media.default:!1,closedCaptions:x.media};this.nonNativeCaptionsTracks[C]=c,this.hls.trigger(b.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[c]})}}},m.createTextTrack=function(C,x,o){var c=this.media;if(!!c)return c.addTextTrack(C,x,o)},m.onMediaAttaching=function(C,x){this.media=x.media,this._cleanTracks()},m.onMediaDetaching=function(){var C=this.captionsTracks;Object.keys(C).forEach(function(x){(0,F.clearCurrentCues)(C[x]),delete C[x]}),this.nonNativeCaptionsTracks={}},m.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=_(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},m._cleanTracks=function(){var C=this.media;if(!!C){var x=C.textTracks;if(x)for(var o=0;o<x.length;o++)(0,F.clearCurrentCues)(x[o])}},m.onSubtitleTracksUpdated=function(C,x){var o=this;this.textTracks=[];var c=x.subtitleTracks||[],S=c.some(function(g){return g.textCodec===k.IMSC1_CODEC});if(this.config.enableWebVTT||S&&this.config.enableIMSC1){var f=this.tracks&&c&&this.tracks.length===c.length;if(this.tracks=c||[],this.config.renderTextTracksNatively){var h=this.media?this.media.textTracks:[];this.tracks.forEach(function(g,s){var E;if(s<h.length){for(var A=null,v=0;v<h.length;v++)if(R(h[v],g)){A=h[v];break}A&&(E=A)}if(E)(0,F.clearCurrentCues)(E);else{var N=o._captionsOrSubtitlesFromCharacteristics(g);E=o.createTextTrack(N,g.name,g.lang),E&&(E.mode="disabled")}E&&(E.groupId=g.groupId,o.textTracks.push(E))})}else if(!f&&this.tracks&&this.tracks.length){var u=this.tracks.map(function(g){return{label:g.name,kind:g.type.toLowerCase(),default:g.default,subtitleTrack:g}});this.hls.trigger(b.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}},m._captionsOrSubtitlesFromCharacteristics=function(C){var x;if((x=C.attrs)!==null&&x!==void 0&&x.CHARACTERISTICS){var o=/transcribes-spoken-dialog/gi.test(C.attrs.CHARACTERISTICS),c=/describes-music-and-sound/gi.test(C.attrs.CHARACTERISTICS);if(o&&c)return"captions"}return"subtitles"},m.onManifestLoaded=function(C,x){var o=this;this.config.enableCEA708Captions&&x.captions&&x.captions.forEach(function(c){var S=/(?:CC|SERVICE)([1-4])/.exec(c.instreamId);if(!!S){var f="textTrack"+S[1],h=o.captionsProperties[f];!h||(h.label=c.name,c.lang&&(h.languageCode=c.lang),h.media=c)}})},m.closedCaptionsForLevel=function(C){var x=this.hls.levels[C.level];return x==null?void 0:x.attrs["CLOSED-CAPTIONS"]},m.onFragLoading=function(C,x){var o=this.cea608Parser1,c=this.cea608Parser2,S=this.lastSn,f=this.lastPartIndex;if(!(!this.enabled||!(o&&c))&&x.frag.type===I.PlaylistLevelType.MAIN){var h,u,g=x.frag.sn,s=(h=x==null||(u=x.part)===null||u===void 0?void 0:u.index)!=null?h:-1;g===S+1||g===S&&s===f+1||(o.reset(),c.reset()),this.lastSn=g,this.lastPartIndex=s}},m.onFragLoaded=function(C,x){var o=x.frag,c=x.payload,S=this.initPTS,f=this.unparsedVttFrags;if(o.type===I.PlaylistLevelType.SUBTITLE)if(c.byteLength){if(!(0,w.isFiniteNumber)(S[o.cc])){f.push(x),S.length&&this.hls.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:new Error("Missing initial subtitle PTS")});return}var h=o.decryptdata,u="stats"in x;if(h==null||!h.encrypted||u){var g=this.tracks[o.level],s=this.vttCCs;s[o.cc]||(s[o.cc]={start:o.start,prevCC:this.prevCC,new:!0},this.prevCC=o.cc),g&&g.textCodec===k.IMSC1_CODEC?this._parseIMSC1(o,c):this._parseVTTs(o,c,s)}}else this.hls.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:new Error("Empty subtitle payload")})},m._parseIMSC1=function(C,x){var o=this,c=this.hls;(0,k.parseIMSC1)(x,this.initPTS[C.cc],this.timescale[C.cc],function(S){o._appendCues(S,C.level),c.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:C})},function(S){P.logger.log("Failed to parse IMSC1: "+S),c.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:C,error:S})})},m._parseVTTs=function(C,x,o){var c,S=this,f=this.hls,h=(c=C.initSegment)!==null&&c!==void 0&&c.data?(0,M.appendUint8Array)(C.initSegment.data,new Uint8Array(x)):x;(0,$.parseWebVTT)(h,this.initPTS[C.cc],this.timescale[C.cc],o,C.cc,C.start,function(u){S._appendCues(u,C.level),f.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:C})},function(u){S._fallbackToIMSC1(C,x),P.logger.log("Failed to parse VTT cue: "+u),f.trigger(b.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:C,error:u})})},m._fallbackToIMSC1=function(C,x){var o=this,c=this.tracks[C.level];c.textCodec||(0,k.parseIMSC1)(x,this.initPTS[C.cc],this.timescale[C.cc],function(){c.textCodec=k.IMSC1_CODEC,o._parseIMSC1(C,x)},function(){c.textCodec="wvtt"})},m._appendCues=function(C,x){var o=this.hls;if(this.config.renderTextTracksNatively){var c=this.textTracks[x];if(!c||c.mode==="disabled")return;C.forEach(function(h){return(0,F.addCueToTrack)(c,h)})}else{var S=this.tracks[x];if(!S)return;var f=S.default?"default":"subtitles"+x;o.trigger(b.Events.CUES_PARSED,{type:"subtitles",cues:C,track:f})}},m.onFragDecrypted=function(C,x){var o=x.frag;if(o.type===I.PlaylistLevelType.SUBTITLE){if(!(0,w.isFiniteNumber)(this.initPTS[o.cc])){this.unparsedVttFrags.push(x);return}this.onFragLoaded(b.Events.FRAG_LOADED,x)}},m.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},m.onFragParsingUserdata=function(C,x){var o=this.cea608Parser1,c=this.cea608Parser2;if(!(!this.enabled||!(o&&c))){var S=x.frag,f=x.samples;if(!(S.type===I.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(S)==="NONE"))for(var h=0;h<f.length;h++){var u=f[h].bytes;if(u){var g=this.extractCea608Data(u);o.addData(f[h].pts,g[0]),c.addData(f[h].pts,g[1])}}}},m.onBufferFlushing=function(C,x){var o=x.startOffset,c=x.endOffset,S=x.endOffsetSubtitles,f=x.type,h=this.media;if(!(!h||h.currentTime<c)){if(!f||f==="video"){var u=this.captionsTracks;Object.keys(u).forEach(function(s){return(0,F.removeCuesInRange)(u[s],o,c)})}if(this.config.renderTextTracksNatively&&o===0&&S!==void 0){var g=this.textTracks;Object.keys(g).forEach(function(s){return(0,F.removeCuesInRange)(g[s],o,S)})}}},m.extractCea608Data=function(C){for(var x=[[],[]],o=C[0]&31,c=2,S=0;S<o;S++){var f=C[c++],h=127&C[c++],u=127&C[c++];if(!(h===0&&u===0)){var g=(4&f)!==0;if(g){var s=3&f;(s===0||s===1)&&(x[s].push(h),x[s].push(u))}}}return x},y}();function R(y,m){return y&&y.label===m.name&&!(y.textTrack1||y.textTrack2)}function L(y,m,p,C){return Math.min(m,C)-Math.max(y,p)}function _(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});var w=function(){function b(O,$){this.subtle=void 0,this.aesIV=void 0,this.subtle=O,this.aesIV=$}var B=b.prototype;return B.decrypt=function($,F){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},F,$)},b}()},"./src/crypt/aes-decryptor.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>B,removePadding:()=>b});var w=l("./src/utils/typed-array.ts");function b(O){var $=O.byteLength,F=$&&new DataView(O.buffer).getUint8($-1);return F?(0,w.sliceUint8)(O,0,$-F):O}var B=function(){function O(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var $=O.prototype;return $.uint8ArrayToUint32Array_=function(k){for(var M=new DataView(k),I=new Uint32Array(4),P=0;P<4;P++)I[P]=M.getUint32(P*4);return I},$.initTable=function(){var k=this.sBox,M=this.invSBox,I=this.subMix,P=I[0],T=I[1],R=I[2],L=I[3],_=this.invSubMix,y=_[0],m=_[1],p=_[2],C=_[3],x=new Uint32Array(256),o=0,c=0,S=0;for(S=0;S<256;S++)S<128?x[S]=S<<1:x[S]=S<<1^283;for(S=0;S<256;S++){var f=c^c<<1^c<<2^c<<3^c<<4;f=f>>>8^f&255^99,k[o]=f,M[f]=o;var h=x[o],u=x[h],g=x[u],s=x[f]*257^f*16843008;P[o]=s<<24|s>>>8,T[o]=s<<16|s>>>16,R[o]=s<<8|s>>>24,L[o]=s,s=g*16843009^u*65537^h*257^o*16843008,y[f]=s<<24|s>>>8,m[f]=s<<16|s>>>16,p[f]=s<<8|s>>>24,C[f]=s,o?(o=h^x[x[x[g^h]]],c^=x[x[c]]):o=c=1}},$.expandKey=function(k){for(var M=this.uint8ArrayToUint32Array_(k),I=!0,P=0;P<M.length&&I;)I=M[P]===this.key[P],P++;if(!I){this.key=M;var T=this.keySize=M.length;if(T!==4&&T!==6&&T!==8)throw new Error("Invalid aes key size="+T);var R=this.ksRows=(T+6+1)*4,L,_,y=this.keySchedule=new Uint32Array(R),m=this.invKeySchedule=new Uint32Array(R),p=this.sBox,C=this.rcon,x=this.invSubMix,o=x[0],c=x[1],S=x[2],f=x[3],h,u;for(L=0;L<R;L++){if(L<T){h=y[L]=M[L];continue}u=h,L%T===0?(u=u<<8|u>>>24,u=p[u>>>24]<<24|p[u>>>16&255]<<16|p[u>>>8&255]<<8|p[u&255],u^=C[L/T|0]<<24):T>6&&L%T===4&&(u=p[u>>>24]<<24|p[u>>>16&255]<<16|p[u>>>8&255]<<8|p[u&255]),y[L]=h=(y[L-T]^u)>>>0}for(_=0;_<R;_++)L=R-_,_&3?u=y[L]:u=y[L-4],_<4||L<=4?m[_]=u:m[_]=o[p[u>>>24]]^c[p[u>>>16&255]]^S[p[u>>>8&255]]^f[p[u&255]],m[_]=m[_]>>>0}},$.networkToHostOrderSwap=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},$.decrypt=function(k,M,I){for(var P=this.keySize+6,T=this.invKeySchedule,R=this.invSBox,L=this.invSubMix,_=L[0],y=L[1],m=L[2],p=L[3],C=this.uint8ArrayToUint32Array_(I),x=C[0],o=C[1],c=C[2],S=C[3],f=new Int32Array(k),h=new Int32Array(f.length),u,g,s,E,A,v,N,U,K,W,H,j,G,z,Y=this.networkToHostOrderSwap;M<f.length;){for(K=Y(f[M]),W=Y(f[M+1]),H=Y(f[M+2]),j=Y(f[M+3]),A=K^T[0],v=j^T[1],N=H^T[2],U=W^T[3],G=4,z=1;z<P;z++)u=_[A>>>24]^y[v>>16&255]^m[N>>8&255]^p[U&255]^T[G],g=_[v>>>24]^y[N>>16&255]^m[U>>8&255]^p[A&255]^T[G+1],s=_[N>>>24]^y[U>>16&255]^m[A>>8&255]^p[v&255]^T[G+2],E=_[U>>>24]^y[A>>16&255]^m[v>>8&255]^p[N&255]^T[G+3],A=u,v=g,N=s,U=E,G=G+4;u=R[A>>>24]<<24^R[v>>16&255]<<16^R[N>>8&255]<<8^R[U&255]^T[G],g=R[v>>>24]<<24^R[N>>16&255]<<16^R[U>>8&255]<<8^R[A&255]^T[G+1],s=R[N>>>24]<<24^R[U>>16&255]<<16^R[A>>8&255]<<8^R[v&255]^T[G+2],E=R[U>>>24]<<24^R[A>>16&255]<<16^R[v>>8&255]<<8^R[N&255]^T[G+3],h[M]=Y(u^x),h[M+1]=Y(E^o),h[M+2]=Y(s^c),h[M+3]=Y(g^S),x=K,o=W,c=H,S=j,M=M+4}return h.buffer},O}()},"./src/crypt/decrypter.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>M});var w=l("./src/crypt/aes-crypto.ts"),b=l("./src/crypt/fast-aes-key.ts"),B=l("./src/crypt/aes-decryptor.ts"),O=l("./src/utils/logger.ts"),$=l("./src/utils/mp4-tools.ts"),F=l("./src/utils/typed-array.ts"),k=16,M=function(){function I(T,R){var L=R===void 0?{}:R,_=L.removePKCS7Padding,y=_===void 0?!0:_;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=T.enableSoftwareAES,this.removePKCS7Padding=y,y)try{var m=self.crypto;m&&(this.subtle=m.subtle||m.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var P=I.prototype;return P.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},P.isSync=function(){return this.useSoftware},P.flush=function(){var R=this.currentResult,L=this.remainderData;if(!R||L)return this.reset(),null;var _=new Uint8Array(R);return this.reset(),this.removePKCS7Padding?(0,B.removePadding)(_):_},P.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},P.decrypt=function(R,L,_){var y=this;return this.useSoftware?new Promise(function(m,p){y.softwareDecrypt(new Uint8Array(R),L,_);var C=y.flush();C?m(C.buffer):p(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(R),L,_)},P.softwareDecrypt=function(R,L,_){var y=this.currentIV,m=this.currentResult,p=this.remainderData;this.logOnce("JS AES decrypt"),p&&(R=(0,$.appendUint8Array)(p,R),this.remainderData=null);var C=this.getValidChunk(R);if(!C.length)return null;y&&(_=y);var x=this.softwareDecrypter;x||(x=this.softwareDecrypter=new B.default),x.expandKey(L);var o=m;return this.currentResult=x.decrypt(C.buffer,0,_),this.currentIV=(0,F.sliceUint8)(C,-16).buffer,o||null},P.webCryptoDecrypt=function(R,L,_){var y=this,m=this.subtle;return(this.key!==L||!this.fastAesKey)&&(this.key=L,this.fastAesKey=new b.default(m,L)),this.fastAesKey.expandKey().then(function(p){if(!m)return Promise.reject(new Error("web crypto not initialized"));y.logOnce("WebCrypto AES decrypt");var C=new w.default(m,new Uint8Array(_));return C.decrypt(R.buffer,p)}).catch(function(p){return O.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+p.name+": "+p.message),y.onWebCryptoError(R,L,_)})},P.onWebCryptoError=function(R,L,_){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(R,L,_);var y=this.flush();if(y)return y.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},P.getValidChunk=function(R){var L=R,_=R.length-R.length%k;return _!==R.length&&(L=(0,F.sliceUint8)(R,0,_),this.remainderData=(0,F.sliceUint8)(R,_)),L},P.logOnce=function(R){!this.logEnabled||(O.logger.log("[decrypter]: "+R),this.logEnabled=!1)},I}()},"./src/crypt/fast-aes-key.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});var w=function(){function b(O,$){this.subtle=void 0,this.key=void 0,this.subtle=O,this.key=$}var B=b.prototype;return B.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},b}()},"./src/demux/aacdemuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>M});var w=l("./src/demux/base-audio-demuxer.ts"),b=l("./src/demux/adts.ts"),B=l("./src/utils/logger.ts"),O=l("./src/demux/id3.ts");function $(I,P){I.prototype=Object.create(P.prototype),I.prototype.constructor=I,F(I,P)}function F(I,P){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,L){return R.__proto__=L,R},F(I,P)}var k=function(I){$(P,I);function P(R,L){var _;return _=I.call(this)||this,_.observer=void 0,_.config=void 0,_.observer=R,_.config=L,_}var T=P.prototype;return T.resetInitSegment=function(L,_,y,m){I.prototype.resetInitSegment.call(this,L,_,y,m),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:_,duration:m,inputTimeScale:9e4,dropped:0}},P.probe=function(L){if(!L)return!1;for(var _=O.getID3Data(L,0)||[],y=_.length,m=L.length;y<m;y++)if(b.probe(L,y))return B.logger.log("ADTS sync word found !"),!0;return!1},T.canParse=function(L,_){return b.canParse(L,_)},T.appendFrame=function(L,_,y){b.initTrackConfig(L,this.observer,_,y,L.manifestCodec);var m=b.appendFrame(L,_,y,this.basePTS,this.frameIndex);if(m&&m.missing===0)return m},P}(w.default);const M=k},"./src/demux/adts.ts":(d,D,l)=>{l.r(D),l.d(D,{appendFrame:()=>y,canGetFrameLength:()=>M,canParse:()=>P,getAudioConfig:()=>O,getFrameDuration:()=>L,getFullFrameLength:()=>k,getHeaderLength:()=>F,initTrackConfig:()=>R,isHeader:()=>I,isHeaderPattern:()=>$,parseFrameHeader:()=>_,probe:()=>T});var w=l("./src/utils/logger.ts"),b=l("./src/errors.ts"),B=l("./src/events.ts");function O(m,p,C,x){var o,c,S,f,h=navigator.userAgent.toLowerCase(),u=x,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=((p[C+2]&192)>>>6)+1;var s=(p[C+2]&60)>>>2;if(s>g.length-1){m.trigger(B.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s});return}return S=(p[C+2]&1)<<2,S|=(p[C+3]&192)>>>6,w.logger.log("manifest codec:"+x+", ADTS type:"+o+", samplingIndex:"+s),/firefox/i.test(h)?s>=6?(o=5,f=new Array(4),c=s-3):(o=2,f=new Array(2),c=s):h.indexOf("android")!==-1?(o=2,f=new Array(2),c=s):(o=5,f=new Array(4),x&&(x.indexOf("mp4a.40.29")!==-1||x.indexOf("mp4a.40.5")!==-1)||!x&&s>=6?c=s-3:((x&&x.indexOf("mp4a.40.2")!==-1&&(s>=6&&S===1||/vivaldi/i.test(h))||!x&&S===1)&&(o=2,f=new Array(2)),c=s)),f[0]=o<<3,f[0]|=(s&14)>>1,f[1]|=(s&1)<<7,f[1]|=S<<3,o===5&&(f[1]|=(c&14)>>1,f[2]=(c&1)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:g[s],channelCount:S,codec:"mp4a.40."+o,manifestCodec:u}}function $(m,p){return m[p]===255&&(m[p+1]&246)===240}function F(m,p){return m[p+1]&1?7:9}function k(m,p){return(m[p+3]&3)<<11|m[p+4]<<3|(m[p+5]&224)>>>5}function M(m,p){return p+5<m.length}function I(m,p){return p+1<m.length&&$(m,p)}function P(m,p){return M(m,p)&&$(m,p)&&k(m,p)<=m.length-p}function T(m,p){if(I(m,p)){var C=F(m,p);if(p+C>=m.length)return!1;var x=k(m,p);if(x<=C)return!1;var o=p+x;return o===m.length||I(m,o)}return!1}function R(m,p,C,x,o){if(!m.samplerate){var c=O(p,C,x,o);if(!c)return;m.config=c.config,m.samplerate=c.samplerate,m.channelCount=c.channelCount,m.codec=c.codec,m.manifestCodec=c.manifestCodec,w.logger.log("parsed codec:"+m.codec+", rate:"+c.samplerate+", channels:"+c.channelCount)}}function L(m){return 9216e4/m}function _(m,p){var C=F(m,p);if(p+C<=m.length){var x=k(m,p)-C;if(x>0)return{headerLength:C,frameLength:x}}}function y(m,p,C,x,o){var c=L(m.samplerate),S=x+o*c,f=_(p,C),h;if(f){var u=f.frameLength,g=f.headerLength,s=g+u,E=Math.max(0,C+s-p.length);E?(h=new Uint8Array(s-g),h.set(p.subarray(C+g,p.length),0)):h=p.subarray(C+g,C+s);var A={unit:h,pts:S};return E||m.samples.push(A),{sample:A,length:s,missing:E}}var v=p.length-C;h=new Uint8Array(v),h.set(p.subarray(C,p.length),0);var N={unit:h,pts:S};return{sample:N,length:v,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>I,initPTSFn:()=>M});var w=l("./src/polyfills/number.ts"),b=l("./src/demux/id3.ts"),B=l("./src/types/demuxer.ts"),O=l("./src/demux/dummy-demuxed-track.ts"),$=l("./src/utils/mp4-tools.ts"),F=l("./src/utils/typed-array.ts"),k=function(){function P(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var T=P.prototype;return T.resetInitSegment=function(L,_,y,m){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},T.resetTimeStamp=function(L){this.initPTS=L,this.resetContiguity()},T.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},T.canParse=function(L,_){return!1},T.appendFrame=function(L,_,y){},T.demux=function(L,_){this.cachedData&&(L=(0,$.appendUint8Array)(this.cachedData,L),this.cachedData=null);var y=b.getID3Data(L,0),m=y?y.length:0,p,C=this._audioTrack,x=this._id3Track,o=y?b.getTimeStamp(y):void 0,c=L.length;for((this.basePTS===null||this.frameIndex===0&&(0,w.isFiniteNumber)(o))&&(this.basePTS=M(o,_,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),y&&y.length>0&&x.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:y,type:B.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});m<c;){if(this.canParse(L,m)){var S=this.appendFrame(C,L,m);S?(this.frameIndex++,this.lastPTS=S.sample.pts,m+=S.length,p=m):m=c}else b.canParse(L,m)?(y=b.getID3Data(L,m),x.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:y,type:B.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),m+=y.length,p=m):m++;if(m===c&&p!==c){var f=(0,F.sliceUint8)(L,p);this.cachedData?this.cachedData=(0,$.appendUint8Array)(this.cachedData,f):this.cachedData=f}}return{audioTrack:C,videoTrack:(0,O.dummyTrack)(),id3Track:x,textTrack:(0,O.dummyTrack)()}},T.demuxSampleAes=function(L,_,y){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},T.flush=function(L){var _=this.cachedData;return _&&(this.cachedData=null,this.demux(_,0)),{audioTrack:this._audioTrack,videoTrack:(0,O.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,O.dummyTrack)()}},T.destroy=function(){},P}(),M=function(T,R,L){return(0,w.isFiniteNumber)(T)?T*90:R*9e4+(L||0)};const I=k},"./src/demux/chunk-cache.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});var w=function(){function B(){this.chunks=[],this.dataLength=0}var O=B.prototype;return O.push=function(F){this.chunks.push(F),this.dataLength+=F.length},O.flush=function(){var F=this.chunks,k=this.dataLength,M;if(F.length)F.length===1?M=F[0]:M=b(F,k);else return new Uint8Array(0);return this.reset(),M},O.reset=function(){this.chunks.length=0,this.dataLength=0},B}();function b(B,O){for(var $=new Uint8Array(O),F=0,k=0;k<B.length;k++){var M=B[k];$.set(M,F),F+=M.length}return $}},"./src/demux/dummy-demuxed-track.ts":(d,D,l)=>{l.r(D),l.d(D,{dummyTrack:()=>w});function w(b,B){return b===void 0&&(b=""),B===void 0&&(B=9e4),{type:b,id:-1,pid:-1,inputTimeScale:B,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>B});var w=l("./src/utils/logger.ts"),b=function(){function O(F){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=F,this.bytesAvailable=F.byteLength,this.word=0,this.bitsAvailable=0}var $=O.prototype;return $.loadWord=function(){var k=this.data,M=this.bytesAvailable,I=k.byteLength-M,P=new Uint8Array(4),T=Math.min(4,M);if(T===0)throw new Error("no bytes available");P.set(k.subarray(I,I+T)),this.word=new DataView(P.buffer).getUint32(0),this.bitsAvailable=T*8,this.bytesAvailable-=T},$.skipBits=function(k){var M;k=Math.min(k,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>k?(this.word<<=k,this.bitsAvailable-=k):(k-=this.bitsAvailable,M=k>>3,k-=M<<3,this.bytesAvailable-=M,this.loadWord(),this.word<<=k,this.bitsAvailable-=k)},$.readBits=function(k){var M=Math.min(this.bitsAvailable,k),I=this.word>>>32-M;if(k>32&&w.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=M,this.bitsAvailable>0)this.word<<=M;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return M=k-M,M>0&&this.bitsAvailable?I<<M|this.readBits(M):I},$.skipLZ=function(){var k;for(k=0;k<this.bitsAvailable;++k)if((this.word&2147483648>>>k)!==0)return this.word<<=k,this.bitsAvailable-=k,k;return this.loadWord(),k+this.skipLZ()},$.skipUEG=function(){this.skipBits(1+this.skipLZ())},$.skipEG=function(){this.skipBits(1+this.skipLZ())},$.readUEG=function(){var k=this.skipLZ();return this.readBits(k+1)-1},$.readEG=function(){var k=this.readUEG();return 1&k?1+k>>>1:-1*(k>>>1)},$.readBoolean=function(){return this.readBits(1)===1},$.readUByte=function(){return this.readBits(8)},$.readUShort=function(){return this.readBits(16)},$.readUInt=function(){return this.readBits(32)},$.skipScalingList=function(k){for(var M=8,I=8,P,T=0;T<k;T++)I!==0&&(P=this.readEG(),I=(M+P+256)%256),M=I===0?M:I},$.readSPS=function(){var k=0,M=0,I=0,P=0,T,R,L,_=this.readUByte.bind(this),y=this.readBits.bind(this),m=this.readUEG.bind(this),p=this.readBoolean.bind(this),C=this.skipBits.bind(this),x=this.skipEG.bind(this),o=this.skipUEG.bind(this),c=this.skipScalingList.bind(this);_();var S=_();if(y(5),C(3),_(),o(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){var f=m();if(f===3&&C(1),o(),o(),C(1),p())for(R=f!==3?8:12,L=0;L<R;L++)p()&&(L<6?c(16):c(64))}o();var h=m();if(h===0)m();else if(h===1)for(C(1),x(),x(),T=m(),L=0;L<T;L++)x();o(),C(1);var u=m(),g=m(),s=y(1);s===0&&C(1),C(1),p()&&(k=m(),M=m(),I=m(),P=m());var E=[1,1];if(p()&&p()){var A=_();switch(A){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:{E=[_()<<8|_(),_()<<8|_()];break}}}return{width:Math.ceil((u+1)*16-k*2-M*2),height:(2-s)*(g+1)*16-(s?2:4)*(I+P),pixelRatio:E}},$.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},O}();const B=b},"./src/demux/id3.ts":(d,D,l)=>{l.r(D),l.d(D,{canParse:()=>$,decodeFrame:()=>P,getID3Data:()=>B,getID3Frames:()=>I,getTimeStamp:()=>F,isFooter:()=>b,isHeader:()=>w,isTimeStampFrame:()=>k,testables:()=>m,utf8ArrayToStr:()=>y});var w=function(o,c){return c+10<=o.length&&o[c]===73&&o[c+1]===68&&o[c+2]===51&&o[c+3]<255&&o[c+4]<255&&o[c+6]<128&&o[c+7]<128&&o[c+8]<128&&o[c+9]<128},b=function(o,c){return c+10<=o.length&&o[c]===51&&o[c+1]===68&&o[c+2]===73&&o[c+3]<255&&o[c+4]<255&&o[c+6]<128&&o[c+7]<128&&o[c+8]<128&&o[c+9]<128},B=function(o,c){for(var S=c,f=0;w(o,c);){f+=10;var h=O(o,c+6);f+=h,b(o,c+10)&&(f+=10),c+=f}if(f>0)return o.subarray(S,S+f)},O=function(o,c){var S=0;return S=(o[c]&127)<<21,S|=(o[c+1]&127)<<14,S|=(o[c+2]&127)<<7,S|=o[c+3]&127,S},$=function(o,c){return w(o,c)&&O(o,c+6)+10<=o.length-c},F=function(o){for(var c=I(o),S=0;S<c.length;S++){var f=c[S];if(k(f))return _(f)}},k=function(o){return o&&o.key==="PRIV"&&o.info==="com.apple.streaming.transportStreamTimestamp"},M=function(o){var c=String.fromCharCode(o[0],o[1],o[2],o[3]),S=O(o,4),f=10;return{type:c,size:S,data:o.subarray(f,f+S)}},I=function(o){for(var c=0,S=[];w(o,c);){var f=O(o,c+6);c+=10;for(var h=c+f;c+8<h;){var u=M(o.subarray(c)),g=P(u);g&&S.push(g),c+=u.size+10}b(o,c)&&(c+=10)}return S},P=function(o){return o.type==="PRIV"?T(o):o.type[0]==="W"?L(o):R(o)},T=function(o){if(!(o.size<2)){var c=y(o.data,!0),S=new Uint8Array(o.data.subarray(c.length+1));return{key:o.type,info:c,data:S.buffer}}},R=function(o){if(!(o.size<2)){if(o.type==="TXXX"){var c=1,S=y(o.data.subarray(c),!0);c+=S.length+1;var f=y(o.data.subarray(c));return{key:o.type,info:S,data:f}}var h=y(o.data.subarray(1));return{key:o.type,data:h}}},L=function(o){if(o.type==="WXXX"){if(o.size<2)return;var c=1,S=y(o.data.subarray(c),!0);c+=S.length+1;var f=y(o.data.subarray(c));return{key:o.type,info:S,data:f}}var h=y(o.data);return{key:o.type,data:h}},_=function(o){if(o.data.byteLength===8){var c=new Uint8Array(o.data),S=c[3]&1,f=(c[4]<<23)+(c[5]<<15)+(c[6]<<7)+c[7];return f/=45,S&&(f+=4772185884e-2),Math.round(f)}},y=function(o,c){c===void 0&&(c=!1);var S=C();if(S){var f=S.decode(o);if(c){var h=f.indexOf("\0");return h!==-1?f.substring(0,h):f}return f.replace(/\0/g,"")}for(var u=o.length,g,s,E,A="",v=0;v<u;){if(g=o[v++],g===0&&c)return A;if(g===0||g===3)continue;switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:A+=String.fromCharCode(g);break;case 12:case 13:s=o[v++],A+=String.fromCharCode((g&31)<<6|s&63);break;case 14:s=o[v++],E=o[v++],A+=String.fromCharCode((g&15)<<12|(s&63)<<6|(E&63)<<0);break}}return A},m={decodeTextFrame:R},p;function C(){return!p&&typeof self.TextDecoder<"u"&&(p=new self.TextDecoder("utf-8")),p}},"./src/demux/mp3demuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>M});var w=l("./src/demux/base-audio-demuxer.ts"),b=l("./src/demux/id3.ts"),B=l("./src/utils/logger.ts"),O=l("./src/demux/mpegaudio.ts");function $(I,P){I.prototype=Object.create(P.prototype),I.prototype.constructor=I,F(I,P)}function F(I,P){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,L){return R.__proto__=L,R},F(I,P)}var k=function(I){$(P,I);function P(){return I.apply(this,arguments)||this}var T=P.prototype;return T.resetInitSegment=function(L,_,y,m){I.prototype.resetInitSegment.call(this,L,_,y,m),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:_,duration:m,inputTimeScale:9e4,dropped:0}},P.probe=function(L){if(!L)return!1;for(var _=b.getID3Data(L,0)||[],y=_.length,m=L.length;y<m;y++)if(O.probe(L,y))return B.logger.log("MPEG Audio sync word found !"),!0;return!1},T.canParse=function(L,_){return O.canParse(L,_)},T.appendFrame=function(L,_,y){if(this.basePTS!==null)return O.appendFrame(L,_,y,this.basePTS,this.frameIndex)},P}(w.default);const M=k},"./src/demux/mp4demuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>k});var w=l("./src/polyfills/number.ts"),b=l("./src/types/demuxer.ts"),B=l("./src/utils/mp4-tools.ts"),O=l("./src/demux/dummy-demuxed-track.ts"),$=/\/emsg[-/]ID3/i,F=function(){function M(P,T){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=T}var I=M.prototype;return I.resetTimeStamp=function(){},I.resetInitSegment=function(T,R,L,_){var y=this.videoTrack=(0,O.dummyTrack)("video",1),m=this.audioTrack=(0,O.dummyTrack)("audio",1),p=this.txtTrack=(0,O.dummyTrack)("text",1);if(this.id3Track=(0,O.dummyTrack)("id3",1),this.timeOffset=0,!(!T||!T.byteLength)){var C=(0,B.parseInitSegment)(T);if(C.video){var x=C.video,o=x.id,c=x.timescale,S=x.codec;y.id=o,y.timescale=p.timescale=c,y.codec=S}if(C.audio){var f=C.audio,h=f.id,u=f.timescale,g=f.codec;m.id=h,m.timescale=u,m.codec=g}p.id=B.RemuxerTrackIdConfig.text,y.sampleDuration=0,y.duration=m.duration=_}},I.resetContiguity=function(){},M.probe=function(T){return T=T.length>16384?T.subarray(0,16384):T,(0,B.findBox)(T,["moof"]).length>0},I.demux=function(T,R){this.timeOffset=R;var L=T,_=this.videoTrack,y=this.txtTrack;if(this.config.progressive){this.remainderData&&(L=(0,B.appendUint8Array)(this.remainderData,T));var m=(0,B.segmentValidRange)(L);this.remainderData=m.remainder,_.samples=m.valid||new Uint8Array}else _.samples=L;var p=this.extractID3Track(_,R);return y.samples=(0,B.parseSamples)(R,_),{videoTrack:_,audioTrack:this.audioTrack,id3Track:p,textTrack:this.txtTrack}},I.flush=function(){var T=this.timeOffset,R=this.videoTrack,L=this.txtTrack;R.samples=this.remainderData||new Uint8Array,this.remainderData=null;var _=this.extractID3Track(R,this.timeOffset);return L.samples=(0,B.parseSamples)(T,R),{videoTrack:R,audioTrack:(0,O.dummyTrack)(),id3Track:_,textTrack:(0,O.dummyTrack)()}},I.extractID3Track=function(T,R){var L=this.id3Track;if(T.samples.length){var _=(0,B.findBox)(T.samples,["emsg"]);_&&_.forEach(function(y){var m=(0,B.parseEmsg)(y);if($.test(m.schemeIdUri)){var p=(0,w.isFiniteNumber)(m.presentationTime)?m.presentationTime/m.timeScale:R+m.presentationTimeDelta/m.timeScale,C=m.eventDuration===4294967295?Number.POSITIVE_INFINITY:m.eventDuration/m.timeScale;C<=.001&&(C=Number.POSITIVE_INFINITY);var x=m.payload;L.samples.push({data:x,len:x.byteLength,dts:p,pts:p,type:b.MetadataSchema.emsg,duration:C})}})}return L},I.demuxSampleAes=function(T,R,L){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},I.destroy=function(){},M}();const k=F},"./src/demux/mpegaudio.ts":(d,D,l)=>{l.r(D),l.d(D,{appendFrame:()=>F,canParse:()=>P,isHeader:()=>I,isHeaderPattern:()=>M,parseHeader:()=>k,probe:()=>T});var w=null,b=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],B=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],O=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],$=[0,1,1,4];function F(R,L,_,y,m){if(!(_+24>L.length)){var p=k(L,_);if(p&&_+p.frameLength<=L.length){var C=p.samplesPerFrame*9e4/p.sampleRate,x=y+m*C,o={unit:L.subarray(_,_+p.frameLength),pts:x,dts:x};return R.config=[],R.channelCount=p.channelCount,R.samplerate=p.sampleRate,R.samples.push(o),{sample:o,length:p.frameLength,missing:0}}}}function k(R,L){var _=R[L+1]>>3&3,y=R[L+1]>>1&3,m=R[L+2]>>4&15,p=R[L+2]>>2&3;if(_!==1&&m!==0&&m!==15&&p!==3){var C=R[L+2]>>1&1,x=R[L+3]>>6,o=_===3?3-y:y===3?3:4,c=b[o*14+m-1]*1e3,S=_===3?0:_===2?1:2,f=B[S*3+p],h=x===3?1:2,u=O[_][y],g=$[y],s=u*8*g,E=Math.floor(u*c/f+C)*g;if(w===null){var A=navigator.userAgent||"",v=A.match(/Chrome\/(\d+)/i);w=v?parseInt(v[1]):0}var N=!!w&&w<=87;return N&&y===2&&c>=224e3&&x===0&&(R[L+3]=R[L+3]|128),{sampleRate:f,channelCount:h,frameLength:E,samplesPerFrame:s}}}function M(R,L){return R[L]===255&&(R[L+1]&224)===224&&(R[L+1]&6)!==0}function I(R,L){return L+1<R.length&&M(R,L)}function P(R,L){var _=4;return M(R,L)&&_<=R.length-L}function T(R,L){if(L+1<R.length&&M(R,L)){var _=4,y=k(R,L),m=_;y!=null&&y.frameLength&&(m=y.frameLength);var p=L+m;return p===R.length||I(R,p)}return!1}},"./src/demux/sample-aes.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>O});var w=l("./src/crypt/decrypter.ts"),b=l("./src/utils/mp4-tools.ts"),B=function(){function $(k,M,I){this.keyData=void 0,this.decrypter=void 0,this.keyData=I,this.decrypter=new w.default(M,{removePKCS7Padding:!1})}var F=$.prototype;return F.decryptBuffer=function(M){return this.decrypter.decrypt(M,this.keyData.key.buffer,this.keyData.iv.buffer)},F.decryptAacSample=function(M,I,P){var T=this,R=M[I].unit;if(!(R.length<=16)){var L=R.subarray(16,R.length-R.length%16),_=L.buffer.slice(L.byteOffset,L.byteOffset+L.length);this.decryptBuffer(_).then(function(y){var m=new Uint8Array(y);R.set(m,16),T.decrypter.isSync()||T.decryptAacSamples(M,I+1,P)})}},F.decryptAacSamples=function(M,I,P){for(;;I++){if(I>=M.length){P();return}if(!(M[I].unit.length<32)&&(this.decryptAacSample(M,I,P),!this.decrypter.isSync()))return}},F.getAvcEncryptedData=function(M){for(var I=Math.floor((M.length-48)/160)*16+16,P=new Int8Array(I),T=0,R=32;R<M.length-16;R+=160,T+=16)P.set(M.subarray(R,R+16),T);return P},F.getAvcDecryptedUnit=function(M,I){for(var P=new Uint8Array(I),T=0,R=32;R<M.length-16;R+=160,T+=16)M.set(P.subarray(T,T+16),R);return M},F.decryptAvcSample=function(M,I,P,T,R){var L=this,_=(0,b.discardEPB)(R.data),y=this.getAvcEncryptedData(_);this.decryptBuffer(y.buffer).then(function(m){R.data=L.getAvcDecryptedUnit(_,m),L.decrypter.isSync()||L.decryptAvcSamples(M,I,P+1,T)})},F.decryptAvcSamples=function(M,I,P,T){if(M instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;I++,P=0){if(I>=M.length){T();return}for(var R=M[I].units;!(P>=R.length);P++){var L=R[P];if(!(L.data.length<=48||L.type!==1&&L.type!==5)&&(this.decryptAvcSample(M,I,P,T,L),!this.decrypter.isSync()))return}}},$}();const O=B},"./src/demux/transmuxer-interface.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>I});var w=l("./src/demux/webworkify-webpack.js"),b=l("./src/events.ts"),B=l("./src/demux/transmuxer.ts"),O=l("./src/utils/logger.ts"),$=l("./src/errors.ts"),F=l("./src/utils/mediasource-helper.ts"),k=l("./node_modules/eventemitter3/index.js"),M=(0,F.getMediaSource)()||{isTypeSupported:function(){return!1}},I=function(){function P(R,L,_,y){var m=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var p=R.config;this.hls=R,this.id=L,this.useWorker=!!p.enableWorker,this.onTransmuxComplete=_,this.onFlush=y;var C=function(f,h){h=h||{},h.frag=m.frag,h.id=m.id,m.hls.trigger(f,h)};this.observer=new k.EventEmitter,this.observer.on(b.Events.FRAG_DECRYPTED,C),this.observer.on(b.Events.ERROR,C);var x={mp4:M.isTypeSupported("video/mp4"),mpeg:M.isTypeSupported("audio/mpeg"),mp3:M.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){O.logger.log("demuxing in webworker");var c;try{c=this.worker=(0,w.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(S){m.useWorker=!1,O.logger.warn("Exception in webworker, fallback to inline"),m.hls.trigger(b.Events.ERROR,{type:$.ErrorTypes.OTHER_ERROR,details:$.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(S.message+"  ("+S.filename+":"+S.lineno+")")})},c.postMessage({cmd:"init",typeSupported:x,vendor:o,id:L,config:JSON.stringify(p)})}catch(S){O.logger.warn("Error in worker:",S),O.logger.error("Error while initializing DemuxerWorker, fallback to inline"),c&&self.URL.revokeObjectURL(c.objectURL),this.transmuxer=new B.default(this.observer,x,p,o,L),this.worker=null}}else this.transmuxer=new B.default(this.observer,x,p,o,L)}var T=P.prototype;return T.destroy=function(){var L=this.worker;if(L)L.removeEventListener("message",this.onwmsg),L.terminate(),this.worker=null,this.onwmsg=void 0;else{var _=this.transmuxer;_&&(_.destroy(),this.transmuxer=null)}var y=this.observer;y&&y.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},T.push=function(L,_,y,m,p,C,x,o,c,S){var f,h,u=this;c.transmuxing.start=self.performance.now();var g=this.transmuxer,s=this.worker,E=C?C.start:p.start,A=p.decryptdata,v=this.frag,N=!(v&&p.cc===v.cc),U=!(v&&c.level===v.level),K=v?c.sn-v.sn:-1,W=this.part?c.part-this.part.index:-1,H=K===0&&c.id>1&&c.id===(v==null?void 0:v.stats.chunkCount),j=!U&&(K===1||K===0&&(W===1||H&&W<=0)),G=self.performance.now();(U||K||p.stats.parsing.start===0)&&(p.stats.parsing.start=G),C&&(W||!j)&&(C.stats.parsing.start=G);var z=!(v&&((f=p.initSegment)===null||f===void 0?void 0:f.url)===((h=v.initSegment)===null||h===void 0?void 0:h.url)),Y=new B.TransmuxState(N,j,o,U,E,z);if(!j||N||z){O.logger.log("[transmuxer-interface, "+p.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+`
        discontinuity: `+N+`
        trackSwitch: `+U+`
        contiguous: `+j+`
        accurateTimeOffset: `+o+`
        timeOffset: `+E+`
        initSegmentChange: `+z);var X=new B.TransmuxConfig(y,m,_,x,S);this.configureTransmuxer(X)}if(this.frag=p,this.part=C,s)s.postMessage({cmd:"demux",data:L,decryptdata:A,chunkMeta:c,state:Y},L instanceof ArrayBuffer?[L]:[]);else if(g){var Q=g.push(L,A,c,Y);(0,B.isPromise)(Q)?(g.async=!0,Q.then(function(q){u.handleTransmuxComplete(q)}).catch(function(q){u.transmuxerError(q,c,"transmuxer-interface push error")})):(g.async=!1,this.handleTransmuxComplete(Q))}},T.flush=function(L){var _=this;L.transmuxing.start=self.performance.now();var y=this.transmuxer,m=this.worker;if(m)m.postMessage({cmd:"flush",chunkMeta:L});else if(y){var p=y.flush(L),C=(0,B.isPromise)(p);C||y.async?((0,B.isPromise)(p)||(p=Promise.resolve(p)),p.then(function(x){_.handleFlushResult(x,L)}).catch(function(x){_.transmuxerError(x,L,"transmuxer-interface flush error")})):this.handleFlushResult(p,L)}},T.transmuxerError=function(L,_,y){!this.hls||this.hls.trigger(b.Events.ERROR,{type:$.ErrorTypes.MEDIA_ERROR,details:$.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:_,fatal:!1,error:L,err:L,reason:y})},T.handleFlushResult=function(L,_){var y=this;L.forEach(function(m){y.handleTransmuxComplete(m)}),this.onFlush(_)},T.onWorkerMessage=function(L){var _=L.data,y=this.hls;switch(_.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(_.data);break}case"flush":{this.onFlush(_.data);break}case"workerLog":O.logger[_.data.logType]&&O.logger[_.data.logType](_.data.message);break;default:{_.data=_.data||{},_.data.frag=this.frag,_.data.id=this.id,y.trigger(_.event,_.data);break}}},T.configureTransmuxer=function(L){var _=this.worker,y=this.transmuxer;_?_.postMessage({cmd:"configure",config:L}):y&&y.configure(L)},T.handleTransmuxComplete=function(L){L.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(L)},P}()},"./src/demux/transmuxer-worker.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>F});var w=l("./src/demux/transmuxer.ts"),b=l("./src/events.ts"),B=l("./src/utils/logger.ts"),O=l("./node_modules/eventemitter3/index.js"),$=l("./src/errors.ts");function F(T){var R=new O.EventEmitter,L=function(m,p){T.postMessage({event:m,data:p})};R.on(b.Events.FRAG_DECRYPTED,L),R.on(b.Events.ERROR,L);var _=function(){var m=function(x){var o=function(S){L("workerLog",{logType:x,message:S})};B.logger[x]=o};for(var p in B.logger)m(p)};T.addEventListener("message",function(y){var m=y.data;switch(m.cmd){case"init":{var p=JSON.parse(m.config);T.transmuxer=new w.default(R,m.typeSupported,p,m.vendor,m.id),(0,B.enableLogs)(p.debug,m.id),_(),L("init",null);break}case"configure":{T.transmuxer.configure(m.config);break}case"demux":{var C=T.transmuxer.push(m.data,m.decryptdata,m.chunkMeta,m.state);(0,w.isPromise)(C)?(T.transmuxer.async=!0,C.then(function(S){k(T,S)}).catch(function(S){L(b.Events.ERROR,{type:$.ErrorTypes.MEDIA_ERROR,details:$.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:m.chunkMeta,fatal:!1,error:S,err:S,reason:"transmuxer-worker push error"})})):(T.transmuxer.async=!1,k(T,C));break}case"flush":{var x=m.chunkMeta,o=T.transmuxer.flush(x),c=(0,w.isPromise)(o);c||T.transmuxer.async?((0,w.isPromise)(o)||(o=Promise.resolve(o)),o.then(function(S){I(T,S,x)}).catch(function(S){L(b.Events.ERROR,{type:$.ErrorTypes.MEDIA_ERROR,details:$.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:m.chunkMeta,fatal:!1,error:S,err:S,reason:"transmuxer-worker flush error"})})):I(T,o,x);break}}})}function k(T,R){if(P(R.remuxResult))return!1;var L=[],_=R.remuxResult,y=_.audio,m=_.video;return y&&M(L,y),m&&M(L,m),T.postMessage({event:"transmuxComplete",data:R},L),!0}function M(T,R){R.data1&&T.push(R.data1.buffer),R.data2&&T.push(R.data2.buffer)}function I(T,R,L){var _=R.reduce(function(y,m){return k(T,m)||y},!1);_||T.postMessage({event:"transmuxComplete",data:R[0]}),T.postMessage({event:"flush",data:L})}function P(T){return!T.audio&&!T.video&&!T.text&&!T.id3&&!T.initSegment}},"./src/demux/transmuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{TransmuxConfig:()=>p,TransmuxState:()=>C,default:()=>L,isPromise:()=>m});var w=l("./src/events.ts"),b=l("./src/errors.ts"),B=l("./src/crypt/decrypter.ts"),O=l("./src/demux/aacdemuxer.ts"),$=l("./src/demux/mp4demuxer.ts"),F=l("./src/demux/tsdemuxer.ts"),k=l("./src/demux/mp3demuxer.ts"),M=l("./src/remux/mp4-remuxer.ts"),I=l("./src/remux/passthrough-remuxer.ts"),P=l("./src/utils/logger.ts"),T;try{T=self.performance.now.bind(self.performance)}catch{P.logger.debug("Unable to use Performance API on this environment"),T=self.Date.now}var R=[{demux:$.default,remux:I.default},{demux:F.default,remux:M.default},{demux:O.default,remux:M.default},{demux:k.default,remux:M.default}],L=function(){function x(c,S,f,h,u){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=c,this.typeSupported=S,this.config=f,this.vendor=h,this.id=u}var o=x.prototype;return o.configure=function(S){this.transmuxConfig=S,this.decrypter&&this.decrypter.reset()},o.push=function(S,f,h,u){var g=this,s=h.transmuxing;s.executeStart=T();var E=new Uint8Array(S),A=this.currentTransmuxState,v=this.transmuxConfig;u&&(this.currentTransmuxState=u);var N=u||A,U=N.contiguous,K=N.discontinuity,W=N.trackSwitch,H=N.accurateTimeOffset,j=N.timeOffset,G=N.initSegmentChange,z=v.audioCodec,Y=v.videoCodec,X=v.defaultInitPts,Q=v.duration,q=v.initSegmentData,J=_(E,f);if(J&&J.method==="AES-128"){var ee=this.getDecrypter();if(ee.isSync()){var re=ee.softwareDecrypt(E,J.key.buffer,J.iv.buffer),oe=h.part>-1;if(oe&&(re=ee.flush()),!re)return s.executeEnd=T(),y(h);E=new Uint8Array(re)}else return this.decryptionPromise=ee.webCryptoDecrypt(E,J.key.buffer,J.iv.buffer).then(function(he){var pe=g.push(he,null,h);return g.decryptionPromise=null,pe}),this.decryptionPromise}var ne=this.needsProbing(K,W);ne&&this.configureTransmuxer(E),(K||W||G||ne)&&this.resetInitSegment(q,z,Y,Q,f),(K||G||ne)&&this.resetInitialTimestamp(X),U||this.resetContiguity();var te=this.transmux(E,J,j,H,h),ue=this.currentTransmuxState;return ue.contiguous=!0,ue.discontinuity=!1,ue.trackSwitch=!1,s.executeEnd=T(),te},o.flush=function(S){var f=this,h=S.transmuxing;h.executeStart=T();var u=this.decrypter,g=this.currentTransmuxState,s=this.decryptionPromise;if(s)return s.then(function(){return f.flush(S)});var E=[],A=g.timeOffset;if(u){var v=u.flush();v&&E.push(this.push(v,null,S))}var N=this.demuxer,U=this.remuxer;if(!N||!U)return this.observer.emit(w.Events.ERROR,w.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),h.executeEnd=T(),[y(S)];var K=N.flush(A);return m(K)?K.then(function(W){return f.flushRemux(E,W,S),E}):(this.flushRemux(E,K,S),E)},o.flushRemux=function(S,f,h){var u=f.audioTrack,g=f.videoTrack,s=f.id3Track,E=f.textTrack,A=this.currentTransmuxState,v=A.accurateTimeOffset,N=A.timeOffset;P.logger.log("[transmuxer.ts]: Flushed fragment "+h.sn+(h.part>-1?" p: "+h.part:"")+" of level "+h.level);var U=this.remuxer.remux(u,g,s,E,N,v,!0,this.id);S.push({remuxResult:U,chunkMeta:h}),h.transmuxing.executeEnd=T()},o.resetInitialTimestamp=function(S){var f=this.demuxer,h=this.remuxer;!f||!h||(f.resetTimeStamp(S),h.resetTimeStamp(S))},o.resetContiguity=function(){var S=this.demuxer,f=this.remuxer;!S||!f||(S.resetContiguity(),f.resetNextTimestamp())},o.resetInitSegment=function(S,f,h,u,g){var s=this.demuxer,E=this.remuxer;!s||!E||(s.resetInitSegment(S,f,h,u),E.resetInitSegment(S,f,h,g))},o.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},o.transmux=function(S,f,h,u,g){var s;return f&&f.method==="SAMPLE-AES"?s=this.transmuxSampleAes(S,f,h,u,g):s=this.transmuxUnencrypted(S,h,u,g),s},o.transmuxUnencrypted=function(S,f,h,u){var g=this.demuxer.demux(S,f,!1,!this.config.progressive),s=g.audioTrack,E=g.videoTrack,A=g.id3Track,v=g.textTrack,N=this.remuxer.remux(s,E,A,v,f,h,!1,this.id);return{remuxResult:N,chunkMeta:u}},o.transmuxSampleAes=function(S,f,h,u,g){var s=this;return this.demuxer.demuxSampleAes(S,f,h).then(function(E){var A=s.remuxer.remux(E.audioTrack,E.videoTrack,E.id3Track,E.textTrack,h,u,!1,s.id);return{remuxResult:A,chunkMeta:g}})},o.configureTransmuxer=function(S){for(var f=this.config,h=this.observer,u=this.typeSupported,g=this.vendor,s,E=0,A=R.length;E<A;E++)if(R[E].demux.probe(S)){s=R[E];break}s||(P.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),s={demux:$.default,remux:I.default});var v=this.demuxer,N=this.remuxer,U=s.remux,K=s.demux;(!N||!(N instanceof U))&&(this.remuxer=new U(h,f,u,g)),(!v||!(v instanceof K))&&(this.demuxer=new K(h,f,u),this.probe=K.probe)},o.needsProbing=function(S,f){return!this.demuxer||!this.remuxer||S||f},o.getDecrypter=function(){var S=this.decrypter;return S||(S=this.decrypter=new B.default(this.config)),S},x}();function _(x,o){var c=null;return x.byteLength>0&&o!=null&&o.key!=null&&o.iv!==null&&o.method!=null&&(c=o),c}var y=function(o){return{remuxResult:{},chunkMeta:o}};function m(x){return"then"in x&&x.then instanceof Function}var p=function(o,c,S,f,h){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=o,this.videoCodec=c,this.initSegmentData=S,this.duration=f,this.defaultInitPts=h},C=function(o,c,S,f,h,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=o,this.contiguous=c,this.accurateTimeOffset=S,this.trackSwitch=f,this.timeOffset=h,this.initSegmentChange=u}},"./src/demux/tsdemuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>x});var w=l("./src/demux/adts.ts"),b=l("./src/demux/mpegaudio.ts"),B=l("./src/demux/exp-golomb.ts"),O=l("./src/demux/sample-aes.ts"),$=l("./src/events.ts"),F=l("./src/utils/mp4-tools.ts"),k=l("./src/utils/logger.ts"),M=l("./src/errors.ts"),I=l("./src/types/demuxer.ts");function P(){return P=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var S=arguments[c];for(var f in S)Object.prototype.hasOwnProperty.call(S,f)&&(o[f]=S[f])}return o},P.apply(this,arguments)}var T=188,R=function(){function o(S,f,h){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=S,this.config=f,this.typeSupported=h}o.probe=function(f){var h=o.syncOffset(f);return h>0&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+h),h!==-1},o.syncOffset=function(f){for(var h=Math.min(T*5,f.length-T)+1,u=0;u<h;){for(var g=!1,s=0;s<h&&f[s]===71;s+=T)if(!g&&_(f,s)===0&&(g=!0),g&&s+T>h)return u;u++}return-1},o.createTrack=function(f,h){return{container:f==="video"||f==="audio"?"video/mp2t":void 0,type:f,id:F.RemuxerTrackIdConfig[f],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:f==="audio"?h:void 0}};var c=o.prototype;return c.resetInitSegment=function(f,h,u,g){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=o.createTrack("video"),this._audioTrack=o.createTrack("audio",g),this._id3Track=o.createTrack("id3"),this._txtTrack=o.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=h,this.videoCodec=u,this._duration=g},c.resetTimeStamp=function(){},c.resetContiguity=function(){var f=this._audioTrack,h=this._avcTrack,u=this._id3Track;f&&(f.pesData=null),h&&(h.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},c.demux=function(f,h,u,g){u===void 0&&(u=!1),g===void 0&&(g=!1),u||(this.sampleAes=null);var s,E=this._avcTrack,A=this._audioTrack,v=this._id3Track,N=this._txtTrack,U=E.pid,K=E.pesData,W=A.pid,H=v.pid,j=A.pesData,G=v.pesData,z=null,Y=this.pmtParsed,X=this._pmtId,Q=f.length;if(this.remainderData&&(f=(0,F.appendUint8Array)(this.remainderData,f),Q=f.length,this.remainderData=null),Q<T&&!g)return this.remainderData=f,{audioTrack:A,videoTrack:E,id3Track:v,textTrack:N};var q=Math.max(0,o.syncOffset(f));Q-=(Q-q)%T,Q<f.byteLength&&!g&&(this.remainderData=new Uint8Array(f.buffer,Q,f.buffer.byteLength-Q));for(var J=0,ee=q;ee<Q;ee+=T)if(f[ee]===71){var re=!!(f[ee+1]&64),oe=_(f,ee),ne=(f[ee+3]&48)>>4,te=void 0;if(ne>1){if(te=ee+5+f[ee+4],te===ee+T)continue}else te=ee+4;switch(oe){case U:re&&(K&&(s=p(K))&&this.parseAVCPES(E,N,s,!1),K={data:[],size:0}),K&&(K.data.push(f.subarray(te,ee+T)),K.size+=ee+T-te);break;case W:if(re){if(j&&(s=p(j)))switch(A.segmentCodec){case"aac":this.parseAACPES(A,s);break;case"mp3":this.parseMPEGPES(A,s);break}j={data:[],size:0}}j&&(j.data.push(f.subarray(te,ee+T)),j.size+=ee+T-te);break;case H:re&&(G&&(s=p(G))&&this.parseID3PES(v,s),G={data:[],size:0}),G&&(G.data.push(f.subarray(te,ee+T)),G.size+=ee+T-te);break;case 0:re&&(te+=f[te]+1),X=this._pmtId=y(f,te);break;case X:{re&&(te+=f[te]+1);var ue=m(f,te,this.typeSupported,u);U=ue.avc,U>0&&(E.pid=U),W=ue.audio,W>0&&(A.pid=W,A.segmentCodec=ue.segmentCodec),H=ue.id3,H>0&&(v.pid=H),z!==null&&!Y&&(k.logger.log("unknown PID '"+z+"' in TS found"),z=null,ee=q-188),Y=this.pmtParsed=!0;break}case 17:case 8191:break;default:z=oe;break}}else J++;J>0&&this.observer.emit($.Events.ERROR,$.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+J+" TS packet/s that do not start with 0x47"}),E.pesData=K,A.pesData=j,v.pesData=G;var he={audioTrack:A,videoTrack:E,id3Track:v,textTrack:N};return g&&this.extractRemainingSamples(he),he},c.flush=function(){var f=this.remainderData;this.remainderData=null;var h;return f?h=this.demux(f,-1,!1,!0):h={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(h),this.sampleAes?this.decrypt(h,this.sampleAes):h},c.extractRemainingSamples=function(f){var h=f.audioTrack,u=f.videoTrack,g=f.id3Track,s=f.textTrack,E=u.pesData,A=h.pesData,v=g.pesData,N;if(E&&(N=p(E))?(this.parseAVCPES(u,s,N,!0),u.pesData=null):u.pesData=E,A&&(N=p(A))){switch(h.segmentCodec){case"aac":this.parseAACPES(h,N);break;case"mp3":this.parseMPEGPES(h,N);break}h.pesData=null}else A!=null&&A.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=A;v&&(N=p(v))?(this.parseID3PES(g,N),g.pesData=null):g.pesData=v},c.demuxSampleAes=function(f,h,u){var g=this.demux(f,u,!0,!this.config.progressive),s=this.sampleAes=new O.default(this.observer,this.config,h);return this.decrypt(g,s)},c.decrypt=function(f,h){return new Promise(function(u){var g=f.audioTrack,s=f.videoTrack;g.samples&&g.segmentCodec==="aac"?h.decryptAacSamples(g.samples,0,function(){s.samples?h.decryptAvcSamples(s.samples,0,0,function(){u(f)}):u(f)}):s.samples&&h.decryptAvcSamples(s.samples,0,0,function(){u(f)})})},c.destroy=function(){this._duration=0},c.parseAVCPES=function(f,h,u,g){var s=this,E=this.parseAVCNALu(f,u.data),A=this.avcSample,v,N=!1;u.data=null,A&&E.length&&!f.audFound&&(C(A,f),A=this.avcSample=L(!1,u.pts,u.dts,"")),E.forEach(function(U){switch(U.type){case 1:{v=!0,A||(A=s.avcSample=L(!0,u.pts,u.dts,"")),A.frame=!0;var K=U.data;if(N&&K.length>4){var W=new B.default(K).readSliceType();(W===2||W===4||W===7||W===9)&&(A.key=!0)}break}case 5:v=!0,A||(A=s.avcSample=L(!0,u.pts,u.dts,"")),A.key=!0,A.frame=!0;break;case 6:{v=!0,(0,F.parseSEIMessageFromNALu)(U.data,1,u.pts,h.samples);break}case 7:if(v=!0,N=!0,!f.sps){var H=new B.default(U.data),j=H.readSPS();f.width=j.width,f.height=j.height,f.pixelRatio=j.pixelRatio,f.sps=[U.data],f.duration=s._duration;for(var G=U.data.subarray(1,4),z="avc1.",Y=0;Y<3;Y++){var X=G[Y].toString(16);X.length<2&&(X="0"+X),z+=X}f.codec=z}break;case 8:v=!0,f.pps||(f.pps=[U.data]);break;case 9:v=!1,f.audFound=!0,A&&C(A,f),A=s.avcSample=L(!1,u.pts,u.dts,"");break;case 12:v=!0;break;default:v=!1,A&&(A.debug+="unknown NAL "+U.type+" ");break}if(A&&v){var Q=A.units;Q.push(U)}}),g&&A&&(C(A,f),this.avcSample=null)},c.getLastNalUnit=function(f){var h,u=this.avcSample,g;if((!u||u.units.length===0)&&(u=f[f.length-1]),(h=u)!==null&&h!==void 0&&h.units){var s=u.units;g=s[s.length-1]}return g},c.parseAVCNALu=function(f,h){var u=h.byteLength,g=f.naluState||0,s=g,E=[],A=0,v,N,U,K=-1,W=0;for(g===-1&&(K=0,W=h[0]&31,g=0,A=1);A<u;){if(v=h[A++],!g){g=v?0:1;continue}if(g===1){g=v?0:2;continue}if(!v)g=3;else if(v===1){if(K>=0){var H={data:h.subarray(K,A-g-1),type:W};E.push(H)}else{var j=this.getLastNalUnit(f.samples);if(j&&(s&&A<=4-s&&j.state&&(j.data=j.data.subarray(0,j.data.byteLength-s)),N=A-g-1,N>0)){var G=new Uint8Array(j.data.byteLength+N);G.set(j.data,0),G.set(h.subarray(0,N),j.data.byteLength),j.data=G,j.state=0}}A<u?(U=h[A]&31,K=A,W=U,g=0):g=-1}else g=0}if(K>=0&&g>=0){var z={data:h.subarray(K,u),type:W,state:g};E.push(z)}if(E.length===0){var Y=this.getLastNalUnit(f.samples);if(Y){var X=new Uint8Array(Y.data.byteLength+h.byteLength);X.set(Y.data,0),X.set(h,Y.data.byteLength),Y.data=X}}return f.naluState=g,E},c.parseAACPES=function(f,h){var u=0,g=this.aacOverFlow,s=h.data;if(g){this.aacOverFlow=null;var E=g.missing,A=g.sample.unit.byteLength;if(E===-1){var v=new Uint8Array(A+s.byteLength);v.set(g.sample.unit,0),v.set(s,A),s=v}else{var N=A-E;g.sample.unit.set(s.subarray(0,E),N),f.samples.push(g.sample),u=g.missing}}var U,K;for(U=u,K=s.length;U<K-1&&!w.isHeader(s,U);U++);if(U!==u){var W,H;if(U<K-1?(W="AAC PES did not start with ADTS header,offset:"+U,H=!1):(W="no ADTS header found in AAC PES",H=!0),k.logger.warn("parsing error:"+W),this.observer.emit($.Events.ERROR,$.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.FRAG_PARSING_ERROR,fatal:H,reason:W}),H)return}w.initTrackConfig(f,this.observer,s,U,this.audioCodec);var j;if(h.pts!==void 0)j=h.pts;else if(g){var G=w.getFrameDuration(f.samplerate);j=g.sample.pts+G}else{k.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var z=0,Y;U<K;)if(Y=w.appendFrame(f,s,U,j,z),U+=Y.length,Y.missing){this.aacOverFlow=Y;break}else for(z++;U<K-1&&!w.isHeader(s,U);U++);},c.parseMPEGPES=function(f,h){var u=h.data,g=u.length,s=0,E=0,A=h.pts;if(A===void 0){k.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;E<g;)if(b.isHeader(u,E)){var v=b.appendFrame(f,u,E,A,s);if(v)E+=v.length,s++;else break}else E++},c.parseID3PES=function(f,h){if(h.pts===void 0){k.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var u=P({},h,{type:this._avcTrack?I.MetadataSchema.emsg:I.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});f.samples.push(u)},o}();function L(o,c,S,f){return{key:o,frame:!1,pts:c,dts:S,units:[],debug:f,length:0}}function _(o,c){return((o[c+1]&31)<<8)+o[c+2]}function y(o,c){return(o[c+10]&31)<<8|o[c+11]}function m(o,c,S,f){var h={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},u=(o[c+1]&15)<<8|o[c+2],g=c+3+u-4,s=(o[c+10]&15)<<8|o[c+11];for(c+=12+s;c<g;){var E=_(o,c);switch(o[c]){case 207:if(!f){k.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:h.audio===-1&&(h.audio=E);break;case 21:h.id3===-1&&(h.id3=E);break;case 219:if(!f){k.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:h.avc===-1&&(h.avc=E);break;case 3:case 4:S.mpeg!==!0&&S.mp3!==!0?k.logger.log("MPEG audio found, not supported in this browser"):h.audio===-1&&(h.audio=E,h.segmentCodec="mp3");break;case 36:k.logger.warn("Unsupported HEVC stream type found");break}c+=((o[c+3]&15)<<8|o[c+4])+5}return h}function p(o){var c=0,S,f,h,u,g,s=o.data;if(!o||o.size===0)return null;for(;s[0].length<19&&s.length>1;){var E=new Uint8Array(s[0].length+s[1].length);E.set(s[0]),E.set(s[1],s[0].length),s[0]=E,s.splice(1,1)}S=s[0];var A=(S[0]<<16)+(S[1]<<8)+S[2];if(A===1){if(f=(S[4]<<8)+S[5],f&&f>o.size-6)return null;var v=S[7];v&192&&(u=(S[9]&14)*536870912+(S[10]&255)*4194304+(S[11]&254)*16384+(S[12]&255)*128+(S[13]&254)/2,v&64?(g=(S[14]&14)*536870912+(S[15]&255)*4194304+(S[16]&254)*16384+(S[17]&255)*128+(S[18]&254)/2,u-g>54e5&&(k.logger.warn(Math.round((u-g)/9e4)+"s delta between PTS and DTS, align them"),u=g)):g=u),h=S[8];var N=h+9;if(o.size<=N)return null;o.size-=N;for(var U=new Uint8Array(o.size),K=0,W=s.length;K<W;K++){S=s[K];var H=S.byteLength;if(N)if(N>H){N-=H;continue}else S=S.subarray(N),H-=N,N=0;U.set(S,c),c+=H}return f&&(f-=h+3),{data:U,pts:u,dts:g,len:f}}return null}function C(o,c){if(o.units.length&&o.frame){if(o.pts===void 0){var S=c.samples,f=S.length;if(f){var h=S[f-1];o.pts=h.pts,o.dts=h.dts}else{c.dropped++;return}}c.samples.push(o)}o.debug.length&&k.logger.log(o.pts+"/"+o.dts+":"+o.debug)}const x=R},"./src/demux/webworkify-webpack.js":(d,D,l)=>{l.r(D),l.d(D,{default:()=>T});var w=function(){var L=ENTRY_MODULE,_={},y=function p(C){var x=_[C];if(x!==void 0)return x.exports;var o=_[C]={exports:{}};return L[C].call(o.exports,o,o.exports,p),o.exports};y.m=L,function(){y.n=function(p){var C=p&&p.__esModule?function(){return p.default}:function(){return p};return y.d(C,{a:C}),C}}(),function(){y.d=function(p,C){for(var x in C)y.o(C,x)&&!y.o(p,x)&&Object.defineProperty(p,x,{enumerable:!0,get:C[x]})}}(),function(){y.o=function(p,C){return Object.prototype.hasOwnProperty.call(p,C)}}(),function(){y.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}}();var m=y(ENTRY_MODULE);return m.default||m},b=w.toString().split("ENTRY_MODULE"),B="[\\.|\\-|\\+|\\w|/|@]+",O="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+B+").*?\\)";function $(R){return(R+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function F(R){return!isNaN(1*R)}function k(R,L,_){var y={};y[_]=[];var m=L.toString().replace(/^"[^"]+"/,"function"),p=m.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||m.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!p)return y;for(var C=p[1],x=new RegExp("(\\\\n|\\W)"+$(C)+O,"g"),o;o=x.exec(m);)o[3]!=="dll-reference"&&y[_].push(o[3]);for(x=new RegExp("\\("+$(C)+'\\("(dll-reference\\s('+B+'))"\\)\\)'+O,"g");o=x.exec(m);)R[o[2]]||(y[_].push(o[1]),R[o[2]]=l(o[1]).m),y[o[2]]=y[o[2]]||[],y[o[2]].push(o[4]);for(var c=Object.keys(y),S=0;S<c.length;S++)for(var f=0;f<y[c[S]].length;f++)F(y[c[S]][f])&&(y[c[S]][f]=1*y[c[S]][f]);return y}function M(R){var L=Object.keys(R);return L.reduce(function(_,y){return _||R[y].length>0},!1)}function I(R,L){for(var _={main:[L]},y={main:[]},m={main:{}};M(_);)for(var p=Object.keys(_),C=0;C<p.length;C++){var x=p[C],o=_[x],c=o.pop();if(m[x]=m[x]||{},!(m[x][c]||!R[x][c])){m[x][c]=!0,y[x]=y[x]||[],y[x].push(c);for(var S=k(R,R[x][c],x),f=Object.keys(S),h=0;h<f.length;h++)_[f[h]]=_[f[h]]||[],_[f[h]]=_[f[h]].concat(S[f[h]])}}return y}function P(R,L,_,y){var m=R[y].map(function(p){return'"'+p+'": '+L[y][p].toString().replace(/^"[^"]+"/,"function")}).join(",");return b[0]+"{"+m+"}"+b[1]+'"'+_+'"'+b[2]}function T(R,L){L=L||{};var _={main:l.m},y=L.all?{main:Object.keys(_.main)}:I(_,R),m="";Object.keys(y).filter(function(c){return c!=="main"}).forEach(function(c){for(var S=0;y[c][S];)S++;y[c].push(S),_[c][S]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",m=m+("var "+c+" = ("+P(y,_,S,modules)+`)();
`)}),m=m+("new (("+P(y,_,R,"main")+")())(self);");var p=new window.Blob([m],{type:"text/javascript"}),C=window.URL||window.webkitURL||window.mozURL||window.msURL,x=C.createObjectURL(p),o=new window.Worker(x);return o.objectURL=x,o}},"./src/errors.ts":(d,D,l)=>{l.r(D),l.d(D,{ErrorDetails:()=>b,ErrorTypes:()=>w});var w;(function(B){B.NETWORK_ERROR="networkError",B.MEDIA_ERROR="mediaError",B.KEY_SYSTEM_ERROR="keySystemError",B.MUX_ERROR="muxError",B.OTHER_ERROR="otherError"})(w||(w={}));var b;(function(B){B.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",B.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",B.KEY_SYSTEM_NO_SESSION="keySystemNoSession",B.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",B.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",B.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",B.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",B.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",B.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",B.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",B.MANIFEST_LOAD_ERROR="manifestLoadError",B.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",B.MANIFEST_PARSING_ERROR="manifestParsingError",B.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",B.LEVEL_EMPTY_ERROR="levelEmptyError",B.LEVEL_LOAD_ERROR="levelLoadError",B.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",B.LEVEL_SWITCH_ERROR="levelSwitchError",B.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",B.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",B.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",B.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",B.FRAG_LOAD_ERROR="fragLoadError",B.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",B.FRAG_DECRYPT_ERROR="fragDecryptError",B.FRAG_PARSING_ERROR="fragParsingError",B.REMUX_ALLOC_ERROR="remuxAllocError",B.KEY_LOAD_ERROR="keyLoadError",B.KEY_LOAD_TIMEOUT="keyLoadTimeOut",B.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",B.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",B.BUFFER_APPEND_ERROR="bufferAppendError",B.BUFFER_APPENDING_ERROR="bufferAppendingError",B.BUFFER_STALLED_ERROR="bufferStalledError",B.BUFFER_FULL_ERROR="bufferFullError",B.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",B.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",B.INTERNAL_EXCEPTION="internalException",B.INTERNAL_ABORTED="aborted",B.UNKNOWN="unknown"})(b||(b={}))},"./src/events.ts":(d,D,l)=>{l.r(D),l.d(D,{Events:()=>w});var w;(function(b){b.MEDIA_ATTACHING="hlsMediaAttaching",b.MEDIA_ATTACHED="hlsMediaAttached",b.MEDIA_DETACHING="hlsMediaDetaching",b.MEDIA_DETACHED="hlsMediaDetached",b.BUFFER_RESET="hlsBufferReset",b.BUFFER_CODECS="hlsBufferCodecs",b.BUFFER_CREATED="hlsBufferCreated",b.BUFFER_APPENDING="hlsBufferAppending",b.BUFFER_APPENDED="hlsBufferAppended",b.BUFFER_EOS="hlsBufferEos",b.BUFFER_FLUSHING="hlsBufferFlushing",b.BUFFER_FLUSHED="hlsBufferFlushed",b.MANIFEST_LOADING="hlsManifestLoading",b.MANIFEST_LOADED="hlsManifestLoaded",b.MANIFEST_PARSED="hlsManifestParsed",b.LEVEL_SWITCHING="hlsLevelSwitching",b.LEVEL_SWITCHED="hlsLevelSwitched",b.LEVEL_LOADING="hlsLevelLoading",b.LEVEL_LOADED="hlsLevelLoaded",b.LEVEL_UPDATED="hlsLevelUpdated",b.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",b.LEVELS_UPDATED="hlsLevelsUpdated",b.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",b.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",b.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",b.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",b.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",b.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",b.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",b.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",b.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",b.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",b.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",b.CUES_PARSED="hlsCuesParsed",b.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",b.INIT_PTS_FOUND="hlsInitPtsFound",b.FRAG_LOADING="hlsFragLoading",b.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",b.FRAG_LOADED="hlsFragLoaded",b.FRAG_DECRYPTED="hlsFragDecrypted",b.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",b.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",b.FRAG_PARSING_METADATA="hlsFragParsingMetadata",b.FRAG_PARSED="hlsFragParsed",b.FRAG_BUFFERED="hlsFragBuffered",b.FRAG_CHANGED="hlsFragChanged",b.FPS_DROP="hlsFpsDrop",b.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",b.ERROR="hlsError",b.DESTROYING="hlsDestroying",b.KEY_LOADING="hlsKeyLoading",b.KEY_LOADED="hlsKeyLoaded",b.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",b.BACK_BUFFER_REACHED="hlsBackBufferReached"})(w||(w={}))},"./src/hls.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>o});var w=l("./node_modules/url-toolkit/src/url-toolkit.js"),b=l("./src/loader/playlist-loader.ts"),B=l("./src/controller/id3-track-controller.ts"),O=l("./src/controller/latency-controller.ts"),$=l("./src/controller/level-controller.ts"),F=l("./src/controller/fragment-tracker.ts"),k=l("./src/loader/key-loader.ts"),M=l("./src/controller/stream-controller.ts"),I=l("./src/is-supported.ts"),P=l("./src/utils/logger.ts"),T=l("./src/config.ts"),R=l("./node_modules/eventemitter3/index.js"),L=l("./src/events.ts"),_=l("./src/errors.ts"),y=l("./src/types/level.ts");function m(c,S){for(var f=0;f<S.length;f++){var h=S[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,C(h.key),h)}}function p(c,S,f){return S&&m(c.prototype,S),f&&m(c,f),Object.defineProperty(c,"prototype",{writable:!1}),c}function C(c){var S=x(c,"string");return typeof S=="symbol"?S:String(S)}function x(c,S){if(typeof c!="object"||c===null)return c;var f=c[Symbol.toPrimitive];if(f!==void 0){var h=f.call(c,S||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(c)}var o=function(){c.isSupported=function(){return(0,I.isSupported)()};function c(f){f===void 0&&(f={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new R.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var h=this.config=(0,T.mergeConfig)(c.DefaultConfig,f);this.userConfig=f,(0,P.enableLogs)(h.debug,"Hls instance"),this._autoLevelCapping=-1,h.progressive&&(0,T.enableStreamingMode)(h);var u=h.abrController,g=h.bufferController,s=h.capLevelController,E=h.fpsController,A=this.abrController=new u(this),v=this.bufferController=new g(this),N=this.capLevelController=new s(this),U=new E(this),K=new b.default(this),W=new B.default(this),H=this.levelController=new $.default(this),j=new F.FragmentTracker(this),G=new k.default(this.config),z=this.streamController=new M.default(this,j,G);N.setStreamController(z),U.setStreamController(z);var Y=[K,H,z];this.networkControllers=Y;var X=[A,v,N,U,W,j];this.audioTrackController=this.createController(h.audioTrackController,Y);var Q=h.audioStreamController;Q&&Y.push(new Q(this,j,G)),this.subtitleTrackController=this.createController(h.subtitleTrackController,Y);var q=h.subtitleStreamController;q&&Y.push(new q(this,j,G)),this.createController(h.timelineController,X),G.emeController=this.emeController=this.createController(h.emeController,X),this.cmcdController=this.createController(h.cmcdController,X),this.latencyController=this.createController(O.default,X),this.coreComponents=X}var S=c.prototype;return S.createController=function(h,u){if(h){var g=new h(this);return u&&u.push(g),g}return null},S.on=function(h,u,g){g===void 0&&(g=this),this._emitter.on(h,u,g)},S.once=function(h,u,g){g===void 0&&(g=this),this._emitter.once(h,u,g)},S.removeAllListeners=function(h){this._emitter.removeAllListeners(h)},S.off=function(h,u,g,s){g===void 0&&(g=this),this._emitter.off(h,u,g,s)},S.listeners=function(h){return this._emitter.listeners(h)},S.emit=function(h,u,g){return this._emitter.emit(h,u,g)},S.trigger=function(h,u){if(this.config.debug)return this.emit(h,h,u);try{return this.emit(h,h,u)}catch(g){P.logger.error("An internal error happened while handling event "+h+'. Error message: "'+g.message+'". Here is a stacktrace:',g),this.trigger(L.Events.ERROR,{type:_.ErrorTypes.OTHER_ERROR,details:_.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:h,error:g})}return!1},S.listenerCount=function(h){return this._emitter.listenerCount(h)},S.destroy=function(){P.logger.log("destroy"),this.trigger(L.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(h){return h.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(h){return h.destroy()}),this.coreComponents.length=0},S.attachMedia=function(h){P.logger.log("attachMedia"),this._media=h,this.trigger(L.Events.MEDIA_ATTACHING,{media:h})},S.detachMedia=function(){P.logger.log("detachMedia"),this.trigger(L.Events.MEDIA_DETACHING,void 0),this._media=null},S.loadSource=function(h){this.stopLoad();var u=this.media,g=this.url,s=this.url=w.buildAbsoluteURL(self.location.href,h,{alwaysNormalize:!0});P.logger.log("loadSource:"+s),u&&g&&g!==s&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(u)),this.trigger(L.Events.MANIFEST_LOADING,{url:h})},S.startLoad=function(h){h===void 0&&(h=-1),P.logger.log("startLoad("+h+")"),this.networkControllers.forEach(function(u){u.startLoad(h)})},S.stopLoad=function(){P.logger.log("stopLoad"),this.networkControllers.forEach(function(h){h.stopLoad()})},S.swapAudioCodec=function(){P.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},S.recoverMediaError=function(){P.logger.log("recoverMediaError");var h=this._media;this.detachMedia(),h&&this.attachMedia(h)},S.removeLevel=function(h,u){u===void 0&&(u=0),this.levelController.removeLevel(h,u)},p(c,[{key:"levels",get:function(){var h=this.levelController.levels;return h||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(h){P.logger.log("set currentLevel:"+h),this.loadLevel=h,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(h){P.logger.log("set nextLevel:"+h),this.levelController.manualLevel=h,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(h){P.logger.log("set loadLevel:"+h),this.levelController.manualLevel=h}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(h){this.levelController.nextLoadLevel=h}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(h){P.logger.log("set firstLevel:"+h),this.levelController.firstLevel=h}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(h){P.logger.log("set startLevel:"+h),h!==-1&&(h=Math.max(h,this.minAutoLevel)),this.levelController.startLevel=h}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(h){var u=!!h;u!==this.config.capLevelToPlayerSize&&(u?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=u)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(h){this._autoLevelCapping!==h&&(P.logger.log("set autoLevelCapping:"+h),this._autoLevelCapping=h)}},{key:"bandwidthEstimate",get:function(){var h=this.abrController.bwEstimator;return h?h.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(h){y.HdcpLevels.indexOf(h)>-1&&(this._maxHdcpLevel=h)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var h=this.levels,u=this.config.minAutoBitrate;if(!h)return 0;for(var g=h.length,s=0;s<g;s++)if(h[s].maxBitrate>=u)return s;return 0}},{key:"maxAutoLevel",get:function(){var h=this.levels,u=this.autoLevelCapping,g=this.maxHdcpLevel,s;if(u===-1&&h&&h.length?s=h.length-1:s=u,g)for(var E=s;E--;){var A=h[E].attrs["HDCP-LEVEL"];if(A&&A<=g)return E}return s}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(h){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,h)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var h=this.audioTrackController;return h?h.audioTracks:[]}},{key:"audioTrack",get:function(){var h=this.audioTrackController;return h?h.audioTrack:-1},set:function(h){var u=this.audioTrackController;u&&(u.audioTrack=h)}},{key:"subtitleTracks",get:function(){var h=this.subtitleTrackController;return h?h.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var h=this.subtitleTrackController;return h?h.subtitleTrack:-1},set:function(h){var u=this.subtitleTrackController;u&&(u.subtitleTrack=h)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var h=this.subtitleTrackController;return h?h.subtitleDisplay:!1},set:function(h){var u=this.subtitleTrackController;u&&(u.subtitleDisplay=h)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(h){this.config.lowLatencyMode=h}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.3"}},{key:"Events",get:function(){return L.Events}},{key:"ErrorTypes",get:function(){return _.ErrorTypes}},{key:"ErrorDetails",get:function(){return _.ErrorDetails}},{key:"DefaultConfig",get:function(){return c.defaultConfig?c.defaultConfig:T.hlsDefaultConfig},set:function(h){c.defaultConfig=h}}]),c}();o.defaultConfig=void 0},"./src/is-supported.ts":(d,D,l)=>{l.r(D),l.d(D,{changeTypeSupported:()=>O,isSupported:()=>B});var w=l("./src/utils/mediasource-helper.ts");function b(){return self.SourceBuffer||self.WebKitSourceBuffer}function B(){var $=(0,w.getMediaSource)();if(!$)return!1;var F=b(),k=$&&typeof $.isTypeSupported=="function"&&$.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),M=!F||F.prototype&&typeof F.prototype.appendBuffer=="function"&&typeof F.prototype.remove=="function";return!!k&&!!M}function O(){var $,F=b();return typeof(F==null||($=F.prototype)===null||$===void 0?void 0:$.changeType)=="function"}},"./src/loader/date-range.ts":(d,D,l)=>{l.r(D),l.d(D,{DateRange:()=>P,DateRangeAttribute:()=>I});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/attr-list.ts"),B=l("./src/utils/logger.ts");function O(){return O=Object.assign?Object.assign.bind():function(T){for(var R=1;R<arguments.length;R++){var L=arguments[R];for(var _ in L)Object.prototype.hasOwnProperty.call(L,_)&&(T[_]=L[_])}return T},O.apply(this,arguments)}function $(T,R){for(var L=0;L<R.length;L++){var _=R[L];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,k(_.key),_)}}function F(T,R,L){return R&&$(T.prototype,R),L&&$(T,L),Object.defineProperty(T,"prototype",{writable:!1}),T}function k(T){var R=M(T,"string");return typeof R=="symbol"?R:String(R)}function M(T,R){if(typeof T!="object"||T===null)return T;var L=T[Symbol.toPrimitive];if(L!==void 0){var _=L.call(T,R||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(T)}var I;(function(T){T.ID="ID",T.CLASS="CLASS",T.START_DATE="START-DATE",T.DURATION="DURATION",T.END_DATE="END-DATE",T.END_ON_NEXT="END-ON-NEXT",T.PLANNED_DURATION="PLANNED-DURATION",T.SCTE35_OUT="SCTE35-OUT",T.SCTE35_IN="SCTE35-IN"})(I||(I={}));var P=function(){function T(R,L){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,L){var _=L.attr;for(var y in _)if(Object.prototype.hasOwnProperty.call(R,y)&&R[y]!==_[y]){B.logger.warn('DATERANGE tag attribute: "'+y+'" does not match for tags with ID: "'+R.ID+'"'),this._badValueForSameId=y;break}R=O(new b.AttrList({}),_,R)}if(this.attr=R,this._startDate=new Date(R[I.START_DATE]),I.END_DATE in this.attr){var m=new Date(this.attr[I.END_DATE]);(0,w.isFiniteNumber)(m.getTime())&&(this._endDate=m)}}return F(T,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var L=this.duration;return L!==null?new Date(this._startDate.getTime()+L*1e3):null}},{key:"duration",get:function(){if(I.DURATION in this.attr){var L=this.attr.decimalFloatingPoint(I.DURATION);if((0,w.isFiniteNumber)(L))return L}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return I.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(I.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(I.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,w.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),T}()},"./src/loader/fragment-loader.ts":(d,D,l)=>{l.r(D),l.d(D,{LoadError:()=>L,default:()=>T});var w=l("./src/polyfills/number.ts"),b=l("./src/errors.ts");function B(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,M(_,y)}function O(_){var y=typeof Map=="function"?new Map:void 0;return O=function(p){if(p===null||!k(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof y<"u"){if(y.has(p))return y.get(p);y.set(p,C)}function C(){return $(p,arguments,I(this).constructor)}return C.prototype=Object.create(p.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),M(C,p)},O(_)}function $(_,y,m){return F()?$=Reflect.construct.bind():$=function(C,x,o){var c=[null];c.push.apply(c,x);var S=Function.bind.apply(C,c),f=new S;return o&&M(f,o.prototype),f},$.apply(null,arguments)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function M(_,y){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,C){return p.__proto__=C,p},M(_,y)}function I(_){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},I(_)}var P=Math.pow(2,17),T=function(){function _(m){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=m}var y=_.prototype;return y.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},y.abort=function(){this.loader&&this.loader.abort()},y.load=function(p,C){var x=this,o=p.url;if(!o)return Promise.reject(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:p,networkDetails:null},"Fragment does not have a "+(o?"part list":"url")));this.abort();var c=this.config,S=c.fLoader,f=c.loader;return new Promise(function(h,u){x.loader&&x.loader.destroy();var g=x.loader=p.loader=S?new S(c):new f(c),s=R(p),E={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:p.sn==="initSegment"?1/0:P};p.stats=g.stats,g.load(s,E,{onSuccess:function(v,N,U,K){x.resetLoader(p,g);var W=v.data;U.resetIV&&p.decryptdata&&(p.decryptdata.iv=new Uint8Array(W.slice(0,16)),W=W.slice(16)),h({frag:p,part:null,payload:W,networkDetails:K})},onError:function(v,N,U){x.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:p,response:v,networkDetails:U}))},onAbort:function(v,N,U){x.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:p,networkDetails:U}))},onTimeout:function(v,N,U){x.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:p,networkDetails:U}))},onProgress:function(v,N,U,K){C&&C({frag:p,part:null,payload:U,networkDetails:K})}})})},y.loadPart=function(p,C,x){var o=this;this.abort();var c=this.config,S=c.fLoader,f=c.loader;return new Promise(function(h,u){o.loader&&o.loader.destroy();var g=o.loader=p.loader=S?new S(c):new f(c),s=R(p,C),E={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:P};C.stats=g.stats,g.load(s,E,{onSuccess:function(v,N,U,K){o.resetLoader(p,g),o.updateStatsFromPart(p,C);var W={frag:p,part:C,payload:v.data,networkDetails:K};x(W),h(W)},onError:function(v,N,U){o.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:p,part:C,response:v,networkDetails:U}))},onAbort:function(v,N,U){p.stats.aborted=C.stats.aborted,o.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:p,part:C,networkDetails:U}))},onTimeout:function(v,N,U){o.resetLoader(p,g),u(new L({type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:p,part:C,networkDetails:U}))}})})},y.updateStatsFromPart=function(p,C){var x=p.stats,o=C.stats,c=o.total;if(x.loaded+=o.loaded,c){var S=Math.round(p.duration/C.duration),f=Math.min(Math.round(x.loaded/c),S),h=S-f,u=h*Math.round(x.loaded/f);x.total=x.loaded+u}else x.total=Math.max(x.loaded,x.total);var g=x.loading,s=o.loading;g.start?g.first+=s.first-s.start:(g.start=s.start,g.first=s.first),g.end=s.end},y.resetLoader=function(p,C){p.loader=null,this.loader===C&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),C.destroy()},_}();function R(_,y){y===void 0&&(y=null);var m=y||_,p={frag:_,part:y,responseType:"arraybuffer",url:m.url,headers:{},rangeStart:0,rangeEnd:0},C=m.byteRangeStartOffset,x=m.byteRangeEndOffset;if((0,w.isFiniteNumber)(C)&&(0,w.isFiniteNumber)(x)){var o,c=C,S=x;if(_.sn==="initSegment"&&((o=_.decryptdata)===null||o===void 0?void 0:o.method)==="AES-128"){var f=x-C;f%16&&(S=x+(16-f%16)),C!==0&&(p.resetIV=!0,c=C-16)}p.rangeStart=c,p.rangeEnd=S}return p}var L=function(_){B(y,_);function y(m){for(var p,C=arguments.length,x=new Array(C>1?C-1:0),o=1;o<C;o++)x[o-1]=arguments[o];return p=_.call.apply(_,[this].concat(x))||this,p.data=void 0,p.data=m,p}return y}(O(Error))},"./src/loader/fragment.ts":(d,D,l)=>{l.r(D),l.d(D,{BaseSegment:()=>T,ElementaryStreamTypes:()=>P,Fragment:()=>R,Part:()=>L});var w=l("./src/polyfills/number.ts"),b=l("./node_modules/url-toolkit/src/url-toolkit.js"),B=l("./src/loader/load-stats.ts");function O(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,$(_,y)}function $(_,y){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,C){return p.__proto__=C,p},$(_,y)}function F(_,y){for(var m=0;m<y.length;m++){var p=y[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,M(p.key),p)}}function k(_,y,m){return y&&F(_.prototype,y),m&&F(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function M(_){var y=I(_,"string");return typeof y=="symbol"?y:String(y)}function I(_,y){if(typeof _!="object"||_===null)return _;var m=_[Symbol.toPrimitive];if(m!==void 0){var p=m.call(_,y||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(_)}var P;(function(_){_.AUDIO="audio",_.VIDEO="video",_.AUDIOVIDEO="audiovideo"})(P||(P={}));var T=function(){function _(m){var p;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(p={},p[P.AUDIO]=null,p[P.VIDEO]=null,p[P.AUDIOVIDEO]=null,p),this.baseurl=m}var y=_.prototype;return y.setByteRange=function(p,C){var x=p.split("@",2),o=[];x.length===1?o[0]=C?C.byteRangeEndOffset:0:o[0]=parseInt(x[1]),o[1]=parseInt(x[0])+o[0],this._byteRange=o},k(_,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,b.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(p){this._url=p}}]),_}(),R=function(_){O(y,_);function y(p,C){var x;return x=_.call(this,C)||this,x._decryptdata=null,x.rawProgramDateTime=null,x.programDateTime=null,x.tagList=[],x.duration=0,x.sn=0,x.levelkeys=void 0,x.type=void 0,x.loader=null,x.keyLoader=null,x.level=-1,x.cc=0,x.startPTS=void 0,x.endPTS=void 0,x.appendedPTS=void 0,x.startDTS=void 0,x.endDTS=void 0,x.start=0,x.deltaPTS=void 0,x.maxStartPTS=void 0,x.minEndPTS=void 0,x.stats=new B.LoadStats,x.urlId=0,x.data=void 0,x.bitrateTest=!1,x.title=null,x.initSegment=null,x.endList=void 0,x.type=p,x}var m=y.prototype;return m.setKeyFormat=function(C){if(this.levelkeys){var x=this.levelkeys[C];x&&!this._decryptdata&&(this._decryptdata=x.getDecryptData(this.sn))}},m.abortRequests=function(){var C,x;(C=this.loader)===null||C===void 0||C.abort(),(x=this.keyLoader)===null||x===void 0||x.abort()},m.setElementaryStreamInfo=function(C,x,o,c,S,f){f===void 0&&(f=!1);var h=this.elementaryStreams,u=h[C];if(!u){h[C]={startPTS:x,endPTS:o,startDTS:c,endDTS:S,partial:f};return}u.startPTS=Math.min(u.startPTS,x),u.endPTS=Math.max(u.endPTS,o),u.startDTS=Math.min(u.startDTS,c),u.endDTS=Math.max(u.endDTS,S)},m.clearElementaryStreamInfo=function(){var C=this.elementaryStreams;C[P.AUDIO]=null,C[P.VIDEO]=null,C[P.AUDIOVIDEO]=null},k(y,[{key:"decryptdata",get:function(){var C=this.levelkeys;if(!C&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var x=this.levelkeys.identity;if(x)this._decryptdata=x.getDecryptData(this.sn);else{var o=Object.keys(this.levelkeys);if(o.length===1)return this._decryptdata=this.levelkeys[o[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,w.isFiniteNumber)(this.programDateTime))return null;var C=(0,w.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+C*1e3}},{key:"encrypted",get:function(){var C;if((C=this._decryptdata)!==null&&C!==void 0&&C.encrypted)return!0;if(this.levelkeys){var x=Object.keys(this.levelkeys),o=x.length;if(o>1||o===1&&this.levelkeys[x[0]].encrypted)return!0}return!1}}]),y}(T),L=function(_){O(y,_);function y(m,p,C,x,o){var c;c=_.call(this,C)||this,c.fragOffset=0,c.duration=0,c.gap=!1,c.independent=!1,c.relurl=void 0,c.fragment=void 0,c.index=void 0,c.stats=new B.LoadStats,c.duration=m.decimalFloatingPoint("DURATION"),c.gap=m.bool("GAP"),c.independent=m.bool("INDEPENDENT"),c.relurl=m.enumeratedString("URI"),c.fragment=p,c.index=x;var S=m.enumeratedString("BYTERANGE");return S&&c.setByteRange(S,o),o&&(c.fragOffset=o.fragOffset+o.duration),c}return k(y,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var p=this.elementaryStreams;return!!(p.audio||p.video||p.audiovideo)}}]),y}(T)},"./src/loader/key-loader.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>B});var w=l("./src/errors.ts"),b=l("./src/loader/fragment-loader.ts"),B=function(){function O(F){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=F}var $=O.prototype;return $.abort=function(){for(var k in this.keyUriToKeyInfo){var M=this.keyUriToKeyInfo[k].loader;M&&M.abort()}},$.detach=function(){for(var k in this.keyUriToKeyInfo){var M=this.keyUriToKeyInfo[k];(M.mediaKeySessionContext||M.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[k]}},$.destroy=function(){this.detach();for(var k in this.keyUriToKeyInfo){var M=this.keyUriToKeyInfo[k].loader;M&&M.destroy()}this.keyUriToKeyInfo={}},$.createKeyLoadError=function(k,M,I,P){return M===void 0&&(M=w.ErrorDetails.KEY_LOAD_ERROR),new b.LoadError({type:w.ErrorTypes.NETWORK_ERROR,details:M,fatal:!1,frag:k,networkDetails:I})},$.loadClear=function(k,M){var I=this;if(this.emeController&&this.config.emeEnabled)for(var P=k.sn,T=k.cc,R=function(m){var p=M[m];if(T<=p.cc&&(P==="initSegment"||P<p.sn))return I.emeController.selectKeySystemFormat(p).then(function(C){p.setKeyFormat(C)}),"break"},L=0;L<M.length;L++){var _=R(L);if(_==="break")break}},$.load=function(k){var M=this;return!k.decryptdata&&k.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(k).then(function(I){return M.loadInternal(k,I)}):this.loadInternal(k)},$.loadInternal=function(k,M){var I,P;M&&k.setKeyFormat(M);var T=k.decryptdata;if(!T){var R=M?"Expected frag.decryptdata to be defined after setting format "+M:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(k,w.ErrorDetails.KEY_LOAD_ERROR,null,R))}var L=T.uri;if(!L)return Promise.reject(this.createKeyLoadError(k,w.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+L+'"'));var _=this.keyUriToKeyInfo[L];if((I=_)!==null&&I!==void 0&&I.decryptdata.key)return T.key=_.decryptdata.key,Promise.resolve({frag:k,keyInfo:_});if((P=_)!==null&&P!==void 0&&P.keyLoadPromise){var y;switch((y=_.mediaKeySessionContext)===null||y===void 0?void 0:y.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return _.keyLoadPromise}}switch(_=this.keyUriToKeyInfo[L]={decryptdata:T,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},T.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return T.keyFormat==="identity"?this.loadKeyHTTP(_,k):this.loadKeyEME(_,k);case"AES-128":return this.loadKeyHTTP(_,k);default:return Promise.reject(this.createKeyLoadError(k,w.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+T.method+'"'))}},$.loadKeyEME=function(k,M){var I={frag:M,keyInfo:k};if(this.emeController&&this.config.emeEnabled){var P=this.emeController.loadKey(I);if(P)return(k.keyLoadPromise=P.then(function(T){return k.mediaKeySessionContext=T,I})).catch(function(T){throw k.keyLoadPromise=null,T})}return Promise.resolve(I)},$.loadKeyHTTP=function(k,M){var I=this,P=this.config,T=P.loader,R=new T(P);return M.keyLoader=k.loader=R,k.keyLoadPromise=new Promise(function(L,_){var y={keyInfo:k,frag:M,responseType:"arraybuffer",url:k.decryptdata.uri},m={timeout:P.fragLoadingTimeOut,maxRetry:0,retryDelay:P.fragLoadingRetryDelay,maxRetryDelay:P.fragLoadingMaxRetryTimeout,highWaterMark:0},p={onSuccess:function(x,o,c,S){var f=c.frag,h=c.keyInfo,u=c.url;if(!f.decryptdata||h!==I.keyUriToKeyInfo[u])return _(I.createKeyLoadError(f,w.ErrorDetails.KEY_LOAD_ERROR,S,"after key load, decryptdata unset or changed"));h.decryptdata.key=f.decryptdata.key=new Uint8Array(x.data),f.keyLoader=null,h.loader=null,L({frag:f,keyInfo:h})},onError:function(x,o,c){I.resetLoader(o),_(I.createKeyLoadError(M,w.ErrorDetails.KEY_LOAD_ERROR,c))},onTimeout:function(x,o,c){I.resetLoader(o),_(I.createKeyLoadError(M,w.ErrorDetails.KEY_LOAD_TIMEOUT,c))},onAbort:function(x,o,c){I.resetLoader(o),_(I.createKeyLoadError(M,w.ErrorDetails.INTERNAL_ABORTED,c))}};R.load(y,m,p)})},$.resetLoader=function(k){var M=k.frag,I=k.keyInfo,P=k.url,T=I.loader;M.keyLoader===T&&(M.keyLoader=null,I.loader=null),delete this.keyUriToKeyInfo[P],T&&T.destroy()},O}()},"./src/loader/level-details.ts":(d,D,l)=>{l.r(D),l.d(D,{LevelDetails:()=>k});var w=l("./src/polyfills/number.ts");function b(M,I){for(var P=0;P<I.length;P++){var T=I[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(M,O(T.key),T)}}function B(M,I,P){return I&&b(M.prototype,I),P&&b(M,P),Object.defineProperty(M,"prototype",{writable:!1}),M}function O(M){var I=$(M,"string");return typeof I=="symbol"?I:String(I)}function $(M,I){if(typeof M!="object"||M===null)return M;var P=M[Symbol.toPrimitive];if(P!==void 0){var T=P.call(M,I||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(M)}var F=10,k=function(){function M(P){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=P}var I=M.prototype;return I.reloaded=function(T){if(!T){this.advanced=!0,this.updated=!0;return}var R=this.lastPartSn-T.lastPartSn,L=this.lastPartIndex-T.lastPartIndex;this.updated=this.endSN!==T.endSN||!!L||!!R,this.advanced=this.endSN>T.endSN||R>0||R===0&&L>0,this.updated||this.advanced?this.misses=Math.floor(T.misses*.6):this.misses=T.misses+1,this.availabilityDelay=T.availabilityDelay},B(M,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,w.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||F}},{key:"drift",get:function(){var T=this.driftEndTime-this.driftStartTime;if(T>0){var R=this.driftEnd-this.driftStart;return R*1e3/T}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var T;return(T=this.partList)!==null&&T!==void 0&&T.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var T;return(T=this.fragments)!==null&&T!==void 0&&T.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var T;return(T=this.partList)!==null&&T!==void 0&&T.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var T;return(T=this.partList)!==null&&T!==void 0&&T.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),M}()},"./src/loader/level-key.ts":(d,D,l)=>{l.r(D),l.d(D,{LevelKey:()=>k});var w=l("./src/utils/keysystem-util.ts"),b=l("./src/utils/mediakeys-helper.ts"),B=l("./src/utils/mp4-tools.ts"),O=l("./src/utils/logger.ts"),$=l("./src/utils/numeric-encoding-utils.ts"),F={},k=function(){I.clearKeyUriToKeyIdMap=function(){F={}};function I(T,R,L,_,y){_===void 0&&(_=[1]),y===void 0&&(y=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=T,this.uri=R,this.keyFormat=L,this.keyFormatVersions=_,this.iv=y,this.encrypted=T?T!=="NONE":!1,this.isCommonEncryption=this.encrypted&&T!=="AES-128"}var P=I.prototype;return P.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case b.KeySystemFormats.FAIRPLAY:case b.KeySystemFormats.WIDEVINE:case b.KeySystemFormats.PLAYREADY:case b.KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},P.getDecryptData=function(R){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof R!="number"&&(this.method==="AES-128"&&!this.iv&&O.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),R=0);var L=M(R),_=new I(this.method,this.uri,"identity",this.keyFormatVersions,L);return _}var y=(0,w.convertDataUriToArrayBytes)(this.uri);if(y)switch(this.keyFormat){case b.KeySystemFormats.WIDEVINE:this.pssh=y,y.length>=22&&(this.keyId=y.subarray(y.length-22,y.length-6));break;case b.KeySystemFormats.PLAYREADY:{var m=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,B.mp4pssh)(m,null,y);var p=new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2),C=String.fromCharCode.apply(null,Array.from(p)),x=C.substring(C.indexOf("<"),C.length),o=new DOMParser,c=o.parseFromString(x,"text/xml"),S=c.getElementsByTagName("KID")[0];if(S){var f=S.childNodes[0]?S.childNodes[0].nodeValue:S.getAttribute("VALUE");if(f){var h=(0,$.base64Decode)(f).subarray(0,16);(0,w.changeEndianness)(h),this.keyId=h}}break}default:{var u=y.subarray(0,16);if(u.length!==16){var g=new Uint8Array(16);g.set(u,16-u.length),u=g}this.keyId=u;break}}if(!this.keyId||this.keyId.byteLength!==16){var s=F[this.uri];if(!s){var E=Object.keys(F).length%Number.MAX_SAFE_INTEGER;s=new Uint8Array(16);var A=new DataView(s.buffer,12,4);A.setUint32(0,E),F[this.uri]=s}this.keyId=s}return this},I}();function M(I){for(var P=new Uint8Array(16),T=12;T<16;T++)P[T]=I>>8*(15-T)&255;return P}},"./src/loader/load-stats.ts":(d,D,l)=>{l.r(D),l.d(D,{LoadStats:()=>w});var w=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>y});var w=l("./src/polyfills/number.ts"),b=l("./node_modules/url-toolkit/src/url-toolkit.js"),B=l("./src/loader/date-range.ts"),O=l("./src/loader/fragment.ts"),$=l("./src/loader/level-details.ts"),F=l("./src/loader/level-key.ts"),k=l("./src/utils/attr-list.ts"),M=l("./src/utils/logger.ts"),I=l("./src/utils/codecs.ts");function P(){return P=Object.assign?Object.assign.bind():function(f){for(var h=1;h<arguments.length;h++){var u=arguments[h];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(f[g]=u[g])}return f},P.apply(this,arguments)}var T=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,R=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),_=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),y=function(){function f(){}return f.findGroup=function(u,g){for(var s=0;s<u.length;s++){var E=u[s];if(E.id===g)return E}},f.convertAVC1ToAVCOTI=function(u){var g=u.split(".");if(g.length>2){var s=g.shift()+".";return s+=parseInt(g.shift()).toString(16),s+=("000"+parseInt(g.shift()).toString(16)).slice(-4),s}return u},f.resolve=function(u,g){return(0,b.buildAbsoluteURL)(g,u,{alwaysNormalize:!0})},f.parseMasterPlaylist=function(u,g){var s=[],E=[],A={},v=[],N=!1;T.lastIndex=0;for(var U;(U=T.exec(u))!=null;)if(U[1]){var K,W=new k.AttrList(U[1]),H={attrs:W,bitrate:W.decimalInteger("AVERAGE-BANDWIDTH")||W.decimalInteger("BANDWIDTH"),name:W.NAME,url:f.resolve(U[2],g)},j=W.decimalResolution("RESOLUTION");j&&(H.width=j.width,H.height=j.height),p((W.CODECS||"").split(/[ ,]+/).filter(function(Q){return Q}),H),H.videoCodec&&H.videoCodec.indexOf("avc1")!==-1&&(H.videoCodec=f.convertAVC1ToAVCOTI(H.videoCodec)),(K=H.unknownCodecs)!==null&&K!==void 0&&K.length||E.push(H),s.push(H)}else if(U[3]){var G=new k.AttrList(U[3]);G["DATA-ID"]&&(N=!0,A[G["DATA-ID"]]=G)}else if(U[4]){var z=U[4],Y=m(z,g);Y.encrypted&&Y.isSupported()?v.push(Y):M.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+z+'"')}var X=E.length>0&&E.length<s.length;return{levels:X?E:s,sessionData:N?A:null,sessionKeys:v.length?v:null}},f.parseMasterPlaylistMedia=function(u,g,s,E){E===void 0&&(E=[]);var A,v=[],N=0;for(R.lastIndex=0;(A=R.exec(u))!==null;){var U=new k.AttrList(A[1]);if(U.TYPE===s){var K={attrs:U,bitrate:0,id:N++,groupId:U["GROUP-ID"],instreamId:U["INSTREAM-ID"],name:U.NAME||U.LANGUAGE||"",type:s,default:U.bool("DEFAULT"),autoselect:U.bool("AUTOSELECT"),forced:U.bool("FORCED"),lang:U.LANGUAGE,url:U.URI?f.resolve(U.URI,g):""};if(E.length){var W=f.findGroup(E,K.groupId)||E[0];C(K,W,"audioCodec"),C(K,W,"textCodec")}v.push(K)}}return v},f.parseLevelPlaylist=function(u,g,s,E,A){var v=new $.LevelDetails(g),N=v.fragments,U=null,K=0,W=0,H=0,j=0,G=null,z=new O.Fragment(E,g),Y,X,Q,q=-1,J=!1;for(L.lastIndex=0,v.m3u8=u;(Y=L.exec(u))!==null;){J&&(J=!1,z=new O.Fragment(E,g),z.start=H,z.sn=K,z.cc=j,z.level=s,U&&(z.initSegment=U,z.rawProgramDateTime=U.rawProgramDateTime,U.rawProgramDateTime=null));var ee=Y[1];if(ee){z.duration=parseFloat(ee);var re=(" "+Y[2]).slice(1);z.title=re||null,z.tagList.push(re?["INF",ee,re]:["INF",ee])}else if(Y[3])(0,w.isFiniteNumber)(z.duration)&&(z.start=H,Q&&S(z,Q,v),z.sn=K,z.level=s,z.cc=j,z.urlId=A,N.push(z),z.relurl=(" "+Y[3]).slice(1),o(z,G),G=z,H+=z.duration,K++,W=0,J=!0);else if(Y[4]){var oe=(" "+Y[4]).slice(1);G?z.setByteRange(oe,G):z.setByteRange(oe)}else if(Y[5])z.rawProgramDateTime=(" "+Y[5]).slice(1),z.tagList.push(["PROGRAM-DATE-TIME",z.rawProgramDateTime]),q===-1&&(q=N.length);else{if(Y=Y[0].match(_),!Y){M.logger.warn("No matches on slow regex match for level playlist!");continue}for(X=1;X<Y.length&&!(typeof Y[X]<"u");X++);var ne=(" "+Y[X]).slice(1),te=(" "+Y[X+1]).slice(1),ue=Y[X+2]?(" "+Y[X+2]).slice(1):"";switch(ne){case"PLAYLIST-TYPE":v.type=te.toUpperCase();break;case"MEDIA-SEQUENCE":K=v.startSN=parseInt(te);break;case"SKIP":{var he=new k.AttrList(te),pe=he.decimalInteger("SKIPPED-SEGMENTS");if((0,w.isFiniteNumber)(pe)){v.skippedSegments=pe;for(var Re=pe;Re--;)N.unshift(null);K+=pe}var Te=he.enumeratedString("RECENTLY-REMOVED-DATERANGES");Te&&(v.recentlyRemovedDateranges=Te.split("	"));break}case"TARGETDURATION":v.targetduration=parseFloat(te);break;case"VERSION":v.version=parseInt(te);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(te||ue)&&z.tagList.push(ue?[te,ue]:[te]);break;case"DISCONTINUITY":j++,z.tagList.push(["DIS"]);break;case"GAP":z.tagList.push([ne]);break;case"BITRATE":z.tagList.push([ne,te]);break;case"DATERANGE":{var Oe=new k.AttrList(te),ye=new B.DateRange(Oe,v.dateRanges[Oe.ID]);ye.isValid||v.skippedSegments?v.dateRanges[ye.id]=ye:M.logger.warn('Ignoring invalid DATERANGE tag: "'+te+'"'),z.tagList.push(["EXT-X-DATERANGE",te]);break}case"DISCONTINUITY-SEQUENCE":j=parseInt(te);break;case"KEY":{var Se=m(te,g);if(Se.isSupported()){if(Se.method==="NONE"){Q=void 0;break}Q||(Q={}),Q[Se.keyFormat]&&(Q=P({},Q)),Q[Se.keyFormat]=Se}else M.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+te+'"');break}case"START":{var Ee=new k.AttrList(te),Fe=Ee.decimalFloatingPoint("TIME-OFFSET");(0,w.isFiniteNumber)(Fe)&&(v.startTimeOffset=Fe);break}case"MAP":{var Ye=new k.AttrList(te);if(z.duration){var Ne=new O.Fragment(E,g);c(Ne,Ye,s,Q),U=Ne,z.initSegment=U,U.rawProgramDateTime&&!z.rawProgramDateTime&&(z.rawProgramDateTime=U.rawProgramDateTime)}else c(z,Ye,s,Q),U=z,J=!0;break}case"SERVER-CONTROL":{var je=new k.AttrList(te);v.canBlockReload=je.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=je.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&je.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=je.optionalFloat("PART-HOLD-BACK",0),v.holdBack=je.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var _t=new k.AttrList(te);v.partTarget=_t.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Xe=v.partList;Xe||(Xe=v.partList=[]);var Ut=W>0?Xe[Xe.length-1]:void 0,Le=W++,xe=new O.Part(new k.AttrList(te),z,g,Le,Ut);Xe.push(xe),z.duration+=xe.duration;break}case"PRELOAD-HINT":{var ge=new k.AttrList(te);v.preloadHint=ge;break}case"RENDITION-REPORT":{var Qe=new k.AttrList(te);v.renditionReports=v.renditionReports||[],v.renditionReports.push(Qe);break}default:M.logger.warn("line parsed but not handled: "+Y);break}}}G&&!G.relurl?(N.pop(),H-=G.duration,v.partList&&(v.fragmentHint=G)):v.partList&&(o(z,G),z.cc=j,v.fragmentHint=z,Q&&S(z,Q,v));var Ge=N.length,ft=N[0],dt=N[Ge-1];if(H+=v.skippedSegments*v.targetduration,H>0&&Ge&&dt){v.averagetargetduration=H/Ge;var $e=dt.sn;v.endSN=$e!=="initSegment"?$e:0,v.live||(dt.endList=!0),ft&&(v.startCC=ft.cc)}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(H+=v.fragmentHint.duration),v.totalduration=H,v.endCC=j,q>0&&x(N,q),v},f}();function m(f,h){var u,g,s=new k.AttrList(f),E=(u=s.enumeratedString("METHOD"))!=null?u:"",A=s.URI,v=s.hexadecimalInteger("IV"),N=s.enumeratedString("KEYFORMATVERSIONS"),U=(g=s.enumeratedString("KEYFORMAT"))!=null?g:"identity";A&&s.IV&&!v&&M.logger.error("Invalid IV: "+s.IV);var K=A?y.resolve(A,h):"",W=(N||"1").split("/").map(Number).filter(Number.isFinite);return new F.LevelKey(E,K,U,W,v)}function p(f,h){["video","audio","text"].forEach(function(u){var g=f.filter(function(E){return(0,I.isCodecType)(E,u)});if(g.length){var s=g.filter(function(E){return E.lastIndexOf("avc1",0)===0||E.lastIndexOf("mp4a",0)===0});h[u+"Codec"]=s.length>0?s[0]:g[0],f=f.filter(function(E){return g.indexOf(E)===-1})}}),h.unknownCodecs=f}function C(f,h,u){var g=h[u];g&&(f[u]=g)}function x(f,h){for(var u=f[h],g=h;g--;){var s=f[g];if(!s)return;s.programDateTime=u.programDateTime-s.duration*1e3,u=s}}function o(f,h){f.rawProgramDateTime?f.programDateTime=Date.parse(f.rawProgramDateTime):h!=null&&h.programDateTime&&(f.programDateTime=h.endProgramDateTime),(0,w.isFiniteNumber)(f.programDateTime)||(f.programDateTime=null,f.rawProgramDateTime=null)}function c(f,h,u,g){f.relurl=h.URI,h.BYTERANGE&&f.setByteRange(h.BYTERANGE),f.level=u,f.sn="initSegment",g&&(f.levelkeys=g),f.initSegment=null}function S(f,h,u){f.levelkeys=h;var g=u.encryptedFragments;(!g.length||g[g.length-1].levelkeys!==h)&&Object.keys(h).some(function(s){return h[s].isCommonEncryption})&&g.push(f)}},"./src/loader/playlist-loader.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>T});var w=l("./src/polyfills/number.ts"),b=l("./src/events.ts"),B=l("./src/errors.ts"),O=l("./src/utils/logger.ts"),$=l("./src/loader/m3u8-parser.ts"),F=l("./src/types/loader.ts"),k=l("./src/utils/attr-list.ts");function M(R){var L=R.type;switch(L){case F.PlaylistContextType.AUDIO_TRACK:return F.PlaylistLevelType.AUDIO;case F.PlaylistContextType.SUBTITLE_TRACK:return F.PlaylistLevelType.SUBTITLE;default:return F.PlaylistLevelType.MAIN}}function I(R,L){var _=R.url;return(_===void 0||_.indexOf("data:")===0)&&(_=L.url),_}var P=function(){function R(_){this.hls=void 0,this.loaders=Object.create(null),this.hls=_,this.registerListeners()}var L=R.prototype;return L.startLoad=function(y){},L.stopLoad=function(){this.destroyInternalLoaders()},L.registerListeners=function(){var y=this.hls;y.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.on(b.Events.LEVEL_LOADING,this.onLevelLoading,this),y.on(b.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),y.on(b.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},L.unregisterListeners=function(){var y=this.hls;y.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.off(b.Events.LEVEL_LOADING,this.onLevelLoading,this),y.off(b.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),y.off(b.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},L.createInternalLoader=function(y){var m=this.hls.config,p=m.pLoader,C=m.loader,x=p||C,o=new x(m);return y.loader=o,this.loaders[y.type]=o,o},L.getInternalLoader=function(y){return this.loaders[y.type]},L.resetInternalLoader=function(y){this.loaders[y]&&delete this.loaders[y]},L.destroyInternalLoaders=function(){for(var y in this.loaders){var m=this.loaders[y];m&&m.destroy(),this.resetInternalLoader(y)}},L.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},L.onManifestLoading=function(y,m){var p=m.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:F.PlaylistContextType.MANIFEST,url:p,deliveryDirectives:null})},L.onLevelLoading=function(y,m){var p=m.id,C=m.level,x=m.url,o=m.deliveryDirectives;this.load({id:p,groupId:null,level:C,responseType:"text",type:F.PlaylistContextType.LEVEL,url:x,deliveryDirectives:o})},L.onAudioTrackLoading=function(y,m){var p=m.id,C=m.groupId,x=m.url,o=m.deliveryDirectives;this.load({id:p,groupId:C,level:null,responseType:"text",type:F.PlaylistContextType.AUDIO_TRACK,url:x,deliveryDirectives:o})},L.onSubtitleTrackLoading=function(y,m){var p=m.id,C=m.groupId,x=m.url,o=m.deliveryDirectives;this.load({id:p,groupId:C,level:null,responseType:"text",type:F.PlaylistContextType.SUBTITLE_TRACK,url:x,deliveryDirectives:o})},L.load=function(y){var m,p=this.hls.config,C=this.getInternalLoader(y);if(C){var x=C.context;if(x&&x.url===y.url){O.logger.trace("[playlist-loader]: playlist request ongoing");return}O.logger.log("[playlist-loader]: aborting previous loader for type: "+y.type),C.abort()}var o,c,S,f;switch(y.type){case F.PlaylistContextType.MANIFEST:o=p.manifestLoadingMaxRetry,c=p.manifestLoadingTimeOut,S=p.manifestLoadingRetryDelay,f=p.manifestLoadingMaxRetryTimeout;break;case F.PlaylistContextType.LEVEL:case F.PlaylistContextType.AUDIO_TRACK:case F.PlaylistContextType.SUBTITLE_TRACK:o=0,c=p.levelLoadingTimeOut;break;default:o=p.levelLoadingMaxRetry,c=p.levelLoadingTimeOut,S=p.levelLoadingRetryDelay,f=p.levelLoadingMaxRetryTimeout;break}if(C=this.createInternalLoader(y),(m=y.deliveryDirectives)!==null&&m!==void 0&&m.part){var h;if(y.type===F.PlaylistContextType.LEVEL&&y.level!==null?h=this.hls.levels[y.level].details:y.type===F.PlaylistContextType.AUDIO_TRACK&&y.id!==null?h=this.hls.audioTracks[y.id].details:y.type===F.PlaylistContextType.SUBTITLE_TRACK&&y.id!==null&&(h=this.hls.subtitleTracks[y.id].details),h){var u=h.partTarget,g=h.targetduration;u&&g&&(c=Math.min(Math.max(u*3,g*.8)*1e3,c))}}var s={timeout:c,maxRetry:o,retryDelay:S,maxRetryDelay:f,highWaterMark:0},E={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};C.load(y,s,E)},L.loadsuccess=function(y,m,p,C){C===void 0&&(C=null),this.resetInternalLoader(p.type);var x=y.data;if(x.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(y,p,"no EXTM3U delimiter",C);return}m.parsing.start=performance.now(),x.indexOf("#EXTINF:")>0||x.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(y,m,p,C):this.handleMasterPlaylist(y,m,p,C)},L.loaderror=function(y,m,p){p===void 0&&(p=null),this.handleNetworkError(m,p,!1,y)},L.loadtimeout=function(y,m,p){p===void 0&&(p=null),this.handleNetworkError(m,p,!0)},L.handleMasterPlaylist=function(y,m,p,C){var x=this.hls,o=y.data,c=I(y,p),S=$.default.parseMasterPlaylist(o,c),f=S.levels,h=S.sessionData,u=S.sessionKeys;if(!f.length){this.handleManifestParsingError(y,p,"no level found in manifest",C);return}var g=f.map(function(U){return{id:U.attrs.AUDIO,audioCodec:U.audioCodec}}),s=f.map(function(U){return{id:U.attrs.SUBTITLES,textCodec:U.textCodec}}),E=$.default.parseMasterPlaylistMedia(o,c,"AUDIO",g),A=$.default.parseMasterPlaylistMedia(o,c,"SUBTITLES",s),v=$.default.parseMasterPlaylistMedia(o,c,"CLOSED-CAPTIONS");if(E.length){var N=E.some(function(U){return!U.url});!N&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(O.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new k.AttrList({}),bitrate:0,url:""}))}x.trigger(b.Events.MANIFEST_LOADED,{levels:f,audioTracks:E,subtitles:A,captions:v,url:c,stats:m,networkDetails:C,sessionData:h,sessionKeys:u})},L.handleTrackOrLevelPlaylist=function(y,m,p,C){var x=this.hls,o=p.id,c=p.level,S=p.type,f=I(y,p),h=(0,w.isFiniteNumber)(o)?o:0,u=(0,w.isFiniteNumber)(c)?c:h,g=M(p),s=$.default.parseLevelPlaylist(y.data,f,u,g,h);if(!s.fragments.length){x.trigger(b.Events.ERROR,{type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:typeof p.level=="number"?p.level:void 0});return}if(S===F.PlaylistContextType.MANIFEST){var E={attrs:new k.AttrList({}),bitrate:0,details:s,name:"",url:f};x.trigger(b.Events.MANIFEST_LOADED,{levels:[E],audioTracks:[],url:f,stats:m,networkDetails:C,sessionData:null,sessionKeys:null})}m.parsing.end=performance.now(),p.levelDetails=s,this.handlePlaylistLoaded(y,m,p,C)},L.handleManifestParsingError=function(y,m,p,C){this.hls.trigger(b.Events.ERROR,{type:B.ErrorTypes.NETWORK_ERROR,details:B.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:m.type===F.PlaylistContextType.MANIFEST,url:y.url,reason:p,response:y,context:m,networkDetails:C})},L.handleNetworkError=function(y,m,p,C){p===void 0&&(p=!1),O.logger.warn("[playlist-loader]: A network "+(p?"timeout":"error")+" occurred while loading "+y.type+" level: "+y.level+" id: "+y.id+' group-id: "'+y.groupId+'"');var x=B.ErrorDetails.UNKNOWN,o=!1,c=this.getInternalLoader(y);switch(y.type){case F.PlaylistContextType.MANIFEST:x=p?B.ErrorDetails.MANIFEST_LOAD_TIMEOUT:B.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case F.PlaylistContextType.LEVEL:x=p?B.ErrorDetails.LEVEL_LOAD_TIMEOUT:B.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case F.PlaylistContextType.AUDIO_TRACK:x=p?B.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:B.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;case F.PlaylistContextType.SUBTITLE_TRACK:x=p?B.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:B.ErrorDetails.SUBTITLE_LOAD_ERROR,o=!1;break}c&&this.resetInternalLoader(y.type);var S={type:B.ErrorTypes.NETWORK_ERROR,details:x,fatal:o,url:y.url,loader:c,context:y,networkDetails:m};C&&(S.response=C),this.hls.trigger(b.Events.ERROR,S)},L.handlePlaylistLoaded=function(y,m,p,C){var x=p.type,o=p.level,c=p.id,S=p.groupId,f=p.loader,h=p.levelDetails,u=p.deliveryDirectives;if(!(h!=null&&h.targetduration)){this.handleManifestParsingError(y,p,"invalid target duration",C);return}if(!!f)switch(h.live&&(f.getCacheAge&&(h.ageHeader=f.getCacheAge()||0),(!f.getCacheAge||isNaN(h.ageHeader))&&(h.ageHeader=0)),x){case F.PlaylistContextType.MANIFEST:case F.PlaylistContextType.LEVEL:this.hls.trigger(b.Events.LEVEL_LOADED,{details:h,level:o||0,id:c||0,stats:m,networkDetails:C,deliveryDirectives:u});break;case F.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(b.Events.AUDIO_TRACK_LOADED,{details:h,id:c||0,groupId:S||"",stats:m,networkDetails:C,deliveryDirectives:u});break;case F.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(b.Events.SUBTITLE_TRACK_LOADED,{details:h,id:c||0,groupId:S||"",stats:m,networkDetails:C,deliveryDirectives:u});break}},R}();const T=P},"./src/polyfills/number.ts":(d,D,l)=>{l.r(D),l.d(D,{MAX_SAFE_INTEGER:()=>b,isFiniteNumber:()=>w});var w=Number.isFinite||function(B){return typeof B=="number"&&isFinite(B)},b=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w=function(){function B(){}return B.getSilentFrame=function($,F){switch($){case"mp4a.40.2":if(F===1)return new Uint8Array([0,200,0,128,35,128]);if(F===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(F===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(F===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(F===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(F===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(F===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},B}();const b=w},"./src/remux/mp4-generator.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>B});var w=Math.pow(2,32)-1,b=function(){function O(){}return O.init=function(){O.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var F;for(F in O.types)O.types.hasOwnProperty(F)&&(O.types[F]=[F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2),F.charCodeAt(3)]);var k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);O.HDLR_TYPES={video:k,audio:M};var I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]);O.STTS=O.STSC=O.STCO=P,O.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),O.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),O.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var T=new Uint8Array([105,115,111,109]),R=new Uint8Array([97,118,99,49]),L=new Uint8Array([0,0,0,1]);O.FTYP=O.box(O.types.ftyp,T,L,T,R),O.DINF=O.box(O.types.dinf,O.box(O.types.dref,I))},O.box=function(F){for(var k=8,M=arguments.length,I=new Array(M>1?M-1:0),P=1;P<M;P++)I[P-1]=arguments[P];for(var T=I.length,R=T;T--;)k+=I[T].byteLength;var L=new Uint8Array(k);for(L[0]=k>>24&255,L[1]=k>>16&255,L[2]=k>>8&255,L[3]=k&255,L.set(F,4),T=0,k=8;T<R;T++)L.set(I[T],k),k+=I[T].byteLength;return L},O.hdlr=function(F){return O.box(O.types.hdlr,O.HDLR_TYPES[F])},O.mdat=function(F){return O.box(O.types.mdat,F)},O.mdhd=function(F,k){k*=F;var M=Math.floor(k/(w+1)),I=Math.floor(k%(w+1));return O.box(O.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,F&255,M>>24,M>>16&255,M>>8&255,M&255,I>>24,I>>16&255,I>>8&255,I&255,85,196,0,0]))},O.mdia=function(F){return O.box(O.types.mdia,O.mdhd(F.timescale,F.duration),O.hdlr(F.type),O.minf(F))},O.mfhd=function(F){return O.box(O.types.mfhd,new Uint8Array([0,0,0,0,F>>24,F>>16&255,F>>8&255,F&255]))},O.minf=function(F){return F.type==="audio"?O.box(O.types.minf,O.box(O.types.smhd,O.SMHD),O.DINF,O.stbl(F)):O.box(O.types.minf,O.box(O.types.vmhd,O.VMHD),O.DINF,O.stbl(F))},O.moof=function(F,k,M){return O.box(O.types.moof,O.mfhd(F),O.traf(M,k))},O.moov=function(F){for(var k=F.length,M=[];k--;)M[k]=O.trak(F[k]);return O.box.apply(null,[O.types.moov,O.mvhd(F[0].timescale,F[0].duration)].concat(M).concat(O.mvex(F)))},O.mvex=function(F){for(var k=F.length,M=[];k--;)M[k]=O.trex(F[k]);return O.box.apply(null,[O.types.mvex].concat(M))},O.mvhd=function(F,k){k*=F;var M=Math.floor(k/(w+1)),I=Math.floor(k%(w+1)),P=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,F&255,M>>24,M>>16&255,M>>8&255,M&255,I>>24,I>>16&255,I>>8&255,I&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return O.box(O.types.mvhd,P)},O.sdtp=function(F){var k=F.samples||[],M=new Uint8Array(4+k.length),I,P;for(I=0;I<k.length;I++)P=k[I].flags,M[I+4]=P.dependsOn<<4|P.isDependedOn<<2|P.hasRedundancy;return O.box(O.types.sdtp,M)},O.stbl=function(F){return O.box(O.types.stbl,O.stsd(F),O.box(O.types.stts,O.STTS),O.box(O.types.stsc,O.STSC),O.box(O.types.stsz,O.STSZ),O.box(O.types.stco,O.STCO))},O.avc1=function(F){var k=[],M=[],I,P,T;for(I=0;I<F.sps.length;I++)P=F.sps[I],T=P.byteLength,k.push(T>>>8&255),k.push(T&255),k=k.concat(Array.prototype.slice.call(P));for(I=0;I<F.pps.length;I++)P=F.pps[I],T=P.byteLength,M.push(T>>>8&255),M.push(T&255),M=M.concat(Array.prototype.slice.call(P));var R=O.box(O.types.avcC,new Uint8Array([1,k[3],k[4],k[5],255,224|F.sps.length].concat(k).concat([F.pps.length]).concat(M))),L=F.width,_=F.height,y=F.pixelRatio[0],m=F.pixelRatio[1];return O.box(O.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,L>>8&255,L&255,_>>8&255,_&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),R,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([y>>24,y>>16&255,y>>8&255,y&255,m>>24,m>>16&255,m>>8&255,m&255])))},O.esds=function(F){var k=F.config.length;return new Uint8Array([0,0,0,0,3,23+k,0,1,0,4,15+k,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([k]).concat(F.config).concat([6,1,2]))},O.mp4a=function(F){var k=F.samplerate;return O.box(O.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]),O.box(O.types.esds,O.esds(F)))},O.mp3=function(F){var k=F.samplerate;return O.box(O.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]))},O.stsd=function(F){return F.type==="audio"?F.segmentCodec==="mp3"&&F.codec==="mp3"?O.box(O.types.stsd,O.STSD,O.mp3(F)):O.box(O.types.stsd,O.STSD,O.mp4a(F)):O.box(O.types.stsd,O.STSD,O.avc1(F))},O.tkhd=function(F){var k=F.id,M=F.duration*F.timescale,I=F.width,P=F.height,T=Math.floor(M/(w+1)),R=Math.floor(M%(w+1));return O.box(O.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,k&255,0,0,0,0,T>>24,T>>16&255,T>>8&255,T&255,R>>24,R>>16&255,R>>8&255,R&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,I>>8&255,I&255,0,0,P>>8&255,P&255,0,0]))},O.traf=function(F,k){var M=O.sdtp(F),I=F.id,P=Math.floor(k/(w+1)),T=Math.floor(k%(w+1));return O.box(O.types.traf,O.box(O.types.tfhd,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,I&255])),O.box(O.types.tfdt,new Uint8Array([1,0,0,0,P>>24,P>>16&255,P>>8&255,P&255,T>>24,T>>16&255,T>>8&255,T&255])),O.trun(F,M.length+16+20+8+16+8+8),M)},O.trak=function(F){return F.duration=F.duration||4294967295,O.box(O.types.trak,O.tkhd(F),O.mdia(F))},O.trex=function(F){var k=F.id;return O.box(O.types.trex,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,k&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},O.trun=function(F,k){var M=F.samples||[],I=M.length,P=12+16*I,T=new Uint8Array(P),R,L,_,y,m,p;for(k+=8+P,T.set([F.type==="video"?1:0,0,15,1,I>>>24&255,I>>>16&255,I>>>8&255,I&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255],0),R=0;R<I;R++)L=M[R],_=L.duration,y=L.size,m=L.flags,p=L.cts,T.set([_>>>24&255,_>>>16&255,_>>>8&255,_&255,y>>>24&255,y>>>16&255,y>>>8&255,y&255,m.isLeading<<2|m.dependsOn,m.isDependedOn<<6|m.hasRedundancy<<4|m.paddingValue<<1|m.isNonSync,m.degradPrio&240<<8,m.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*R);return O.box(O.types.trun,T)},O.initSegment=function(F){O.types||O.init();var k=O.moov(F),M=new Uint8Array(O.FTYP.byteLength+k.byteLength);return M.set(O.FTYP),M.set(k,O.FTYP.byteLength),M},O}();b.types=void 0,b.HDLR_TYPES=void 0,b.STTS=void 0,b.STSC=void 0,b.STCO=void 0,b.STSZ=void 0,b.VMHD=void 0,b.SMHD=void 0,b.STSD=void 0,b.FTYP=void 0,b.DINF=void 0;const B=b},"./src/remux/mp4-remuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>y,flushTextTrackMetadataCueSamples:()=>C,flushTextTrackUserdataCueSamples:()=>x,normalizePts:()=>m});var w=l("./src/polyfills/number.ts"),b=l("./src/remux/aac-helper.ts"),B=l("./src/remux/mp4-generator.ts"),O=l("./src/events.ts"),$=l("./src/errors.ts"),F=l("./src/utils/logger.ts"),k=l("./src/types/loader.ts"),M=l("./src/utils/timescale-conversion.ts");function I(){return I=Object.assign?Object.assign.bind():function(S){for(var f=1;f<arguments.length;f++){var h=arguments[f];for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(S[u]=h[u])}return S},I.apply(this,arguments)}var P=10*1e3,T=1024,R=1152,L=null,_=null,y=function(){function S(h,u,g,s){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=h,this.config=u,this.typeSupported=g,this.ISGenerated=!1,L===null){var E=navigator.userAgent||"",A=E.match(/Chrome\/(\d+)/i);L=A?parseInt(A[1]):0}if(_===null){var v=navigator.userAgent.match(/Safari\/(\d+)/i);_=v?parseInt(v[1]):0}}var f=S.prototype;return f.destroy=function(){},f.resetTimeStamp=function(u){F.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=u},f.resetNextTimestamp=function(){F.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},f.resetInitSegment=function(){F.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},f.getVideoStartPts=function(u){var g=!1,s=u.reduce(function(E,A){var v=A.pts-E;return v<-4294967296?(g=!0,m(E,A.pts)):v>0?E:A.pts},u[0].pts);return g&&F.logger.debug("PTS rollover detected"),s},f.remux=function(u,g,s,E,A,v,N,U){var K,W,H,j,G,z,Y=A,X=A,Q=u.pid>-1,q=g.pid>-1,J=g.samples.length,ee=u.samples.length>0,re=N&&J>0||J>1,oe=(!Q||ee)&&(!q||re)||this.ISGenerated||N;if(oe){this.ISGenerated||(H=this.generateIS(u,g,A));var ne=this.isVideoContiguous,te=-1,ue;if(re&&(te=p(g.samples),!ne&&this.config.forceKeyFrameOnDiscontinuity))if(z=!0,te>0){F.logger.warn("[mp4-remuxer]: Dropped "+te+" out of "+J+" video samples due to a missing keyframe");var he=this.getVideoStartPts(g.samples);g.samples=g.samples.slice(te),g.dropped+=te,X+=(g.samples[0].pts-he)/g.inputTimeScale,ue=X}else te===-1&&(F.logger.warn("[mp4-remuxer]: No keyframe found out of "+J+" video samples"),z=!1);if(this.ISGenerated){if(ee&&re){var pe=this.getVideoStartPts(g.samples),Re=m(u.samples[0].pts,pe)-pe,Te=Re/g.inputTimeScale;Y+=Math.max(0,Te),X+=Math.max(0,-Te)}if(ee){if(u.samplerate||(F.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),H=this.generateIS(u,g,A)),W=this.remuxAudio(u,Y,this.isAudioContiguous,v,q||re||U===k.PlaylistLevelType.AUDIO?X:void 0),re){var Oe=W?W.endPTS-W.startPTS:0;g.inputTimeScale||(F.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),H=this.generateIS(u,g,A)),K=this.remuxVideo(g,X,ne,Oe)}}else re&&(K=this.remuxVideo(g,X,ne,0));K&&(K.firstKeyFrame=te,K.independent=te!==-1,K.firstKeyFramePTS=ue)}}return this.ISGenerated&&(s.samples.length&&(G=C(s,A,this._initPTS,this._initDTS)),E.samples.length&&(j=x(E,A,this._initPTS))),{audio:W,video:K,initSegment:H,independent:z,text:j,id3:G}},f.generateIS=function(u,g,s){var E=u.samples,A=g.samples,v=this.typeSupported,N={},U=!(0,w.isFiniteNumber)(this._initPTS),K="audio/mp4",W,H,j;if(U&&(W=H=1/0),u.config&&E.length){switch(u.timescale=u.samplerate,u.segmentCodec){case"mp3":v.mpeg?(K="audio/mpeg",u.codec=""):v.mp3&&(u.codec="mp3");break}N.audio={id:"audio",container:K,codec:u.codec,initSegment:u.segmentCodec==="mp3"&&v.mpeg?new Uint8Array(0):B.default.initSegment([u]),metadata:{channelCount:u.channelCount}},U&&(j=u.inputTimeScale,W=H=E[0].pts-Math.round(j*s))}if(g.sps&&g.pps&&A.length&&(g.timescale=g.inputTimeScale,N.video={id:"main",container:"video/mp4",codec:g.codec,initSegment:B.default.initSegment([g]),metadata:{width:g.width,height:g.height}},U)){j=g.inputTimeScale;var G=this.getVideoStartPts(A),z=Math.round(j*s);H=Math.min(H,m(A[0].dts,G)-z),W=Math.min(W,G-z)}if(Object.keys(N).length)return this.ISGenerated=!0,U&&(this._initPTS=W,this._initDTS=H),{tracks:N,initPTS:W,timescale:j}},f.remuxVideo=function(u,g,s,E){var A=u.inputTimeScale,v=u.samples,N=[],U=v.length,K=this._initPTS,W=this.nextAvcDts,H=8,j=this.videoSampleDuration,G,z,Y=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Q=!1;if(!s||W===null){var q=g*A,J=v[0].pts-m(v[0].dts,v[0].pts);W=q-J}for(var ee=0;ee<U;ee++){var re=v[ee];re.pts=m(re.pts-K,W),re.dts=m(re.dts-K,W),re.dts<v[ee>0?ee-1:ee].dts&&(Q=!0)}Q&&v.sort(function(vs,$l){var qd=vs.dts-$l.dts,eh=vs.pts-$l.pts;return qd||eh}),G=v[0].dts,z=v[v.length-1].dts;var oe=z-G,ne=oe?Math.round(oe/(U-1)):j||u.inputTimeScale/30;if(s){var te=G-W,ue=te>ne,he=te<-1;if((ue||he)&&(ue?F.logger.warn("AVC: "+(0,M.toMsFromMpegTsClock)(te,!0)+" ms ("+te+"dts) hole between fragments detected, filling it"):F.logger.warn("AVC: "+(0,M.toMsFromMpegTsClock)(-te,!0)+" ms ("+te+"dts) overlapping between fragments detected"),!he||W>v[0].pts)){G=W;var pe=v[0].pts-te;v[0].dts=G,v[0].pts=pe,F.logger.log("Video: First PTS/DTS adjusted: "+(0,M.toMsFromMpegTsClock)(pe,!0)+"/"+(0,M.toMsFromMpegTsClock)(G,!0)+", delta: "+(0,M.toMsFromMpegTsClock)(te,!0)+" ms")}}G=Math.max(0,G);for(var Re=0,Te=0,Oe=0;Oe<U;Oe++){for(var ye=v[Oe],Se=ye.units,Ee=Se.length,Fe=0,Ye=0;Ye<Ee;Ye++)Fe+=Se[Ye].data.length;Te+=Fe,Re+=Ee,ye.length=Fe,ye.dts=Math.max(ye.dts,G),Y=Math.min(ye.pts,Y),X=Math.max(ye.pts,X)}z=v[U-1].dts;var Ne=Te+4*Re+8,je;try{je=new Uint8Array(Ne)}catch{this.observer.emit(O.Events.ERROR,O.Events.ERROR,{type:$.ErrorTypes.MUX_ERROR,details:$.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ne,reason:"fail allocating video mdat "+Ne});return}var _t=new DataView(je.buffer);_t.setUint32(0,Ne),je.set(B.default.types.mdat,4);for(var Xe=!1,Ut=Number.POSITIVE_INFINITY,Le=Number.POSITIVE_INFINITY,xe=Number.NEGATIVE_INFINITY,ge=Number.NEGATIVE_INFINITY,Qe=0;Qe<U;Qe++){for(var Ge=v[Qe],ft=Ge.units,dt=0,$e=0,tr=ft.length;$e<tr;$e++){var $t=ft[$e],Fi=$t.data,jr=$t.data.byteLength;_t.setUint32(H,jr),H+=4,je.set(Fi,H),H+=jr,dt+=4+jr}var En=void 0;if(Qe<U-1)j=v[Qe+1].dts-Ge.dts,En=v[Qe+1].pts-Ge.pts;else{var Fl=this.config,Ni=Qe>0?Ge.dts-v[Qe-1].dts:ne;if(En=Qe>0?Ge.pts-v[Qe-1].pts:ne,Fl.stretchShortVideoTrack&&this.nextAudioPts!==null){var Vd=Math.floor(Fl.maxBufferHole*A),ds=(E?Y+E*A:this.nextAudioPts)-Ge.pts;ds>Vd?(j=ds-Ni,j<0?j=Ni:Xe=!0,F.logger.log("[mp4-remuxer]: It is approximately "+ds/90+" ms to the next segment; using duration "+j/90+" ms for the last video frame.")):j=Ni}else j=Ni}var zd=Math.round(Ge.pts-Ge.dts);Ut=Math.min(Ut,j),xe=Math.max(xe,j),Le=Math.min(Le,En),ge=Math.max(ge,En),N.push(new o(Ge.key,j,dt,zd))}if(N.length){if(L){if(L<70){var Nl=N[0].flags;Nl.dependsOn=2,Nl.isNonSync=0}}else if(_&&ge-Le<xe-Ut&&ne/xe<.025&&N[0].cts===0){F.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var hs=G,Kt=0,Bl=N.length;Kt<Bl;Kt++){var Ul=hs+N[Kt].duration,Yd=hs+N[Kt].cts;if(Kt<Bl-1){var Xd=Ul+N[Kt+1].cts;N[Kt].duration=Xd-Yd}else N[Kt].duration=Kt?N[Kt-1].duration:ne;N[Kt].cts=0,hs=Ul}}}console.assert(j!==null,"mp4SampleDuration must be computed"),j=Xe||!j?ne:j,this.nextAvcDts=W=z+j,this.videoSampleDuration=j,this.isVideoContiguous=!0;var Qd=B.default.moof(u.sequenceNumber++,G,I({},u,{samples:N})),Zd="video",Jd={data1:Qd,data2:je,startPTS:Y/A,endPTS:(X+j)/A,startDTS:G/A,endDTS:W/A,type:Zd,hasAudio:!1,hasVideo:!0,nb:N.length,dropped:u.dropped};return u.samples=[],u.dropped=0,console.assert(je.length,"MDAT length must not be zero"),Jd},f.remuxAudio=function(u,g,s,E,A){var v=u.inputTimeScale,N=u.samplerate?u.samplerate:v,U=v/N,K=u.segmentCodec==="aac"?T:R,W=K*U,H=this._initPTS,j=u.segmentCodec==="mp3"&&this.typeSupported.mpeg,G=[],z=A!==void 0,Y=u.samples,X=j?0:8,Q=this.nextAudioPts||-1,q=g*v;if(this.isAudioContiguous=s=s||Y.length&&Q>0&&(E&&Math.abs(q-Q)<9e3||Math.abs(m(Y[0].pts-H,q)-Q)<20*W),Y.forEach(function($t){$t.pts=m($t.pts-H,q)}),!s||Q<0){if(Y=Y.filter(function($t){return $t.pts>=0}),!Y.length)return;A===0?Q=0:E&&!z?Q=Math.max(0,q):Q=Y[0].pts}if(u.segmentCodec==="aac")for(var J=this.config.maxAudioFramesDrift,ee=0,re=Q;ee<Y.length;ee++){var oe=Y[ee],ne=oe.pts,te=ne-re,ue=Math.abs(1e3*te/v);if(te<=-J*W&&z)ee===0&&(F.logger.warn("Audio frame @ "+(ne/v).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*te/v)+" ms."),this.nextAudioPts=Q=re=ne);else if(te>=J*W&&ue<P&&z){var he=Math.round(te/W);re=ne-he*W,re<0&&(he--,re+=W),ee===0&&(this.nextAudioPts=Q=re),F.logger.warn("[mp4-remuxer]: Injecting "+he+" audio frame @ "+(re/v).toFixed(3)+"s due to "+Math.round(1e3*te/v)+" ms gap.");for(var pe=0;pe<he;pe++){var Re=Math.max(re,0),Te=b.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);Te||(F.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Te=oe.unit.subarray()),Y.splice(ee,0,{unit:Te,pts:Re}),re+=W,ee++}}oe.pts=re,re+=W}for(var Oe=null,ye=null,Se,Ee=0,Fe=Y.length;Fe--;)Ee+=Y[Fe].unit.byteLength;for(var Ye=0,Ne=Y.length;Ye<Ne;Ye++){var je=Y[Ye],_t=je.unit,Xe=je.pts;if(ye!==null){var Ut=G[Ye-1];Ut.duration=Math.round((Xe-ye)/U)}else if(s&&u.segmentCodec==="aac"&&(Xe=Q),Oe=Xe,Ee>0){Ee+=X;try{Se=new Uint8Array(Ee)}catch{this.observer.emit(O.Events.ERROR,O.Events.ERROR,{type:$.ErrorTypes.MUX_ERROR,details:$.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ee,reason:"fail allocating audio mdat "+Ee});return}if(!j){var Le=new DataView(Se.buffer);Le.setUint32(0,Ee),Se.set(B.default.types.mdat,4)}}else return;Se.set(_t,X);var xe=_t.byteLength;X+=xe,G.push(new o(!0,K,xe,0)),ye=Xe}var ge=G.length;if(!!ge){var Qe=G[G.length-1];this.nextAudioPts=Q=ye+U*Qe.duration;var Ge=j?new Uint8Array(0):B.default.moof(u.sequenceNumber++,Oe/U,I({},u,{samples:G}));u.samples=[];var ft=Oe/v,dt=Q/v,$e="audio",tr={data1:Ge,data2:Se,startPTS:ft,endPTS:dt,startDTS:ft,endDTS:dt,type:$e,hasAudio:!0,hasVideo:!1,nb:ge};return this.isAudioContiguous=!0,console.assert(Se.length,"MDAT length must not be zero"),tr}},f.remuxEmptyAudio=function(u,g,s,E){var A=u.inputTimeScale,v=u.samplerate?u.samplerate:A,N=A/v,U=this.nextAudioPts,K=(U!==null?U:E.startDTS*A)+this._initDTS,W=E.endDTS*A+this._initDTS,H=N*T,j=Math.ceil((W-K)/H),G=b.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);if(F.logger.warn("[mp4-remuxer]: remux empty Audio"),!G){F.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var z=[],Y=0;Y<j;Y++){var X=K+Y*H;z.push({unit:G,pts:X,dts:X})}return u.samples=z,this.remuxAudio(u,g,s,!1)},S}();function m(S,f){var h;if(f===null)return S;for(f<S?h=-8589934592:h=8589934592;Math.abs(S-f)>4294967296;)S+=h;return S}function p(S){for(var f=0;f<S.length;f++)if(S[f].key)return f;return-1}function C(S,f,h,u){var g=S.samples.length;if(!!g){for(var s=S.inputTimeScale,E=0;E<g;E++){var A=S.samples[E];A.pts=m(A.pts-h,f*s)/s,A.dts=m(A.dts-u,f*s)/s}var v=S.samples;return S.samples=[],{samples:v}}}function x(S,f,h){var u=S.samples.length;if(!!u){for(var g=S.inputTimeScale,s=0;s<u;s++){var E=S.samples[s];E.pts=m(E.pts-h,f*g)/g}S.samples.sort(function(v,N){return v.pts-N.pts});var A=S.samples;return S.samples=[],{samples:A}}}var o=function(f,h,u,g){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=h,this.size=u,this.cts=g,this.flags=new c(f)},c=function(f){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=f?2:1,this.isNonSync=f?0:1}},"./src/remux/passthrough-remuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>M});var w=l("./src/polyfills/number.ts"),b=l("./src/remux/mp4-remuxer.ts"),B=l("./src/utils/mp4-tools.ts"),O=l("./src/loader/fragment.ts"),$=l("./src/utils/logger.ts"),F=function(){function I(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var P=I.prototype;return P.destroy=function(){},P.resetTimeStamp=function(R){this.initPTS=R,this.lastEndTime=null},P.resetNextTimestamp=function(){this.lastEndTime=null},P.resetInitSegment=function(R,L,_,y){this.audioCodec=L,this.videoCodec=_,this.generateInitSegment((0,B.patchEncyptionData)(R,y)),this.emitInitSegment=!0},P.generateInitSegment=function(R){var L=this.audioCodec,_=this.videoCodec;if(!R||!R.byteLength){this.initTracks=void 0,this.initData=void 0;return}var y=this.initData=(0,B.parseInitSegment)(R);L||(L=k(y.audio,O.ElementaryStreamTypes.AUDIO)),_||(_=k(y.video,O.ElementaryStreamTypes.VIDEO));var m={};y.audio&&y.video?m.audiovideo={container:"video/mp4",codec:L+","+_,initSegment:R,id:"main"}:y.audio?m.audio={container:"audio/mp4",codec:L,initSegment:R,id:"audio"}:y.video?m.video={container:"video/mp4",codec:_,initSegment:R,id:"main"}:$.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=m},P.remux=function(R,L,_,y,m){var p,C=this.initPTS,x=this.lastEndTime,o={audio:void 0,video:void 0,text:y,id3:_,initSegment:void 0};(0,w.isFiniteNumber)(x)||(x=this.lastEndTime=m||0);var c=L.samples;if(!c||!c.length)return o;var S={initPTS:void 0,timescale:1},f=this.initData;if((!f||!f.length)&&(this.generateInitSegment(c),f=this.initData),!f||!f.length)return $.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),o;this.emitInitSegment&&(S.tracks=this.initTracks,this.emitInitSegment=!1);var h=(0,B.getStartDTS)(f,c);(0,w.isFiniteNumber)(C)||(this.initPTS=S.initPTS=C=h-m);var u=(0,B.getDuration)(c,f),g=R?h-C:x,s=g+u;(0,B.offsetStartDTS)(f,c,C),u>0?this.lastEndTime=s:($.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!f.audio,A=!!f.video,v="";E&&(v+="audio"),A&&(v+="video");var N={data1:c,startPTS:g,startDTS:g,endPTS:s,endDTS:s,type:v,hasAudio:E,hasVideo:A,nb:1,dropped:0};o.audio=N.type==="audio"?N:void 0,o.video=N.type!=="audio"?N:void 0,o.initSegment=S;var U=(p=this.initPTS)!=null?p:0;return o.id3=(0,b.flushTextTrackMetadataCueSamples)(_,m,U,U),y.samples.length&&(o.text=(0,b.flushTextTrackUserdataCueSamples)(y,m,U)),o},I}();function k(I,P){var T=I==null?void 0:I.codec;return T&&T.length>4?T:T==="hvc1"||T==="hev1"?"hvc1.1.c.L120.90":T==="av01"?"av01.0.04M.08":T==="avc1"||P===O.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const M=F},"./src/task-loop.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});var w=function(){function b(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var B=b.prototype;return B.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},B.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},B.onHandlerDestroyed=function(){},B.hasInterval=function(){return!!this._tickInterval},B.hasNextTick=function(){return!!this._tickTimer},B.setInterval=function($){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,$),!0)},B.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},B.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},B.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},B.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},B.doTick=function(){},b}()},"./src/types/cmcd.ts":(d,D,l)=>{l.r(D),l.d(D,{CMCDObjectType:()=>b,CMCDStreamType:()=>O,CMCDStreamingFormat:()=>B,CMCDVersion:()=>w});var w=1,b;(function($){$.MANIFEST="m",$.AUDIO="a",$.VIDEO="v",$.MUXED="av",$.INIT="i",$.CAPTION="c",$.TIMED_TEXT="tt",$.KEY="k",$.OTHER="o"})(b||(b={}));var B;(function($){$.DASH="d",$.HLS="h",$.SMOOTH="s",$.OTHER="o"})(B||(B={}));var O;(function($){$.VOD="v",$.LIVE="l"})(O||(O={}))},"./src/types/demuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{MetadataSchema:()=>w});var w;(function(b){b.audioId3="org.id3",b.dateRange="com.apple.quicktime.HLS",b.emsg="https://aomedia.org/emsg/ID3"})(w||(w={}))},"./src/types/level.ts":(d,D,l)=>{l.r(D),l.d(D,{HdcpLevels:()=>$,HlsSkip:()=>F,HlsUrlParameters:()=>M,Level:()=>I,getSkipValue:()=>k});function w(P,T){for(var R=0;R<T.length;R++){var L=T[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,B(L.key),L)}}function b(P,T,R){return T&&w(P.prototype,T),R&&w(P,R),Object.defineProperty(P,"prototype",{writable:!1}),P}function B(P){var T=O(P,"string");return typeof T=="symbol"?T:String(T)}function O(P,T){if(typeof P!="object"||P===null)return P;var R=P[Symbol.toPrimitive];if(R!==void 0){var L=R.call(P,T||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(P)}var $=["NONE","TYPE-0","TYPE-1","TYPE-2",null],F;(function(P){P.No="",P.Yes="YES",P.v2="v2"})(F||(F={}));function k(P,T){var R=P.canSkipUntil,L=P.canSkipDateRanges,_=P.endSN,y=T!==void 0?T-_:0;return R&&y<R?L?F.v2:F.Yes:F.No}var M=function(){function P(R,L,_){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=R,this.part=L,this.skip=_}var T=P.prototype;return T.addDirectives=function(L){var _=new self.URL(L);return this.msn!==void 0&&_.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&_.searchParams.set("_HLS_part",this.part.toString()),this.skip&&_.searchParams.set("_HLS_skip",this.skip),_.href},P}(),I=function(){function P(T){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[T.url],this.attrs=T.attrs,this.bitrate=T.bitrate,T.details&&(this.details=T.details),this.id=T.id||0,this.name=T.name,this.width=T.width||0,this.height=T.height||0,this.audioCodec=T.audioCodec,this.videoCodec=T.videoCodec,this.unknownCodecs=T.unknownCodecs,this.codecSet=[T.videoCodec,T.audioCodec].filter(function(R){return R}).join(",").replace(/\.[^.,]+/g,"")}return b(P,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(R){var L=R%this.url.length;this._urlId!==L&&(this.details=void 0,this._urlId=L)}}]),P}()},"./src/types/loader.ts":(d,D,l)=>{l.r(D),l.d(D,{PlaylistContextType:()=>w,PlaylistLevelType:()=>b});var w;(function(B){B.MANIFEST="manifest",B.LEVEL="level",B.AUDIO_TRACK="audioTrack",B.SUBTITLE_TRACK="subtitleTrack"})(w||(w={}));var b;(function(B){B.MAIN="main",B.AUDIO="audio",B.SUBTITLE="subtitle"})(b||(b={}))},"./src/types/transmuxer.ts":(d,D,l)=>{l.r(D),l.d(D,{ChunkMetadata:()=>w});var w=function(O,$,F,k,M,I){k===void 0&&(k=0),M===void 0&&(M=-1),I===void 0&&(I=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=b(),this.buffering={audio:b(),video:b(),audiovideo:b()},this.level=O,this.sn=$,this.id=F,this.size=k,this.part=M,this.partial=I};function b(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(d,D,l)=>{l.r(D),l.d(D,{AttrList:()=>B});var w=/^(\d+)x(\d+)$/,b=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,B=function(){function O(F){typeof F=="string"&&(F=O.parseAttrList(F));for(var k in F)F.hasOwnProperty(k)&&(this[k]=F[k])}var $=O.prototype;return $.decimalInteger=function(k){var M=parseInt(this[k],10);return M>Number.MAX_SAFE_INTEGER?1/0:M},$.hexadecimalInteger=function(k){if(this[k]){var M=(this[k]||"0x").slice(2);M=(M.length&1?"0":"")+M;for(var I=new Uint8Array(M.length/2),P=0;P<M.length/2;P++)I[P]=parseInt(M.slice(P*2,P*2+2),16);return I}else return null},$.hexadecimalIntegerAsNumber=function(k){var M=parseInt(this[k],16);return M>Number.MAX_SAFE_INTEGER?1/0:M},$.decimalFloatingPoint=function(k){return parseFloat(this[k])},$.optionalFloat=function(k,M){var I=this[k];return I?parseFloat(I):M},$.enumeratedString=function(k){return this[k]},$.bool=function(k){return this[k]==="YES"},$.decimalResolution=function(k){var M=w.exec(this[k]);if(M!==null)return{width:parseInt(M[1],10),height:parseInt(M[2],10)}},O.parseAttrList=function(k){var M,I={},P='"';for(b.lastIndex=0;(M=b.exec(k))!==null;){var T=M[2];T.indexOf(P)===0&&T.lastIndexOf(P)===T.length-1&&(T=T.slice(1,-1)),I[M[1]]=T}return I},O}()},"./src/utils/binary-search.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w={search:function(O,$){for(var F=0,k=O.length-1,M=null,I=null;F<=k;){M=(F+k)/2|0,I=O[M];var P=$(I);if(P>0)F=M+1;else if(P<0)k=M-1;else return I}return null}};const b=w},"./src/utils/buffer-helper.ts":(d,D,l)=>{l.r(D),l.d(D,{BufferHelper:()=>B});var w=l("./src/utils/logger.ts"),b={length:0,start:function(){return 0},end:function(){return 0}},B=function(){function O(){}return O.isBuffered=function(F,k){try{if(F){for(var M=O.getBuffered(F),I=0;I<M.length;I++)if(k>=M.start(I)&&k<=M.end(I))return!0}}catch{}return!1},O.bufferInfo=function(F,k,M){try{if(F){var I=O.getBuffered(F),P=[],T;for(T=0;T<I.length;T++)P.push({start:I.start(T),end:I.end(T)});return this.bufferedInfo(P,k,M)}}catch{}return{len:0,start:k,end:k,nextStart:void 0}},O.bufferedInfo=function(F,k,M){k=Math.max(0,k),F.sort(function(o,c){var S=o.start-c.start;return S||c.end-o.end});var I=[];if(M)for(var P=0;P<F.length;P++){var T=I.length;if(T){var R=I[T-1].end;F[P].start-R<M?F[P].end>R&&(I[T-1].end=F[P].end):I.push(F[P])}else I.push(F[P])}else I=F;for(var L=0,_,y=k,m=k,p=0;p<I.length;p++){var C=I[p].start,x=I[p].end;if(k+M>=C&&k<x)y=C,m=x,L=m-k;else if(k+M<C){_=C;break}}return{len:L,start:y||0,end:m||0,nextStart:_}},O.getBuffered=function(F){try{return F.buffered}catch(k){return w.logger.log("failed to get media.buffered",k),b}},O}()},"./src/utils/cea-608-parser.ts":(d,D,l)=>{l.r(D),l.d(D,{CaptionScreen:()=>p,Row:()=>m,default:()=>f});var w=l("./src/utils/logger.ts"),b={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},B=function(u){var g=u;return b.hasOwnProperty(u)&&(g=b[u]),String.fromCharCode(g)},O=15,$=100,F={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},k={17:2,18:4,21:6,22:8,23:10,19:13,20:15},M={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},I={25:2,26:4,29:6,30:8,31:10,27:13,28:15},P=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],T;(function(h){h[h.ERROR=0]="ERROR",h[h.TEXT=1]="TEXT",h[h.WARNING=2]="WARNING",h[h.INFO=2]="INFO",h[h.DEBUG=3]="DEBUG",h[h.DATA=3]="DATA"})(T||(T={}));var R=function(){function h(){this.time=null,this.verboseLevel=T.ERROR}var u=h.prototype;return u.log=function(s,E){if(this.verboseLevel>=s){var A=typeof E=="function"?E():E;w.logger.log(this.time+" ["+s+"] "+A)}},h}(),L=function(u){for(var g=[],s=0;s<u.length;s++)g.push(u[s].toString(16));return g},_=function(){function h(g,s,E,A,v){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=g||"white",this.underline=s||!1,this.italics=E||!1,this.background=A||"black",this.flash=v||!1}var u=h.prototype;return u.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(s){for(var E=["foreground","underline","italics","background","flash"],A=0;A<E.length;A++){var v=E[A];s.hasOwnProperty(v)&&(this[v]=s[v])}},u.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},u.equals=function(s){return this.foreground===s.foreground&&this.underline===s.underline&&this.italics===s.italics&&this.background===s.background&&this.flash===s.flash},u.copy=function(s){this.foreground=s.foreground,this.underline=s.underline,this.italics=s.italics,this.background=s.background,this.flash=s.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},h}(),y=function(){function h(g,s,E,A,v,N){this.uchar=void 0,this.penState=void 0,this.uchar=g||" ",this.penState=new _(s,E,A,v,N)}var u=h.prototype;return u.reset=function(){this.uchar=" ",this.penState.reset()},u.setChar=function(s,E){this.uchar=s,this.penState.copy(E)},u.setPenState=function(s){this.penState.copy(s)},u.equals=function(s){return this.uchar===s.uchar&&this.penState.equals(s.penState)},u.copy=function(s){this.uchar=s.uchar,this.penState.copy(s.penState)},u.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},h}(),m=function(){function h(g){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var s=0;s<$;s++)this.chars.push(new y);this.logger=g,this.pos=0,this.currPenState=new _}var u=h.prototype;return u.equals=function(s){for(var E=!0,A=0;A<$;A++)if(!this.chars[A].equals(s.chars[A])){E=!1;break}return E},u.copy=function(s){for(var E=0;E<$;E++)this.chars[E].copy(s.chars[E])},u.isEmpty=function(){for(var s=!0,E=0;E<$;E++)if(!this.chars[E].isEmpty()){s=!1;break}return s},u.setCursor=function(s){this.pos!==s&&(this.pos=s),this.pos<0?(this.logger.log(T.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>$&&(this.logger.log(T.DEBUG,"Too large cursor position "+this.pos),this.pos=$)},u.moveCursor=function(s){var E=this.pos+s;if(s>1)for(var A=this.pos+1;A<E+1;A++)this.chars[A].setPenState(this.currPenState);this.setCursor(E)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(s){var E=this;s>=144&&this.backSpace();var A=B(s);if(this.pos>=$){this.logger.log(T.ERROR,function(){return"Cannot insert "+s.toString(16)+" ("+A+") at position "+E.pos+". Skipping it!"});return}this.chars[this.pos].setChar(A,this.currPenState),this.moveCursor(1)},u.clearFromPos=function(s){var E;for(E=s;E<$;E++)this.chars[E].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var s=[],E=!0,A=0;A<$;A++){var v=this.chars[A].uchar;v!==" "&&(E=!1),s.push(v)}return E?"":s.join("")},u.setPenStyles=function(s){this.currPenState.setStyles(s);var E=this.chars[this.pos];E.setPenState(this.currPenState)},h}(),p=function(){function h(g){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var s=0;s<O;s++)this.rows.push(new m(g));this.logger=g,this.currRow=O-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var u=h.prototype;return u.reset=function(){for(var s=0;s<O;s++)this.rows[s].clear();this.currRow=O-1},u.equals=function(s){for(var E=!0,A=0;A<O;A++)if(!this.rows[A].equals(s.rows[A])){E=!1;break}return E},u.copy=function(s){for(var E=0;E<O;E++)this.rows[E].copy(s.rows[E])},u.isEmpty=function(){for(var s=!0,E=0;E<O;E++)if(!this.rows[E].isEmpty()){s=!1;break}return s},u.backSpace=function(){var s=this.rows[this.currRow];s.backSpace()},u.clearToEndOfRow=function(){var s=this.rows[this.currRow];s.clearToEndOfRow()},u.insertChar=function(s){var E=this.rows[this.currRow];E.insertChar(s)},u.setPen=function(s){var E=this.rows[this.currRow];E.setPenStyles(s)},u.moveCursor=function(s){var E=this.rows[this.currRow];E.moveCursor(s)},u.setCursor=function(s){this.logger.log(T.INFO,"setCursor: "+s);var E=this.rows[this.currRow];E.setCursor(s)},u.setPAC=function(s){this.logger.log(T.INFO,function(){return"pacData = "+JSON.stringify(s)});var E=s.row-1;if(this.nrRollUpRows&&E<this.nrRollUpRows-1&&(E=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==E){for(var A=0;A<O;A++)this.rows[A].clear();var v=this.currRow+1-this.nrRollUpRows,N=this.lastOutputScreen;if(N){var U=N.rows[v].cueStartTime,K=this.logger.time;if(U&&K!==null&&U<K)for(var W=0;W<this.nrRollUpRows;W++)this.rows[E-this.nrRollUpRows+W+1].copy(N.rows[v+W])}}this.currRow=E;var H=this.rows[this.currRow];if(s.indent!==null){var j=s.indent,G=Math.max(j-1,0);H.setCursor(s.indent),s.color=H.chars[G].penState.foreground}var z={foreground:s.color,underline:s.underline,italics:s.italics,background:"black",flash:!1};this.setPen(z)},u.setBkgData=function(s){this.logger.log(T.INFO,function(){return"bkgData = "+JSON.stringify(s)}),this.backSpace(),this.setPen(s),this.insertChar(32)},u.setRollUpRows=function(s){this.nrRollUpRows=s},u.rollUp=function(){var s=this;if(this.nrRollUpRows===null){this.logger.log(T.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(T.TEXT,function(){return s.getDisplayText()});var E=this.currRow+1-this.nrRollUpRows,A=this.rows.splice(E,1)[0];A.clear(),this.rows.splice(this.currRow,0,A),this.logger.log(T.INFO,"Rolling up")},u.getDisplayText=function(s){s=s||!1;for(var E=[],A="",v=-1,N=0;N<O;N++){var U=this.rows[N].getTextString();U&&(v=N+1,s?E.push("Row "+v+": '"+U+"'"):E.push(U.trim()))}return E.length>0&&(s?A="["+E.join(" | ")+"]":A=E.join(`
`)),A},u.getTextAndFormat=function(){return this.rows},h}(),C=function(){function h(g,s,E){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=g,this.outputFilter=s,this.mode=null,this.verbose=0,this.displayedMemory=new p(E),this.nonDisplayedMemory=new p(E),this.lastOutputScreen=new p(E),this.currRollUpRow=this.displayedMemory.rows[O-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=E}var u=h.prototype;return u.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[O-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(s){this.outputFilter=s},u.setPAC=function(s){this.writeScreen.setPAC(s)},u.setBkgData=function(s){this.writeScreen.setBkgData(s)},u.setMode=function(s){s!==this.mode&&(this.mode=s,this.logger.log(T.INFO,function(){return"MODE="+s}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=s)},u.insertChars=function(s){for(var E=this,A=0;A<s.length;A++)this.writeScreen.insertChar(s[A]);var v=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(T.INFO,function(){return v+": "+E.writeScreen.getDisplayText(!0)}),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(T.TEXT,function(){return"DISPLAYED: "+E.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(T.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(T.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(T.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(s){this.logger.log(T.INFO,"RU("+s+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(s)},u.ccFON=function(){this.logger.log(T.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(T.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(T.INFO,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(T.INFO,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(T.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(T.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(T.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var s=this;if(this.logger.log(T.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var E=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=E,this.writeScreen=this.nonDisplayedMemory,this.logger.log(T.TEXT,function(){return"DISP: "+s.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},u.ccTO=function(s){this.logger.log(T.INFO,"TO("+s+") - Tab Offset"),this.writeScreen.moveCursor(s)},u.ccMIDROW=function(s){var E={flash:!1};if(E.underline=s%2===1,E.italics=s>=46,E.italics)E.foreground="white";else{var A=Math.floor(s/2)-16,v=["white","green","blue","cyan","red","yellow","magenta"];E.foreground=v[A]}this.logger.log(T.INFO,"MIDROW: "+JSON.stringify(E)),this.writeScreen.setPen(E)},u.outputDataUpdate=function(s){s===void 0&&(s=!1);var E=this.logger.time;E!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=E:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,E,this.lastOutputScreen),s&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:E),this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(s){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,s,this.displayedMemory),this.cueStartTime=s))},h}(),x=function(){function h(g,s,E){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var A=new R;this.channels=[null,new C(g,s,A),new C(g+1,E,A)],this.cmdHistory=S(),this.logger=A}var u=h.prototype;return u.getHandler=function(s){return this.channels[s].getHandler()},u.setHandler=function(s,E){this.channels[s].setHandler(E)},u.addData=function(s,E){var A,v,N,U=!1;this.logger.time=s;for(var K=0;K<E.length;K+=2)if(v=E[K]&127,N=E[K+1]&127,!(v===0&&N===0)){if(this.logger.log(T.DATA,"["+L([E[K],E[K+1]])+"] -> ("+L([v,N])+")"),A=this.parseCmd(v,N),A||(A=this.parseMidrow(v,N)),A||(A=this.parsePAC(v,N)),A||(A=this.parseBackgroundAttributes(v,N)),!A&&(U=this.parseChars(v,N),U)){var W=this.currentChannel;if(W&&W>0){var H=this.channels[W];H.insertChars(U)}else this.logger.log(T.WARNING,"No channel found yet. TEXT-MODE?")}!A&&!U&&this.logger.log(T.WARNING,"Couldn't parse cleaned data "+L([v,N])+" orig: "+L([E[K],E[K+1]]))}},u.parseCmd=function(s,E){var A=this.cmdHistory,v=(s===20||s===28||s===21||s===29)&&E>=32&&E<=47,N=(s===23||s===31)&&E>=33&&E<=35;if(!(v||N))return!1;if(c(s,E,A))return o(null,null,A),this.logger.log(T.DEBUG,"Repeated command ("+L([s,E])+") is dropped"),!0;var U=s===20||s===21||s===23?1:2,K=this.channels[U];return s===20||s===21||s===28||s===29?E===32?K.ccRCL():E===33?K.ccBS():E===34?K.ccAOF():E===35?K.ccAON():E===36?K.ccDER():E===37?K.ccRU(2):E===38?K.ccRU(3):E===39?K.ccRU(4):E===40?K.ccFON():E===41?K.ccRDC():E===42?K.ccTR():E===43?K.ccRTD():E===44?K.ccEDM():E===45?K.ccCR():E===46?K.ccENM():E===47&&K.ccEOC():K.ccTO(E-32),o(s,E,A),this.currentChannel=U,!0},u.parseMidrow=function(s,E){var A=0;if((s===17||s===25)&&E>=32&&E<=47){if(s===17?A=1:A=2,A!==this.currentChannel)return this.logger.log(T.ERROR,"Mismatch channel in midrow parsing"),!1;var v=this.channels[A];return v?(v.ccMIDROW(E),this.logger.log(T.DEBUG,"MIDROW ("+L([s,E])+")"),!0):!1}return!1},u.parsePAC=function(s,E){var A,v=this.cmdHistory,N=(s>=17&&s<=23||s>=25&&s<=31)&&E>=64&&E<=127,U=(s===16||s===24)&&E>=64&&E<=95;if(!(N||U))return!1;if(c(s,E,v))return o(null,null,v),!0;var K=s<=23?1:2;E>=64&&E<=95?A=K===1?F[s]:M[s]:A=K===1?k[s]:I[s];var W=this.channels[K];return W?(W.setPAC(this.interpretPAC(A,E)),o(s,E,v),this.currentChannel=K,!0):!1},u.interpretPAC=function(s,E){var A,v={color:null,italics:!1,indent:null,underline:!1,row:s};return E>95?A=E-96:A=E-64,v.underline=(A&1)===1,A<=13?v.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(A/2)]:A<=15?(v.italics=!0,v.color="white"):v.indent=Math.floor((A-16)/2)*4,v},u.parseChars=function(s,E){var A,v=null,N=null;if(s>=25?(A=2,N=s-8):(A=1,N=s),N>=17&&N<=19){var U;N===17?U=E+80:N===18?U=E+112:U=E+144,this.logger.log(T.INFO,"Special char '"+B(U)+"' in channel "+A),v=[U]}else s>=32&&s<=127&&(v=E===0?[s]:[s,E]);if(v){var K=L(v);this.logger.log(T.DEBUG,"Char codes =  "+K.join(",")),o(s,E,this.cmdHistory)}return v},u.parseBackgroundAttributes=function(s,E){var A=(s===16||s===24)&&E>=32&&E<=47,v=(s===23||s===31)&&E>=45&&E<=47;if(!(A||v))return!1;var N,U={};s===16||s===24?(N=Math.floor((E-32)/2),U.background=P[N],E%2===1&&(U.background=U.background+"_semi")):E===45?U.background="transparent":(U.foreground="black",E===47&&(U.underline=!0));var K=s<=23?1:2,W=this.channels[K];return W.setBkgData(U),o(s,E,this.cmdHistory),!0},u.reset=function(){for(var s=0;s<Object.keys(this.channels).length;s++){var E=this.channels[s];E&&E.reset()}this.cmdHistory=S()},u.cueSplitAtTime=function(s){for(var E=0;E<this.channels.length;E++){var A=this.channels[E];A&&A.cueSplitAtTime(s)}},h}();function o(h,u,g){g.a=h,g.b=u}function c(h,u,g){return g.a===h&&g.b===u}function S(){return{a:null,b:null}}const f=x},"./src/utils/codecs.ts":(d,D,l)=>{l.r(D),l.d(D,{isCodecSupportedInMp4:()=>B,isCodecType:()=>b});var w={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function b(O,$){var F=w[$];return!!F&&F[O.slice(0,4)]===!0}function B(O,$){return MediaSource.isTypeSupported(($||"video")+'/mp4;codecs="'+O+'"')}},"./src/utils/cues.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>F});var w=l("./src/utils/vttparser.ts"),b=l("./src/utils/webvtt-parser.ts"),B=l("./src/utils/texttrack-utils.ts"),O=/\s/,$={newCue:function(M,I,P,T){for(var R=[],L,_,y,m,p,C=self.VTTCue||self.TextTrackCue,x=0;x<T.rows.length;x++)if(L=T.rows[x],y=!0,m=0,p="",!L.isEmpty()){for(var o=0;o<L.chars.length;o++)O.test(L.chars[o].uchar)&&y?m++:(p+=L.chars[o].uchar,y=!1);L.cueStartTime=I,I===P&&(P+=1e-4),m>=16?m--:m++;var c=(0,w.fixLineBreaks)(p.trim()),S=(0,b.generateCueId)(I,P,c);(!M||!M.cues||!M.cues.getCueById(S))&&(_=new C(I,P,c),_.id=S,_.line=x+1,_.align="left",_.position=10+Math.min(80,Math.floor(m*8/32)*10),R.push(_))}return M&&R.length&&(R.sort(function(f,h){return f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line}),R.forEach(function(f){return(0,B.addCueToTrack)(M,f)})),R}};const F=$},"./src/utils/discontinuities.ts":(d,D,l)=>{l.r(D),l.d(D,{adjustSlidingStart:()=>M,alignMediaPlaylistByPDT:()=>R,alignPDT:()=>T,alignStream:()=>I,findDiscontinuousReferenceFrag:()=>F,findFirstFragWithCC:()=>O,shouldAlignOnDiscontinuities:()=>$});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/logger.ts"),B=l("./src/controller/level-helper.ts");function O(L,_){for(var y=null,m=0,p=L.length;m<p;m++){var C=L[m];if(C&&C.cc===_){y=C;break}}return y}function $(L,_,y){return!!(_.details&&(y.endCC>y.startCC||L&&L.cc<y.startCC))}function F(L,_,y){var m=L.fragments,p=_.fragments;if(!p.length||!m.length){b.logger.log("No fragments to align");return}var C=O(m,p[0].cc);if(!C||C&&!C.startPTS){b.logger.log("No frag in previous level to align on");return}return C}function k(L,_){if(L){var y=L.start+_;L.start=L.startPTS=y,L.endPTS=y+L.duration}}function M(L,_){for(var y=_.fragments,m=0,p=y.length;m<p;m++)k(y[m],L);_.fragmentHint&&k(_.fragmentHint,L),_.alignedSliding=!0}function I(L,_,y){!_||(P(L,y,_),!y.alignedSliding&&_.details&&T(y,_.details),!y.alignedSliding&&_.details&&!y.skippedSegments&&(0,B.adjustSliding)(_.details,y))}function P(L,_,y){if($(L,y,_)){var m=F(y.details,_);m&&(0,w.isFiniteNumber)(m.start)&&(b.logger.log("Adjusting PTS using last level due to CC increase within current level "+_.url),M(m.start,_))}}function T(L,_){if(!(!_.fragments.length||!L.hasProgramDateTime||!_.hasProgramDateTime)){var y=_.fragments[0].programDateTime,m=L.fragments[0].programDateTime,p=(m-y)/1e3+_.fragments[0].start;p&&(0,w.isFiniteNumber)(p)&&(b.logger.log("Adjusting PTS using programDateTime delta "+(m-y)+"ms, sliding:"+p.toFixed(3)+" "+L.url+" "),M(p,L))}}function R(L,_){if(!(!L.hasProgramDateTime||!_.hasProgramDateTime)){var y=L.fragments,m=_.fragments;if(!(!y.length||!m.length)){var p=Math.round(m.length/2)-1,C=m[p],x=O(y,C.cc)||y[Math.round(y.length/2)-1],o=C.programDateTime,c=x.programDateTime;if(!(o===null||c===null)){var S=(c-o)/1e3-(x.start-C.start);M(S,L)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>B});var w=l("./src/utils/ewma.ts"),b=function(){function O(F,k,M){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=M,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new w.default(F),this.fast_=new w.default(k)}var $=O.prototype;return $.update=function(k,M){var I=this.slow_,P=this.fast_;this.slow_.halfLife!==k&&(this.slow_=new w.default(k,I.getEstimate(),I.getTotalWeight())),this.fast_.halfLife!==M&&(this.fast_=new w.default(M,P.getEstimate(),P.getTotalWeight()))},$.sample=function(k,M){k=Math.max(k,this.minDelayMs_);var I=8*M,P=k/1e3,T=I/P;this.fast_.sample(P,T),this.slow_.sample(P,T)},$.canEstimate=function(){var k=this.fast_;return k&&k.getTotalWeight()>=this.minWeight_},$.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},$.destroy=function(){},O}();const B=b},"./src/utils/ewma.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w=function(){function B($,F,k){F===void 0&&(F=0),k===void 0&&(k=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=$,this.alpha_=$?Math.exp(Math.log(.5)/$):0,this.estimate_=F,this.totalWeight_=k}var O=B.prototype;return O.sample=function(F,k){var M=Math.pow(this.alpha_,F);this.estimate_=k*(1-M)+M*this.estimate_,this.totalWeight_+=F},O.getTotalWeight=function(){return this.totalWeight_},O.getEstimate=function(){if(this.alpha_){var F=1-Math.pow(this.alpha_,this.totalWeight_);if(F)return this.estimate_/F}return this.estimate_},B}();const b=w},"./src/utils/fetch-loader.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>p,fetchSupported:()=>R});var w=l("./src/polyfills/number.ts"),b=l("./src/loader/load-stats.ts"),B=l("./src/demux/chunk-cache.ts");function O(C,x){C.prototype=Object.create(x.prototype),C.prototype.constructor=C,I(C,x)}function $(C){var x=typeof Map=="function"?new Map:void 0;return $=function(c){if(c===null||!M(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(typeof x<"u"){if(x.has(c))return x.get(c);x.set(c,S)}function S(){return F(c,arguments,P(this).constructor)}return S.prototype=Object.create(c.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I(S,c)},$(C)}function F(C,x,o){return k()?F=Reflect.construct.bind():F=function(S,f,h){var u=[null];u.push.apply(u,f);var g=Function.bind.apply(S,u),s=new g;return h&&I(s,h.prototype),s},F.apply(null,arguments)}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(C){return Function.toString.call(C).indexOf("[native code]")!==-1}function I(C,x){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},I(C,x)}function P(C){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},P(C)}function T(){return T=Object.assign?Object.assign.bind():function(C){for(var x=1;x<arguments.length;x++){var o=arguments[x];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(C[c]=o[c])}return C},T.apply(this,arguments)}function R(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var L=function(){function C(o){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=o.fetchSetup||y,this.controller=new self.AbortController,this.stats=new b.LoadStats}var x=C.prototype;return x.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},x.abortInternal=function(){var c=this.response;(!c||!c.ok)&&(this.stats.aborted=!0,this.controller.abort())},x.abort=function(){var c;this.abortInternal(),(c=this.callbacks)!==null&&c!==void 0&&c.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},x.load=function(c,S,f){var h=this,u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();var g=_(c,this.controller.signal),s=f.onProgress,E=c.responseType==="arraybuffer",A=E?"byteLength":"length";this.context=c,this.config=S,this.callbacks=f,this.request=this.fetchSetup(c,g),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){h.abortInternal(),f.onTimeout(u,c,h.response)},S.timeout),self.fetch(this.request).then(function(v){if(h.response=h.loader=v,!v.ok){var N=v.status,U=v.statusText;throw new m(U||"fetch, bad network response",N,v)}return u.loading.first=Math.max(self.performance.now(),u.loading.start),u.total=parseInt(v.headers.get("Content-Length")||"0"),s&&(0,w.isFiniteNumber)(S.highWaterMark)?h.loadProgressively(v,u,c,S.highWaterMark,s):E?v.arrayBuffer():v.text()}).then(function(v){var N=h.response;self.clearTimeout(h.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);var U=v[A];U&&(u.loaded=u.total=U);var K={url:N.url,data:v};s&&!(0,w.isFiniteNumber)(S.highWaterMark)&&s(u,c,v,N),f.onSuccess(K,u,c,N)}).catch(function(v){if(self.clearTimeout(h.requestTimeout),!u.aborted){var N=v&&v.code||0,U=v?v.message:null;f.onError({code:N,text:U},c,v?v.details:null)}})},x.getCacheAge=function(){var c=null;if(this.response){var S=this.response.headers.get("age");c=S?parseFloat(S):null}return c},x.loadProgressively=function(c,S,f,h,u){h===void 0&&(h=0);var g=new B.default,s=c.body.getReader(),E=function A(){return s.read().then(function(v){if(v.done)return g.dataLength&&u(S,f,g.flush(),c),Promise.resolve(new ArrayBuffer(0));var N=v.value,U=N.length;return S.loaded+=U,U<h||g.dataLength?(g.push(N),g.dataLength>=h&&u(S,f,g.flush(),c)):u(S,f,N,c),A()}).catch(function(){return Promise.reject()})};return E()},C}();function _(C,x){var o={method:"GET",mode:"cors",credentials:"same-origin",signal:x,headers:new self.Headers(T({},C.headers))};return C.rangeEnd&&o.headers.set("Range","bytes="+C.rangeStart+"-"+String(C.rangeEnd-1)),o}function y(C,x){return new self.Request(C.url,x)}var m=function(C){O(x,C);function x(o,c,S){var f;return f=C.call(this,o)||this,f.code=void 0,f.details=void 0,f.code=c,f.details=S,f}return x}($(Error));const p=L},"./src/utils/hex.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w={hexDump:function(O){for(var $="",F=0;F<O.length;F++){var k=O[F].toString(16);k.length<2&&(k="0"+k),$+=k}return $}};const b=w},"./src/utils/imsc1-ttml-parser.ts":(d,D,l)=>{l.r(D),l.d(D,{IMSC1_CODEC:()=>M,parseIMSC1:()=>R});var w=l("./src/utils/mp4-tools.ts"),b=l("./src/utils/vttparser.ts"),B=l("./src/utils/vttcue.ts"),O=l("./src/demux/id3.ts"),$=l("./src/utils/timescale-conversion.ts"),F=l("./src/utils/webvtt-parser.ts");function k(){return k=Object.assign?Object.assign.bind():function(f){for(var h=1;h<arguments.length;h++){var u=arguments[h];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(f[g]=u[g])}return f},k.apply(this,arguments)}var M="stpp.ttml.im1t",I=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,P=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,T={left:"start",center:"center",right:"end",start:"start",end:"end"};function R(f,h,u,g,s){var E=(0,w.findBox)(new Uint8Array(f),["mdat"]);if(E.length===0){s(new Error("Could not parse IMSC1 mdat"));return}var A=E.map(function(N){return(0,O.utf8ArrayToStr)(N)}),v=(0,$.toTimescaleFromScale)(h,1,u);try{A.forEach(function(N){return g(L(N,v))})}catch(N){s(N)}}function L(f,h){var u=new DOMParser,g=u.parseFromString(f,"text/xml"),s=g.getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");var E={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},A=Object.keys(E).reduce(function(W,H){return W[H]=s.getAttribute("ttp:"+H)||E[H],W},{}),v=s.getAttribute("xml:space")!=="preserve",N=y(_(s,"styling","style")),U=y(_(s,"layout","region")),K=_(s,"body","[begin]");return[].map.call(K,function(W){var H=m(W,v);if(!H||!W.hasAttribute("begin"))return null;var j=o(W.getAttribute("begin"),A),G=o(W.getAttribute("dur"),A),z=o(W.getAttribute("end"),A);if(j===null)throw x(W);if(z===null){if(G===null)throw x(W);z=j+G}var Y=new B.default(j-h,z-h,H);Y.id=(0,F.generateCueId)(Y.startTime,Y.endTime,Y.text);var X=U[W.getAttribute("region")],Q=N[W.getAttribute("style")],q=p(X,Q,N),J=q.textAlign;if(J){var ee=T[J];ee&&(Y.lineAlign=ee),Y.align=J}return k(Y,q),Y}).filter(function(W){return W!==null})}function _(f,h,u){var g=f.getElementsByTagName(h)[0];return g?[].slice.call(g.querySelectorAll(u)):[]}function y(f){return f.reduce(function(h,u){var g=u.getAttribute("xml:id");return g&&(h[g]=u),h},{})}function m(f,h){return[].slice.call(f.childNodes).reduce(function(u,g,s){var E;return g.nodeName==="br"&&s?u+`
`:(E=g.childNodes)!==null&&E!==void 0&&E.length?m(g,h):h?u+g.textContent.trim().replace(/\s+/g," "):u+g.textContent},"")}function p(f,h,u){var g="http://www.w3.org/ns/ttml#styling",s=null,E=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],A=f!=null&&f.hasAttribute("style")?f.getAttribute("style"):null;return A&&u.hasOwnProperty(A)&&(s=u[A]),E.reduce(function(v,N){var U=C(h,g,N)||C(f,g,N)||C(s,g,N);return U&&(v[N]=U),v},{})}function C(f,h,u){return f&&f.hasAttributeNS(h,u)?f.getAttributeNS(h,u):null}function x(f){return new Error("Could not parse ttml timestamp "+f)}function o(f,h){if(!f)return null;var u=(0,b.parseTimeStamp)(f);return u===null&&(I.test(f)?u=c(f,h):P.test(f)&&(u=S(f,h))),u}function c(f,h){var u=I.exec(f),g=(u[4]|0)+(u[5]|0)/h.subFrameRate;return(u[1]|0)*3600+(u[2]|0)*60+(u[3]|0)+g/h.frameRate}function S(f,h){var u=P.exec(f),g=Number(u[1]),s=u[2];switch(s){case"h":return g*3600;case"m":return g*60;case"ms":return g*1e3;case"f":return g/h.frameRate;case"t":return g/h.tickRate}return g}},"./src/utils/keysystem-util.ts":(d,D,l)=>{l.r(D),l.d(D,{changeEndianness:()=>B,convertDataUriToArrayBytes:()=>O,strToUtf8array:()=>$});var w=l("./src/utils/numeric-encoding-utils.ts");function b(F){var k=$(F).subarray(0,16),M=new Uint8Array(16);return M.set(k,16-k.length),M}function B(F){var k=function(I,P,T){var R=I[P];I[P]=I[T],I[T]=R};k(F,0,3),k(F,1,2),k(F,4,5),k(F,6,7)}function O(F){var k=F.split(":"),M=null;if(k[0]==="data"&&k.length===2){var I=k[1].split(";"),P=I[I.length-1].split(",");if(P.length===2){var T=P[0]==="base64",R=P[1];T?(I.splice(-1,1),M=(0,w.base64Decode)(R)):M=b(R)}}return M}function $(F){return Uint8Array.from(unescape(encodeURIComponent(F)),function(k){return k.charCodeAt(0)})}},"./src/utils/logger.ts":(d,D,l)=>{l.r(D),l.d(D,{enableLogs:()=>F,logger:()=>k});var w=function(){},b={trace:w,debug:w,log:w,warn:w,info:w,error:w},B=b;function O(M){var I=self.console[M];return I?I.bind(self.console,"["+M+"] >"):w}function $(M){for(var I=arguments.length,P=new Array(I>1?I-1:0),T=1;T<I;T++)P[T-1]=arguments[T];P.forEach(function(R){B[R]=M[R]?M[R].bind(M):O(R)})}function F(M,I){if(self.console&&M===!0||typeof M=="object"){$(M,"debug","log","info","warn","error");try{B.log('Debug logs enabled for "'+I+'"')}catch{B=b}}else B=b}var k=B},"./src/utils/mediakeys-helper.ts":(d,D,l)=>{l.r(D),l.d(D,{KeySystemFormats:()=>b,KeySystemIds:()=>O,KeySystems:()=>w,getKeySystemsForConfig:()=>k,getSupportedMediaKeySystemConfigurations:()=>I,keySystemDomainToKeySystemFormat:()=>F,keySystemFormatToKeySystemDomain:()=>B,keySystemIdToKeySystemDomain:()=>$,requestMediaKeySystemAccess:()=>M});var w;(function(T){T.CLEARKEY="org.w3.clearkey",T.FAIRPLAY="com.apple.fps",T.PLAYREADY="com.microsoft.playready",T.WIDEVINE="com.widevine.alpha"})(w||(w={}));var b;(function(T){T.CLEARKEY="org.w3.clearkey",T.FAIRPLAY="com.apple.streamingkeydelivery",T.PLAYREADY="com.microsoft.playready",T.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"})(b||(b={}));function B(T){switch(T){case b.FAIRPLAY:return w.FAIRPLAY;case b.PLAYREADY:return w.PLAYREADY;case b.WIDEVINE:return w.WIDEVINE;case b.CLEARKEY:return w.CLEARKEY}}var O;(function(T){T.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"})(O||(O={}));function $(T){if(T===O.WIDEVINE)return w.WIDEVINE}function F(T){switch(T){case w.FAIRPLAY:return b.FAIRPLAY;case w.PLAYREADY:return b.PLAYREADY;case w.WIDEVINE:return b.WIDEVINE;case w.CLEARKEY:return b.CLEARKEY}}function k(T){var R=T.drmSystems,L=T.widevineLicenseUrl,_=R?[w.FAIRPLAY,w.WIDEVINE,w.PLAYREADY,w.CLEARKEY].filter(function(y){return!!R[y]}):[];return!_[w.WIDEVINE]&&L&&_.push(w.WIDEVINE),_}var M=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function I(T,R,L,_){var y;switch(T){case w.FAIRPLAY:y=["cenc","sinf"];break;case w.WIDEVINE:case w.PLAYREADY:y=["cenc"];break;case w.CLEARKEY:y=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+T)}return P(y,R,L,_)}function P(T,R,L,_){var y={initDataTypes:T,persistentState:_.persistentState||"not-allowed",distinctiveIdentifier:_.distinctiveIdentifier||"not-allowed",sessionTypes:_.sessionTypes||[_.sessionType||"temporary"],audioCapabilities:R.map(function(m){return{contentType:'audio/mp4; codecs="'+m+'"',robustness:_.audioRobustness||"",encryptionScheme:_.audioEncryptionScheme||null}}),videoCapabilities:L.map(function(m){return{contentType:'video/mp4; codecs="'+m+'"',robustness:_.videoRobustness||"",encryptionScheme:_.videoEncryptionScheme||null}})};return[y]}},"./src/utils/mediasource-helper.ts":(d,D,l)=>{l.r(D),l.d(D,{getMediaSource:()=>w});function w(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(d,D,l)=>{l.r(D),l.d(D,{RemuxerTrackIdConfig:()=>M,appendUint8Array:()=>h,bin2str:()=>I,computeRawDurationFromSamples:()=>c,discardEPB:()=>A,findBox:()=>_,getDuration:()=>o,getStartDTS:()=>x,mp4Box:()=>N,mp4pssh:()=>U,offsetStartDTS:()=>S,parseEmsg:()=>v,parseInitSegment:()=>m,parsePssh:()=>K,parseSEIMessageFromNALu:()=>E,parseSamples:()=>u,parseSegmentIndex:()=>y,parseSinf:()=>C,patchEncyptionData:()=>p,readSint32:()=>R,readUint16:()=>P,readUint32:()=>T,segmentValidRange:()=>f,writeUint32:()=>L});var w=l("./src/loader/fragment.ts"),b=l("./src/utils/typed-array.ts"),B=l("./src/demux/id3.ts"),O=l("./src/utils/logger.ts"),$=l("./src/utils/hex.ts"),F=Math.pow(2,32)-1,k=[].push,M={video:1,audio:2,id3:3,text:4};function I(W){return String.fromCharCode.apply(null,W)}function P(W,H){var j=W[H]<<8|W[H+1];return j<0?65536+j:j}function T(W,H){var j=R(W,H);return j<0?4294967296+j:j}function R(W,H){return W[H]<<24|W[H+1]<<16|W[H+2]<<8|W[H+3]}function L(W,H,j){W[H]=j>>24,W[H+1]=j>>16&255,W[H+2]=j>>8&255,W[H+3]=j&255}function _(W,H){var j=[];if(!H.length)return j;for(var G=W.byteLength,z=0;z<G;){var Y=T(W,z),X=I(W.subarray(z+4,z+8)),Q=Y>1?z+Y:G;if(X===H[0])if(H.length===1)j.push(W.subarray(z+8,Q));else{var q=_(W.subarray(z+8,Q),H.slice(1));q.length&&k.apply(j,q)}z=Q}return j}function y(W){var H=[],j=W[0],G=8,z=T(W,G);G+=4;var Y=0,X=0;j===0?G+=8:G+=16,G+=2;var Q=W.length+X,q=P(W,G);G+=2;for(var J=0;J<q;J++){var ee=G,re=T(W,ee);ee+=4;var oe=re&2147483647,ne=(re&2147483648)>>>31;if(ne===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var te=T(W,ee);ee+=4,H.push({referenceSize:oe,subsegmentDuration:te,info:{duration:te/z,start:Q,end:Q+oe-1}}),Q+=oe,ee+=4,G=ee}return{earliestPresentationTime:Y,timescale:z,version:j,referencesCount:q,references:H}}function m(W){for(var H=[],j=_(W,["moov","trak"]),G=0;G<j.length;G++){var z=j[G],Y=_(z,["tkhd"])[0];if(Y){var X=Y[0],Q=X===0?12:20,q=T(Y,Q),J=_(z,["mdia","mdhd"])[0];if(J){X=J[0],Q=X===0?12:20;var ee=T(J,Q),re=_(z,["mdia","hdlr"])[0];if(re){var oe=I(re.subarray(8,12)),ne={soun:w.ElementaryStreamTypes.AUDIO,vide:w.ElementaryStreamTypes.VIDEO}[oe];if(ne){var te=_(z,["mdia","minf","stbl","stsd"])[0],ue=void 0;te&&(ue=I(te.subarray(12,16))),H[q]={timescale:ee,type:ne},H[ne]={timescale:ee,id:q,codec:ue}}}}}}var he=_(W,["moov","mvex","trex"]);return he.forEach(function(pe){var Re=T(pe,4),Te=H[Re];Te&&(Te.default={duration:T(pe,12),flags:T(pe,20)})}),H}function p(W,H){if(!W||!H)return W;var j=H.keyId;if(j&&H.isCommonEncryption){var G=_(W,["moov","trak"]);G.forEach(function(z){var Y=_(z,["mdia","minf","stbl","stsd"])[0],X=Y.subarray(8),Q=_(X,["enca"]),q=Q.length>0;q||(Q=_(X,["encv"])),Q.forEach(function(J){var ee=q?J.subarray(28):J.subarray(78),re=_(ee,["sinf"]);re.forEach(function(oe){var ne=C(oe);if(ne){var te=ne.subarray(8,24);te.some(function(ue){return ue!==0})||(O.logger.log("[eme] Patching keyId in 'enc"+(q?"a":"v")+">sinf>>tenc' box: "+$.default.hexDump(te)+" -> "+$.default.hexDump(j)),ne.set(j,8))}})})})}return W}function C(W){var H=_(W,["schm"])[0];if(H){var j=I(H.subarray(4,8));if(j==="cbcs"||j==="cenc")return _(W,["schi","tenc"])[0]}return O.logger.error("[eme] missing 'schm' box"),null}function x(W,H){return _(H,["moof","traf"]).reduce(function(j,G){var z=_(G,["tfdt"])[0],Y=z[0],X=_(G,["tfhd"]).reduce(function(Q,q){var J=T(q,4),ee=W[J];if(ee){var re=T(z,4);Y===1&&(re*=Math.pow(2,32),re+=T(z,8));var oe=ee.timescale||9e4,ne=re/oe;if(isFinite(ne)&&(Q===null||ne<Q))return ne}return Q},null);return X!==null&&isFinite(X)&&(j===null||X<j)?X:j},null)||0}function o(W,H){for(var j=0,G=0,z=0,Y=_(W,["moof","traf"]),X=0;X<Y.length;X++){var Q=Y[X],q=_(Q,["tfhd"])[0],J=T(q,4),ee=H[J];if(!!ee){var re=ee.default,oe=T(q,0)|(re==null?void 0:re.flags),ne=re==null?void 0:re.duration;oe&8&&(oe&2?ne=T(q,12):ne=T(q,8));for(var te=ee.timescale||9e4,ue=_(Q,["trun"]),he=0;he<ue.length;he++){if(j=c(ue[he]),!j&&ne){var pe=T(ue[he],4);j=ne*pe}ee.type===w.ElementaryStreamTypes.VIDEO?G+=j/te:ee.type===w.ElementaryStreamTypes.AUDIO&&(z+=j/te)}}}if(G===0&&z===0){for(var Re=0,Te=_(W,["sidx"]),Oe=0;Oe<Te.length;Oe++){var ye=y(Te[Oe]);ye!=null&&ye.references&&(Re+=ye.references.reduce(function(Se,Ee){return Se+Ee.info.duration||0},0))}return Re}return G||z}function c(W){var H=T(W,0),j=8;H&1&&(j+=4),H&4&&(j+=4);for(var G=0,z=T(W,4),Y=0;Y<z;Y++){if(H&256){var X=T(W,j);G+=X,j+=4}H&512&&(j+=4),H&1024&&(j+=4),H&2048&&(j+=4)}return G}function S(W,H,j){_(H,["moof","traf"]).forEach(function(G){_(G,["tfhd"]).forEach(function(z){var Y=T(z,4),X=W[Y];if(!!X){var Q=X.timescale||9e4;_(G,["tfdt"]).forEach(function(q){var J=q[0],ee=T(q,4);if(J===0)ee-=j*Q,ee=Math.max(ee,0),L(q,4,ee);else{ee*=Math.pow(2,32),ee+=T(q,8),ee-=j*Q,ee=Math.max(ee,0);var re=Math.floor(ee/(F+1)),oe=Math.floor(ee%(F+1));L(q,4,re),L(q,8,oe)}})}})})}function f(W){var H={valid:null,remainder:null},j=_(W,["moof"]);if(j){if(j.length<2)return H.remainder=W,H}else return H;var G=j[j.length-1];return H.valid=(0,b.sliceUint8)(W,0,G.byteOffset-8),H.remainder=(0,b.sliceUint8)(W,G.byteOffset-8),H}function h(W,H){var j=new Uint8Array(W.length+H.length);return j.set(W),j.set(H,W.length),j}function u(W,H){var j=[],G=H.samples,z=H.timescale,Y=H.id,X=!1,Q=_(G,["moof"]);return Q.map(function(q){var J=q.byteOffset-8,ee=_(q,["traf"]);ee.map(function(re){var oe=_(re,["tfdt"]).map(function(ne){var te=ne[0],ue=T(ne,4);return te===1&&(ue*=Math.pow(2,32),ue+=T(ne,8)),ue/z})[0];return oe!==void 0&&(W=oe),_(re,["tfhd"]).map(function(ne){var te=T(ne,4),ue=T(ne,0)&16777215,he=(ue&1)!==0,pe=(ue&2)!==0,Re=(ue&8)!==0,Te=0,Oe=(ue&16)!==0,ye=0,Se=(ue&32)!==0,Ee=8;te===Y&&(he&&(Ee+=8),pe&&(Ee+=4),Re&&(Te=T(ne,Ee),Ee+=4),Oe&&(ye=T(ne,Ee),Ee+=4),Se&&(Ee+=4),H.type==="video"&&(X=g(H.codec)),_(re,["trun"]).map(function(Fe){var Ye=Fe[0],Ne=T(Fe,0)&16777215,je=(Ne&1)!==0,_t=0,Xe=(Ne&4)!==0,Ut=(Ne&256)!==0,Le=0,xe=(Ne&512)!==0,ge=0,Qe=(Ne&1024)!==0,Ge=(Ne&2048)!==0,ft=0,dt=T(Fe,4),$e=8;je&&(_t=T(Fe,$e),$e+=4),Xe&&($e+=4);for(var tr=_t+J,$t=0;$t<dt;$t++){if(Ut?(Le=T(Fe,$e),$e+=4):Le=Te,xe?(ge=T(Fe,$e),$e+=4):ge=ye,Qe&&($e+=4),Ge&&(Ye===0?ft=T(Fe,$e):ft=R(Fe,$e),$e+=4),H.type===w.ElementaryStreamTypes.VIDEO)for(var Fi=0;Fi<ge;){var jr=T(G,tr);if(tr+=4,s(X,G[tr])){var En=G.subarray(tr,tr+jr);E(En,X?2:1,W+ft/z,j)}tr+=jr,Fi+=jr+4}W+=Le/z}}))})})}),j}function g(W){if(!W)return!1;var H=W.indexOf("."),j=H<0?W:W.substring(0,H);return j==="hvc1"||j==="hev1"||j==="dvh1"||j==="dvhe"}function s(W,H){if(W){var j=H>>1&63;return j===39||j===40}else{var G=H&31;return G===6}}function E(W,H,j,G){var z=A(W),Y=0;Y+=H;for(var X=0,Q=0,q=!1,J=0;Y<z.length;){X=0;do{if(Y>=z.length)break;J=z[Y++],X+=J}while(J===255);Q=0;do{if(Y>=z.length)break;J=z[Y++],Q+=J}while(J===255);var ee=z.length-Y;if(!q&&X===4&&Y<z.length){q=!0;var re=z[Y++];if(re===181){var oe=P(z,Y);if(Y+=2,oe===49){var ne=T(z,Y);if(Y+=4,ne===1195456820){var te=z[Y++];if(te===3){var ue=z[Y++],he=31&ue,pe=64&ue,Re=pe?2+he*3:0,Te=new Uint8Array(Re);if(pe){Te[0]=ue;for(var Oe=1;Oe<Re;Oe++)Te[Oe]=z[Y++]}G.push({type:te,payloadType:X,pts:j,bytes:Te})}}}}}else if(X===5&&Q<ee){if(q=!0,Q>16){for(var ye=[],Se=0;Se<16;Se++){var Ee=z[Y++].toString(16);ye.push(Ee.length==1?"0"+Ee:Ee),(Se===3||Se===5||Se===7||Se===9)&&ye.push("-")}for(var Fe=Q-16,Ye=new Uint8Array(Fe),Ne=0;Ne<Fe;Ne++)Ye[Ne]=z[Y++];G.push({payloadType:X,pts:j,uuid:ye.join(""),userData:(0,B.utf8ArrayToStr)(Ye),userDataBytes:Ye})}}else if(Q<ee)Y+=Q;else if(Q>ee)break}}function A(W){for(var H=W.byteLength,j=[],G=1;G<H-2;)W[G]===0&&W[G+1]===0&&W[G+2]===3?(j.push(G+2),G+=2):G++;if(j.length===0)return W;var z=H-j.length,Y=new Uint8Array(z),X=0;for(G=0;G<z;X++,G++)X===j[0]&&(X++,j.shift()),Y[G]=W[X];return Y}function v(W){var H=W[0],j="",G="",z=0,Y=0,X=0,Q=0,q=0,J=0;if(H===0){for(;I(W.subarray(J,J+1))!=="\0";)j+=I(W.subarray(J,J+1)),J+=1;for(j+=I(W.subarray(J,J+1)),J+=1;I(W.subarray(J,J+1))!=="\0";)G+=I(W.subarray(J,J+1)),J+=1;G+=I(W.subarray(J,J+1)),J+=1,z=T(W,12),Y=T(W,16),Q=T(W,20),q=T(W,24),J=28}else if(H===1){J+=4,z=T(W,J),J+=4;var ee=T(W,J);J+=4;var re=T(W,J);for(J+=4,X=Math.pow(2,32)*ee+re,Number.isSafeInteger(X)||(X=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Q=T(W,J),J+=4,q=T(W,J),J+=4;I(W.subarray(J,J+1))!=="\0";)j+=I(W.subarray(J,J+1)),J+=1;for(j+=I(W.subarray(J,J+1)),J+=1;I(W.subarray(J,J+1))!=="\0";)G+=I(W.subarray(J,J+1)),J+=1;G+=I(W.subarray(J,J+1)),J+=1}var oe=W.subarray(J,W.byteLength);return{schemeIdUri:j,value:G,timeScale:z,presentationTime:X,presentationTimeDelta:Y,eventDuration:Q,id:q,payload:oe}}function N(W){for(var H=arguments.length,j=new Array(H>1?H-1:0),G=1;G<H;G++)j[G-1]=arguments[G];for(var z=j.length,Y=8,X=z;X--;)Y+=j[X].byteLength;var Q=new Uint8Array(Y);for(Q[0]=Y>>24&255,Q[1]=Y>>16&255,Q[2]=Y>>8&255,Q[3]=Y&255,Q.set(W,4),X=0,Y=8;X<z;X++)Q.set(j[X],Y),Y+=j[X].byteLength;return Q}function U(W,H,j){if(W.byteLength!==16)throw new RangeError("Invalid system id");var G,z;if(H){G=1,z=new Uint8Array(H.length*16);for(var Y=0;Y<H.length;Y++){var X=H[Y];if(X.byteLength!==16)throw new RangeError("Invalid key");z.set(X,Y*16)}}else G=0,z=new Uint8Array;var Q;G>0?(Q=new Uint8Array(4),H.length>0&&new DataView(Q.buffer).setUint32(0,H.length,!1)):Q=new Uint8Array;var q=new Uint8Array(4);return j&&j.byteLength>0&&new DataView(q.buffer).setUint32(0,j.byteLength,!1),N([112,115,115,104],new Uint8Array([G,0,0,0]),W,Q,z,q,j||new Uint8Array)}function K(W){if(!(W instanceof ArrayBuffer)||W.byteLength<32)return null;var H={version:0,systemId:"",kids:null,data:null},j=new DataView(W),G=j.getUint32(0);if(W.byteLength!==G&&G>44)return null;var z=j.getUint32(4);if(z!==1886614376||(H.version=j.getUint32(8)>>>24,H.version>1))return null;H.systemId=$.default.hexDump(new Uint8Array(W,12,16));var Y=j.getUint32(28);if(H.version===0){if(G-32<Y)return null;H.data=new Uint8Array(W,32,Y)}else if(H.version===1){H.kids=[];for(var X=0;X<Y;X++)H.kids.push(new Uint8Array(W,32+X*16,16))}return H}},"./src/utils/numeric-encoding-utils.ts":(d,D,l)=>{l.r(D),l.d(D,{base64Decode:()=>F,base64DecodeToStr:()=>B,base64Encode:()=>O,base64ToBase64Url:()=>w,base64UrlEncode:()=>$,strToBase64Encode:()=>b});function w(k){return k.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function b(k){return btoa(k)}function B(k){return atob(k)}function O(k){return btoa(String.fromCharCode.apply(String,k))}function $(k){return w(O(k))}function F(k){return Uint8Array.from(atob(k),function(M){return M.charCodeAt(0)})}},"./src/utils/output-filter.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});var w=function(){function b(O,$){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=O,this.trackName=$}var B=b.prototype;return B.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},B.newCue=function($,F,k){(this.startTime===null||this.startTime>$)&&(this.startTime=$),this.endTime=F,this.screen=k,this.timelineController.createCaptionsTrack(this.trackName)},B.reset=function(){this.cueRanges=[],this.startTime=null},b}()},"./src/utils/texttrack-utils.ts":(d,D,l)=>{l.r(D),l.d(D,{addCueToTrack:()=>B,clearCurrentCues:()=>O,getCuesInRange:()=>k,removeCuesInRange:()=>$,sendAddTrackEvent:()=>b});var w=l("./src/utils/logger.ts");function b(M,I){var P;try{P=new Event("addtrack")}catch{P=document.createEvent("Event"),P.initEvent("addtrack",!1,!1)}P.track=M,I.dispatchEvent(P)}function B(M,I){var P=M.mode;if(P==="disabled"&&(M.mode="hidden"),M.cues&&!M.cues.getCueById(I.id))try{if(M.addCue(I),!M.cues.getCueById(I.id))throw new Error("addCue is failed for: "+I)}catch(R){w.logger.debug("[texttrack-utils]: "+R);var T=new self.TextTrackCue(I.startTime,I.endTime,I.text);T.id=I.id,M.addCue(T)}P==="disabled"&&(M.mode=P)}function O(M){var I=M.mode;if(I==="disabled"&&(M.mode="hidden"),M.cues)for(var P=M.cues.length;P--;)M.removeCue(M.cues[P]);I==="disabled"&&(M.mode=I)}function $(M,I,P,T){var R=M.mode;if(R==="disabled"&&(M.mode="hidden"),M.cues&&M.cues.length>0)for(var L=k(M.cues,I,P),_=0;_<L.length;_++)(!T||T(L[_]))&&M.removeCue(L[_]);R==="disabled"&&(M.mode=R)}function F(M,I){if(I<M[0].startTime)return 0;var P=M.length-1;if(I>M[P].endTime)return-1;for(var T=0,R=P;T<=R;){var L=Math.floor((R+T)/2);if(I<M[L].startTime)R=L-1;else if(I>M[L].startTime&&T<P)T=L+1;else return L}return M[T].startTime-I<I-M[R].startTime?T:R}function k(M,I,P){var T=[],R=F(M,I);if(R>-1)for(var L=R,_=M.length;L<_;L++){var y=M[L];if(y.startTime>=I&&y.endTime<=P)T.push(y);else if(y.startTime>P)return T}return T}},"./src/utils/time-ranges.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>b});var w={toString:function(O){for(var $="",F=O.length,k=0;k<F;k++)$+="["+O.start(k).toFixed(3)+"-"+O.end(k).toFixed(3)+"]";return $}};const b=w},"./src/utils/timescale-conversion.ts":(d,D,l)=>{l.r(D),l.d(D,{toMpegTsClockFromTimescale:()=>$,toMsFromMpegTsClock:()=>O,toTimescaleFromBase:()=>b,toTimescaleFromScale:()=>B});var w=9e4;function b(F,k,M,I){M===void 0&&(M=1),I===void 0&&(I=!1);var P=F*k*M;return I?Math.round(P):P}function B(F,k,M,I){return M===void 0&&(M=1),I===void 0&&(I=!1),b(F,k,1/M,I)}function O(F,k){return k===void 0&&(k=!1),b(F,1e3,1/w,k)}function $(F,k){return k===void 0&&(k=1),b(F,w,1/k)}},"./src/utils/typed-array.ts":(d,D,l)=>{l.r(D),l.d(D,{sliceUint8:()=>w});function w(b,B,O){return Uint8Array.prototype.slice?b.slice(B,O):new Uint8Array(Array.prototype.slice.call(b,B,O))}},"./src/utils/vttcue.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>w});const w=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var b=["","lr","rl"],B=["start","middle","end","left","right"];function O(I,P){if(typeof P!="string"||!Array.isArray(I))return!1;var T=P.toLowerCase();return~I.indexOf(T)?T:!1}function $(I){return O(b,I)}function F(I){return O(B,I)}function k(I){for(var P=arguments.length,T=new Array(P>1?P-1:0),R=1;R<P;R++)T[R-1]=arguments[R];for(var L=1;L<arguments.length;L++){var _=arguments[L];for(var y in _)I[y]=_[y]}return I}function M(I,P,T){var R=this,L={enumerable:!0};R.hasBeenReset=!1;var _="",y=!1,m=I,p=P,C=T,x=null,o="",c=!0,S="auto",f="start",h=50,u="middle",g=50,s="middle";Object.defineProperty(R,"id",k({},L,{get:function(){return _},set:function(A){_=""+A}})),Object.defineProperty(R,"pauseOnExit",k({},L,{get:function(){return y},set:function(A){y=!!A}})),Object.defineProperty(R,"startTime",k({},L,{get:function(){return m},set:function(A){if(typeof A!="number")throw new TypeError("Start time must be set to a number.");m=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"endTime",k({},L,{get:function(){return p},set:function(A){if(typeof A!="number")throw new TypeError("End time must be set to a number.");p=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"text",k({},L,{get:function(){return C},set:function(A){C=""+A,this.hasBeenReset=!0}})),Object.defineProperty(R,"region",k({},L,{get:function(){return x},set:function(A){x=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"vertical",k({},L,{get:function(){return o},set:function(A){var v=$(A);if(v===!1)throw new SyntaxError("An invalid or illegal string was specified.");o=v,this.hasBeenReset=!0}})),Object.defineProperty(R,"snapToLines",k({},L,{get:function(){return c},set:function(A){c=!!A,this.hasBeenReset=!0}})),Object.defineProperty(R,"line",k({},L,{get:function(){return S},set:function(A){if(typeof A!="number"&&A!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");S=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"lineAlign",k({},L,{get:function(){return f},set:function(A){var v=F(A);if(!v)throw new SyntaxError("An invalid or illegal string was specified.");f=v,this.hasBeenReset=!0}})),Object.defineProperty(R,"position",k({},L,{get:function(){return h},set:function(A){if(A<0||A>100)throw new Error("Position must be between 0 and 100.");h=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"positionAlign",k({},L,{get:function(){return u},set:function(A){var v=F(A);if(!v)throw new SyntaxError("An invalid or illegal string was specified.");u=v,this.hasBeenReset=!0}})),Object.defineProperty(R,"size",k({},L,{get:function(){return g},set:function(A){if(A<0||A>100)throw new Error("Size must be between 0 and 100.");g=A,this.hasBeenReset=!0}})),Object.defineProperty(R,"align",k({},L,{get:function(){return s},set:function(A){var v=F(A);if(!v)throw new SyntaxError("An invalid or illegal string was specified.");s=v,this.hasBeenReset=!0}})),R.displayState=void 0}return M.prototype.getCueAsHTML=function(){var I=self.WebVTT;return I.convertCueToDOMTree(self,this.text)},M}()},"./src/utils/vttparser.ts":(d,D,l)=>{l.r(D),l.d(D,{VTTParser:()=>P,fixLineBreaks:()=>I,parseTimeStamp:()=>B});var w=l("./src/utils/vttcue.ts"),b=function(){function T(){}var R=T.prototype;return R.decode=function(_,y){if(!_)return"";if(typeof _!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(_))},T}();function B(T){function R(_,y,m,p){return(_|0)*3600+(y|0)*60+(m|0)+parseFloat(p||0)}var L=T.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return L?parseFloat(L[2])>59?R(L[2],L[3],0,L[4]):R(L[1],L[2],L[3],L[4]):null}var O=function(){function T(){this.values=Object.create(null)}var R=T.prototype;return R.set=function(_,y){!this.get(_)&&y!==""&&(this.values[_]=y)},R.get=function(_,y,m){return m?this.has(_)?this.values[_]:y[m]:this.has(_)?this.values[_]:y},R.has=function(_){return _ in this.values},R.alt=function(_,y,m){for(var p=0;p<m.length;++p)if(y===m[p]){this.set(_,y);break}},R.integer=function(_,y){/^-?\d+$/.test(y)&&this.set(_,parseInt(y,10))},R.percent=function(_,y){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(y)){var m=parseFloat(y);if(m>=0&&m<=100)return this.set(_,m),!0}return!1},T}();function $(T,R,L,_){var y=_?T.split(_):[T];for(var m in y)if(typeof y[m]=="string"){var p=y[m].split(L);if(p.length===2){var C=p[0],x=p[1];R(C,x)}}}var F=new w.default(0,0,""),k=F.align==="middle"?"middle":"center";function M(T,R,L){var _=T;function y(){var C=B(T);if(C===null)throw new Error("Malformed timestamp: "+_);return T=T.replace(/^[^\sa-zA-Z-]+/,""),C}function m(C,x){var o=new O;$(C,function(f,h){var u;switch(f){case"region":for(var g=L.length-1;g>=0;g--)if(L[g].id===h){o.set(f,L[g].region);break}break;case"vertical":o.alt(f,h,["rl","lr"]);break;case"line":u=h.split(","),o.integer(f,u[0]),o.percent(f,u[0])&&o.set("snapToLines",!1),o.alt(f,u[0],["auto"]),u.length===2&&o.alt("lineAlign",u[1],["start",k,"end"]);break;case"position":u=h.split(","),o.percent(f,u[0]),u.length===2&&o.alt("positionAlign",u[1],["start",k,"end","line-left","line-right","auto"]);break;case"size":o.percent(f,h);break;case"align":o.alt(f,h,["start",k,"end","left","right"]);break}},/:/,/\s/),x.region=o.get("region",null),x.vertical=o.get("vertical","");var c=o.get("line","auto");c==="auto"&&F.line===-1&&(c=-1),x.line=c,x.lineAlign=o.get("lineAlign","start"),x.snapToLines=o.get("snapToLines",!0),x.size=o.get("size",100),x.align=o.get("align",k);var S=o.get("position","auto");S==="auto"&&F.position===50&&(S=x.align==="start"||x.align==="left"?0:x.align==="end"||x.align==="right"?100:50),x.position=S}function p(){T=T.replace(/^\s+/,"")}if(p(),R.startTime=y(),p(),T.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+_);T=T.slice(3),p(),R.endTime=y(),p(),m(T,R)}function I(T){return T.replace(/<br(?: \/)?>/gi,`
`)}var P=function(){function T(){this.state="INITIAL",this.buffer="",this.decoder=new b,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var R=T.prototype;return R.parse=function(_){var y=this;_&&(y.buffer+=y.decoder.decode(_,{stream:!0}));function m(){var S=y.buffer,f=0;for(S=I(S);f<S.length&&S[f]!=="\r"&&S[f]!==`
`;)++f;var h=S.slice(0,f);return S[f]==="\r"&&++f,S[f]===`
`&&++f,y.buffer=S.slice(f),h}function p(S){$(S,function(f,h){},/:/)}try{var C="";if(y.state==="INITIAL"){if(!/\r\n|\n/.test(y.buffer))return this;C=m();var x=C.match(/^()?WEBVTT([ \t].*)?$/);if(!x||!x[0])throw new Error("Malformed WebVTT signature.");y.state="HEADER"}for(var o=!1;y.buffer;){if(!/\r\n|\n/.test(y.buffer))return this;switch(o?o=!1:C=m(),y.state){case"HEADER":/:/.test(C)?p(C):C||(y.state="ID");continue;case"NOTE":C||(y.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(C)){y.state="NOTE";break}if(!C)continue;if(y.cue=new w.default(0,0,""),y.state="CUE",C.indexOf("-->")===-1){y.cue.id=C;continue}case"CUE":if(!y.cue){y.state="BADCUE";continue}try{M(C,y.cue,y.regionList)}catch{y.cue=null,y.state="BADCUE";continue}y.state="CUETEXT";continue;case"CUETEXT":{var c=C.indexOf("-->")!==-1;if(!C||c&&(o=!0)){y.oncue&&y.cue&&y.oncue(y.cue),y.cue=null,y.state="ID";continue}if(y.cue===null)continue;y.cue.text&&(y.cue.text+=`
`),y.cue.text+=C}continue;case"BADCUE":C||(y.state="ID")}}}catch{y.state==="CUETEXT"&&y.cue&&y.oncue&&y.oncue(y.cue),y.cue=null,y.state=y.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},R.flush=function(){var _=this;try{if((_.cue||_.state==="HEADER")&&(_.buffer+=`

`,_.parse()),_.state==="INITIAL"||_.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(y){_.onparsingerror&&_.onparsingerror(y)}return _.onflush&&_.onflush(),this},T}()},"./src/utils/webvtt-parser.ts":(d,D,l)=>{l.r(D),l.d(D,{generateCueId:()=>P,parseWebVTT:()=>R});var w=l("./src/polyfills/number.ts"),b=l("./src/utils/vttparser.ts"),B=l("./src/demux/id3.ts"),O=l("./src/utils/timescale-conversion.ts"),$=l("./src/remux/mp4-remuxer.ts"),F=/\r\n|\n\r|\n|\r/g,k=function(_,y,m){return m===void 0&&(m=0),_.slice(m,m+y.length)===y},M=function(_){var y=parseInt(_.slice(-3)),m=parseInt(_.slice(-6,-4)),p=parseInt(_.slice(-9,-7)),C=_.length>9?parseInt(_.substring(0,_.indexOf(":"))):0;if(!(0,w.isFiniteNumber)(y)||!(0,w.isFiniteNumber)(m)||!(0,w.isFiniteNumber)(p)||!(0,w.isFiniteNumber)(C))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+_);return y+=1e3*m,y+=60*1e3*p,y+=60*60*1e3*C,y},I=function(_){for(var y=5381,m=_.length;m;)y=y*33^_.charCodeAt(--m);return(y>>>0).toString()};function P(L,_,y){return I(L.toString())+I(_.toString())+I(y)}var T=function(_,y,m){var p=_[y],C=_[p.prevCC];if(!C||!C.new&&p.new){_.ccOffset=_.presentationOffset=p.start,p.new=!1;return}for(;(x=C)!==null&&x!==void 0&&x.new;){var x;_.ccOffset+=p.start-C.start,p.new=!1,p=C,C=_[p.prevCC]}_.presentationOffset=m};function R(L,_,y,m,p,C,x,o){var c=new b.VTTParser,S=(0,B.utf8ArrayToStr)(new Uint8Array(L)).trim().replace(F,`
`).split(`
`),f=[],h=(0,O.toMpegTsClockFromTimescale)(_,y),u="00:00.000",g=0,s=0,E,A=!0;c.oncue=function(v){var N=m[p],U=m.ccOffset,K=(g-h)/9e4;N!=null&&N.new&&(s!==void 0?U=m.ccOffset=N.start:T(m,p,K)),K&&(U=K-m.presentationOffset);var W=v.endTime-v.startTime,H=(0,$.normalizePts)((v.startTime+U-s)*9e4,C*9e4)/9e4;v.startTime=Math.max(H,0),v.endTime=Math.max(H+W,0);var j=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(j)),v.id||(v.id=P(v.startTime,v.endTime,j)),v.endTime>0&&f.push(v)},c.onparsingerror=function(v){E=v},c.onflush=function(){if(E){o(E);return}x(f)},S.forEach(function(v){if(A)if(k(v,"X-TIMESTAMP-MAP=")){A=!1,v.slice(16).split(",").forEach(function(N){k(N,"LOCAL:")?u=N.slice(6):k(N,"MPEGTS:")&&(g=parseInt(N.slice(7)))});try{s=M(u)/1e3}catch(N){E=N}return}else v===""&&(A=!1);c.parse(v+`
`)}),c.flush()}},"./src/utils/xhr-loader.ts":(d,D,l)=>{l.r(D),l.d(D,{default:()=>$});var w=l("./src/utils/logger.ts"),b=l("./src/loader/load-stats.ts"),B=/^age:\s*[\d.]+\s*$/m,O=function(){function F(M){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=M?M.xhrSetup:null,this.stats=new b.LoadStats,this.retryDelay=0}var k=F.prototype;return k.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},k.abortInternal=function(){var I=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),I&&(I.onreadystatechange=null,I.onprogress=null,I.readyState!==4&&(this.stats.aborted=!0,I.abort()))},k.abort=function(){var I;this.abortInternal(),(I=this.callbacks)!==null&&I!==void 0&&I.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},k.load=function(I,P,T){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=I,this.config=P,this.callbacks=T,this.retryDelay=P.retryDelay,this.loadInternal()},k.loadInternal=function(){var I=this.config,P=this.context;if(!!I){var T=this.loader=new self.XMLHttpRequest,R=this.stats;R.loading.first=0,R.loaded=0;var L=this.xhrSetup;try{if(L)try{L(T,P.url)}catch{T.open("GET",P.url,!0),L(T,P.url)}T.readyState||T.open("GET",P.url,!0);var _=this.context.headers;if(_)for(var y in _)T.setRequestHeader(y,_[y])}catch(m){this.callbacks.onError({code:T.status,text:m.message},P,T);return}P.rangeEnd&&T.setRequestHeader("Range","bytes="+P.rangeStart+"-"+(P.rangeEnd-1)),T.onreadystatechange=this.readystatechange.bind(this),T.onprogress=this.loadprogress.bind(this),T.responseType=P.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),I.timeout),T.send()}},k.readystatechange=function(){var I=this.context,P=this.loader,T=this.stats;if(!(!I||!P)){var R=P.readyState,L=this.config;if(!T.aborted&&R>=2)if(self.clearTimeout(this.requestTimeout),T.loading.first===0&&(T.loading.first=Math.max(self.performance.now(),T.loading.start)),R===4){P.onreadystatechange=null,P.onprogress=null;var _=P.status,y=P.responseType==="arraybuffer";if(_>=200&&_<300&&(y&&P.response||P.responseText!==null)){T.loading.end=Math.max(self.performance.now(),T.loading.first);var m,p;if(y?(m=P.response,p=m.byteLength):(m=P.responseText,p=m.length),T.loaded=T.total=p,!this.callbacks)return;var C=this.callbacks.onProgress;if(C&&C(T,I,m,P),!this.callbacks)return;var x={url:P.responseURL,data:m};this.callbacks.onSuccess(x,T,I,P)}else T.retry>=L.maxRetry||_>=400&&_<499?(w.logger.error(_+" while loading "+I.url),this.callbacks.onError({code:_,text:P.statusText},I,P)):(w.logger.warn(_+" while loading "+I.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,L.maxRetryDelay),T.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),L.timeout)}},k.loadtimeout=function(){w.logger.warn("timeout while loading "+this.context.url);var I=this.callbacks;I&&(this.abortInternal(),I.onTimeout(this.stats,this.context,this.loader))},k.loadprogress=function(I){var P=this.stats;P.loaded=I.loaded,I.lengthComputable&&(P.total=I.total)},k.getCacheAge=function(){var I=null;if(this.loader&&B.test(this.loader.getAllResponseHeaders())){var P=this.loader.getResponseHeader("age");I=P?parseFloat(P):null}return I},F}();const $=O},"./node_modules/eventemitter3/index.js":d=>{var D=Object.prototype.hasOwnProperty,l="~";function w(){}Object.create&&(w.prototype=Object.create(null),new w().__proto__||(l=!1));function b(F,k,M){this.fn=F,this.context=k,this.once=M||!1}function B(F,k,M,I,P){if(typeof M!="function")throw new TypeError("The listener must be a function");var T=new b(M,I||F,P),R=l?l+k:k;return F._events[R]?F._events[R].fn?F._events[R]=[F._events[R],T]:F._events[R].push(T):(F._events[R]=T,F._eventsCount++),F}function O(F,k){--F._eventsCount===0?F._events=new w:delete F._events[k]}function $(){this._events=new w,this._eventsCount=0}$.prototype.eventNames=function(){var k=[],M,I;if(this._eventsCount===0)return k;for(I in M=this._events)D.call(M,I)&&k.push(l?I.slice(1):I);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(M)):k},$.prototype.listeners=function(k){var M=l?l+k:k,I=this._events[M];if(!I)return[];if(I.fn)return[I.fn];for(var P=0,T=I.length,R=new Array(T);P<T;P++)R[P]=I[P].fn;return R},$.prototype.listenerCount=function(k){var M=l?l+k:k,I=this._events[M];return I?I.fn?1:I.length:0},$.prototype.emit=function(k,M,I,P,T,R){var L=l?l+k:k;if(!this._events[L])return!1;var _=this._events[L],y=arguments.length,m,p;if(_.fn){switch(_.once&&this.removeListener(k,_.fn,void 0,!0),y){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,M),!0;case 3:return _.fn.call(_.context,M,I),!0;case 4:return _.fn.call(_.context,M,I,P),!0;case 5:return _.fn.call(_.context,M,I,P,T),!0;case 6:return _.fn.call(_.context,M,I,P,T,R),!0}for(p=1,m=new Array(y-1);p<y;p++)m[p-1]=arguments[p];_.fn.apply(_.context,m)}else{var C=_.length,x;for(p=0;p<C;p++)switch(_[p].once&&this.removeListener(k,_[p].fn,void 0,!0),y){case 1:_[p].fn.call(_[p].context);break;case 2:_[p].fn.call(_[p].context,M);break;case 3:_[p].fn.call(_[p].context,M,I);break;case 4:_[p].fn.call(_[p].context,M,I,P);break;default:if(!m)for(x=1,m=new Array(y-1);x<y;x++)m[x-1]=arguments[x];_[p].fn.apply(_[p].context,m)}}return!0},$.prototype.on=function(k,M,I){return B(this,k,M,I,!1)},$.prototype.once=function(k,M,I){return B(this,k,M,I,!0)},$.prototype.removeListener=function(k,M,I,P){var T=l?l+k:k;if(!this._events[T])return this;if(!M)return O(this,T),this;var R=this._events[T];if(R.fn)R.fn===M&&(!P||R.once)&&(!I||R.context===I)&&O(this,T);else{for(var L=0,_=[],y=R.length;L<y;L++)(R[L].fn!==M||P&&!R[L].once||I&&R[L].context!==I)&&_.push(R[L]);_.length?this._events[T]=_.length===1?_[0]:_:O(this,T)}return this},$.prototype.removeAllListeners=function(k){var M;return k?(M=l?l+k:k,this._events[M]&&O(this,M)):(this._events=new w,this._eventsCount=0),this},$.prototype.off=$.prototype.removeListener,$.prototype.addListener=$.prototype.on,$.prefixed=l,$.EventEmitter=$,d.exports=$},"./node_modules/url-toolkit/src/url-toolkit.js":function(d){(function(D){var l=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,w=/^(?=([^\/?#]*))\1([^]*)$/,b=/(?:\/|^)\.(?=\/)/g,B=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,O={buildAbsoluteURL:function($,F,k){if(k=k||{},$=$.trim(),F=F.trim(),!F){if(!k.alwaysNormalize)return $;var M=O.parseURL($);if(!M)throw new Error("Error trying to parse base URL.");return M.path=O.normalizePath(M.path),O.buildURLFromParts(M)}var I=O.parseURL(F);if(!I)throw new Error("Error trying to parse relative URL.");if(I.scheme)return k.alwaysNormalize?(I.path=O.normalizePath(I.path),O.buildURLFromParts(I)):F;var P=O.parseURL($);if(!P)throw new Error("Error trying to parse base URL.");if(!P.netLoc&&P.path&&P.path[0]!=="/"){var T=w.exec(P.path);P.netLoc=T[1],P.path=T[2]}P.netLoc&&!P.path&&(P.path="/");var R={scheme:P.scheme,netLoc:I.netLoc,path:null,params:I.params,query:I.query,fragment:I.fragment};if(!I.netLoc&&(R.netLoc=P.netLoc,I.path[0]!=="/"))if(!I.path)R.path=P.path,I.params||(R.params=P.params,I.query||(R.query=P.query));else{var L=P.path,_=L.substring(0,L.lastIndexOf("/")+1)+I.path;R.path=O.normalizePath(_)}return R.path===null&&(R.path=k.alwaysNormalize?O.normalizePath(I.path):I.path),O.buildURLFromParts(R)},parseURL:function($){var F=l.exec($);return F?{scheme:F[1]||"",netLoc:F[2]||"",path:F[3]||"",params:F[4]||"",query:F[5]||"",fragment:F[6]||""}:null},normalizePath:function($){for($=$.split("").reverse().join("").replace(b,"");$.length!==($=$.replace(B,"")).length;);return $.split("").reverse().join("")},buildURLFromParts:function($){return $.scheme+$.netLoc+$.path+$.params+$.query+$.fragment}};d.exports=O})()}},n={};function i(d){var D=n[d];if(D!==void 0)return D.exports;var l=n[d]={exports:{}};return r[d].call(l.exports,l,l.exports,i),l.exports}i.m=r,i.n=d=>{var D=d&&d.__esModule?()=>d.default:()=>d;return i.d(D,{a:D}),D},i.d=(d,D)=>{for(var l in D)i.o(D,l)&&!i.o(d,l)&&Object.defineProperty(d,l,{enumerable:!0,get:D[l]})},i.o=(d,D)=>Object.prototype.hasOwnProperty.call(d,D),i.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var a=i("./src/hls.ts");return a=a.default,a})())})(jd);const Lr=kf(jd.exports);var TC=Object.defineProperty,SC=Object.getOwnPropertyDescriptor,ze=(t,e,r,n)=>{for(var i=n>1?void 0:n?SC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&TC(e,r,i),i};let Qi=pr.CancelToken.source(),zr,Ke=class extends ae{constructor(){super(...arguments);V(this,"hasVideo",!1);V(this,"triedUrls",[]);V(this,"mediaElement");V(this,"fullscreen");V(this,"loading");V(this,"settings");V(this,"station");V(this,"volume");V(this,"allowFullscreen");V(this,"confirmFullscreen");V(this,"confirmPlaying");V(this,"handleBufferWaiting");V(this,"showMessage");V(this,"showToast");V(this,"stop");V(this,"toggleFullscreen");V(this,"toggleStation")}get lastTriedUrl(){return this.triedUrls[this.triedUrls.length-1]}set lastTriedUrl(e){this.triedUrls.push(e)}get videoShown(){return this.station!==void 0&&this.hasVideo}created(){window.addEventListener("beforeunload",this.detachStream);const e=ba;e.isEnabled&&e.on("change",()=>{this.confirmFullscreen(e.isFullscreen)})}onPlaybackChanged(){this.stop()}async onStationChanged(e){if(Qi&&(Qi.cancel(),Qi=pr.CancelToken.source()),this.detachStream(),this.triedUrls=[],e!==void 0){if(this.settings.externalPlayback){this.playExternally(this.station);return}try{const r=await S0({stationId:e.id,cancelToken:Qi.token});this.play(r.ok?r.url:e.url)}catch(r){pr.isCancel(r)||this.play(e.url)}}}async onVolumeChanged(e){await this.$nextTick(),this.mediaElement.volume=e}onVideoToggled(e){var r,n;if(e)(r=window.screen.orientation)==null||r.addEventListener("change",this.handleOrientationChange);else{(n=window.screen.orientation)==null||n.removeEventListener("change",this.handleOrientationChange);const i=ba;i.isEnabled&&i.isFullscreen&&this.toggleFullscreen()}this.allowFullscreen(e)}isNativeStream(e){try{return!new URL(e).pathname.endsWith(".m3u8")}catch{return!0}}play(e){if(this.lastTriedUrl=e,this.isNativeStream(e)){this.mediaElement.src=e;return}this.playHls(e)}playHls(e){if(Lr.isSupported()){zr=new Lr,zr.on(Lr.Events.ERROR,(r,n)=>{this.handleHlsError(n)}),zr.loadSource(window.location.protocol==="https:"?e.replace("http:","https:"):e),zr.attachMedia(this.mediaElement);return}this.showErrorMessage({title:this.$t("general.error.hlsNotSupported.title"),message:this.$t("general.error.hlsNotSupported.description",[this.station.name])}),this.stop()}async playExternally(e){await Nd({name:e.name,type:this.settings.defaultPlaylistFormat,content:[e]}),this.showToast({message:this.$t("general.externalPlayback"),icon:Li})}detachStream(){this.mediaElement.removeAttribute("src"),this.mediaElement.load(),zr!==void 0&&(this.hasVideo=!1,zr.destroy(),zr=void 0)}playLastStation(){this.station===void 0&&this.toggleStation().catch(()=>{})}handleOrientationChange(){this.fullscreen!==(window.screen.orientation.angle%180===90)&&this.toggleFullscreen()}onLoadedMetadata(){this.mediaElement.play().catch(()=>{})}handleError(){var e;if(navigator.onLine)switch((e=this.mediaElement.error)==null?void 0:e.code){case MediaError.MEDIA_ERR_NETWORK:this.showErrorMessage({title:this.$t("general.error.networkIssue.title"),message:this.$t("general.error.networkIssue.description",[this.$t("general.tryAgainLater")])});break;case MediaError.MEDIA_ERR_DECODE:this.showErrorMessage({title:this.$t("general.error.decode.title"),message:this.$t("general.error.decode.description")});break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:{if(this.triedUrls.every(n=>!n.endsWith("/;"))){this.play(`${this.lastTriedUrl}/;`.replace("//;","/;"));return}const r=this.station.url;if(!this.triedUrls.includes(r)){this.play(r);return}this.showErrorMessage({title:this.$t("general.error.noSupportedSource.title"),message:this.$t("general.error.noSupportedSource.description")});break}default:this.showErrorMessage({title:this.$t("general.error.noSupportedSource.title"),message:this.$t("general.error.noSupportedSource.description")})}else this.showErrorMessage({title:this.$t("general.error.networkIssue.title"),message:this.$t("general.error.goOnline")});this.stop(),this.detachStream()}showErrorMessage(e){this.showMessage({type:We.ERROR,buttons:[this.$t("general.ok")],title:e.title,message:e.message})}handleHlsError(e){if(!navigator.onLine){this.handleError();return}if(e.fatal){switch(e.details){case Lr.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case Lr.ErrorDetails.FRAG_LOAD_TIMEOUT:case Lr.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.showErrorMessage({title:this.$t("general.error.timeout.title"),message:this.$t("general.error.timeout.description")});break;default:this.showErrorMessage({title:this.$t("general.error.hlsGeneric.title"),message:this.$t("general.error.hlsGeneric.description",[this.station.name,this.$t(`general.error.hlsGeneric.${e.type===Lr.ErrorTypes.NETWORK_ERROR?"network":e.type===Lr.ErrorTypes.MEDIA_ERROR?"media":"other"}`)])})}this.stop(),this.detachStream()}}};ze([ut()],Ke.prototype,"mediaElement",2);ze([ie],Ke.prototype,"fullscreen",2);ze([ie],Ke.prototype,"loading",2);ze([ie],Ke.prototype,"settings",2);ze([ie("currentStation")],Ke.prototype,"station",2);ze([ie],Ke.prototype,"volume",2);ze([se],Ke.prototype,"allowFullscreen",2);ze([se],Ke.prototype,"confirmFullscreen",2);ze([se],Ke.prototype,"confirmPlaying",2);ze([se],Ke.prototype,"handleBufferWaiting",2);ze([se],Ke.prototype,"showMessage",2);ze([se],Ke.prototype,"showToast",2);ze([se],Ke.prototype,"stop",2);ze([se],Ke.prototype,"toggleFullscreen",2);ze([se],Ke.prototype,"toggleStation",2);ze([ve("settings.externalPlayback")],Ke.prototype,"onPlaybackChanged",1);ze([ve("station")],Ke.prototype,"onStationChanged",1);ze([ve("volume",{immediate:!0})],Ke.prototype,"onVolumeChanged",1);ze([ve("hasVideo")],Ke.prototype,"onVideoToggled",1);Ke=ze([fe],Ke);var xC=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:["w-full overflow-hidden bg-black",{"relative rounded-tl border-t mobile:rounded-none mobile:border-none":!e.fullscreen,hidden:!e.videoShown}],on:{dblclick:function(n){return e.toggleFullscreen()}}},[r("video",{ref:"mediaElement",staticClass:"pointer-events-none h-full w-full",attrs:{playsinline:""},on:{loadedmetadata:function(n){return e.onLoadedMetadata()},loadeddata:function(n){return e.confirmPlaying(e.lastTriedUrl)},timeupdate:function(n){e.hasVideo=e.mediaElement.videoHeight>0},play:function(n){return e.playLastStation()},pause:function(n){return e.stop()},waiting:function(n){return e.handleBufferWaiting(!0)},playing:function(n){return e.handleBufferWaiting(!1)},error:function(n){return e.handleError()}}}),e.hasVideo&&e.loading?r("div",{staticClass:"absolute left-0 top-0 flex h-full w-full items-center justify-center bg-black/50 text-white"},[r(ss,{staticClass:"animate-spin text-[4em]"})],1):e._e()])},bC=[],CC=de(Ke,xC,bC,!1,null,null,null,null);const LC=CC.exports;var Gd={exports:{}};/*!
  * vue-scrollto v2.20.0
  * (c) 2019 Randjelovic Igor
  * @license MIT
  */(function(t,e){(function(r,n){t.exports=n()})(On,function(){function r(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(v){return typeof v}:r=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r(A)}function n(){return n=Object.assign||function(A){for(var v=1;v<arguments.length;v++){var N=arguments[v];for(var U in N)Object.prototype.hasOwnProperty.call(N,U)&&(A[U]=N[U])}return A},n.apply(this,arguments)}var i=4,a=.001,d=1e-7,D=10,l=11,w=1/(l-1),b=typeof Float32Array=="function";function B(A,v){return 1-3*v+3*A}function O(A,v){return 3*v-6*A}function $(A){return 3*A}function F(A,v,N){return((B(v,N)*A+O(v,N))*A+$(v))*A}function k(A,v,N){return 3*B(v,N)*A*A+2*O(v,N)*A+$(v)}function M(A,v,N,U,K){var W,H,j=0;do H=v+(N-v)/2,W=F(H,U,K)-A,W>0?N=H:v=H;while(Math.abs(W)>d&&++j<D);return H}function I(A,v,N,U){for(var K=0;K<i;++K){var W=k(v,N,U);if(W===0)return v;var H=F(v,N,U)-A;v-=H/W}return v}function P(A){return A}var T=function(v,N,U,K){if(!(0<=v&&v<=1&&0<=U&&U<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===N&&U===K)return P;for(var W=b?new Float32Array(l):new Array(l),H=0;H<l;++H)W[H]=F(H*w,v,U);function j(G){for(var z=0,Y=1,X=l-1;Y!==X&&W[Y]<=G;++Y)z+=w;--Y;var Q=(G-W[Y])/(W[Y+1]-W[Y]),q=z+Q*w,J=k(q,v,U);return J>=a?I(G,q,v,U):J===0?q:M(G,z,z+w,v,U)}return function(z){return z===0?0:z===1?1:F(j(z),N,K)}},R={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},L=!1;try{var _=Object.defineProperty({},"passive",{get:function(){L=!0}});window.addEventListener("test",null,_)}catch{}var y={$:function(v){return typeof v!="string"?v:document.querySelector(v)},on:function(v,N,U){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{passive:!1};N instanceof Array||(N=[N]);for(var W=0;W<N.length;W++)v.addEventListener(N[W],U,L?K:!1)},off:function(v,N,U){N instanceof Array||(N=[N]);for(var K=0;K<N.length;K++)v.removeEventListener(N[K],U)},cumulativeOffset:function(v){var N=0,U=0;do N+=v.offsetTop||0,U+=v.offsetLeft||0,v=v.offsetParent;while(v);return{top:N,left:U}}},m=["mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],p={container:"body",duration:500,lazy:!0,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0};function C(A){p=n({},p,A)}var x=function(){var v,N,U,K,W,H,j,G,z,Y,X,Q,q,J,ee,re,oe,ne,te,ue,he,pe,Re,Te=function(xe){!G||(Re=xe,ue=!0)},Oe,ye,Se,Ee;function Fe(Le){var xe=Le.scrollTop;return Le.tagName.toLowerCase()==="body"&&(xe=xe||document.documentElement.scrollTop),xe}function Ye(Le){var xe=Le.scrollLeft;return Le.tagName.toLowerCase()==="body"&&(xe=xe||document.documentElement.scrollLeft),xe}function Ne(){he=y.cumulativeOffset(N),pe=y.cumulativeOffset(v),Q&&(ee=pe.left-he.left+H,ne=ee-J),q&&(oe=pe.top-he.top+H,te=oe-re)}function je(Le){if(ue)return _t();ye||(ye=Le),W||Ne(),Se=Le-ye,Ee=Math.min(Se/U,1),Ee=Oe(Ee),Xe(N,re+te*Ee,J+ne*Ee),Se<U?window.requestAnimationFrame(je):_t()}function _t(){ue||Xe(N,oe,ee),ye=!1,y.off(N,m,Te),ue&&X&&X(Re,v),!ue&&Y&&Y(v)}function Xe(Le,xe,ge){q&&(Le.scrollTop=xe),Q&&(Le.scrollLeft=ge),Le.tagName.toLowerCase()==="body"&&(q&&(document.documentElement.scrollTop=xe),Q&&(document.documentElement.scrollLeft=ge))}function Ut(Le,xe){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r(xe)==="object"?ge=xe:typeof xe=="number"&&(ge.duration=xe),v=y.$(Le),!v)return console.warn("[vue-scrollto warn]: Trying to scroll to an element that is not on the page: "+Le);if(N=y.$(ge.container||p.container),U=ge.hasOwnProperty("duration")?ge.duration:p.duration,W=ge.hasOwnProperty("lazy")?ge.lazy:p.lazy,K=ge.easing||p.easing,H=ge.hasOwnProperty("offset")?ge.offset:p.offset,j=ge.hasOwnProperty("force")?ge.force!==!1:p.force,G=ge.hasOwnProperty("cancelable")?ge.cancelable!==!1:p.cancelable,z=ge.onStart||p.onStart,Y=ge.onDone||p.onDone,X=ge.onCancel||p.onCancel,Q=ge.x===void 0?p.x:ge.x,q=ge.y===void 0?p.y:ge.y,typeof H=="function"&&(H=H(v,N)),J=Ye(N),re=Fe(N),Ne(),ue=!1,!j){var Qe=N.tagName.toLowerCase()==="body"?document.documentElement.clientHeight||window.innerHeight:N.offsetHeight,Ge=re,ft=Ge+Qe,dt=oe-H,$e=dt+v.offsetHeight;if(dt>=Ge&&$e<=ft){Y&&Y(v);return}}if(z&&z(v),!te&&!ne){Y&&Y(v);return}return typeof K=="string"&&(K=R[K]||R.ease),Oe=T.apply(T,K),y.on(N,m,Te,{passive:!0}),window.requestAnimationFrame(je),function(){Re=null,ue=!0}}return Ut},o=x(),c=[];function S(A){for(var v=0;v<c.length;++v)if(c[v].el===A)return c.splice(v,1),!0;return!1}function f(A){for(var v=0;v<c.length;++v)if(c[v].el===A)return c[v]}function h(A){var v=f(A);return v||(c.push(v={el:A,binding:{}}),v)}function u(A){var v=h(this).binding;if(!!v.value){if(A.preventDefault(),typeof v.value=="string")return o(v.value);o(v.value.el||v.value.element,v.value)}}var g={bind:function(v,N){h(v).binding=N,y.on(v,"click",u)},unbind:function(v){S(v),y.off(v,"click",u)},update:function(v,N){h(v).binding=N}},s={bind:g.bind,unbind:g.unbind,update:g.update,beforeMount:g.bind,unmounted:g.unbind,updated:g.update,scrollTo:o,bindings:c},E=function(v,N){N&&C(N),v.directive("scroll-to",s);var U=v.config.globalProperties||v.prototype;U.$scrollTo=s.scrollTo};return typeof window<"u"&&window.Vue&&(window.VueScrollTo=s,window.VueScrollTo.setDefaults=C,window.VueScrollTo.scroller=x,window.Vue.use&&window.Vue.use(E)),s.install=E,s})})(Gd);const DC=Gd.exports;var AC=Object.defineProperty,OC=Object.getOwnPropertyDescriptor,br=(t,e,r,n)=>{for(var i=n>1?void 0:n?OC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&AC(e,r,i),i};ae.use(DC);let Yt=class extends ae{constructor(){super(...arguments);V(this,"controls");V(this,"stickyPlayer");V(this,"fullscreen");V(this,"hasVideo");V(this,"expandPlayer");V(this,"stickPlayer")}mounted(){window.addEventListener("scroll",this.scrollHandler),window.addEventListener("resize",this.scrollHandler)}async onVideoToggled(){await this.$nextTick(),this.scrollHandler()}async scrollHandler(){await this.$nextTick();const{top:e}=this.controls.getBoundingClientRect(),r=e<=50;this.stickyPlayer!==r&&this.stickPlayer(r)}};br([ut()],Yt.prototype,"controls",2);br([ie],Yt.prototype,"stickyPlayer",2);br([ie],Yt.prototype,"fullscreen",2);br([ie],Yt.prototype,"hasVideo",2);br([se],Yt.prototype,"expandPlayer",2);br([se],Yt.prototype,"stickPlayer",2);br([ve("hasVideo")],Yt.prototype,"onVideoToggled",1);br([ve("fullscreen")],Yt.prototype,"scrollHandler",1);Yt=br([fe],Yt);var wC=Object.defineProperty,PC=Object.getOwnPropertyDescriptor,He=(t,e,r,n)=>{for(var i=n>1?void 0:n?PC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&wC(e,r,i),i};let Ue=class extends Vn(Bn,Yt){constructor(){super(...arguments);V(this,"animationFinished",!0);V(this,"animationTrigger",0);V(this,"renderedInfo","");V(this,"controlsHidden",!1);V(this,"hideTimeout");V(this,"bookmarks");V(this,"detailsShown");V(this,"globalVolume");V(this,"info");V(this,"likeCount");V(this,"likes");V(this,"loading");V(this,"playing");V(this,"settings");V(this,"station");V(this,"changeVolume");V(this,"fetchLikeCount");V(this,"likeStation");V(this,"playClosestStation");V(this,"toggleFullscreen");V(this,"_toggleStation")}get broadcaster(){return this.loading?this.$t("general.loading"):this.station!==void 0?this.station.name:this.$t("player.ready")}get homepageInfo(){return this.station===void 0?null:this.station.homepage!==""?`${this.$t("general.visitHomepage")}
${new URL(this.station.homepage).hostname}`:"player.noHomepage"}get formattedlikeCount(){var e;return(e=this.likeCount)==null?void 0:e.toLocaleString(this.$i18n.locale)}get liked(){return this.station!==void 0&&this.likes.includes(this.station.id)}get likeInfo(){let e=this.$t("general.like.submit");return this.likeCount!==void 0&&(e+=`
${this.$t("general.like.count",[this.formattedlikeCount])}`),e}get bookmarked(){const{station:e}=this;return e===void 0?!1:this.bookmarks.some(r=>r.station===e.name&&r.info===this.info)}get tooltip(){return!this.loading&&this.info!==void 0?`${this.broadcaster}
${this.info}`:this.broadcaster}get volume(){return this.globalVolume}set volume(e){this.changeVolume(e)}onInfoChanged(e,r){e&&(this.renderedInfo=e,r&&(this.animationTrigger=1-this.animationTrigger))}onPlayingChanged(){this.animationFinished=!1,window.setTimeout(()=>{this.animationFinished=!0},600)}onStationChanged(e){e!==void 0&&!this.settings.externalPlayback&&this.fetchLikeCount().catch(()=>{})}onFullscreenChanged(){this.showControls()}expand(){this.expandPlayer(!this.detailsShown),this.detailsShown&&this.$scrollTo({element:document.documentElement})}like(){this.likeStation(this.station.id)}showControls(){this.hideTimeout!==void 0&&(clearTimeout(this.hideTimeout),this.hideTimeout=void 0),this.controlsHidden=!1,this.fullscreen&&(this.hideTimeout=window.setTimeout(()=>{this.controlsHidden=!0},3e3))}toggleStation(){this._toggleStation().catch(()=>{this.showToast({icon:Br,message:this.$t("general.listEmpty[0]")})})}};He([ie],Ue.prototype,"bookmarks",2);He([ie("isPlayerExpanded")],Ue.prototype,"detailsShown",2);He([ie("volume")],Ue.prototype,"globalVolume",2);He([ie("currentInfo")],Ue.prototype,"info",2);He([ie("currentLikeCount")],Ue.prototype,"likeCount",2);He([ie],Ue.prototype,"likes",2);He([ie],Ue.prototype,"loading",2);He([ie],Ue.prototype,"playing",2);He([ie],Ue.prototype,"settings",2);He([ie("currentStation")],Ue.prototype,"station",2);He([se],Ue.prototype,"changeVolume",2);He([se],Ue.prototype,"fetchLikeCount",2);He([se],Ue.prototype,"likeStation",2);He([se],Ue.prototype,"playClosestStation",2);He([se],Ue.prototype,"toggleFullscreen",2);He([se("toggleStation")],Ue.prototype,"_toggleStation",2);He([ve("info")],Ue.prototype,"onInfoChanged",1);He([ve("broadcaster")],Ue.prototype,"onPlayingChanged",1);He([ve("station")],Ue.prototype,"onStationChanged",1);He([ve("fullscreen")],Ue.prototype,"onFullscreenChanged",1);Ue=He([fe],Ue);var IC=function(){var n,i;var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:[e.fullscreen?"absolute top-0 left-0 flex h-screen w-full":"contents",{"cursor-none":e.controlsHidden}],on:{mousedown:function(a){return e.showControls()},mouseup:function(a){return e.showControls()},mousemove:function(a){return e.showControls()}}},[r(LC),r("div",{ref:"controls",class:["pointer-events-none z-20 h-full overflow-hidden pb-10 mobile:mb-0",{"absolute bottom-0 w-full transform-none":e.fullscreen,"sticky top-12.5 -mb-borders":e.stickyPlayer}]},[r("div",{class:["action-bar pointer-events-auto flex w-full items-center text-left",e.fullscreen?"absolute bottom-0 bg-brand/90 px-3.75 py-5 text-white icons:text-[27px]":"bg-surface py-3.75 px-2.5 text-on-surface shadow-theme",e.stickyPlayer?"border-b":{"mobile:border-b":!e.hasVideo},{"invisible opacity-0 transition-all":e.controlsHidden}]},[r("div",{class:{hidden:e.fullscreen}},[r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.advancedView"))},on:{click:function(a){return e.expand()}}},[r(Ba,{class:{"-rotate-180":e.detailsShown}})],1),e._v("\xA0 ")]),r("div",{staticClass:"grid grow"},[r("div",{staticClass:"flex items-center overflow-hidden"},[r("div",{class:["icons:w-fixed",{hidden:e.detailsShown}]},[r("a",{staticClass:"hidden p-1.25 text-lg xs:inline",attrs:{title:String(e.$t("player.prevStation"))},on:{click:function(a){return e.playClosestStation(!1)}}},[r(wc)],1),e._v("\xA0"),r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.playStop"))},on:{click:function(a){return e.toggleStation()}}},[e.station?r(wo,{staticClass:"w-fixed"}):r(Li,{staticClass:"w-fixed"})],1),e._v("\xA0"),r("a",{staticClass:"hidden p-1.25 text-lg xs:inline",attrs:{title:String(e.$t("player.nextStation"))},on:{click:function(a){return e.playClosestStation(!0)}}},[r(Oc)],1)]),r("div",{class:["flex min-h-[41px] flex-1 items-center overflow-hidden px-2.5 text-lg",{"whitespace-nowrap":!e.detailsShown,"text-[27px]":e.fullscreen}],attrs:{title:e.tooltip},on:{click:function(a){return e.expand()}}},[r("div",{staticClass:"w-full overflow-hidden"},[r("transition",{attrs:{"enter-class":"opacity-0","leave-to-class":"opacity-0",mode:"out-in",appear:""}},[r("div",{key:e.broadcaster,staticClass:"max-w-full overflow-hidden text-ellipsis font-bold transition-opacity",class:{"leading-[21px]":!e.fullscreen}},[e.loading?r(ss,{staticClass:"animate-spin"}):e._e(),e._v(" "+e._s(e.broadcaster)+" ")],1)]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.info&&e.animationFinished&&!e.loading,expression:"info && animationFinished && !loading"}],staticClass:"text-[17px]",class:["leading-5",{"max-h-5":!e.detailsShown}]},[r("transition",{attrs:{"enter-class":"translate-x-7.5 opacity-0","leave-to-class":"translate-x-7.5 opacity-0",mode:"out-in",appear:""}},[r("span",{key:e.animationTrigger,class:["max-w-full overflow-hidden text-ellipsis transition-[opacity,transform]",e.detailsShown?"block":"inline-block"]},[e._v(e._s(e.renderedInfo))])])],1)],1)]),r("div",{class:["hidden",{"md:block":!e.detailsShown}]},[e.station?r("a",{class:["p-1.25 text-lg",{"text-accent icons:opacity-100":e.liked}],attrs:{title:e.likeInfo},on:{click:function(a){return e.like()}}},[r(Ao,{staticClass:"w-fixed"})],1):e._e(),e._v("\xA0"),e.station!==void 0?r("a",{staticClass:"p-1.25 text-lg",attrs:{target:"blank",title:(n=e.homepageInfo)!=null?n:"",href:e.station.homepage}},[r(Ac,{staticClass:"w-fixed"})],1):e._e(),e._v(" "+e._s(" ")+" "),r(we,{attrs:{to:"title-manager",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:a,navigate:d}){return[r("a",{class:["p-1.25 text-lg",{"text-accent icons:opacity-100":a}],attrs:{title:String(e.$t("general.manageTitles"))},on:{click:d}},[r(Na,{staticClass:"w-fixed"})],1)]}}])}),e._v(" "+e._s(" ")+" "),e.info?r("a",{class:["p-1.25 text-lg",{"text-accent icons:opacity-100":e.bookmarked}],attrs:{title:String(e.$t("player.addBookmark"))},on:{click:function(a){var d;e.station&&e.toggleBookmark({station:(d=e.station.name)!=null?d:"",info:e.info})}}},[r(Oo),r(Ia,{staticClass:"relative -top-2 w-fixed text-icon-xs"})],1):e._e()],1),e.hasVideo?r("div",[e._v(" \xA0"),r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.toggleFullscreen"))},on:{click:function(a){return e.toggleFullscreen()}}},[r(e.fullscreen?"FasCompress":"FasExpand",{tag:"component",staticClass:"w-fixed"})],1)]):e._e()]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:!e.fullscreen&&e.detailsShown,expression:"!fullscreen && detailsShown"}],staticClass:"ml-1.25"},[r("hr",{staticClass:"mt-2.5 h-0 border-t-2 border-mute-contrast/30"}),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:!!e.station,expression:"!!station"}],staticClass:"mx-1.25 mt-2.5"},[e.station?r("div",{staticClass:"pb-2.5"},[r("span",{staticClass:"mb-0.5 inline-block rounded-sm bg-soft px-[0.6em] pt-[0.2em] pb-[0.3em] text-xs empty:hidden"},[e._v(e._s(e.station.country))]),e._v(" "+e._s(" ")),r("span",{staticClass:"mb-0.5 inline-block rounded-sm bg-soft px-[0.6em] pt-[0.2em] pb-[0.3em] text-xs empty:hidden"},[e._v(e._s(e.station.state))]),e._l(e.station.tags.split(","),function(a,d){return[e._v(" "+e._s(" ")),r("span",{key:d,staticClass:"mb-0.5 inline-block rounded-sm bg-soft px-[0.6em] pt-[0.2em] pb-[0.3em] text-xs empty:hidden"},[e._v(e._s(a))])]})],2):e._e()]),r("div",{staticClass:"whitespace-nowrap py-2.5"},[r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.prevStation"))},on:{click:function(a){return e.playClosestStation(!1)}}},[r(wc,{staticClass:"w-fixed"})],1),e._v("\xA0"),r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.playStop"))},on:{click:function(a){return e.toggleStation()}}},[e.station?r(wo,{staticClass:"w-fixed"}):r(Li,{staticClass:"w-fixed"})],1),e._v("\xA0"),r("a",{staticClass:"p-1.25 text-lg",attrs:{title:String(e.$t("player.nextStation"))},on:{click:function(a){return e.playClosestStation(!0)}}},[r(Oc,{staticClass:"w-fixed"})],1),e._v(" "+e._s(" ")+" "),r(yC,{scopedSlots:e._u([{key:"minusIcon",fn:function(){return[r(dC,{staticClass:"w-fixed"})]},proxy:!0},{key:"plusIcon",fn:function(){return[r(bo,{staticClass:"w-fixed"})]},proxy:!0}]),model:{value:e.volume,callback:function(a){e.volume=a},expression:"volume"}})],1),r("div",{staticClass:"pb-1.25"},[r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:e.station!==void 0,expression:"station !== undefined"}]},[r("div",{staticClass:"pt-2.5"},[e.station?r("a",{class:["block w-full overflow-x-hidden text-ellipsis",{"font-bold text-accent icons:opacity-100":e.liked}],attrs:{title:e.likeInfo},on:{click:function(a){return e.like()}}},[r(Ao,{staticClass:"w-7.75"}),e.likeCount!==void 0?[e._v(e._s(e.formattedlikeCount)+" | ")]:e._e(),e.liked?[e._v(e._s(e.$t("player.alreadyVoted")))]:[e._v(e._s(e.$t("general.like.submit")))]],2):e._e()])]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:!!e.station,expression:"!!station"}]},[r("div",{staticClass:"w-full overflow-x-hidden text-ellipsis pt-2.5"},[e.station?r("a",{attrs:{target:"blank",title:(i=e.homepageInfo)!=null?i:"",href:e.station.homepage}},[r(Ac,{staticClass:"w-7.75"}),e._v(e._s(e.$t("general.visitHomepage"))+"\xA0"),r(Xr,{staticClass:"w-fixed"})],1):e._e()])]),r("div",[r("div",{staticClass:"w-full overflow-x-hidden text-ellipsis pt-2.5"},[r(we,{attrs:{to:"title-manager",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:a,navigate:d}){return[r("a",{class:{"font-bold text-accent icons:opacity-100":a},on:{click:d}},[r(Na,{staticClass:"w-7.75"}),e._v(e._s(e.$t("general.manageTitles"))+" ")],1)]}}])})],1)]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:!!e.info,expression:"!!info"}]},[r("div",{staticClass:"w-full overflow-x-hidden text-ellipsis pt-2.5"},[e.info?r("a",{class:{"font-bold text-accent icons:opacity-100":e.bookmarked},on:{click:function(a){e.station&&e.toggleBookmark({station:e.station.name,info:e.info})}}},[r(Oo),r(Ia,{staticClass:"relative -top-1.5 w-fixed text-icon-xs"}),e._v(e._s(e.$t(`player.${e.bookmarked?"bookmarked":"addBookmark"}`))+" ")],1):e._e()])]),r("div",{directives:[{name:"show-slide",rawName:"v-show-slide",value:!!e.info,expression:"!!info"}]},[r("div",{staticClass:"w-full overflow-x-hidden text-ellipsis pt-2.5"},[e.info?r("a",{class:{"font-bold text-accent icons:opacity-100":e.bookmarked},attrs:{href:`spotify:search:${encodeURIComponent(e.info)}`,target:"_blank"}},[r(Gt,{staticClass:"w-fixed"}),e._v(" Spotify ")],1):e._e()])])])])])])])],1)},RC=[],MC=de(Ue,IC,RC,!1,null,null,null,null);const kC=MC.exports,FC={};var NC=function(){var e=this,r=e._self._c;return r("svg",{staticClass:"inline w-7.5 fill-current opacity-70 transition-opacity duration-200 group-hover:opacity-100",attrs:{preserveAspectRatio:"xMidYMid",viewBox:"0 0 512 512"}},[r("g",{attrs:{transform:"matrix(1.3889 0 0 1.3889 -99.562 -99.556)"}},[r("path",{attrs:{d:"m130.22 128c139.4 0 253.78 114.4 253.78 252.84 0 0.985-0.062 1.969-0.078 2.969h-47.579c0.016-1 0.078-1.984 0.078-2.969 0-112.4-93.045-205.58-206.2-205.58-0.649 0-1.316 0.056-1.968 0.056v-47.259c0.652 0 1.319-0.054 1.968-0.054z"}}),r("path",{attrs:{d:"m164.19 384c-19.979 0-36.187-16.066-36.187-35.934 0-19.845 16.208-35.943 36.187-35.943 20 0 36.185 16.098 36.185 35.943 0 19.868-16.185 35.934-36.185 35.934z"}}),r("path",{attrs:{d:"m248.28 383.8c0.023-1.015 0.148-1.968 0.148-2.969 0-65.156-52.613-117.65-118.21-117.65-0.649 0-1.316 0.086-1.968 0.094v-47.258c0.652-0.016 1.319-0.117 1.968-0.117 91.832 0 165.8 73.711 165.8 164.93 0 1.001-0.141 1.954-0.168 2.969z"}})])])},BC=[],UC=de(FC,NC,BC,!1,null,null,null,null);const $C=UC.exports;var KC=Object.defineProperty,WC=Object.getOwnPropertyDescriptor,Bt=(t,e,r,n)=>{for(var i=n>1?void 0:n?WC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&KC(e,r,i),i};let yt=class extends ae{constructor(){super(...arguments);V(this,"appTitle","Radiolise");V(this,"provideMediaSession",!1);V(this,"currentDialog");V(this,"navbarShown");V(this,"relaxed");V(this,"currentStation");V(this,"currentList");V(this,"fullscreen");V(this,"hasVideo");V(this,"stickyPlayer");V(this,"playClosestStation")}handleListChanged(){this.setSwitchButtons()}handleStationChanged(e,r){const n=e!==void 0?`${e.name} - `:"";document.title=n+this.appTitle,(e===void 0||r===void 0)&&this.setSwitchButtons()}get dialog(){return this.currentDialog!==null}get listEmpty(){return this.currentList.length===0}setSwitchButtons(){const{mediaSession:e}=navigator;if(e===void 0)return;const{currentStation:r}=this,n=r!==void 0&&this.currentList.length>=2&&this.currentList.some(i=>i.id===r.id);this.provideMediaSession!==n&&(this.provideMediaSession=n,e.setActionHandler("previoustrack",n?()=>this.playClosestStation(!1):null),e.setActionHandler("nexttrack",n?()=>this.playClosestStation(!0):null))}};Bt([rt],yt.prototype,"currentDialog",2);Bt([rt],yt.prototype,"navbarShown",2);Bt([rt],yt.prototype,"relaxed",2);Bt([ie],yt.prototype,"currentStation",2);Bt([ie],yt.prototype,"currentList",2);Bt([ie],yt.prototype,"fullscreen",2);Bt([ie],yt.prototype,"hasVideo",2);Bt([ie],yt.prototype,"stickyPlayer",2);Bt([se],yt.prototype,"playClosestStation",2);Bt([ve("currentList")],yt.prototype,"handleListChanged",1);Bt([ve("currentStation",{immediate:!0})],yt.prototype,"handleStationChanged",1);yt=Bt([fe],yt);var HC=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{class:["offset-horizontal relative z-10 flex transition-opacity",e.relaxed?"opacity-0":{"opacity-50 lg:opacity-100":e.dialog}]},[r("nav",{class:["action-bar offset-horizontal fixed top-0 left-0 z-20 flex w-full bg-surface text-on-surface shadow-theme mobile:shadow-none",{"z-40 shadow-none transition-transform duration-500":e.fullscreen,"mobile:border-b-0":!e.hasVideo,"-translate-y-full":!e.navbarShown,"border-b":!e.stickyPlayer}]},[r("div",{staticClass:"max-w-230 flex-1 px-15 mobile:px-2.5"},[r(we,{attrs:{to:"menu",toggle:""},scopedSlots:e._u([{key:"default",fn:function({navigate:n}){return[r("div",{staticClass:"group absolute cursor-pointer whitespace-nowrap px-1 py-2.5 text-[22px]",on:{click:n}},[r($C),r("span",{staticClass:"align-middle"},[e._v(e._s(e.appTitle))])],1)]}}])}),r("div",{staticClass:"float-right whitespace-nowrap"},[r(we,{attrs:{to:"search",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(xt,{attrs:{"aria-label":e.$t("general.findStations"),active:n},on:{click:i}},[r(Gt),r("span",{class:["hidden md:inline",{"lg:hidden xl:inline":e.dialog}]},[e._v(" "+e._s(e.$t("general.findStations")))])],1)]}}])}),r(we,{attrs:{to:"settings",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(xt,{attrs:{"aria-label":e.$t("general.settings"),active:n},on:{click:i}},[r(Rl),r("span",{class:["hidden md:inline",{"lg:hidden xl:inline":e.dialog}]},[e._v(" "+e._s(e.$t("general.settings")))])],1)]}}])}),r(we,{attrs:{to:"menu",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(xt,{attrs:{"aria-label":e.$t("general.more"),active:n},on:{click:i}},[r(Dl),r("span",{class:["hidden md:inline",{"lg:hidden xl:inline":e.dialog}]},[e._v(" "+e._s(e.$t("general.more")))])],1)]}}])})],1)],1)]),r("div",{class:["max-w-230 flex-1 px-12.5 transition-all mobile:px-0",{"mobile:mt-12.5":!e.fullscreen}]},[r("main",{class:["main rounded-tl rounded-br bg-surface text-on-surface mobile:rounded-none mobile:shadow-none",{"mt-25 mb-12.5 border-b shadow-theme mobile:m-0 mobile:border-0":!e.fullscreen,"border-t":!e.hasVideo,"overflow-hidden":!e.stickyPlayer}]},[r(kC),r("div",{class:["px-5 pb-5 transition-[padding] sm:px-15",{"mt-[100vh]":e.fullscreen}]},[r("div",{class:["text-left",{"pt-10":e.fullscreen}]},[r(uC),e.listEmpty?r(tC):r(Gb)],1),e.listEmpty?e._e():r("p",{staticClass:"my-4 py-5 text-right"},[r(we,{attrs:{to:"search",toggle:""},scopedSlots:e._u([{key:"default",fn:function({active:n,navigate:i}){return[r(Ve,{attrs:{active:n},on:{click:i}},[r(Gt,{staticClass:"w-fixed"}),e._v(e._s(e.$t("general.findStations"))+" ")],1)]}}],null,!1,464710780)})],1)])],1)])])},jC=[],GC=de(yt,HC,jC,!1,null,null,null,null);const VC=GC.exports;var zC=Object.defineProperty,YC=Object.getOwnPropertyDescriptor,er=(t,e,r,n)=>{for(var i=n>1?void 0:n?YC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&zC(e,r,i),i};let wt=class extends ae{constructor(){super(...arguments);V(this,"accentColor","");V(this,"backgroundColor","");V(this,"changeColor");V(this,"currentStation");V(this,"fullscreen");V(this,"playing");V(this,"settings")}get colorful(){return this.backgroundColor!==""}get colorizationAllowed(){return this.changeColor&&this.currentStation!==void 0&&!this.fullscreen}handleColorChanged(){this.accentColor=this.colorful?this.generateHsl(60):""}handleStationChanged(){this.setBackgroundColor()}handlePlayingChanged(){this.setBackgroundColor()}handleColorChangeToggled(){this.setBackgroundColor()}generateHsl(e){return`hsl(${this.currentStation.hue} 50% ${e}%)`}setBackgroundColor(){if(!this.colorizationAllowed){this.backgroundColor="";return}this.playing&&(this.backgroundColor=this.generateHsl(30))}};er([ie],wt.prototype,"changeColor",2);er([ie],wt.prototype,"currentStation",2);er([ie],wt.prototype,"fullscreen",2);er([ie],wt.prototype,"playing",2);er([ie],wt.prototype,"settings",2);er([Hm()],wt.prototype,"colorful",1);er([ve("backgroundColor")],wt.prototype,"handleColorChanged",1);er([ve("currentStation")],wt.prototype,"handleStationChanged",1);er([ve("playing")],wt.prototype,"handlePlayingChanged",1);er([ve("changeColor")],wt.prototype,"handleColorChangeToggled",1);wt=er([fe],wt);var XC=Object.defineProperty,QC=Object.getOwnPropertyDescriptor,ct=(t,e,r,n)=>{for(var i=n>1?void 0:n?QC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&XC(e,r,i),i};let tt=class extends ae{constructor(){super(...arguments);V(this,"numberInput",{input:"",timeout:void 0});V(this,"enterKeyAllowed");V(this,"currentList");V(this,"currentStation");V(this,"hasVideo");V(this,"modalOptions");V(this,"settings");V(this,"volume");V(this,"adjustVolume");V(this,"applySettings");V(this,"allowEnterKey");V(this,"playClosestStation");V(this,"showToast");V(this,"toggleFullscreen");V(this,"toggleStation")}created(){document.addEventListener("keydown",e=>{this.triggerHotkeyAction(e),this.enterKeyAllowed||this.allowEnterKey(!0)})}finishNumberInput(e){var n;this.numberInput.input="",this.numberInput.timeout=void 0;const r=this.currentList[e-1];if(r===void 0){this.showToast({icon:Br,message:this.$t("hotkeys.onScreenToasts.notExisting",[e])});return}((n=this.currentStation)==null?void 0:n.id)!==r.id&&this.toggleStation(r),this.showToast({message:this.$t("hotkeys.onScreenToasts.playingIndex",[e,r.name])})}handleNumberInput(e){this.numberInput.timeout!==void 0&&clearTimeout(this.numberInput.timeout),this.numberInput.input+=String(e);const r=Number(this.numberInput.input),n=String(this.currentList.length).length-this.numberInput.input.length;if(n>0){this.showToast({message:`${this.numberInput.input}${"\u2013".repeat(n)}`}),this.numberInput.timeout=window.setTimeout(()=>{this.finishNumberInput(r)},2e3);return}this.finishNumberInput(r)}isHotkeyAllowed(e){var r;return e.key==="Escape"?!0:document.hasFocus()&&((r=document.activeElement)==null?void 0:r.tagName)!=="INPUT"&&this.modalOptions===void 0&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey}closeModal(){return this.modalOptions===void 0?!1:(this.modalOptions.closeable&&this.modalOptions.handleButtonClicked(0),!0)}triggerHotkeyAction(e){var r;switch(e.key){case" ":{if(((r=document.activeElement)==null?void 0:r.tagName)==="INPUT")return;e.preventDefault(),this.modalOptions===void 0&&oi[" "].trigger(this);return}case"Enter":{this.enterKeyAllowed&&this.closeModal();return}default:{if(!this.isHotkeyAllowed(e))return;if(e.key in oi){e.preventDefault(),oi[e.key].trigger(this);return}const n=Number(e.key);Number.isNaN(n)||oi.number.trigger(this,n)}}}};ct([rt],tt.prototype,"enterKeyAllowed",2);ct([ie],tt.prototype,"currentList",2);ct([ie],tt.prototype,"currentStation",2);ct([ie],tt.prototype,"hasVideo",2);ct([ie],tt.prototype,"modalOptions",2);ct([ie],tt.prototype,"settings",2);ct([ie],tt.prototype,"volume",2);ct([se],tt.prototype,"adjustVolume",2);ct([se],tt.prototype,"applySettings",2);ct([se],tt.prototype,"allowEnterKey",2);ct([se],tt.prototype,"playClosestStation",2);ct([se],tt.prototype,"showToast",2);ct([se],tt.prototype,"toggleFullscreen",2);ct([se],tt.prototype,"toggleStation",2);tt=ct([fe],tt);var ZC=Object.defineProperty,JC=Object.getOwnPropertyDescriptor,ki=(t,e,r,n)=>{for(var i=n>1?void 0:n?JC(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&ZC(e,r,i),i};let fn=class extends ae{constructor(){super(...arguments);V(this,"likeState");V(this,"fetchLikeCount");V(this,"showMessage")}async handleLike(e){try{const r=await e.promise;r.ok?this.showLikeCounter(e.id,!1):r.message.includes("too often")?this.showLikeCounter(e.id,!0):this.showMessage({type:We.ERROR,buttons:[this.$t("general.ok")],title:this.$t("general.like.unableToVote.title"),message:this.$t("general.like.unableToVote.description",[r.message])})}catch(r){r?this.showLikeCounter(e.id,!0):this.showMessage({type:We.ERROR,buttons:[this.$t("general.ok")],title:this.$t("general.like.unableToVote.title"),message:this.$t(`general.error.${navigator.onLine?"genericTryLater":"goOnline"}`)})}}async showLikeCounter(e,r){const n=this.$t(`general.like.${r?"alreadyVoted":"submitMessage"}`);try{const i=await this.fetchLikeCount(e);this.showMessage({type:We.INFO,buttons:[this.$t("general.ok")],title:this.$t("general.like.submitted"),message:`${this.$t("general.like.count",[i.toLocaleString(this.$i18n.locale)])}
${n}`})}catch{this.showMessage({type:We.WARNING,buttons:[this.$t("general.ok")],title:this.$t("general.error.networkIssue.title"),message:this.$t("general.error.networkIssue.description",[n])})}}};ki([ie],fn.prototype,"likeState",2);ki([se],fn.prototype,"fetchLikeCount",2);ki([se],fn.prototype,"showMessage",2);ki([ve("likeState")],fn.prototype,"handleLike",1);fn=ki([fe],fn);var qC=Object.defineProperty,eL=Object.getOwnPropertyDescriptor,Ae=(t,e,r,n)=>{for(var i=n>1?void 0:n?eL(e,r):e,a=t.length-1,d;a>=0;a--)(d=t[a])&&(i=(n?d(e,r,i):d(i))||i);return n&&i&&qC(e,r,i),i};const tL=Vn(wt,tt,fn);let be=class extends tL{constructor(){super(...arguments);V(this,"inputEventTypes",["mousemove","mousedown","keydown","touchstart","wheel"]);V(this,"app");V(this,"currentDialog");V(this,"darkMode");V(this,"fellAsleep");V(this,"relaxed");V(this,"colorScheme");V(this,"dragging");V(this,"language");V(this,"lists");V(this,"ready");V(this,"visualizationActive");V(this,"confirmSleepTimer");V(this,"createList");V(this,"determineDateFnsLocale");V(this,"setDarkMode");V(this,"setRelaxTimer");V(this,"toggleNavbar");V(this,"unsetDateFnsLocale")}get darkSchemeQuery(){return window.matchMedia("(prefers-color-scheme: dark)")}get dialog(){return this.currentDialog!==null}get noOverflow(){return this.dialog||this.relaxed}get relaxModeAllowed(){return this.settings.relax&&this.playing&&!this.hasVideo}async created(){await this.$nextTick(),this.lists.length===0&&this.createList({name:this.$t("general.defaultListName"),content:[]})}onDarkModeToggled(e){document.documentElement.classList.toggle("dark",e)}setOverflowAllowed(e){document.body.classList.toggle("overflow-y-hidden",e)}onRelaxedChanged(){document.body.classList.toggle("lg:overflow-y-visible",!this.relaxed)}async handleFallenAsleep(e){if(e){const r=this.settings.sleepTimeout,n=await this.determineDateFnsLocale(this.$i18n.locale);let i=gS({minutes:r},{locale:n});i=i.charAt(0).toUpperCase()+i.slice(1),await this.showMessage({buttons:[this.$t("general.ok")],type:We.INFO,title:this.$t("sleepTimer.name"),message:this.$t("sleepTimer.streamStopped",{timePassed:this.$tc("sleepTimer.timePassed",r,{n:i})})}),this.confirmSleepTimer()}}handleFullscreenChanged(e){if(e){this.toggleNavbar(!1),this.dialog&&mt(null),document.documentElement.classList.add("overflow-y-scroll");const r=window.innerWidth-document.body.offsetWidth;document.documentElement.style.setProperty("--rad-scrollbar-width",`${r}px`),document.documentElement.classList.remove("overflow-y-scroll")}else this.toggleNavbar(!0),document.documentElement.style.removeProperty("--rad-scrollbar-width"),this.app.scrollTop=0;document.body.classList.toggle("overflow-hidden",e),this.setBackgroundColor()}handleColorSchemeChanged(e){if(e==="auto"){this.darkSchemeQuery.addListener(this.applyColorScheme),this.applyColorScheme();return}this.darkSchemeQuery.removeListener(this.applyColorScheme),this.setDarkMode(e==="dark")}handleLanguageChanged(e){e==="auto"&&(e=this.detectLocale()),this.$i18n.locale=e,document.documentElement.lang=e,this.unsetDateFnsLocale()}onRelaxModeAllowedChanged(e){if(e){this.addInputListeners(this.setRelaxTimer);return}this.removeInputListeners(this.setRelaxTimer)}detectLocale(){const r=[...new Set([navigator.language,...navigator.languages].map(n=>n.slice(0,2)))].find(n=>Object.keys(this.$i18n.messages).includes(n));return r!=null?r:"en"}addInputListeners(e){for(const r of this.inputEventTypes)window.addEventListener(r,e)}removeInputListeners(e){for(const r of this.inputEventTypes)window.removeEventListener(r,e)}applyColorScheme(){this.setDarkMode(this.darkSchemeQuery.matches)}handleFullscreenScroll(){this.fullscreen&&this.toggleNavbar(this.app.scrollTop>0)}updateTheme(){document.documentElement.dataset.theme=this.settings.theme}};Ae([ut()],be.prototype,"app",2);Ae([rt],be.prototype,"currentDialog",2);Ae([rt],be.prototype,"darkMode",2);Ae([rt],be.prototype,"fellAsleep",2);Ae([rt],be.prototype,"relaxed",2);Ae([ie],be.prototype,"colorScheme",2);Ae([ie],be.prototype,"dragging",2);Ae([ie],be.prototype,"language",2);Ae([ie],be.prototype,"lists",2);Ae([ie],be.prototype,"ready",2);Ae([ie],be.prototype,"visualizationActive",2);Ae([se],be.prototype,"confirmSleepTimer",2);Ae([se],be.prototype,"createList",2);Ae([se],be.prototype,"determineDateFnsLocale",2);Ae([se],be.prototype,"setDarkMode",2);Ae([se],be.prototype,"setRelaxTimer",2);Ae([se],be.prototype,"toggleNavbar",2);Ae([se],be.prototype,"unsetDateFnsLocale",2);Ae([ve("darkMode")],be.prototype,"onDarkModeToggled",1);Ae([ve("noOverflow",{immediate:!0})],be.prototype,"setOverflowAllowed",1);Ae([ve("relaxed",{immediate:!0})],be.prototype,"onRelaxedChanged",1);Ae([ve("fellAsleep")],be.prototype,"handleFallenAsleep",1);Ae([ve("fullscreen")],be.prototype,"handleFullscreenChanged",1);Ae([ve("colorScheme")],be.prototype,"handleColorSchemeChanged",1);Ae([ve("language",{immediate:!0})],be.prototype,"handleLanguageChanged",1);Ae([ve("relaxModeAllowed")],be.prototype,"onRelaxModeAllowedChanged",1);Ae([ve("settings.theme",{immediate:!0})],be.prototype,"updateTheme",1);be=Ae([fe],be);var rL=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{ref:"app",class:["min-h-screen",e.fullscreen?"absolute inset-y-0 -right-scrollbar left-0 overflow-y-auto bg-surface":"bg-default transition-[background-color] duration-2000 mobile:bg-surface mobile:transition-none",{dialog:e.dialog,"cursor-grabbing":e.dragging,"cursor-none":e.relaxed}],style:{"--rad-color-accent":e.accentColor,"--rad-color-background":e.backgroundColor},attrs:{id:"app"},on:{scroll:function(n){return e.handleFullscreenScroll()}}},[e.ready?[r(VC),r(Sb),e.relaxed?r(q0):e._e(),e.visualizationActive?r(z0):e._e()]:r(K0)],2)},nL=[],iL=de(be,rL,nL,!1,null,null,null,null);const aL=iL.exports;ae.config.productionTip=!1;ae.config.silent=!0;ae.config.devtools=!0;ae.use(Tm);new ae({store:ts,i18n:Cd,render:t=>t(aL)}).$mount("#app");export{On as c,kf as g};
